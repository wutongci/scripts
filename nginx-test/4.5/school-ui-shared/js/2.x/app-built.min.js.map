{"version":3,"sources":["enum/abtest-query-string.js","enum/activity-event-type.js","enum/ccl.js","enum/course-type.js","enum/enroll-node-type.js","enum/enrollment-state.js","enum/feature-access-id.js","enum/hyphenator-languages.js","enum/moment-language.js","enum/progress-state.js","enum/rating-source-type.js","enum/step-type.js","module.js","troopjs-requirejs/template!school-ui-shared/plugins/alert-box/alert-box.html","plugins/alert-box/main.js","troopjs-requirejs/template!school-ui-shared/plugins/confirm-box/confirm-box.html","plugins/confirm-box/main.js","plugins/http-request-handling/main.js","troopjs-requirejs/template!school-ui-shared/plugins/techcheck/techcheck.html","plugins/techcheck/main.js","plugins/techcheck/techcheck-render.js","service/context.js","utils/console.js","service/popcache.js","tracker/base/mock-data.js","tracker/base/main.js","tracker/sandbox/main.js","tracker/etvt/etvt.js","tracker/etvt/main.js","tracker/omniture/omniture.js","tracker/omniture/main.js","tracker/shared/gollum.js","troopjs-requirejs/template!school-ui-shared/tts/tts.html","troopjs-requirejs/template!school-ui-shared/tts/translator.html","troopjs-requirejs/template!school-ui-shared/tts/listen-panel.html","troopjs-requirejs/template!school-ui-shared/tts/settings.html","utils/typeid-parser.js","utils/query-builder.js","tts/text-helper.js","tts/main.js","tts/translator/lang-helper.js","troopjs-requirejs/template!school-ui-shared/tts/translator/translator.html","troopjs-requirejs/template!school-ui-shared/tts/translator/translation.html","troopjs-requirejs/template!school-ui-shared/tts/translator/notebook.html","troopjs-requirejs/template!school-ui-shared/tts/translator/bing.html","tts/translator/main.js","utils/audio-output.js","utils/browser-check.js","utils/ccl.js","utils/feature-access.js","utils/fix-viewport.js","utils/https-compatibility.js","utils/hub-memory.js","utils/hyphenate.js","utils/language-fixing.js","utils/location-helper.js","utils/media-player.js","utils/media.js","utils/path-formatter.js","utils/performance.js","utils/progress-state.js","utils/update-command.js","utils/update-helper.js","widget/abtest-helper.js","widget/audio-player/main.js","widget/blurb.js","widget/hyphenate.js","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/container/container.html","widget/unit-overview/container/main.js","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/export-pdf.html","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/pdf-style.html","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/submit-form.html","widget/unit-overview/export-pdf/main.js","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/modal-container/modal-container.html","widget/unit-overview/modal-container/main.js","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/unit-info/unit-info.html","widget/unit-overview/unit-info/main.js","troopjs-requirejs/template!school-ui-shared/widget/unit-overview/word-list/word-list.html","widget/unit-overview/word-list/main.js","widget/vector.js","troopjs-requirejs/template!school-ui-shared/widget/video-player/video-player.html","widget/video-player/main.js"],"names":["define","activity","lngComp","lngCompRetryTimesV1","lngCompRetryTimesV2","ASRMicSettingOnboarding","ASRMicSettingE13","enableChangeUnit","enableChangeLevel","enableTTS","enableFloatingToolkit","enablePCHtmlEpaper","enableSPINHtmlEpaper","asrSrvAddr","playerRules","GeneralEnglish","BusinessEnglish","IndustryEnglish","IndustryEnglishB2B","IndustryEnglishILS","TravelEnglish","FoodEnglish","HospitalityEnglish","SecurityEnglish","isGECourse","courseTypeCode","this","toUpperCase","isBECourse","isSpinCourse","course","level","levelCode","unit","lesson","step","isPrimary","isCurrent","isCurrentForCourseType","isEnrollable","free self-study","Bronze group chats","Bronze private chats","face to face study","Silver group chats","Silver private chats","self-study no business course (not extendable)","Free group chats","Gold private chats","Private lesson","Group discussion","Trainer for TOEIC","Test for TOEIC (Red)","Test for TOEIC (Green)","Test for TOEIC (Blue)","Trainer for TOEFL","Test for TOEFL (Red)","Test for TOEFL (Green)","Test for TOEFL (Blue)","EFT","self-study (extendable)","Group discussion (unlimited)","Personalize Language Aptitude Test Online","Business Course (extendable)","self-study no business course","Trainer for TOEIC (Interstitial)","Test for TOEIC (Blue Interstitial)","Trainer for TOEFL (Interstitial)","Test for TOEFL (Blue Interstitial)","Group discussion upsell","Writing class limited","Writing class unlimited","Etown Translator","Business Course (not extendable)","Personal Coaching","SPIN Course","English Corner","self-study (B2B Homework)","Industry English SPINs","Travel SPINs","Private Lesson 20","Private Lesson 20 - Unit Move On","GL Daily Delivery","Check Point 20","Check Point 20 (unlimited)","Private Lesson 40 - Unit Move On","Camp","Resume Correction","ar","de","de-de","en","en-gb","es","es-cl","fr","id-id","it","ko-kr","ja-jp","pt-br","ru","th","tr-tr","tt","zh-hk","zh-tw","zh-cn","notStarted","started","completed","ASR_TYPING","ASR_SPEAKING","ASR_SELECTION","movie","finalTask","vocabulary","vocabularyAndIntonnation","languageAndFocus","functions","grammar","pronunciation","reading","listening","speaking","writing","module","data","o","title","body","when","$GUD","Widget","tModalBox","extend","sig/start","me","html","then","$el","$element","$root","find","$title","$body","$backdrop","on","$event","removeClass","addClass","isBusy","reject","hub/enable/show/alert-box","hub/show/alert-modal-box","config","text","modal","defer","promise","dom:[data-action='ok']/click","event","resolver","resolve","query","spread","blurb","translation","$cancel","$confirm","hub/enable/show/confirm-box","hub/show/confirm-modal-box","cancel","confirm","dom:[data-action='confirm']/click","$","document","ajaxError","jqXHR","ajaxSettings","thrownError","status","window","location","reload","tTechcheck","publish","polyArray","renderPrependTo","$container","widgetName","children","SEL_WIDGET","size","CLS_WIDGET","attr","prependTo","weave","removeOverlay","SEL_BODY","SEL_OVERLAY","remove","renderOverlay","CLS_OVERLAY","appendTo","renderFlashInstallBanner","results","some","result","id","passed","widgets","renderFlashInstallOverlay","Service","loadContext","isUpdate","context","courseEnroll","platformVersion","displayName","common_context","call","hub/context/update/context","EMPTY","wraper","name","debug","console","apply","arguments","log","warn","error","info","dir","time","timeEnd","EFService","Console","JSON","cache","Error","each","i","el","parse","e","put","hub/school/clearCache","key","tracking","regex","props","pageName","events","click","selector","behavior","MOCK_DATA","sendURI","uri","l","_data","URI","length","RegExp","test","ON_SEND","sendBehavior","lb","behaviorItem","filter","track","_dfdTrackingInfo","getTracking","_dfdFirstRoute","tag","tagName","hub:memory/route","hub:memory/tracking/track","toString","dom:[data-action=\"track\"]/click","$target","currentTarget","scope","trackingData","Gollum","url","gollum","send","exec","visitTrack","etvt","_onSend","loc","protocol","host","pathname","substr","hash","replace","search","backup","dfdSCode","s","settings","FUNC_OMNI_SEND","hasOwnProperty","omniture","opts","defaultSettings","ready","Deferred","$gollum","ret","createElement","hide","_$gollum","bind","contentWindow","__gollumArgs__","EX_NO_ARG","NAME","p","prototype","load","path","deferred","done","doc","script","src","onload","appendChild","func","sSource","args","Array","slice","push","eval","enableTranslatorDetail","model","isForSpeech","Date","getTime","speed","speaker","autoLaunch","Factory","RE_TYPEID","RE_LAST_TYPEID","create","typeid","matches","UNDEF","parseLastType","rs","type","parseLastTypeAndId","parseType","parseId","parseTypeid","str","isId","indexOf","typeidParser","buildProgressQuery","enrollmentid","childrenCount","enrollment_id","oTypeid","parseInt","isNaN","concat","join","buildCCLQuery","variableName","CCL","RE_TEXT_CAN_TTS","TEXT_ONLY_ONE_CAN_TTS","canTTS","ui$","tTTS","tTRANS","tListenPanel","tSettings","QueryBuilder","TypeIdParser","TextHelper","Cookies","init","$ELEMENT","CLS_TTS","_isHidden","_isRendered","_isPinned","_isTranslatorTab","_text","_english","initSettings","ensure","initLaunchEvent","cclFloatingResult","translatorConfig","ENABLE_FLOATING_TOOLKIT","value","ENABLE_TRANSLATOR","enabled","SETTINGS","cookieValue","checkTransAutolaunchByCookie","TRANS_SETTINGS","verifyIgnoredTarget","target","ignored","IGNORED_TAG","className","CLS_TTS_DISABLED","readOnly","disabled","verifyTTSTarget","closest","SEL_TTS","prelaunch","isIgnoredTarget","_isTtsSmallBox","isFromTTS","launch","getSelectedText","doRender","setTtsBoxPosition","show","initTranslator","translate","openTranslator","clearSelection","setTransBoxStyle","setTransBoxPosition","unbind","EVENT_TTS_PRELAUNCH","EVENT_TTS_LAUNCH","preference","get","preferenceSegs","split","win","txt","getSelection","selection","createRange","trim","RE_CRLN","removeAllRanges","empty","render","SEL_TTS_BOX","mouseenter","action.translateOverlay","onRendered","renderListenPanel","_speechListenRendered","_headListenRendered","$widget","SEL_TTS_SPEECH_LISTEN","SEL_TTS_HEAD_LISTEN","initAudioElement","CLS_HIDDEN","renderSettings","_settingsRendered","SEL_TTS_SETTINGS","setzIndex","setTtsBoxStyle","initDraggable","initTabTip","pageX","pageY","getBoxSize","$win","winWidth","width","winHeight","height","maxX","maxY","boxX","boxY","smallBox","css","left","top","SEL_TTS_SMALL_BOX","getSmallBoxOffset","_isTransSmallBox","SEL_TRANS_SMALL_BOX","smallMaxX","smallMaxY","smallBoxX","smallBoxY","_ttsBoxSize","$box","SEL_TTS_HEAD","outerHeight","SEL_TTS_BODY","SEL_TTS_FOOT","outerWidth","zIndex","onStart","maxLeft","boxWidth","onDrag","ui","position","draggable","handle","addClasses","containment","scroll","start","drag","small","CLS_ALL_SMALL","toggleClass","CLS_TTS_SMALL","CLS_TRANS_SMALL","$player","SEL_TTS_LISTEN_BUTTON","$audio","SEL_TTS_AUDIO","CLS_LOADING","CLS_PLAYING","blurbList","BLURB_LIST","loadBlurb","SEL_TTS_TABS","SEL_TTS_TAB_PIN","ATTR_TITLE","BLURB_PIN_UP","BLURB_PIN_DOWN","end","SEL_TTS_TAB_TRANSLATOR","BLURB_TRANSLATOR","SEL_TTS_TAB_SPEECH","BLURB_SPEECH","SEL_TTS_TAB_SETTINGS","BLURB_SETTINGS","BLURB_PROMISE","blurbIds","Object","keys","blurbs","forEach","resetListenButton","SPACE","resetTranslator","togglePin","pinned","CLS_PINNED","SEL_TTS_SPEECH_INPUT","val","$tab","initTab","TAB_INDEX_TRANSLATOR","switchTab","tabIndex","handler","TAB_HANDLERS","TYPE_FUNCTION","toggle","SEL_TTS_TAB_ACTIVE","CLS_ACTIVE","CLS_TAB_N","TAB_PREFIX","toggleSpeed","$speed","expanded","CLS_EXPANDED","selectSpeed","SEL_TTS_SPEED_SELECTED","listenSpeech","hasClass","CLS_DISABLED","$speech","SEL_TTS_SPEECH","maxTextLength","toggleSpeechTip","DOUBLE_QUOTE","TTS_TEXT_DOUBLE_QUOTATION","enablePlayerAudio","TTS_TEXT_SORRY","siblings","ttsUrl","_member_id","encodeURIComponent","href","play","$speechTip","SEL_TTS_SPEECH_TIP","stop","delay","fadeOut","saveSettings","$settings","showMessage","success","SEL_TTS_SETTINGS_MSG","DOT","CLS_DONE","CLS_FAIL","SEL_TTS_SETTINGS_VOICE","SEL_TTS_SETTINGS_AUTO_LAUNCH","checked","TOPIC_SAVE_SETTINGS","saved","catch","IS_FAILED","TOPIC_TTS_TRANSLATOR_TRANSLATE","_cultureCode","TOPIC_TTS_TRANSLATOR_RESET","autoPop","searchText","MAX_SEARCH_TEXT_LENGTH","open","focus","INPUT","TEXTAREA","CLS_TAB_1","CLS_TAB_2","CLS_TAB_3","SEL_TTS_TAB","BLURB","hub:memory/context","user","cultureCode","hub/tts/set/url","hub/tts/set/english","english","hub/tts/get/translation/error","hub/tts/open/translator","hub/tts/close/toolkit","dom:.ets-ui-tts-small-box/click","dom:.ets-ui-trans-small-box/click","dom:.ets-ui-tts-close-btn/click","dom:.ets-ui-tts-tab.ets-pin/click","dom:.ets-ui-tts-tab-switch/click","dom:.ets-ui-tts-speech-input/click","dom:.ets-ui-tts-speed/click","dom:.ets-ui-tts-select-speed/click","$option","dom:.ets-ui-tts-listen-btn/click","action.translatePlay","dom:.ets-ui-tts-save-btn/click","AS_BING_LANG","AS_EF_LANG","getBingLangByCultureCode","getEFLangByCultureCode","getBingLangByEFLang","eflangCode","renderPartOfSpeech","pos","partOfSpeech","renderDefinition","definitions","index","count","outerLoopCount","isEnglish","innerLoopCount","j","SEP_CHAR","wordText","uk","us","posList","posCount","wordGroup","wordGroupList","wordGroups","wordGroupCount","wordGroup_id","wordGroupName","lang","langCode","langList","languageList","langCount","Logger","tTranslator","tTranslation","tNotebook","tBing","LangHelper","toggleFoot","_inited","QUERY_TOOLKIT_CONTEXT","TOPIC_SET_TTS_URL","speechServerUrl","_languageList","lngs","reset","SEL_NOTEBOOK_MSG","toggleWordGroup","toggleLanguage","bing","SEL_TRANSLATOR_FOOT","CLS_NONE","CLS_BING","renderNotebook","_wordText","_notebookRendered","loadWordGroup","SEL_NOTEBOOK","QUERY_NOTEBOOK_WORDGROUP","groupName","DEFAULT_WORDGROUP_NAME","TOPIC_ADD_USER_WORDGROUP","added","isSuccess","SEL_WORDGROUP","renderBing","_bingRendered","SEL_BING","SEL_BING_LANG","addWordToWordGroup","wordGroupId","$notebook","wordTexts","TOPIC_ADD_WORDS_TO_USER_WORDGROUP","toggleTranslating","translating","to","translateByBing","translateByEF","CULTURE_CODE","LANG_EN","BING_LANG_TO","logBingTTS","contextResult","translateTextAPIUrl","AzureApiToken","options","ajax","translatedText","setEnglish","renderTranslation","encodeHtml","sourceLang","targetLang","partialText","MAX_LOG_TEXT_LEN","QUERY_PREFIX_TOOLKIT_TRANSLATION","NULL","isFound","TOPIC_GET_TRANSLATION_ERROR","errorMessage","SEL_TRANSLATION","TOPIC_SET_ENGLISH","sig/initialize","hub/tts/translator/reset","hub/tts/translator/translate","dom:.ets-ui-tts-toggle-wordgroup/click","dom:.ets-ui-tts-add-word/click","$elem","action.translateAddtoNotebook","dom:.ets-ui-tts-detail-btn/click","dom:.ets-ui-tts-bing-tip/click","dom:.ets-ui-tts-bing-translate/click","$lang","parent","canPlayAudio","audio","canPlayType","addEventListener","srcElement","code","MediaError","MEDIA_ERR_SRC_NOT_SUPPORTED","removeChild","autoplay","MP3_DATA_URI","hasAudioOutput","HAS_ENUMERATE_DEVICES","navigator","mediaDevices","enumerateDevices","devices","reduce","hasOutputDevices","device","kind","Boolean","parseUserAgent","userAgent","ua","toLowerCase","match","compatibilityMode","actualVersionOfCompatibility","actualMsieVersion","TRIDENT_TO_MSIE","parseFloat","platform","os","screen","screenW","screenH","Math","min","browser","version","4","5","6","7","8","Gadget","queryBuilder","ARRAY_SLICE","enableLockUnit","queryResult","getCCLByKey","indicateCCLStringValue","FeatureAccessId","validate","featureAccessId","quotient","floor","remainder","FEATURE_UNICODE","charCodeAt","validateFeatureByte","hasWritingClassFeature","hasGLClassFeature","hasPLClassFeature","hasCP20ClassFeature","hasEFTClassFeature","setFeaturesUnicode","getFeaturesUnicode","browserCheck","_getMetaViweport","_metaViewport","querySelector","VIEWPORT","head","getElementsByTagName","_doFixViewPort","newSettings","MIN_WIDTH","_initialSettings","content","fixViewPort","metaViewport","HTML_MIN_WIDTH","getComputedStyle","documentElement","minWidth","BODY_MIN_WIDTH","max","Hub","onContext","whitelistResponse","whitelist","isWhitelisted","charAt","handleEvent","node","parentNode","getAttribute","setAttribute","prefix","hostname","subscribe","reemit","thisWindow","fixedArgs","unshift","windowName","readMemory","topic","callback","unsubscribe","Hyphenator","require","poly","HyphenatorLanguages","loadLanguage","hyphenatorLanguage","loadedLanguages","currentLanguageDefer","gadget","hyphenate","language","arabicFix","every","CLS_ARABIC_FIX","LocationHelper","initHref","link","getUrl","valueOf","getHref","setHref","getProtocol","setProtocol","getHost","setHost","getHostname","setHostname","getPort","port","setPort","getPathname","setPathname","getSearch","setSearch","getHash","setHash","BROWSERCHECK","ENUM","player","rules","parseJSON","VALUE","BROWSER","VERSION","map","rule","TYPE","PLAYER","pop","SHIM","MediaPlayer","videoPlayer","audioPlayer","findErrorName","String","ME","typeIdParser","routeUri","entity","PREFIX_POSITION","route","unrouteUri","EXPAND","PREFIX","inited","pathFormatter","expand","POSITION","collapse","performance","HAS_PERFORMANCE_API","getEntries","PerformanceResourceTiming","clearResourceTimings","setResourceTimingBufferSize","onresourcetimingbufferfull","getLogMessage","perfs","timing","entries","stringify","Number","toFixed","ProgressStateEnum","progressState","state","hasStarted","hasPassed","errorOf","ex","DEBUG","statusText","verify","verified","ID","FAULT","FAULT_MSG","update","apiName","otherwise","UpdateCommand","submitScore","moveOnUnit","API_MOVE_ON_UNIT","updateEnrollment","submitRating","saveMemberSite","integrationSubmitWriting","logFeature","logActEvent","submitWritingCorrectionRating","platformMigrate","newContentMigrate","loom","$data","controller","widget","performanceUtils","Media","HubMemory","AudioOutput","mejs","mediaPlayerLog","message","mode","audioInstance","media","pluginType","finalMessage","_logPrefix","mediaPlayerLogAudioOutput","logPrefix","promiseHasAudioOutput","promiseCanPlayAudio","all","bindMediaElement","mediaElement","domElement","_onStartPlay","controls","CLS_CONTROLS_PLAYING","_onStopPlay","$domElement","EVENTS_TO_FORWARD","eventName","listener","trigger","FORWARDED_EVENT_PREFIX","onError","_preloadFix","_audioUrl","perfLog","initPlayer","customOptions","_audioOptions","blankAudio","attributes","_finalized","initMediaelementPlayer","_logDefer","wrapPlayToHandleRejection","DOMException","ABORT_ERR","nodes","querySelectorAll","MediaElementPlayer","MODE_NATIVE","plugins","pauseOtherPlayers","alwaysShowControls","playpauseText","SEL_CONTAINER","SEL_BTN_PLAY","one","_onFirstTimePlay","stopImmediatePropagation","updateLogPrefix","pause","setSrc","activityOption","activityContent","levelId","templateLevelId","levelNo","activityId","templateActivityId","activityTemplateCode","templateCode","mediaUrl","_logid","logIdGenerator","sig/stop","hub/audio/event/play","sourceMediaElement","currentTime","setCurrentTime","dom/player/play","dom/player/pause","dom/player/seek","seekedTime","paused","dom/player/end","dom/player/volume","volumeInfo","setVolume","volume","muted","setMuted","RE","PATTERNS","default","blurbCcl","cclValue","blurbId","pattern","values","original","HyphenateGadget","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","$newWidget","clone","removeAttr","unweave","woven","hyphenatePromises","andSelf","contents","nodeType","$textNode","hyphenatedText","replaceWith","createTextNode","hideWorldList","showDownloadButton","tContainer","weaveDelayedWidget","DATA_WEAVE_DELAY","loadUnitInfo","templateUnitId","lessons","loadWordList","wordList","words","MODULE_CONFIG","element","_templateUnitId","_hideWorldList","containerRender","unitInfoLoad","wordListLoad","unitInfoRender","unitInfo","wordListRender","exportPdfUrl","pdfContent","fileName","tExportPdf","tPdfStyle","tSubmitForm","getExportHtml","$html","append","$clonedContainer","outerHTML","getExportFileName","SEL_LEVEL_NO","SEL_UNIT_NO","dom:.ets-uo-export-link/click","$form","submitData","submit","tModalContainer","data-weave","backdrop","isGE","unitImage","levelName","unitNo","unitName","unitDesc","lessonName","courseType","tUnitInfo","wordItem","audioPath","word","partofSpeech","tWordList","mediaelementInits","features","defaultAudioWidth","defaultAudioHeight","domObject","dom:tr/click","evt","$tr","localRequire","REG_SVG_WIDTH","REG_SVG_HEIGHT","REG_VML_WIDTH","REG_VML_HEIGHT","VECTOR_TYPE","vector","template","$1","$2","$3","display","line-height","vertical-align","overflow","videoUrl","video","videoLowQualityUrl","lowQualityUrl","posterUrl","poster","customClass","tTemplate","videoInstance","_options","translationPromise","getTranslations","renderPromise","_videoInfo","translations","_onSuccess","cbOnSuccess","videoOptions","startVolume","SEL_CONTAINTER","SEL_OVERLAY_PLAY","SEL_CONTROLS_BUTTON_PLAYPAUSE","handleFirstPlay","CLS_VP_PLAYED","removeEventListener","ME_DEFAULT_FEATURES_BEFORE","ME_DEFAULT_FEATURES_AFTER","SEL_VP","muteText","tracksText","fullscreenText","qualityText","tracksOnText","tracksOffText","outOfTimeRangeText","translationNames","videoInfo","onSuccess"],"mappings":"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","file":"app-built.min.js","sourcesContent":["define('school-ui-shared/enum/abtest-query-string',{\n\t\"activity\": {\n\t\t\"lngComp\": \"school_mvt!lancomp_new_asr_fed\"\n\t}\n});\n","// For Activity Event Log 'school/school_event_log/LogActivityEvent'\n\ndefine('school-ui-shared/enum/activity-event-type',{\n\tlngCompRetryTimesV1: 1,\n\tlngCompRetryTimesV2: 2,\n\tASRMicSettingOnboarding: 3,\n\tASRMicSettingE13: 4\n});\n\n","define('school-ui-shared/enum/ccl',{\n    enableChangeUnit: \"school.courseware.enableChangeUnit\",\n    enableChangeLevel: \"school.courseware.enableChangeLevel\",\n    enableTTS: \"school.courseware.e12.enableTTS\",\n    enableFloatingToolkit: \"school.enable.floatingtoolkit\",\n    enablePCHtmlEpaper: \"school.courseware.htmlepaper.pc.enable\",\n    enableSPINHtmlEpaper: \"school.courseware.htmlepaper.spin.enable\",\n    asrSrvAddr: \"school.AsrServerAddress\",\n    playerRules: \"school.courseware.e12.playerRules\"\n});\n","define('school-ui-shared/enum/course-type',{\n    /**\n     * General English\n     */\n    GeneralEnglish: \"GE\",\n\n    /**\n     * Business English SPIN\n     */\n    BusinessEnglish: \"BE\",\n\n    /**\n     * Industry English SPIN\n     */\n    IndustryEnglish: \"IND\",\n\n    /**\n     * B2B Industry English SPIN\n     */\n    IndustryEnglishB2B: \"INDB2B\",\n\n    /**\n     * ILS Industry English SPIN\n     */\n    IndustryEnglishILS: \"INDILS\",\n\n    /**\n     * Travel English\n     */\n    TravelEnglish: \"TRV\",\n\n    /**\n     * English for Food Service\n     */\n    FoodEnglish: \"FSE\",\n\n    /**\n     * English for Hospitality\n     */\n    HospitalityEnglish: \"HE\",\n\n    /**\n     * English for Security\n     */\n    SecurityEnglish: \"SE\",\n\n    /**\n     * check if the course is GE by courseTypeCode\n     * @param {String} courseTypeCode\n     * @return {Boolean} true is GE course else is not\n     * @api public\n     */\n    isGECourse: function onCheckGECourse(courseTypeCode) {\n        return this.GeneralEnglish === (\"\" + courseTypeCode).toUpperCase();\n    },\n\n    /**\n     * check if the course is BE by courseTypeCode\n     * @param {String} courseTypeCode\n     * @return {Boolean} true is BE course else is not\n     * @api public\n     */\n    isBECourse: function onCheckBECourse(courseTypeCode) {\n        return this.BusinessEnglish === (\"\" + courseTypeCode).toUpperCase();\n    },\n\n    /**\n     * check if the course is SPIN by courseTypeCode\n     * @param {String} courseTypeCode\n     * @return {Boolean} true is SPIN course else is not\n     * @api public\n     */\n    isSpinCourse: function onCheckSpinCourse(courseTypeCode) {\n        return !this.isGECourse(courseTypeCode);\n    }\n});\n","/**\n * enroll node type enum\n */\n define('school-ui-shared/enum/enroll-node-type',{\n    course: 1,\n    courseTypeCode: 4,\n    level: 2,\n    levelCode: 5,\n    unit: 3,\n\n    /*\n        Notes: the following node type are obsoleted.\n        Please don't use again. \n    */\n    lesson: 4,\n    step: 5,\n    activity: 6\n});\n","define('school-ui-shared/enum/enrollment-state',{\n\tisPrimary: 1,\n\tisCurrent: 2,\n\tisCurrentForCourseType: 4,\n\tisEnrollable: 8\n});\n","define('school-ui-shared/enum/feature-access-id',{\n    \"free self-study\"                               :  1,\n\t\"Bronze group chats\"                            :  2,\n\t\"Bronze private chats\"                          :  3,\n\t\"face to face study\"                            :  4,\n\t\"Silver group chats\"                            :  5,\n\t\"Silver private chats\"                          :  6,\n\t\"self-study no business course (not extendable)\":  7,\n\t\"Free group chats\"                              :  8,\n\t\"Gold private chats\"                            :  9,\n\t\"Private lesson\"                                :  10,\n\t\"Group discussion\"                              :  11,\n\t\"Trainer for TOEIC\"                             :  12,\n\t\"Test for TOEIC (Red)\"                          :  13,\n\t\"Test for TOEIC (Green)\"                        :  14,\n\t\"Test for TOEIC (Blue)\"                         :  15,\n\t\"Trainer for TOEFL\"                             :  16,\n\t\"Test for TOEFL (Red)\"                          :  17,\n\t\"Test for TOEFL (Green)\"                        :  18,\n\t\"Test for TOEFL (Blue)\"                         :  19,\n\t\"EFT\"                                           :  20,\n\t\"self-study (extendable)\"                       :  21,\n\t\"Group discussion (unlimited)\"                  :  22,\n\t\"Personalize Language Aptitude Test Online\"     :  23,\n\t\"Business Course (extendable)\"                  :  24,\n\t\"self-study no business course\"                 :  25,\n\t\"Trainer for TOEIC (Interstitial)\"              :  27,\n\t\"Test for TOEIC (Blue Interstitial)\"            :  28,\n\t\"Trainer for TOEFL (Interstitial)\"              :  29,\n\t\"Test for TOEFL (Blue Interstitial)\"            :  30,\n\t\"Group discussion upsell\"                       :  31,\n\t\"Writing class limited\"                         :  32,\n\t\"Writing class unlimited\"                       :  33,\n\t\"Etown Translator\"                              :  34,\n\t\"Business Course (not extendable)\"              :  35,\n\t\"Personal Coaching\"                             :  36,\n\t\"SPIN Course\"                                   :  37,\n\t\"English Corner\"                                :  38,\n\t\"self-study (B2B Homework)\"                     :  39,\n\t\"Industry English SPINs\"                        :  40,\n\t\"Travel SPINs\"                                  :  41,\n\t\"Private Lesson 20\"                             :  42,\n\t\"Private Lesson 20 - Unit Move On\"              :  43,\n\t\"GL Daily Delivery\"                             :  44,\n\t\"Check Point 20\"                                :  45,\n\t\"Check Point 20 (unlimited)\"                    :  46,\n\t\"Private Lesson 40 - Unit Move On\"              :  47,\n\t\"Camp\"                                          :  48,\n\t\"Resume Correction\"                             :  49\n});\n","//if null: no hyphenator pattern, language doesn't need hyphens\ndefine('school-ui-shared/enum/hyphenator-languages',{\n\t\"ar\": null,\n\t\"de\": \"de\",\n\t\"de-de\": \"de\",\n\t\"en\": \"en-us\",\n\t\"en-gb\": \"en-gb\",\n\t\"es\": \"es\",\n\t\"es-cl\": \"es\",\n\t\"fr\": \"fr\",\n\t\"id-id\": null,\n\t\"it\": \"it\",\n\t\"ko-kr\": null,\n\t\"ja-jp\": null,\n\t\"pt-br\": \"pt\",\n\t\"ru\": \"ru\",\n\t\"th\": null,\n\t\"tr-tr\": \"tr\",\n\t\"tt\": \"ru\",\n\t\"zh-hk\": null,\n\t\"zh-tw\": null,\n\t\"zh-cn\": null\n});\n","define('school-ui-shared/enum/moment-language',{\n\t\"en\": \"en\",\n\t\"en-gb\": \"en\",\n\t\"pt-br\": \"pt-br\",\n\t\"es-cl\": \"es\",\n\t\"es\": \"es\",\n\t\"fr\": \"fr\",\n\t\"de\": \"de\",\n\t\"de-de\": \"de\",\n\t\"it\": \"it\",\n\t\"ko-kr\": \"ko\",\n\t\"ja-jp\": \"ja\",\n\t\"zh-hk\": \"zh-tw\",\n\t\"zh-tw\": \"zh-tw\",\n\t\"zh-cn\": \"zh-cn\",\n\t\"th\": \"th\",\n\t\"ru\": \"ru\",\n\t\"tt\": \"ru\",\n\t\"tr-tr\": \"tr\",\n\t\"id-id\": \"id\",\n\t\"ar\": \"ar\"\n});\n","define('school-ui-shared/enum/progress-state',{\n\tnotStarted: 0,\n\tstarted: 1,\n\tcompleted: 2\n});\n","define('school-ui-shared/enum/rating-source-type',{\n    ASR_TYPING: \"TP\",\n    ASR_SPEAKING: \"SPK\",\n    ASR_SELECTION: \"SLCT\"\n});\n\n","define('school-ui-shared/enum/step-type',{\n\tmovie: 0,\n\tfinalTask: 1,\n\tvocabulary: 2,\n\tvocabularyAndIntonnation: 3,\n\tlanguageAndFocus: 4,\n\tfunctions: 5,\n\tgrammar: 6,\n\tpronunciation: 7,\n\treading: 8,\n\tlistening: 9,\n\tspeaking: 10,\n\twriting: 11\n});\n","define('school-ui-shared/module',[\"module\"], function(module){\n\treturn module;\n});\n","\ndefine('troopjs-requirejs/template!school-ui-shared/plugins/alert-box/alert-box.html',[],function() { return function template(data) { var o = \"\";\n  data = data || {};\no += \"\\n<div class=\\\"modal fade in alert-modal-box\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"alertModalLabel\\\" aria-hidden=\\\"true\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<div class=\\\"modal-header\\\">\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\">&times;</button>\\n\\t\\t\\t\\t<h4 class=\\\"modal-title\\\">\" + data.title + \"</h4>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"modal-body\\\">\\n\\t\\t\\t\\t<p>\" + data.body + \"</p>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"modal-footer\\\">\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-action=\\\"ok\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"150652\\\" data-text-en=\\\"OK\\\"></button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal-backdrop fade in hidden\\\"></div>\"; return o; }; });\n","define('school-ui-shared/plugins/alert-box/main',[\n    \"when\",\n    \"jquery.gudstrap\",\n    \"troopjs-ef/component/widget\",\n    \"template!./alert-box.html\"\n    ],function(when, $GUD, Widget, tModalBox){\n    \"use strict\";\n\n    var SEL_MODAL_ROOT = \".alert-modal-box\";\n    var SEL_MODAL_TITLE = \".modal-title\";\n    var SEL_MODAL_BODY = \".modal-body p\";\n    var SEL_BACK_DROP = \".modal-backdrop\";\n\n    var DEFERRED_OK = \"_defer_ok\";\n\n    var CLS_GUD_HIDDEN = \"hidden\";\n\n    return Widget.extend({   \n        \"sig/start\": function() {\n            var me = this;\n            \n            return me.html(tModalBox).then(function(){\n                var $el = me.$element;\n\n                me.$root = $el.find(SEL_MODAL_ROOT);\n                me.$title = $el.find(SEL_MODAL_TITLE);\n                me.$body = $el.find(SEL_MODAL_BODY);\n                me.$backdrop = $el.find(SEL_BACK_DROP);\n\n                me.$root.on('show.bs.modal', function($event) {\n                    me.$backdrop.removeClass(CLS_GUD_HIDDEN);\n                }).on('hidden.bs.modal', function($event) {\n                    me.$backdrop.addClass(CLS_GUD_HIDDEN);\n                    me.isBusy = false;\n                    //reject the promise\n                    me[DEFERRED_OK] && me[DEFERRED_OK].reject(\"confirm-box reject\");\n                });\n            });\n        },\n        \"hub/enable/show/alert-box\": function() {\n            return [!this.isBusy];\n        },\n        \"hub/show/alert-modal-box\": function(config) {\n            var me = this;\n            if(!config) return when.reject(\"alert-box no config\");\n\n            me.isBusy = true;\n            me.$title.text(config.title);\n            me.$body.html(config.body);\n\n            me.$root.modal();\n\n            return (me[DEFERRED_OK] = when.defer()).promise;\n        },\n        \"dom:[data-action='ok']/click\": function (event){\n            var me = this;\n            var defer = me[DEFERRED_OK];\n            if(defer){\n                defer.resolver.resolve({\n                    $title : me.$title,\n                    $body  : me.$body\n                });\n                defer.promise.then(function(){\n                    me.$root.modal(\"hide\");\n                });\n            }\n        }\n    });\n});\n","\ndefine('troopjs-requirejs/template!school-ui-shared/plugins/confirm-box/confirm-box.html',[],function() { return function template(data) { var o = \"\";\n  data = data || {};\no += \"\\n<div class=\\\"modal fade in confirm-modal-box\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"confirmModalLabel\\\" aria-hidden=\\\"true\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<div class=\\\"modal-header\\\">\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\">&times;</button>\\n\\t\\t\\t\\t<h4 class=\\\"modal-title\\\">\" + data.title + \"</h4>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"modal-body\\\">\\n\\t\\t\\t\\t<p>\" + data.body + \"</p>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"modal-footer\\\">\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\"></button>\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-action=\\\"confirm\\\"></button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal-backdrop fade in hidden\\\"></div>\"; return o; }; });\n","define('school-ui-shared/plugins/confirm-box/main',[\n    \"when\",\n    \"jquery.gudstrap\",\n    \"troopjs-ef/component/widget\",\n    \"template!./confirm-box.html\"\n    ],function(when, $GUD, Widget, tModalBox){\n    \"use strict\";\n\n    var SEL_MODAL_ROOT = \".confirm-modal-box\";\n    var SEL_MODAL_TITLE = \".modal-title\";\n    var SEL_MODAL_BODY = \".modal-body p\";\n    var SEL_BACK_DROP = \".modal-backdrop\";\n    var SEL_CANCEL = \".btn-default\";\n    var SEL_CONFIRM = \".btn-primary\";\n\n    var CLS_GUD_HIDDEN = \"hidden\";\n\n    var DEFERRED_CONFIRM = \"confirmDfd\";\n\n    var BLURB_CANCEL = \"_cancel\";\n    var BLURB_CONFIRM = \"_confirm\";\n\n\n    return Widget.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            return when([   me.query(\"blurb!450018\", \"blurb!450019\"),\n                            me.html(tModalBox)])\n                .spread(function(blurb){\n                    var $el = me.$element;\n                    me[BLURB_CANCEL] = blurb[0] && blurb[0].translation;\n                    me[BLURB_CONFIRM] = blurb[1] && blurb[1].translation;\n\n                    me.$root = $el.find(SEL_MODAL_ROOT);\n                    me.$title = $el.find(SEL_MODAL_TITLE);\n                    me.$body = $el.find(SEL_MODAL_BODY);\n                    me.$cancel = $el.find(SEL_CANCEL);\n                    me.$confirm = $el.find(SEL_CONFIRM);\n                    me.$backdrop = $el.find(SEL_BACK_DROP);\n\n                    me.$root.on('show.bs.modal', function($event) {\n                        me.$backdrop.removeClass(CLS_GUD_HIDDEN);\n                    }).on('hidden.bs.modal', function($event) {\n                        me.$backdrop.addClass(CLS_GUD_HIDDEN);\n                        me.isBusy = false;\n                        //reject the promise\n                        me[DEFERRED_CONFIRM] && me[DEFERRED_CONFIRM].reject(\"confirm-box reject\");\n                    });\n            });\n        },\n        \"hub/enable/show/confirm-box\": function() {\n            return [!this.isBusy];\n        },\n        \"hub/show/confirm-modal-box\": function(config) {\n            var me = this;\n            if(!config) return when.reject(\"confirm-box no config\");\n\n            me.isBusy = true;\n            me.$title.text(config.title);\n            me.$body.html(config.body);\n            me.$cancel.text(config.cancel ? config.cancel : me[BLURB_CANCEL]);\n            me.$confirm.text(config.confirm ? config.confirm : me[BLURB_CONFIRM]);\n\n            me.$root.modal();\n\n            return (me[DEFERRED_CONFIRM] = when.defer()).promise;\n        },\n        \"dom:[data-action='confirm']/click\": function (event){\n            var me = this;\n            var defer = me[DEFERRED_CONFIRM];\n            if(defer){\n                defer.resolver.resolve({\n                    $title : me.$title,\n                    $body  : me.$body\n                });\n                defer.promise.then(function(){\n                    me.$root.modal(\"hide\");\n                });\n            }\n        }\n\n    });\n});\n","define('school-ui-shared/plugins/http-request-handling/main',['jquery',\n        'troopjs-ef/component/widget'],\n    function HttpRequestHandling($, Widget) {\n    'use strict';\n\n    return Widget.extend({\n        \"sig/start\":function onStart() {\n            $(document).ajaxError(function(event,jqXHR,ajaxSettings,thrownError){\n                if(jqXHR.status == 403){\n                    window.location.reload();\n                }\n            });\n        }\n    });\n});\n","\ndefine('troopjs-requirejs/template!school-ui-shared/plugins/techcheck/techcheck.html',[],function() { return function template(data) { var o = \"<div class=\\\"gud tck-ui\\\" data-weave=\\\"techcheck-ui/widget/container/main\\\"></div>\"; return o; }; });\n","define('school-ui-shared/plugins/techcheck/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./techcheck.html\"\n], function ($, Widget, tTechcheck) {\n\t\"use strict\";\n\n\tvar HUB_PLUGINS_TECHCHECK_ENABLE = \"plugins/tech-check/enable\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\n\t\t\treturn me.html(tTechcheck).then(function () {\n\t\t\t\t// Signal that the Tech-Check widget is ready\n\t\t\t\treturn me.publish(HUB_PLUGINS_TECHCHECK_ENABLE, true);\n\t\t\t});\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/plugins/techcheck/techcheck-render',[\n\t\"jquery\",\n\t\"when\",\n\t\"poly/array\"\n], function ($, when, polyArray) {\n\n\tvar CLS_WIDGET = \"ets-ui-techcheck-container\",\n\t\tCLS_OVERLAY = \"ets-ui-techcheck-overlay\";\n\tvar SEL_BODY = \"body\",\n\t\tSEL_WIDGET = \".\" + CLS_WIDGET,\n\t\tSEL_OVERLAY = \".\" + CLS_OVERLAY;\n\n\tfunction renderPrependTo($container, widgetName) {\n\t\tif ($container.children(SEL_WIDGET).size() === 0) {\n\t\t\treturn $(\"<div></div>\")\n\t\t\t\t.addClass(CLS_WIDGET)\n\t\t\t\t.attr(\"data-weave\", widgetName)\n\t\t\t\t.prependTo($container)\n\t\t\t\t.weave();\n\t\t}\n\t\telse {\n\t\t\treturn when.resolve();\n\t\t}\n\t}\n\n\tfunction removeOverlay() {\n\t\t$(SEL_BODY).children(SEL_OVERLAY).remove();\n\t}\n\n\tfunction renderOverlay(widgetName) {\n\t\tremoveOverlay();\n\n\t\treturn $(\"<div></div>\")\n\t\t\t.addClass(CLS_OVERLAY)\n\t\t\t.attr(\"data-weave\", widgetName)\n\t\t\t.appendTo($(SEL_BODY))\n\t\t\t.weave();\n\t}\n\n\treturn {\n\t\t\"renderFlashInstallBanner\": function ($container, results) {\n\t\t\tresults.some(function (result) {\n\t\t\t\tif (result.id === \"flash-install\" && result.passed === false) {\n\t\t\t\t\trenderPrependTo($container, result.widgets[\"banner\"]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"renderFlashInstallOverlay\": function (results) {\n\t\t\tresults.some(function (result) {\n\t\t\t\tif (result.id === \"flash-install\" && result.passed === false) {\n\t\t\t\t\trenderOverlay(result.widgets[\"overlay\"]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"removeOverlay\": removeOverlay\n\t};\n});\n\n","/**\n * load student current school context\n */\ndefine('school-ui-shared/service/context',[\n\t\"when\",\n\t\"troopjs-ef/component/service\"\n], function ContextModule(when, Service) {\n\t\"use strict\";\n\n\tfunction loadContext(isUpdate) {\n\t\tvar me = this;\n\n\t\treturn me.query([\"school_context!current.user\", \"student_course_enrollment!current\", \"student_platform_version!current\"]).spread(function doneQuery(context, courseEnroll, platformVersion) {\n\t\t\treturn me.publish(\"context\", context || {}, courseEnroll , platformVersion, isUpdate);\n\t\t});\n\t}\n\n\t/**\n\t * context module definition\n\t */\n\treturn Service.extend({\n\t\t\"displayName\" : \"school-ui-shared/service/context\",\n\n\t\t\"sig/start\": function onStart() {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tme.query(\"context!current\").spread(function(common_context){\n\t\t\t\tme.publish(\"common_context\", common_context);\n\t\t\t});\n\n\t\t\treturn loadContext.call(this, false);\n\t\t},\n\n\t\t\"hub/context/update/context\": function onUpdateContext() {\n\t\t\treturn loadContext.call(this, true);\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/utils/console',[\n\t\"school-ui-shared/module\"\n],\tfunction(module){\n\tvar config = module.config();\n\n\tfunction EMPTY(){}\n\n\tfunction wraper(name){\n\t\treturn config.debug ?\n\t\t\t\t\twindow.console &&\n\t\t\t\t\t\ttypeof window.console[name] === \"function\" &&\n\t\t\t\t\t\tfunction(){\n\t\t\t\t\t\t\twindow.console[name].apply(window.console, arguments)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t||\n\t\t\t\t\t\tEMPTY\n\t\t\t\t\t:\n\t\t\t\t\tEMPTY;\n\t}\n\n\treturn {\n\t\tlog : wraper(\"log\"),\n\t\twarn : wraper(\"warn\"),\n\t\terror : wraper(\"error\"),\n\t\tinfo : wraper(\"info\"),\n\t\tdir : wraper(\"dir\"),\n\t\ttime : wraper(\"time\"),\n\t\ttimeEnd : wraper(\"timeEnd\")\n\t}\n});\n","define('school-ui-shared/service/popcache',[\n\t\"troopjs-ef/component/service\",\n\t\"school-ui-shared/utils/console\",\n\t\"jquery\",\n\t\"json2\"\n], function CacheFillerService(EFService, Console, $, JSON) {\n\t\"use strict\";\n\n\t/**\n\t * Try out all possible ways to populate troop cache. Used for pre-fill data cache before any query that\n\t * eliminates network requests.\n\t */\n\tvar CACHE = \"cache\";\n\n\treturn EFService.extend(function CacheFillerService(cache) {\n\t\tif (!cache) {\n\t\t\tthrow new Error(\"no cache provided\");\n\t\t}\n\t\tthis[CACHE] = cache;\n\t}, {\n\t\t\"sig/start\": function onStart() {\n\t\t\tvar cache = this[CACHE];\n\t\t\t$(\"script[type='application/json'][data-query]\").each(function(i, el) {\n\t\t\t\tvar data;\n\n\t\t\t\ttry{ \n\t\t\t\t\tdata = JSON.parse($(el).html());\n\t\t\t\t}\n\t\t\t\tcatch(e){\n\t\t\t\t\tConsole.info(e);\n\t\t\t\t}\n\n\t\t\t\tdata && cache.put(data);\n\t\t\t});\n\t\t},\n\n\t\t\"hub/school/clearCache\": function(key) {\n\t\t\tvar cache = this[CACHE];\n\n\t\t\tcache[key] && delete cache[key];\n\t\t}\n\t});\n});\n","define('school-ui-shared/tracker/base/mock-data',[],function () {\n\treturn [\n\t\t{\n\t\t\t'id': 'tracking!e12_omniture',\n\t\t\t'tracking': [\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!001',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'props': {\n\t\t\t\t\t\t'pageName': \"School:Courseware:UnitMainMenu\"\n\t\t\t\t\t},\n\t\t\t\t\t'events': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'id': 'tracking_events!001',\n\t\t\t\t\t\t\t'click': [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'id': 'tracking_event_click!001',\n\t\t\t\t\t\t\t\t\t'selector': ' .ets-overview',\n\t\t\t\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t\t\t\t'pageName': \"School:Courseware:Test\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t// {\n\t\t\t\t//     'id': 'tracking_item!002',\n\t\t\t\t//     'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t//     'props': {\n\t\t\t\t//         'pageName': \"School:Courseware:UnitBox\"\n\t\t\t\t//     }\n\t\t\t\t// },\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!003',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'props': {\n\t\t\t\t\t\t'pageName': \"School:Courseware:Lessons\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!004',\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/unit-overview/open',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:UnitOverview\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!005',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/lesson/expand/0',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:UnitBox1\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!006',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/lesson/expand/1',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:UnitBox2\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!007',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/lesson/expand/2',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:UnitBox3\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!008',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/?$\",\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/lesson/expand/3',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:UnitBox4\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!009',\n\t\t\t\t\t'behavior': [{\n\t\t\t\t\t\t'id': 'tracking_behaviors!001',\n\t\t\t\t\t\t'name': 'study/change-course/expand',\n\t\t\t\t\t\t'props': {\n\t\t\t\t\t\t\t'pageName': \"School:Courseware:EnglishCategories\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!010',\n\t\t\t\t\t'regex': \"^school/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/\\\\d+/summary$\",\n\t\t\t\t\t'props': {\n\t\t\t\t\t\t'pageName': \"School:Courseware:ActivityResults\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t'id': 'tracking!e12_etvt',\n\t\t\t'tracking': [\n\t\t\t\t{\n\t\t\t\t\t'id': 'tracking_item!001',\n\t\t\t\t\t'regex': \"\",\n\t\t\t\t\t'props': {}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t];\n});\n\n","/**\n * class TrackerBase\n * The base tracker class, allows you to inherit to implement customized tracking logic\n * It does:\n *    Getting the tracking data from server according to this.scope (which specified in sub class)\n *    Monitor the hash uri change,\n *    Check if uri match the regex in tracking data.\n */\ndefine('school-ui-shared/tracker/base/main',[\n\t'jquery',\n\t'when',\n\t'troopjs-ef/component/widget',\n\t'./mock-data'\n], function BaseTrackerModule(\n\t$,\n\twhen,\n\tWidget,\n\tMOCK_DATA\n) {\n\t\"use strict\";\n\n\tvar URI = 'uri';\n\tvar ON_SEND = '_onSend';\n\tvar EX_BOUND_ERR = 'Tracker widget must be bound to top-most element';\n\n\t/**\n\t * Try to see if current uri is matched, if matched, send out the event.\n\t * @param uri the uri to be matched and tracked.\n\t */\n\tfunction sendURI(uri) {\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this, data = me._data.tracking, l;\n\n\t\tme[URI] = uri;\n\n\t\tfor (l = data.length; l--;) {\n\t\t\tif (data[l].props && data[l].regex != null && new RegExp(data[l].regex).test(uri)) {\n\t\t\t\t// this[ON_HASH_MATCH](data[l], uri);\n\t\t\t\tme[ON_SEND](data[l], {\n\t\t\t\t\turi: uri\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction sendBehavior(behavior) {\n\t\tif (!behavior) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this, data = me._data.tracking, l, lb, behaviorItem, uri = me[URI];\n\n\t\tfor (l = data.length; l--;) {\n\n\t\t\tbehaviorItem = data[l].behavior;\n\n\t\t\tif (!behaviorItem ||\n\t\t\t\t// check the constrains of uri if available\n\t\t\t\t(data[l].regex && !(new RegExp(data[l].regex).test(uri)))\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tfor (lb = behaviorItem.length; lb--;) {\n\t\t\t\tif (behaviorItem[lb].props && behaviorItem[lb].name === behavior) {\n\n\t\t\t\t\t// this[ON_HASH_MATCH](data[l], uri);\n\t\t\t\t\tme[ON_SEND](behaviorItem[lb], {\n\t\t\t\t\t\tbehavior: behavior\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction filter(track) {\n\t\tvar me = this;\n\n\t\tme._dfdTrackingInfo.then(function(){\n\t\t\tsendURI.call(me, track.uri);\n\t\t\tsendBehavior.call(me, track.behavior);\n\t\t});\n\t}\n\n\treturn Widget.extend(function () {\n\t\tvar me = this;\n\n\t\tme._dfdTrackingInfo = me.getTracking();\n\n\t\tme._dfdFirstRoute = when.defer();\n\t}, {\n\t\t'sig/start': function () {\n\t\t\t// check if current element is top most element\n\t\t\t// if its not, this widget cannot work\n\t\t\tvar tag = this.$element[0].tagName.toUpperCase();\n\t\t\tif (tag !== 'BODY' && tag !== 'HTML') {\n\t\t\t\tthrow EX_BOUND_ERR;\n\t\t\t}\n\t\t},\n\n\t\t'hub:memory/route': function onRoute(uri) {\n\t\t\tvar me = this;\n\n\t\t\tfilter.call(me, {\n\t\t\t\turi: uri\n\t\t\t});\n\n\t\t\tme._dfdFirstRoute.resolve();\n\t\t},\n\t\t'hub:memory/tracking/track': function onTrack(track) {\n\t\t\tvar me = this;\n\t\t\tvar behavior = track.toString();\n\n\t\t\tif (track.name) {\n\t\t\t\tbehavior = track.name;\n\t\t\t}\n\n\t\t\tme._dfdFirstRoute.promise.then(function () {\n\t\t\t\tfilter.call(me, {\n\t\t\t\t\tbehavior: behavior\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t'dom:[data-action=\"track\"]/click': function (event, behavior) {\n\t\t\tvar me = this;\n\t\t\tvar $target = $(event.currentTarget);\n\n\t\t\tme.publish('tracking/track', behavior || $target.data('behavior'));\n\t\t},\n\t\t/**\n\t\t * Get tracking info from remote server\n\t\t */\n\t\tgetTracking: function onGetTracking() {\n\t\t\tvar me = this;\n\t\t\tvar id = 'tracking!' + me.scope;\n\n\t\t\t// Check if required data is in mocking data\n\t\t\tfor (var l = MOCK_DATA.length; l--;) {\n\t\t\t\tif (MOCK_DATA[l].id === id) {\n\t\t\t\t\t// if there is, resolve with the mock data\n\t\t\t\t\tme._data = MOCK_DATA[l];\n\t\t\t\t\treturn when.resolve();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn me.query('tracking!' + me.scope)\n\t\t\t\t.spread(function (trackingData) {\n\t\t\t\t\tme._data =trackingData;\n\t\t\t\t});\n\t\t},\n\t});\n});\n\n","/**\n * Shared sandbox(gollum) instance\n */\ndefine('school-ui-shared/tracker/sandbox/main',['gollum'], function (Gollum) {\n\t\"use strict\";\n\n\tvar PATH_SCODE = '/school/tracking/e12.aspx';\n\n\treturn new Gollum({\n\t\turl: PATH_SCODE\n\t});\n});\n\n","define('school-ui-shared/tracker/etvt/etvt',[\n\t'../sandbox/main'\n], function EtvtWrapperModule(gollum){\n\t\"use strict\";\n\n\treturn {\n\t\tsend: function(url){\n\t\t\tgollum.exec(function(url){\n\t\t\t\tif (!window.visitTrack){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.visitTrack(url);\n\t\t\t}, url);\n\t\t}\n\t};\n});\n\n","/**\n * @class omniture tracker\n * Send omniture tracking info\n */\ndefine('school-ui-shared/tracker/etvt/main',['./etvt', '../base/main'], function OmnitureTrackerModule(etvt, Widget) {\n\t\"use strict\";\n\n\treturn Widget.extend({\n\t\tscope: 'e12_etvt',\n\t\t_onSend: function onSend(data, track) {\n\t\t\tif (!track.uri) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Change hash to path format, and can let back-end save data to DB.\n\t\t\t// After back-end framework update, will be deleted.\n\t\t\tvar loc = window.location;\n\t\t\tetvt.send(loc.protocol + '//' + loc.host + loc.pathname + (loc.pathname.substr(loc.pathname.length - 1) === \"/\" ? loc.hash.replace('#', '') : loc.hash.replace('#', '/')) + (loc.search ? loc.search : ''));\n\t\t}\n\t});\n});\n\n","/***\n * @singleton omniture\n\n * Omniture wrapper, wraps around the original omniture s_code file,\n * make sure omniture doesn't pollute the global and also provides convininent\n * APIs for single page application.\n */\ndefine('school-ui-shared/tracker/omniture/omniture',[\n\t'when',\n\t'../sandbox/main'\n], function OmnitureWrapperModule(when, gollum) {\n\t'use strict';\n\n\tvar FUNC_OMNI_SEND = 'E12_Tracking_Omniture_Send';\n\n\t// contains the backed up properties of the original s object\n\tvar backup = {};\n\n\tvar dfdSCode = when.promise(function(resolve, reject){\n\t\t// Init\n\t\tgollum\n\t\t\t.exec(function (backup) {\n\n\t\t\t\tif (!window.s) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// backup the original 's' object\n\t\t\t\tfor (var key in window.s) {\n\t\t\t\t\tbackup[key] = window.s[key];\n\t\t\t\t}\n\n\t\t\t}, backup)\n\t\t\t.then(resolve, reject);\n\t});\n\n\n\treturn {\n\t\tsend: function (settings) {\n\t\t\tdfdSCode.then(function () {\n\t\t\t\tgollum.exec(function (FUNC_OMNI_SEND, settings, backup) {\n\n\t\t\t\t\tvar s = window.s;\n\n\t\t\t\t\tif (!s || !window[FUNC_OMNI_SEND]) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// restore the original 's' object\n\t\t\t\t\tfor (var key in s) {\n\t\t\t\t\t\tif (!s.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (key in backup) {\n\t\t\t\t\t\t\ts[key] = backup[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tdelete s[key];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// set up the sending parameter\n\t\t\t\t\tfor (var key in settings) {\n\t\t\t\t\t\tif (!settings.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ts[key] = settings[key];\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: call the customized method which produced by backend code?\n\t\t\t\t\twindow[FUNC_OMNI_SEND]();\n\n\t\t\t\t}, FUNC_OMNI_SEND, settings, backup);\n\t\t\t});\n\t\t}\n\t};\n});\n\n","/**\n * @class omniture tracker\n * Send omniture tracking info\n */\ndefine('school-ui-shared/tracker/omniture/main',['./omniture', '../base/main'], function OmnitureTrackerModule(omniture, Widget) {\n\t\"use strict\";\n\n\treturn Widget.extend({\n\t\tscope: 'e12_omniture',\n\t\t_onSend: function onSend(data) {\n\t\t\tomniture.send(data.props);\n\t\t}\n\t});\n});\n\n","/**\n * @class Gollum\n * Load script under sandboxed execution context to isolate unsafe code.\n */\ndefine('school-ui-shared/tracker/shared/gollum',['jquery'], function TrackerGollum($) {\n\t'use strict';\n\n\tvar NAME = 'Gollum';\n\tvar EX_NO_ARG = NAME + ': Required argument is missing.';\n\tvar EX_NO_DEFFERED = NAME + ': jQuery does not implement Deferred() method.';\n\n\tvar defaultSettings = {\n\t\turl: 'about:blank'\n\t};\n\n\tvar Deferred = $.Deferred;\n\n\tif (!Deferred) {\n\t\tthrow EX_NO_DEFFERED;\n\t}\n\n\t// @constructor\n\t// @param opts options: {url: 'The url for iframe.'}.\n\tfunction Gollum(opts) {\n\n\t\tvar me = this;\n\n\t\tme.opts = opts || defaultSettings;\n\n\t\tme.ready = Deferred();\n\n\t\t// It creates the iframe which contains the dirty scripts.\n\t\tvar $gollum = (function createGollum() {\n\n\t\t\tvar ret = $(document.createElement('iframe'));\n\n\t\t\tret.attr('src', me.opts.url);\n\n\t\t\tret.hide();\n\n\t\t\tret.appendTo(document.body);\n\n\t\t\treturn ret;\n\n\t\t})();\n\n\t\tme._$gollum = $gollum;\n\n\t\t// It also make sure that all operation are done after iframe\n\t\t// is properly loaded\n\t\tme._$gollum.bind('load', function () {\n\t\t\t$gollum[0].contentWindow.__gollumArgs__ = [];\n\t\t\tme.ready.resolve();\n\t\t});\n\t}\n\n\tvar p = Gollum.prototype;\n\n\t/**\n\t * Load script under the execution context created by gollum.\n\t * @param path The script path\n\t * @api public\n\t */\n\tp.load = function (path) {\n\t\tif (!path) {\n\t\t\tthrow EX_NO_ARG;\n\t\t}\n\n\t\tvar me = this;\n\t\tvar deferred = Deferred();\n\n\t\tme.ready.done(function () {\n\n\t\t\tvar window = this._$gollum[0].contentWindow;\n\t\t\tvar doc = window.document;\n\t\t\tvar script = doc.createElement('script');\n\n\t\t\tscript.src = path;\n\n\t\t\tif (script.completed) {\n\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tscript.onload = function () {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tdoc.body.appendChild(script);\n\n\t\t});\n\n\t\treturn deferred;\n\t};\n\n\t/**\n\t * Execute a function under the execution context of sub window,\n\t *     Caveat: The function passed in cannot visit its own execution context.\n\t * @param func The function to be executed under the sub window, or string that\n\t *               contains code to be executed.\n\t * @param ... All the remaining parameters will be passed into 'func'.\n\t * @api public\n\t */\n\tp.exec = function (func) {\n\t\tif (!func) {\n\t\t\tthrow EX_NO_ARG;\n\t\t}\n\n\t\tvar me = this;\n\t\tvar ret = Deferred();\n\t\tvar sSource = func.toString();\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\n\t\tme.ready.done(function () {\n\t\t\tvar window = me._$gollum[0].contentWindow;\n\n\t\t\twindow.__gollumArgs__.push(Array.prototype.slice.call(args));\n\n\t\t\tret.resolve(window.eval(\n\t\t\t\t'(' + sSource + ').apply(this, this.__gollumArgs__.shift());'\n\t\t\t));\n\t\t});\n\n\t\treturn ret;\n\t};\n\n\treturn Gollum;\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/tts.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-ui-tts-small-box\\\" data-action=\\\"show/box\\\"></div>\\n<div class=\\\"ets-ui-tts-box\\\">\\n    <div class=\\\"ets-ui-tts-close-btn\\\" data-action=\\\"close/box\\\"></div>\\n    <div class=\\\"ets-ui-tts-main\\\">\\n        <div class=\\\"ets-ui-tts-hd\\\">\\n            <div class=\\\"ets-ui-tts-hd-listen ets-hidden\\\"></div>\\n            <div class=\\\"ets-ui-tts-tabs\\\">\\n                <div data-action=\\\"toggle/pin(index)\\\" data-index=\\\"0\\\" class=\\\"ets-ui-tts-tab ets-pin\\\">\\n                    <div class=\\\"ets-ui-tts-tab-ico\\\"></div>\\n                </div>\\n                <div data-action=\\\"switch/tab(index)\\\" data-index=\\\"1\\\" class=\\\"ets-ui-tts-tab ets-ui-tts-tab-switch ets-translator ets-active\\\">\\n                    <div class=\\\"ets-ui-tts-tab-ico\\\"></div>\\n                    <div class=\\\"ets-ui-tts-tab-arrow\\\"></div>\\n                </div>\\n                <div data-action=\\\"switch/tab(index)\\\" data-index=\\\"2\\\" class=\\\"ets-ui-tts-tab ets-ui-tts-tab-switch ets-speech\\\">\\n                    <div class=\\\"ets-ui-tts-tab-ico\\\"></div>\\n                    <div class=\\\"ets-ui-tts-tab-arrow\\\"></div>\\n                </div>\\n                <div data-action=\\\"switch/tab(index)\\\" data-index=\\\"3\\\" class=\\\"ets-ui-tts-tab ets-ui-tts-tab-switch ets-settings\\\">\\n                    <div class=\\\"ets-ui-tts-tab-ico ets-last\\\"></div>\\n                    <div class=\\\"ets-ui-tts-tab-arrow\\\"></div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"ets-ui-tts-bd ets-tab-1\\\">\\n            <div class=\\\"ets-ui-tts-bd-main\\\">\\n                <div class=\\\"ets-ui-tts-translator ets-loading\\\" data-weave=\\\"school-ui-shared/tts/translator/main\\\" data-enable-translator-detail=\\\"\" +data.enableTranslatorDetail+ \"\\\"></div>\\n                <div class=\\\"ets-ui-tts-speech\\\">\\n                    <textarea class=\\\"ets-ui-tts-speech-input\\\" data-action=\\\"click/input\\\"></textarea>\\n                    <div class=\\\"ets-ui-tts-speech-listen ets-hidden\\\"></div>\\n                    <div class=\\\"ets-ui-tts-speech-tip\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"165019\\\" data-text-en=\\\"You could enter your content to listen the pronunciation, allow max 300 characters.\\\"></div>\\n                </div>\\n                <div class=\\\"ets-ui-tts-settings ets-hidden\\\"></div>\\n            </div>\\n        </div>\\n        <div class=\\\"ets-ui-tts-ft\\\"></div>\\n    </div>\\n</div>\\n<div id=\\\"ets-ui-tts-sound-sprite\\\"></div>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/translator.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-ui-trans-small-box\\\" data-action=\\\"open/translator\\\">Translate</div>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/listen-panel.html',[],function() { return function template(data) { var o = \"\";\n    var model = data || {},\n        settings = model.settings || {},\n        isForSpeech = model.isForSpeech,\n        id = new Date().getTime();\no += \"\\n<div class=\\\"ets-ui-tts-listen-panel\\\">\\n    <div class=\\\"ets-ui-tts-listen-panel-bd\\\">\\n        <div class=\\\"ets-ui-tts-listen\\\">\\n            <a id=\\\"ets-ui-tts-listen-btn-\" +id+ \"\\\" data-action=\\\"listen/speech(\" +isForSpeech+ \")\\\" data-value=\\\"\" +isForSpeech+ \"\\\" class=\\\"ets-ui-tts-listen-btn\\\" href=\\\"javascript:void(0)\\\"><span></span></a>\\n            <audio id=\\\"ets-ui-tts-listen-audio-\" +id+ \"\\\" class=\\\"ets-ui-tts-listen-audio\\\"></audio>\\n        </div>\\n        <div class=\\\"ets-ui-tts-speed\\\" data-action=\\\"toggle/speed\\\">\\n            <div class=\\\"ets-ui-tts-speed-bd\\\">\\n                <span class=\\\"ets-ui-tts-speed-selected\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +(settings.speed === 100 ? 167328 : 167329)+ \"\\\"></span>\\n                <ul class=\\\"ets-ui-tts-speed-options\\\">\\n                    <li class=\\\"ets-ui-tts-select-speed\\\" data-action=\\\"select/speed(value)\\\" data-value=\\\"100\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167328\\\" data-text-en=\\\"Normal speed\\\"></li>\\n                    <li class=\\\"ets-ui-tts-select-speed\\\" data-action=\\\"select/speed(value)\\\" data-value=\\\"80\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167329\\\" data-text-en=\\\"Slow speed\\\"></li>\\n                </ul>\\n            </div>\\n        </div>\\n    </div>\\n</div>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/settings.html',[],function() { return function template(data) { var o = \"\";\n    var model = data || {},\n        settings = model.settings || {};\no += \"\\n<h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167332\\\" data-text-en=\\\"Voice\\\"></h4>\\n<div class=\\\"ets-ui-tts-settings-voice\\\">\\n    <input type=\\\"radio\\\" name=\\\"ets-ui-tts-voice\\\" value=\\\"101\\\" id=\\\"ets-ui-tts-voice-male\\\"\" +(settings.speaker !== 100 ? \" checked='checked'\" : \"\")+ \" />\\n    <label for=\\\"ets-ui-tts-voice-male\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167334\\\" data-text-en=\\\"Male\\\"></label>\\n    <input type=\\\"radio\\\" name=\\\"ets-ui-tts-voice\\\" value=\\\"100\\\" id=\\\"ets-ui-tts-voice-female\\\"\" +(settings.speaker === 100 ? \" checked='checked'\" : \"\")+ \" />\\n    <label for=\\\"ets-ui-tts-voice-female\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167336\\\" data-text-en=\\\"Female\\\"></label>\\n</div>\\n<h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167345\\\" data-text-en=\\\"Display Mode\\\"></h4>\\n<div class=\\\"ets-ui-tts-settings-display\\\">\\n    <input type=\\\"checkbox\\\" name=\\\"ets-ui-tts-auto-launch\\\" id=\\\"ets-ui-tts-auto-launch\\\"\" +(settings.autoLaunch ? \" checked='checked'\" : \"\")+ \" />\\n    <label for=\\\"ets-ui-tts-auto-launch\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167348\\\" data-text-en=\\\"Launch it automatically when a word is double-clicked\\\"></label>\\n</div>\\n<a class=\\\"ets-ui-tts-save-btn\\\" href=\\\"javascript:void(0)\\\" data-action=\\\"save/settings\\\">\\n    <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167349\\\" data-text-en=\\\"Save\\\"></span>\\n</a>\\n<span class=\\\"ets-ui-tts-settings-msg ets-done\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167350\\\" data-text-en=\\\"Saved successfully!\\\"></span>\\n<span class=\\\"ets-ui-tts-settings-msg ets-fail\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167351\\\" data-text-en=\\\"Save failed, please try again!\\\"></span>\"; return o; }; });\n","define('school-ui-shared/utils/typeid-parser',[\n\t\"troopjs-core/component/factory\"\n], function TypeidParserUtilModule(Factory) {\n\t\"use strict\";\n\tvar RE_TYPEID = /^(?:(\\w+)!)?!?([;\\-\\w]+)?/, /* format like \"course!201\" */\n\t\tRE_LAST_TYPEID=/(?:(\\w+)[!|;])?(\\d+)$/, /* format like \"course!201;activity;345\" */\n\t\tTYPE = \"type\",\n\t\tID = \"id\",\n\t\tUNDEF;\n\n\treturn Factory.create({\n\t\t// eg: \"course!201\" -> {type: \"course\", id: 201}\n\t\t// eg: \"course!\" -> {type: \"course\", id: undefined}\n\t\t// eg: \"234234\" -> {type: \"\", id: 234234}\n\t\t// eg: \"!234234\" -> {type: \"\", id: 234234}\n\t\t// eg: \"course!sdfsdf\" -> {type: \"course\", id: \"sdfsdf\"}\n\t\t// eg: \"sdfsdf\" -> {type: \"\", id: \"sdfsdf\"}\n\t\t// eg: \"!sdfsdf\" -> {type: \"\", id: \"sdfsdf\"}\n\t\tparse: function parse(typeid) {\n\t\t\tvar matches = RE_TYPEID.exec(typeid);\n\t\t\tif(!matches) {\n\t\t\t\tmatches = [\"\", \"\", UNDEF];\n\t\t\t\t//throw Error(\"invalid format of typeid, parse failed!\");\n\t\t\t}\n\t\t\tvar result = {};\n\t\t\tresult[TYPE] = matches[1] || \"\";\n\t\t\tresult[ID] = matches[2];\n\t\t\treturn result;\n\t\t},\n\n\t\t/*\n\t\t input : \"course!201;activity;345\"\n\t\t output: {type:'activity',id:345}\n\t\t */\n\t\tparseLastType: function parseLastType(typeid){\n\t\t\tvar rs=RE_LAST_TYPEID.exec(typeid)||[];\n\t\t\treturn {\n\t\t\t\ttype: rs[1],\n\t\t\t\tid  : rs[2]\n\t\t\t};\n\t\t},\n\n\t\t/*\n\t\t input : \"course!201;activity;345\"\n\t\t output: \"activity!345\"\n\t\t */\n\t\tparseLastTypeAndId: function parseLastTypeAndId(typeid){\n\t\t\tvar rs = RE_LAST_TYPEID.exec(typeid)||[];\n\t\t\treturn rs[1] + \"!\" + rs[2];\n\t\t},\n\n\t\t// eg: \"course!201\" -> \"course\"\n\t\tparseType: function parseType(typeid) {\n\t\t\tvar result = this.parse(typeid);\n\t\t\treturn result[TYPE];\n\t\t},\n\n\t\t// eg: \"course!201\" -> 201\n\t\tparseId: function parseId(typeid) {\n\t\t\tvar result = this.parse(typeid);\n\t\t\treturn result[ID];\n\t\t},\n\n\t\t// eg: \"activity!1234.activityContent\" -> \"activity!1234\"\n\t\tparseTypeid: function parseTypeid(str) {\n\t\t\tvar result = this.parse(str);\n\t\t\treturn result[TYPE] + \"!\" + result[ID];\n\t\t},\n\n\t\t// if input looks like a id, it returns true, otherwise false\n\t\t// eg: \"course!23423\" -> true\n\t\t// eg: \"course!\" -> true\n\t\t// eg: \"course\" -> false\n\t\tisId: function isId(str) {\n\t\t\treturn ('' + str).indexOf('!') >= 0;\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/utils/query-builder',[\n\t\"troopjs-core/component/factory\",\n\t\"school-ui-shared/utils/typeid-parser\"\n], function QueryBuilderUtilModule(Factory, typeidParser) {\n\t\"use strict\";\n\tvar PROGRESS = \"progress!\",\n\t\tCHILDREN = \".children\",\n\t\tSEPARATOR = \";\",\n\t\tCCL = \"ccl!\";\n\n\treturn Factory.create({\n\t\t// input format: enrollment!1234, course!201, 1(optional)\n\t\t// output format: progress!1234;course;201.children\n\t\tbuildProgressQuery: function buildProgressQuery(enrollmentid, typeid, childrenCount) {\n\t\t\tif(!enrollmentid || !typeid) {\n\t\t\t\tthrow Error(\"invalid arguments, build progress query failed!\");\n\t\t\t}\n\t\t\tvar enrollment_id = typeidParser.parseId(enrollmentid),\n\t\t\t\toTypeid = typeidParser.parse(typeid),\n\t\t\t\tchildren = \"\";\n\t\t\tif(childrenCount) {\n\t\t\t\tchildrenCount = parseInt(childrenCount ,10);\n\t\t\t\tif(isNaN(childrenCount) || childrenCount < 0) {\n\t\t\t\t\tchildrenCount = 0;\n\t\t\t\t}\n\t\t\t\twhile(childrenCount-- > 0) {\n\t\t\t\t\tchildren += CHILDREN;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn PROGRESS.concat([enrollment_id, oTypeid.type, oTypeid.id].join(SEPARATOR), children);\n\t\t},\n\n\t\tbuildCCLQuery: function buildCCLQuery(variableName) {\n\t\t\tif (!variableName) {\n\t\t\t\tthrow Error(\"invalid ccl variableName, build ccl query faild!\");\n\t\t\t}\n\t\t\treturn CCL + '\"' + variableName + '\"';\n\t\t}\n\t});\n});\n","/**\n * check text if can be recognized by TTS\n */\ndefine('school-ui-shared/tts/text-helper',[],function TextHelperModule() {\n\t\"use strict\";\n\tvar RE_TEXT_CAN_TTS = /[A-Za-z0-9\\+\\\\]+/;\n\tvar TEXT_ONLY_ONE_CAN_TTS = [\n\t\t'~',\n\t\t'`',\n\t\t'!',\n\t\t'#',\n\t\t'^',\n\t\t'*',\n\t\t'(',\n\t\t')',\n\t\t'_',\n\t\t'-',\n\t\t'[',\n\t\t']',\n\t\t'{',\n\t\t'}',\n\t\t'|',\n\t\t';',\n\t\t':',\n\t\t'\\'',\n\t\t',',\n\t\t'.',\n\t\t'<',\n\t\t'>',\n\t\t'?',\n\t\t'$',\n\t\t'%',\n\t\t'&',\n\t\t'@',\n\t\t'/',\n\t\t'='\n\t];\n\n\treturn {\n\t\t\"canTTS\": function onCheckText(text) {\n\t\t\ttext = text || \"\";\n\t\t\tif (text.search(RE_TEXT_CAN_TTS) >= 0) {\n\t\t\t\treturn true;\n\t\t\t} else if (text.length === 1) {\n\t\t\t\treturn TEXT_ONLY_ONE_CAN_TTS.indexOf(text) >= 0;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n});\n\n","/**\n * TTS module definition\n */\ndefine('school-ui-shared/tts/main',[\n\t'jquery',\n\t'when',\n\t'jquery.ui',\n\t'troopjs-ef/component/widget',\n\t'school-ui-shared/module',\n\t'template!./tts.html',\n\t'template!./translator.html',\n\t'template!./listen-panel.html',\n\t'template!./settings.html',\n\t'school-ui-shared/enum/ccl',\n\t'school-ui-shared/utils/query-builder',\n\t'school-ui-shared/utils/typeid-parser',\n\t'./text-helper',\n\t'Cookies'\n], function TTSModule(\n\t$,\n\twhen,\n\tui$,\n\tWidget,\n\tmodule,\n\ttTTS,\n\ttTRANS,\n\ttListenPanel,\n\ttSettings,\n\tCCL,\n\tQueryBuilder,\n\tTypeIdParser,\n\tTextHelper,\n\tCookies\n) {\n\t\"use strict\";\n\tvar $ELEMENT = \"$element\";\n\n\t/*!\n\t * event name\n\t */\n\tvar EVENT_TTS_PRELAUNCH = \"mousedown.tts\",\n\t\tEVENT_TTS_LAUNCH = \"mouseup.tts\";\n\n\t/*!\n\t * widget constants\n\t */\n\tvar UNDEF,\n\t\tDOT = \".\",\n\t\tSPACE = \" \",\n\t\tDOUBLE_QUOTE = '\"',\n\t\tTYPE_FUNCTION = \"function\",\n\t\tRE_CRLN = /\\n|\\r/g,\n\t\tMAX_SEARCH_TEXT_LENGTH = 1800,\n\t\tTTS_TEXT_DOUBLE_QUOTATION = \"double quotation\",\n\t\tTTS_TEXT_SORRY = \"Sorry! I can not recognize it.\";\n\tvar TAB_INDEX_TRANSLATOR = 1,\n\t\tTAB_PREFIX = \"ets-tab-\";\n\n\t/*!\n\t * widget data keys\n\t */\n\tvar ENABLE_FLOATING_TOOLKIT = \"_enableFloatingToolkit\",\n\t\tENABLE_TRANSLATOR = \"_enableTranslator\",\n\t\tIS_FAILED = \"_isFailed\";\n\n\tvar IGNORED_TAG = {\n\t\t\"INPUT\": 1,\n\t\t\"TEXTAREA\": 1\n\t};\n\tvar ATTR_TITLE = \"title\";\n\n\t/*!\n\t * class variables\n\t */\n\tvar CLS_HIDDEN = \"ets-hidden\",\n\t\tCLS_ACTIVE = \"ets-active\",\n\t\tCLS_DISABLED = \"ets-disabled\",\n\t\tCLS_EXPANDED = \"ets-expanded\",\n\t\tCLS_LOADING = \"ets-loading\",\n\t\tCLS_PLAYING = \"ets-playing\",\n\t\tCLS_TTS_SMALL = \"ets-tts-small\",\n\t\tCLS_TRANS_SMALL = \"ets-trans-small\",\n\t\tCLS_ALL_SMALL = CLS_TTS_SMALL + \" \" + CLS_TRANS_SMALL,\n\t\tCLS_PINNED = \"ets-pinned\",\n\t\tCLS_DONE = \"ets-done\",\n\t\tCLS_FAIL = \"ets-fail\",\n\t\tCLS_TTS = \"ets-ui-tts\",\n\t\tCLS_TTS_DISABLED = \"ets-ui-tts-disabled\",\n\t\tCLS_TAB_1 = TAB_PREFIX + \"1\",\n\t\tCLS_TAB_2 = TAB_PREFIX + \"2\",\n\t\tCLS_TAB_3 = TAB_PREFIX + \"3\",\n\t\tCLS_TAB_N = CLS_TAB_1 + SPACE + CLS_TAB_2 + SPACE + CLS_TAB_3;\n\n\t/*!\n\t * selector variables\n\t */\n\tvar SEL_TTS = DOT + CLS_TTS,\n\t\tSEL_TTS_SMALL_BOX = \".ets-ui-tts-small-box\",\n\t\tSEL_TRANS_SMALL_BOX = \".ets-ui-trans-small-box\",\n\t\tSEL_TTS_BOX = \".ets-ui-tts-box\",\n\n\t\tSEL_TTS_HEAD = \".ets-ui-tts-hd\",\n\t\tSEL_TTS_HEAD_LISTEN = \".ets-ui-tts-hd-listen\",\n\t\tSEL_TTS_TABS = \".ets-ui-tts-tabs\",\n\t\tSEL_TTS_TAB = \".ets-ui-tts-tab\",\n\t\tSEL_TTS_TAB_ACTIVE = SEL_TTS_TAB + DOT + CLS_ACTIVE,\n\t\tSEL_TTS_TAB_PIN = SEL_TTS_TAB + \".ets-pin\",\n\t\tSEL_TTS_TAB_TRANSLATOR = SEL_TTS_TAB + \".ets-translator\",\n\t\tSEL_TTS_TAB_SPEECH = SEL_TTS_TAB + \".ets-speech\",\n\t\tSEL_TTS_TAB_SETTINGS = SEL_TTS_TAB + \".ets-settings\",\n\n\t\tSEL_TTS_BODY = \".ets-ui-tts-bd\",\n\t\tSEL_TTS_SPEECH = \".ets-ui-tts-speech\",\n\t\tSEL_TTS_SPEECH_INPUT = \".ets-ui-tts-speech-input\",\n\t\tSEL_TTS_SPEECH_TIP = \".ets-ui-tts-speech-tip\",\n\t\tSEL_TTS_SPEECH_LISTEN = \".ets-ui-tts-speech-listen\",\n\t\tSEL_TTS_SETTINGS = \".ets-ui-tts-settings\",\n\t\tSEL_TTS_SETTINGS_VOICE = \".ets-ui-tts-settings-voice\",\n\t\tSEL_TTS_SETTINGS_AUTO_LAUNCH = \"#ets-ui-tts-auto-launch\",\n\t\tSEL_TTS_SETTINGS_MSG = \".ets-ui-tts-settings-msg\",\n\t\tSEL_TTS_FOOT = \".ets-ui-tts-ft\",\n\n\t\tSEL_TTS_AUDIO = \".ets-ui-tts-listen-audio\",\n\t\tSEL_TTS_LISTEN_BUTTON = \".ets-ui-tts-listen-btn\",\n\t\tSEL_TTS_SPEED = \".ets-ui-tts-speed\",\n\t\tSEL_TTS_SPEED_SELECTED = \".ets-ui-tts-speed-selected\";\n\n\t/*!\n\t * hub topic variables\n\t */\n\tvar TOPIC_SAVE_SETTINGS = \"school/tts/SaveMemberSettings\",\n\t\tTOPIC_TTS_TRANSLATOR_RESET = \"tts/translator/reset\",\n\t\tTOPIC_TTS_TRANSLATOR_TRANSLATE = \"tts/translator/translate\";\n\n\t/*!\n\t * tts default/current settings\n\t */\n\tvar SETTINGS = {\n\t\tspeed: 100,\n\t\tspeaker: 100,\n\t\tautoLaunch: true,\n\t\tmaxTextLength: 300,\n\t\tttsUrl: \"/tts/tts.ashx?l=1\"\n\t};\n\n\tvar TRANS_SETTINGS = {\n\t\tautoLaunch: false\n\t};\n\n\t/*!\n\t * widget blurb\n\t */\n\tvar BLURB = \"blurb!\",\n\t\tBLURB_PIN_DOWN = BLURB + \"163322\",\n\t\tBLURB_PIN_UP = BLURB + \"163323\",\n\t\tBLURB_TRANSLATOR = BLURB + \"163084\",\n\t\tBLURB_SPEECH = BLURB + \"163321\",\n\t\tBLURB_SETTINGS = BLURB + \"167509\",\n\t\tBLURB_TRANSLATION_ERROR = BLURB + \"163324\",\n\t\tBLURB_PROMISE = \"_blurbPromise\";\n\tvar BLURB_LIST = {};\n\tBLURB_LIST[BLURB_PIN_DOWN] = \"PinDown\";\n\tBLURB_LIST[BLURB_PIN_UP] = \"PinUp\";\n\tBLURB_LIST[BLURB_TRANSLATOR] = \"Translator\";\n\tBLURB_LIST[BLURB_SPEECH] = \"Speech\";\n\tBLURB_LIST[BLURB_SETTINGS] = \"Settings\";\n\tBLURB_LIST[BLURB_TRANSLATION_ERROR] = \"We're sorry but there's been an error processing your request. Please try again later.\";\n\n\tvar TAB_HANDLERS = [0];\n\tTAB_HANDLERS[1] = function onTranslator() {\n\t\tvar me = this,\n\t\t\t$widget = me[$ELEMENT];\n\t\tvar $speed = $widget.find(SEL_TTS_HEAD_LISTEN).find(SEL_TTS_SPEED);\n\t\ttoggleSpeed.call(me, $speed, false);\n\t\tresetTranslator.call(me);\n\t\tvar text = $.trim($widget.find(SEL_TTS_SPEECH_INPUT).val());\n\t\tif (text !== \"\" && (me._text !== text || me[IS_FAILED])) {\n\t\t\tme._text = text;\n\t\t\ttranslate.call(me);\n\t\t}\n\n\t};\n\n\tTAB_HANDLERS[2] = function onSpeech() {\n\t\tvar me = this,\n\t\t\t$widget = me[$ELEMENT];\n\t\tif (!me._isPinned) {\n\t\t\tme._isPinned = true;\n\t\t\ttogglePin.call(me, true);\n\t\t}\n\n\t\tvar $speech = $widget.find(SEL_TTS_SPEECH),\n\t\t\t$speed = $speech.find(SEL_TTS_SPEED);\n\t\ttoggleSpeechTip.call(me, $speech, false);\n\t\ttoggleSpeed.call(me, $speed, false);\n\n\t\trenderListenPanel.call(me, true);\n\t};\n\n\tTAB_HANDLERS[3] = function onSettings() {\n\t\tvar me = this;\n\t\tvar hideSettingsMessage = function () {\n\t\t\tme[$ELEMENT]\n\t\t\t\t.find(SEL_TTS_SETTINGS_MSG)\n\t\t\t\t.hide();\n\t\t};\n\n\t\trenderSettings.call(me);\n\t\thideSettingsMessage();\n\t};\n\n\tfunction init() {\n\t\tvar me = this;\n\n\t\tme[$ELEMENT].addClass(CLS_TTS);\n\n\t\tme._isHidden = true;\n\t\tme._isRendered = false;\n\t\tme._isPinned = false;\n\t\tme._isTranslatorTab = true;\n\t\tme._text = \"\";\n\t\tme._english = \"\";\n\n\t\treturn initSettings.call(me)\n\t\t\t.ensure(function () {\n\t\t\t\tinitLaunchEvent.call(me);\n\t\t\t});\n\t}\n\n\tfunction initSettings() {\n\t\tvar me = this;\n\t\treturn me.query([\n\t\t\tQueryBuilder.buildCCLQuery(CCL.enableFloatingToolkit),\n\t\t\t\"student_translator_config!current\",\n\t\t\t\"tts_member_settings!current\"\n\t\t]).spread(function doneQuery(cclFloatingResult, translatorConfig, settings) {\n\t\t\tme[ENABLE_FLOATING_TOOLKIT] = (cclFloatingResult || {}).value === \"true\";\n\t\t\tme[ENABLE_TRANSLATOR] = (translatorConfig || {}).enabled === true;\n\t\t\t//check autoLaunch value of the pupup window module\n\t\t\tif (!me[ENABLE_FLOATING_TOOLKIT]) {\n\t\t\t\t//a autolaunch value in cookie ?\n\t\t\t\tvar cookieValue = checkTransAutolaunchByCookie();\n\t\t\t\tif (cookieValue === UNDEF) {\n\t\t\t\t\t//there isn`t cookie value, use an old interface\n\t\t\t\t\treturn me.publish(\n\t\t\t\t\t\t\"ajax\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: \"GET\",\n\t\t\t\t\t\t\turl: \"/translator/Integration/GetAutoLaunchStatus\"\n\t\t\t\t\t\t}\n\t\t\t\t\t).then(function (data) {\n\t\t\t\t\t\tTRANS_SETTINGS.autoLaunch = data === \"true\";\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tTRANS_SETTINGS.autoLaunch = cookieValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (settings) {\n\t\t\t\tSETTINGS.speed = settings.speed || SETTINGS.speed;\n\t\t\t\tSETTINGS.speaker = settings.speaker || SETTINGS.speaker;\n\t\t\t\tSETTINGS.autoLaunch = settings.status !== 0;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction initLaunchEvent() {\n\t\tvar me = this;\n\t\tvar isIgnoredTarget;\n\n\t\tfunction verifyIgnoredTarget($event) {\n\t\t\tvar target = $event.target,\n\t\t\t\tignored = !!IGNORED_TAG[target.tagName] || target.className === CLS_TTS_DISABLED;\n\t\t\tif (ignored && (target.readOnly === true || target.disabled === true)) {\n\t\t\t\tignored = false;\n\t\t\t}\n\t\t\treturn ignored;\n\t\t}\n\n\t\tfunction verifyTTSTarget($event) {\n\t\t\treturn $($event.target).closest(SEL_TTS).length > 0;\n\t\t}\n\n\t\tfunction prelaunch($event) {\n\t\t\tisIgnoredTarget = verifyIgnoredTarget($event);\n\t\t\tif (me._isHidden || me._isTtsSmallBox) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar isFromTTS = verifyTTSTarget($event);\n\t\t\tif (isFromTTS) {\n\t\t\t\tisIgnoredTarget = true;\n\t\t\t}\n\t\t\tif (me._isPinned || isFromTTS) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thide.call(me); // hide tts when unpinned\n\t\t}\n\n\t\tfunction launch($event) {\n\t\t\tif (isIgnoredTarget) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar text = getSelectedText();\n\t\t\tif (!text) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tme._text = me._english = text;\n\t\t\tif (!me[ENABLE_FLOATING_TOOLKIT]) {\n\t\t\t\tvar cookieValue = checkTransAutolaunchByCookie();\n\t\t\t\tif (cookieValue !== UNDEF) {\n\t\t\t\t\tTRANS_SETTINGS.autoLaunch = cookieValue;\n\t\t\t\t}\n\n\t\t\t\tif (TRANS_SETTINGS.autoLaunch) {\n\t\t\t\t\topenTranslator.call(me, true);\n\t\t\t\t\tclearSelection();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdoRender.call(me)\n\t\t\t\t\t\t.ensure(function alwaysCall() {\n\t\t\t\t\t\t\tsetTransBoxStyle.call(me);\n\t\t\t\t\t\t\tsetTransBoxPosition.call(me, $event);\n\t\t\t\t\t\t\tshow.call(me);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdoRender.call(me)\n\t\t\t\t\t.ensure(function alwaysCall() {\n\t\t\t\t\t\tif (!me._isPinned) {\n\t\t\t\t\t\t\tsetTtsBoxPosition.call(me, $event);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshow.call(me);\n\t\t\t\t\t\tinitTranslator.call(me);\n\t\t\t\t\t\ttranslate.call(me);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\t\t$(document)\n\t\t\t.unbind(EVENT_TTS_PRELAUNCH).bind(EVENT_TTS_PRELAUNCH, prelaunch)\n\t\t\t.unbind(EVENT_TTS_LAUNCH).bind(EVENT_TTS_LAUNCH, launch);\n\t}\n\n\tfunction checkTransAutolaunchByCookie() {\n\t\tvar preference = Cookies.get(\"Translator3_User_Preference\");\n\t\tvar preferenceSegs = preference && preference.split(\"~\");\n\t\t//is there a autolaunch value in cookie ?\n\t\tif (preferenceSegs && preferenceSegs.length >= 3) {\n\t\t\treturn preferenceSegs[2] === 'True';\n\t\t}\n\t}\n\n\tfunction getSelectedText() {\n\t\tvar win = window, doc = win.document;\n\t\tvar txt = (win.getSelection && win.getSelection()) ||\n\t\t\t(doc.getSelection && doc.getSelection()) ||\n\t\t\t(doc.selection && doc.selection.createRange().text) || \"\";\n\t\treturn $.trim((\"\" + txt).replace(RE_CRLN, \"\"));\n\t}\n\n\tfunction clearSelection() {\n\t\tvar win = window, doc = win.document;\n\t\tif (win.getSelection) {\n\t\t\twin.getSelection().removeAllRanges();\n\t\t} else if (doc.getSelection) {\n\t\t\tdoc.getSelection().removeAllRanges();\n\t\t} else if (doc.selection) {\n\t\t\tdoc.selection.empty();\n\t\t}\n\t}\n\n\tfunction doRender() {\n\t\tvar me = this;\n\t\tif (me._isRendered) {\n\t\t\treturn when.resolve();\n\t\t}\n\n\t\tme._isRendered = true;\n\t\treturn render.call(me);\n\t}\n\n\tfunction render() {\n\t\tvar me = this;\n\n\t\tif (!me[ENABLE_FLOATING_TOOLKIT]) {\n\t\t\tif (me[ENABLE_TRANSLATOR]) {\n\t\t\t\treturn me.html(tTRANS)\n\t\t\t\t\t.then(function () {\n\t\t\t\t\t\tonRendered.call(me);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn when.resolve();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn me.html(tTTS({ enableTranslatorDetail: me[ENABLE_TRANSLATOR] }))\n\t\t\t\t.then(function () {\n\t\t\t\t\tme[$ELEMENT].find(SEL_TTS_BOX).mouseenter(function () {\n\t\t\t\t\t\tme.publish(\"tracking/useraction\", {\n\t\t\t\t\t\t\t\"action.translateOverlay\": \"1\"\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\tonRendered.call(me);\n\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction renderListenPanel(isForSpeech) {\n\t\tvar me = this;\n\t\tif (isForSpeech) {\n\t\t\tif (me._speechListenRendered) {\n\t\t\t\treturn when.resolve();\n\t\t\t}\n\t\t\tme._speechListenRendered = true;\n\t\t} else {\n\t\t\tif (me._headListenRendered) {\n\t\t\t\treturn when.resolve();\n\t\t\t}\n\t\t\tme._headListenRendered = true;\n\t\t}\n\n\t\tvar data = {\n\t\t\t\"isForSpeech\": isForSpeech,\n\t\t\t\"settings\": SETTINGS\n\t\t};\n\n\t\tvar $widget = me[$ELEMENT].find(isForSpeech ? SEL_TTS_SPEECH_LISTEN : SEL_TTS_HEAD_LISTEN);\n\t\treturn $widget\n\t\t\t.html(tListenPanel(data))\n\t\t\t.find(\"*\")\n\t\t\t.weave()\n\t\t\t.then(function doneCall() {\n\t\t\t\tinitAudioElement.call(me, $widget);\n\t\t\t\t$widget.removeClass(CLS_HIDDEN);\n\t\t\t}, function failCall() {\n\t\t\t\tif (isForSpeech) {\n\t\t\t\t\tme._speechListenRendered = false;\n\t\t\t\t} else {\n\t\t\t\t\tme._headListenRendered = false;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tfunction renderSettings() {\n\t\tvar me = this;\n\t\tif (me._settingsRendered) {\n\t\t\treturn when.resolve();\n\t\t}\n\n\t\tme._settingsRendered = true;\n\t\tvar $widget = me[$ELEMENT].find(SEL_TTS_SETTINGS);\n\t\tvar data = {\n\t\t\t\"settings\": SETTINGS\n\t\t};\n\t\treturn $widget\n\t\t\t.html(tSettings(data))\n\t\t\t.find(\"*\")\n\t\t\t.weave()\n\t\t\t.done(function doneCall() {\n\t\t\t\t$widget.removeClass(CLS_HIDDEN);\n\t\t\t}, function failCall() {\n\t\t\t\tme._settingsRendered = false;\n\t\t\t});\n\t}\n\n\tfunction onRendered() {\n\t\tvar me = this;\n\n\t\tsetzIndex.call(me);\n\t\tsetTtsBoxStyle.call(me);\n\n\t\tinitDraggable.call(me);\n\n\t\trenderListenPanel.call(me, false);\n\t\tinitTabTip.call(me);\n\t}\n\n\tfunction setTtsBoxPosition($event) {\n\t\tvar pageX = $event.pageX,\n\t\t\tpageY = $event.pageY;\n\t\tvar me = this,\n\t\t\tsize = getBoxSize.call(me);\n\t\tvar $win = $(window),\n\t\t\twinWidth = $win.width(),\n\t\t\twinHeight = $win.height();\n\t\tvar maxX = winWidth - size.width,\n\t\t\tmaxY = winHeight - size.height,\n\t\t\tboxX = pageX + 10,\n\t\t\tboxY = pageY - 60;\n\t\tif (boxX > maxX) {\n\t\t\tboxX = maxX;\n\t\t}\n\t\tif (boxY < 0) {\n\t\t\tboxY = 0;\n\t\t} else if (boxY > maxY) {\n\t\t\tboxY = maxY;\n\t\t}\n\t\tvar $widget = me[$ELEMENT], smallBox;\n\t\t$widget\n\t\t\t.find(SEL_TTS_BOX)\n\t\t\t.css({ \"left\": boxX, \"top\": boxY });\n\n\t\tif (me._isTtsSmallBox) {\n\t\t\tsmallBox = $widget.find(SEL_TTS_SMALL_BOX);\n\t\t\tsmallBox.css(getSmallBoxOffset(smallBox, $event));\n\t\t}\n\t}\n\n\tfunction setTransBoxPosition($event) {\n\t\tvar me = this;\n\t\tvar smallBox;\n\t\tif (me._isTransSmallBox) {\n\t\t\tsmallBox = me[$ELEMENT].find(SEL_TRANS_SMALL_BOX);\n\t\t\tsmallBox.css(getSmallBoxOffset(smallBox, $event));\n\t\t}\n\t}\n\n\tfunction getSmallBoxOffset(smallBox, $event) {\n\t\tvar pageX = $event.pageX,\n\t\t\tpageY = $event.pageY;\n\t\tvar $win = $(window),\n\t\t\twinWidth = $win.width(),\n\t\t\twinHeight = $win.height();\n\n\t\tvar smallMaxX = winWidth - smallBox.width(),\n\t\t\tsmallMaxY = winHeight - smallBox.height();\n\t\tvar smallBoxX = pageX + 20,\n\t\t\tsmallBoxY = pageY - 10;\n\t\tif (smallBoxX > smallMaxX) {\n\t\t\tsmallBoxX = smallMaxX;\n\t\t}\n\t\tif (smallBoxY < 0) {\n\t\t\tsmallBoxY = 0;\n\t\t} else if (smallBoxY > smallMaxY) {\n\t\t\tsmallBoxY = smallMaxY;\n\t\t}\n\t\treturn { \"left\": smallBoxX, \"top\": smallBoxY };\n\t}\n\n\tfunction getBoxSize() {\n\t\tvar me = this;\n\t\tif (!me._ttsBoxSize) {\n\t\t\tvar $box = me[$ELEMENT].find(SEL_TTS_BOX);\n\t\t\tvar height = $box.find(SEL_TTS_HEAD).outerHeight()\n\t\t\t\t+ $box.find(SEL_TTS_BODY).outerHeight()\n\t\t\t\t+ $box.find(SEL_TTS_FOOT).outerHeight()\n\t\t\t\t+ 10;\n\t\t\tme._ttsBoxSize = {\n\t\t\t\t\"width\": $box.outerWidth() + 10,\n\t\t\t\t\"height\": height\n\t\t\t};\n\t\t}\n\t\treturn me._ttsBoxSize;\n\t}\n\n\t/*!\n\t * set tts z-index by setting\n\t */\n\tfunction setzIndex() {\n\t\tvar $widget = this[$ELEMENT],\n\t\t\tzIndex = $widget.data(\"zIndex\");\n\t\tif (zIndex !== UNDEF) {\n\t\t\t$widget.find(SEL_TTS_SMALL_BOX + \",\" + SEL_TTS_BOX).css(\"z-index\", zIndex);\n\t\t}\n\t}\n\n\tfunction initDraggable() {\n\t\tvar me = this,\n\t\t\tboxWidth = getBoxSize.call(me).width + 2,\n\t\t\tmaxLeft = 0;\n\n\t\tfunction onStart() {\n\t\t\tmaxLeft = $(window).width() - boxWidth;\n\t\t}\n\n\t\tfunction onDrag($event, ui) {\n\t\t\tvar position = ui.position;\n\t\t\tif (maxLeft > 0 && position.left > maxLeft) {\n\t\t\t\tposition.left = maxLeft;\n\t\t\t}\n\t\t}\n\n\t\tui$(me[$ELEMENT].find(SEL_TTS_BOX))\n\t\t\t.draggable({\n\t\t\t\thandle: SEL_TTS_HEAD,\n\t\t\t\taddClasses: false,\n\t\t\t\tcontainment: \"window\",\n\t\t\t\tscroll: false,\n\t\t\t\tscope: false,\n\t\t\t\tdisabled: true,\n\t\t\t\tstart: onStart,\n\t\t\t\tdrag: onDrag\n\t\t\t});\n\t}\n\n\tfunction setTtsBoxStyle(small) {\n\t\tvar me = this;\n\t\tme._isTtsSmallBox = small === UNDEF ? !SETTINGS.autoLaunch : !!small;\n\t\tme[$ELEMENT].removeClass(CLS_ALL_SMALL).toggleClass(CLS_TTS_SMALL, me._isTtsSmallBox);\n\t}\n\n\tfunction setTransBoxStyle(small) {\n\t\tvar me = this;\n\t\tme._isTransSmallBox = small === UNDEF ? !TRANS_SETTINGS.autoLaunch : !!small;\n\t\tme[$ELEMENT].removeClass(CLS_ALL_SMALL).toggleClass(CLS_TRANS_SMALL, me._isTransSmallBox);\n\t}\n\n\tfunction initAudioElement($widget) {\n\t\tvar $player = $widget.find(SEL_TTS_LISTEN_BUTTON);\n\t\tvar $audio = $widget.find(SEL_TTS_AUDIO);\n\t\t$audio.on('play playing', function () {\n\t\t\t$player.removeClass(CLS_LOADING).addClass(CLS_PLAYING);\n\t\t});\n\t\t$audio.on('pause ended', function () {\n\t\t\t$player.removeClass(CLS_PLAYING);\n\t\t});\n\t\t$audio.on('error', function () {\n\t\t\t$player.removeClass(CLS_PLAYING).removeClass(CLS_LOADING);\n\t\t});\n\t}\n\n\tfunction initTabTip() {\n\t\tvar me = this;\n\t\tvar blurbList = BLURB_LIST;\n\t\tloadBlurb.call(me)\n\t\t\t.ensure(function () {\n\t\t\t\tme[$ELEMENT]\n\t\t\t\t\t.find(SEL_TTS_TABS)\n\t\t\t\t\t.find(SEL_TTS_TAB_PIN)\n\t\t\t\t\t.attr(ATTR_TITLE, me._isPinned ? blurbList[BLURB_PIN_UP] : blurbList[BLURB_PIN_DOWN])\n\t\t\t\t\t.end()\n\t\t\t\t\t.find(SEL_TTS_TAB_TRANSLATOR)\n\t\t\t\t\t.attr(ATTR_TITLE, blurbList[BLURB_TRANSLATOR])\n\t\t\t\t\t.end()\n\t\t\t\t\t.find(SEL_TTS_TAB_SPEECH)\n\t\t\t\t\t.attr(ATTR_TITLE, blurbList[BLURB_SPEECH])\n\t\t\t\t\t.end()\n\t\t\t\t\t.find(SEL_TTS_TAB_SETTINGS)\n\t\t\t\t\t.attr(ATTR_TITLE, blurbList[BLURB_SETTINGS]);\n\t\t\t});\n\t}\n\n\tfunction loadBlurb() {\n\t\tvar me = this;\n\t\tif (!me[BLURB_PROMISE]) {\n\t\t\tvar blurbIds = Object.keys(BLURB_LIST);\n\t\t\tme[BLURB_PROMISE] = me.query(blurbIds)\n\t\t\t\t.then(function (blurbs) {\n\t\t\t\t\tblurbs.forEach(function (blurb) {\n\t\t\t\t\t\tvar translation = blurb && blurb.translation;\n\t\t\t\t\t\tif (translation) {\n\t\t\t\t\t\t\tBLURB_LIST[blurb.id] = translation;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t\treturn me[BLURB_PROMISE];\n\t}\n\n\tfunction resetListenButton() {\n\t\tthis[$ELEMENT]\n\t\t\t.find(SEL_TTS_LISTEN_BUTTON)\n\t\t\t.removeClass(CLS_PLAYING + SPACE + CLS_LOADING);\n\t}\n\n\tfunction show() {\n\t\tvar me = this;\n\t\tme._isHidden = false;\n\t\tme[$ELEMENT].show();\n\t\tresetListenButton.call(me);\n\t\tresetTranslator.call(me);\n\t}\n\n\tfunction hide() {\n\t\tvar me = this;\n\t\tme._isHidden = true;\n\t\tme._isPinned = false;\n\t\tme[$ELEMENT].hide();\n\t\ttogglePin.call(me, false);\n\t\tif (!me[ENABLE_FLOATING_TOOLKIT]) {\n\t\t\tsetTransBoxStyle.call(me);\n\t\t}\n\t\telse {\n\t\t\tsetTtsBoxStyle.call(me);\n\t\t}\n\t}\n\n\tfunction togglePin(pinned) {\n\t\tvar me = this;\n\t\tme[$ELEMENT]\n\t\t\t.find(SEL_TTS_BOX)\n\t\t\t.toggleClass(CLS_PINNED, pinned)\n\t\t\t.draggable(pinned ? \"enable\" : \"disable\")\n\t\t\t.find(SEL_TTS_TAB_PIN)\n\t\t\t.attr(ATTR_TITLE, pinned ? BLURB_LIST[BLURB_PIN_UP] : BLURB_LIST[BLURB_PIN_DOWN]);\n\t}\n\n\tfunction initTranslator() {\n\t\tvar me = this,\n\t\t\ttext = me._text,\n\t\t\t$widget = me[$ELEMENT];\n\t\t$widget\n\t\t\t.find(SEL_TTS_SPEECH_INPUT)\n\t\t\t.val(text);\n\t\tif (!me._isTranslatorTab) {\n\t\t\tvar $tab = $widget.find(SEL_TTS_TAB_TRANSLATOR);\n\t\t\tinitTab.call(me, $tab, TAB_INDEX_TRANSLATOR);\n\t\t}\n\t}\n\n\tfunction switchTab($tab, tabIndex) {\n\t\tvar me = this;\n\t\tinitTab.call(me, $tab, tabIndex);\n\n\t\tvar handler = TAB_HANDLERS[tabIndex];\n\t\tif (typeof(handler) === TYPE_FUNCTION) {\n\t\t\thandler.apply(me, arguments);\n\t\t}\n\t}\n\n\tfunction initTab($tab, tabIndex) {\n\t\tvar me = this;\n\t\tme._isTranslatorTab = tabIndex === TAB_INDEX_TRANSLATOR;\n\t\tme[$ELEMENT]\n\t\t\t.find(SEL_TTS_HEAD_LISTEN)\n\t\t\t.toggle(me._isTranslatorTab)\n\t\t\t.end()\n\t\t\t.find(SEL_TTS_TAB_ACTIVE)\n\t\t\t.removeClass(CLS_ACTIVE)\n\t\t\t.end()\n\t\t\t.find(SEL_TTS_BODY)\n\t\t\t.removeClass(CLS_TAB_N)\n\t\t\t.addClass(TAB_PREFIX + tabIndex);\n\n\t\t$tab.addClass(CLS_ACTIVE);\n\t}\n\n\tfunction toggleSpeed($speed, expanded) {\n\t\t$speed.toggleClass(CLS_EXPANDED, expanded);\n\t}\n\n\tfunction selectSpeed(speed, text) {\n\t\tSETTINGS.speed = speed;\n\t\tthis[$ELEMENT].find(SEL_TTS_SPEED_SELECTED).text(text);\n\t}\n\n\tfunction listenSpeech($player, isForSpeech) {\n\t\tif ($player.hasClass(CLS_LOADING) ||\n\t\t\t$player.hasClass(CLS_PLAYING) ||\n\t\t\t$player.hasClass(CLS_DISABLED)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this, $widget = me[$ELEMENT], $speech;\n\t\tvar text = me._english;\n\t\tif (isForSpeech) {\n\t\t\t$speech = $widget.find(SEL_TTS_SPEECH);\n\t\t\ttext = $.trim($speech.find(SEL_TTS_SPEECH_INPUT).val());\n\t\t}\n\t\tif (text.length === 0 || text.length > SETTINGS.maxTextLength) {\n\t\t\tif ($speech) {\n\t\t\t\ttoggleSpeechTip.call(me, $speech, true);\n\t\t\t}\n\t\t\treturn;\n\t\t} else if (!TextHelper.canTTS(text)) {\n\t\t\tif (text === DOUBLE_QUOTE) {\n\t\t\t\ttext = TTS_TEXT_DOUBLE_QUOTATION;\n\t\t\t} else if (isForSpeech) {\n\t\t\t\tenablePlayerAudio($player, false);\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\ttext = TTS_TEXT_SORRY;\n\t\t\t}\n\t\t}\n\n\t\tvar $audio = $player.siblings(SEL_TTS_AUDIO);\n\t\t$player.addClass(CLS_LOADING);\n\t\tvar ttsUrl = SETTINGS.ttsUrl;\n\t\tvar url = [\n\t\t\tttsUrl + (ttsUrl.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"m=\" + me._member_id,\n\t\t\t\"spk=\" + SETTINGS.speaker,\n\t\t\t\"spd=\" + SETTINGS.speed,\n\t\t\t\"t=\" + encodeURIComponent('\"' + text + '\"'),\n\t\t\t\"p=\" + encodeURIComponent(location.href),\n\t\t\t\"k=\"\n\t\t].join(\"&\");\n\t\t$audio.attr('src', url);\n\t\t$audio.get(0).play();\n\t}\n\n\tfunction toggleSpeechTip($speech, show) {\n\t\tvar $speechTip = $speech\n\t\t\t.find(SEL_TTS_SPEECH_TIP)\n\t\t\t.stop(true, true)\n\t\t\t.toggle(show);\n\t\tif (show) {\n\t\t\t$speechTip.delay(2000).fadeOut(3000);\n\t\t}\n\t}\n\n\tfunction enablePlayerAudio($player, enabled) {\n\t\t$player.toggleClass(CLS_DISABLED, !enabled);\n\t}\n\n\tfunction saveSettings() {\n\t\tvar me = this;\n\t\tvar $settings = me[$ELEMENT].find(SEL_TTS_SETTINGS);\n\t\tvar showMessage = function (success) {\n\t\t\t$settings\n\t\t\t\t.find(SEL_TTS_SETTINGS_MSG + DOT + (success ? CLS_DONE : CLS_FAIL))\n\t\t\t\t.stop(true, true)\n\t\t\t\t.show()\n\t\t\t\t.delay(2000)\n\t\t\t\t.fadeOut(success ? 1000 : 3000);\n\t\t};\n\n\t\tvar speaker = +$settings.find(SEL_TTS_SETTINGS_VOICE).find(\"input:checked\").val(),\n\t\t\tautoLaunch = $settings.find(SEL_TTS_SETTINGS_AUTO_LAUNCH)[0].checked,\n\t\t\tsettings = {\n\t\t\t\t\"speed\": SETTINGS.speed,\n\t\t\t\t\"speaker\": speaker,\n\t\t\t\t\"status\": (autoLaunch ? 1 : 0)\n\t\t\t};\n\n\t\tme.publish(TOPIC_SAVE_SETTINGS, settings)\n\t\t\t.spread(function doneUpdate(saved) {\n\t\t\t\tsaved = saved && (saved[0] || saved);\n\t\t\t\tif (saved && saved.result === 1) {\n\t\t\t\t\tSETTINGS.speaker = speaker;\n\t\t\t\t\tSETTINGS.autoLaunch = autoLaunch;\n\t\t\t\t\tshowMessage(true);\n\t\t\t\t} else {\n\t\t\t\t\tshowMessage(false);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function failUpdate() {\n\t\t\t\tshowMessage(false);\n\t\t\t});\n\t}\n\n\tfunction translate() {\n\t\t// SPC-2505, replace translation text's 'noisy' characters with EMPTY before translating\n\t\tvar normalizeText = function (txt) {\n\t\t\treturn ('' + txt).replace(/['\"\\\\]/g, '') || ' ';\n\t\t};\n\n\t\tvar me = this;\n\t\tvar text = normalizeText(me._text);\n\t\tif (text.length > SETTINGS.maxTextLength) {\n\t\t\ttext = text.substr(0, SETTINGS.maxTextLength);\n\t\t}\n\t\tme._text = text;\n\n\t\tme[IS_FAILED] = false;\n\t\tme.publish(TOPIC_TTS_TRANSLATOR_TRANSLATE, text, me._cultureCode)\n\t\t\t.catch(function failCall() {\n\t\t\t\tme[IS_FAILED] = true;\n\t\t\t});\n\t}\n\n\tfunction resetTranslator() {\n\t\tthis.publish(TOPIC_TTS_TRANSLATOR_RESET);\n\t}\n\n\tfunction openTranslator(autoPop) {\n\t\tvar me = this,\n\t\t\tsearchText = me._text || \"\";\n\t\tif (searchText.length > MAX_SEARCH_TEXT_LENGTH) {\n\t\t\tsearchText = searchText.substr(0, MAX_SEARCH_TEXT_LENGTH);\n\t\t}\n\t\tvar url = \"/translator/?newcourseware=true&LE=\" + (\"e12-new\" + (autoPop ? \"-pop\" : \"\")) + \"&searchText=\" + encodeURIComponent(searchText),\n\t\t\tfeatures = 'height=740px,width=680px,top=0,left=0,toolbar=no,resizable=yes,location=no,status=no,scrollbars=yes';\n\t\tvar translatorWindow = window.open(url, 'Translator', features);\n\t\ttranslatorWindow.focus();\n\t}\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function onStart() {\n\t\t\treturn init.call(this);\n\t\t},\n\n\t\t\"hub:memory/context\": function onContext(context) {\n\t\t\tif (context) {\n\t\t\t\tvar me = this;\n\t\t\t\tme._member_id = +TypeIdParser.parseId((context.user || {}).id);\n\t\t\t\tme._cultureCode = context.cultureCode;\n\t\t\t}\n\t\t},\n\n\t\t\"hub/tts/set/url\": function onSetSpeechUrl(url) {\n\t\t\tif (url) {\n\t\t\t\tSETTINGS.ttsUrl = url;\n\t\t\t}\n\t\t},\n\n\t\t\"hub/tts/set/english\": function onSetEnglish(english) {\n\t\t\tthis._english = english || \"\";\n\t\t},\n\n\t\t\"hub/tts/get/translation/error\": function onGetTranslationError() {\n\t\t\treturn BLURB_LIST[BLURB_TRANSLATION_ERROR];\n\t\t},\n\n\t\t\"hub/tts/open/translator\": function onOpenTranslator() {\n\t\t\topenTranslator.call(this);\n\t\t},\n\n\t\t\"hub/tts/close/toolkit\": function onCloseToolkit() {\n\t\t\thide.call(this);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-small-box/click\": function onShowBox() {\n\t\t\tsetTtsBoxStyle.call(this, false);\n\t\t},\n\n\t\t\"dom:.ets-ui-trans-small-box/click\": function onActionOpenTranslator() {\n\t\t\topenTranslator.call(this);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-close-btn/click\": function onCloseBox() {\n\t\t\thide.call(this);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-tab.ets-pin/click\": function onTogglePin() {\n\t\t\tvar me = this;\n\t\t\tme._isPinned = !me._isPinned;\n\t\t\ttogglePin.call(me, me._isPinned);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-tab-switch/click\": function onSwitchTab($event) {\n\t\t\tvar $tab = $($event.currentTarget);\n\t\t\tif ($tab.hasClass(CLS_ACTIVE)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitchTab.call(this, $tab, $tab.data('index'));\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-speech-input/click\": function onClickInput($event) {\n\t\t\tvar $speech = $($event.currentTarget).closest(SEL_TTS_SPEECH);\n\t\t\ttoggleSpeechTip.call(this, $speech, false);\n\n\t\t\tvar $player = $speech.find(SEL_TTS_LISTEN_BUTTON);\n\t\t\tenablePlayerAudio($player, true);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-speed/click\": function onToggleSpeed($event) {\n\t\t\tvar $speed = $($event.currentTarget);\n\t\t\ttoggleSpeed.call(this, $speed);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-select-speed/click\": function onSelectSpeed($event) {\n\t\t\tvar $option = $($event.currentTarget);\n\t\t\tvar me = this;\n\t\t\tselectSpeed.call(me, $option.data('value'), $option.text());\n\n\t\t\tvar $speed = $option.closest(SEL_TTS_SPEED);\n\t\t\ttoggleSpeed.call(me, $speed, false);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-listen-btn/click\": function onListenSpeech($event) {\n\t\t\tvar me = this;\n\t\t\tvar $player = $($event.currentTarget);\n\t\t\tlistenSpeech.call(me, $player, $player.data('value'));\n\t\t\t//send useraction tracking\n\t\t\tme.publish(\"tracking/useraction\", {\n\t\t\t\t\"action.translatePlay\": \"1\"\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-save-btn/click\": function onSaveSettings() {\n\t\t\tsaveSettings.call(this);\n\t\t}\n\t});\n});\n\n","/**\n * # language map helper module definition\n */\ndefine('school-ui-shared/tts/translator/lang-helper',[],function LangHelperModule() {\n\t\"use strict\";\n\n\t/*!\n\t * culture code need to be mapped\n\t */\n\tvar CULTURE_CODE_ES_CL = \"es-CL\",\n\t\tCULTURE_CODE_ID_ID = \"id-ID\",\n\t\tCULTURE_CODE_JA_JP = \"ja-JP\",\n\t\tCULTURE_CODE_KO_KR = \"ko-KR\",\n\t\tCULTURE_CODE_PT_BR = \"pt-BR\",\n\t\tCULTURE_CODE_ZH_CN = \"zh-CN\",\n\t\tCULTURE_CODE_ZH_HK = \"zh-HK\",\n\t\tCULTURE_CODE_ZH_TW = \"zh-TW\";\n\n\t/*!\n\t * bing language code need to be mapped\n\t *\n\t * Language codes representing languages that are supported by BING Translation Service\n\t * ar,bg,ca,zh-CHS,zh-CHT,cs,da,nl,en,et,fi,fr,de,el,ht,he,hi,mww,\n\t * hu,id,it,ja,ko,lv,lt,no,fa,pl,pt,ro,ru,sk,sl,es,sv,th,tr,uk,vi\n\t *\n\t * ref URL: http://api.microsofttranslator.com/V2/Ajax.svc/GetLanguagesForTranslate?appId=XXX\n\t */\n\tvar BING_LANG_CODE_DE = \"de\",\n\t\tBING_LANG_CODE_ES = \"es\",\n\t\tBING_LANG_CODE_ID = \"id\",\n\t\tBING_LANG_CODE_JA = \"ja\",\n\t\tBING_LANG_CODE_KO = \"ko\",\n\t\tBING_LANG_CODE_PT = \"pt\",\n\t\tBING_LANG_CODE_ZH_CHS = \"zh-CHS\",\n\t\tBING_LANG_CODE_ZH_CHT = \"zh-CHT\";\n\n\t/*!\n\t * EF non-stardand language code need to be mapped\n\t */\n\tvar EF_LANG_CODE_CH = \"ch\",\n\t\tEF_LANG_CODE_CS = \"cs\",\n\t\tEF_LANG_CODE_GE = \"ge\",\n\t\tEF_LANG_CODE_HK = \"hk\",\n\t\tEF_LANG_CODE_ID = \"id\",\n\t\tEF_LANG_CODE_JP = \"jp\",\n\t\tEF_LANG_CODE_KR = \"kr\",\n\t\tEF_LANG_CODE_SP = \"sp\",\n\t\tEF_LANG_CODE_PT = \"pt\";\n\n\t/*!\n\t * language code map from culture code/EF language code to bing language code\n\t */\n\tvar AS_BING_LANG = {}, AS_EF_LANG = {};\n\tAS_BING_LANG[CULTURE_CODE_ES_CL] = BING_LANG_CODE_ES;\n\tAS_BING_LANG[CULTURE_CODE_ID_ID] = BING_LANG_CODE_ID;\n\tAS_BING_LANG[CULTURE_CODE_JA_JP] = BING_LANG_CODE_JA;\n\tAS_BING_LANG[CULTURE_CODE_KO_KR] = BING_LANG_CODE_KO;\n\tAS_BING_LANG[CULTURE_CODE_PT_BR] = BING_LANG_CODE_PT;\n\tAS_BING_LANG[CULTURE_CODE_ZH_CN] = BING_LANG_CODE_ZH_CHS;\n\tAS_BING_LANG[CULTURE_CODE_ZH_HK] = BING_LANG_CODE_ZH_CHT;\n\tAS_BING_LANG[CULTURE_CODE_ZH_TW] = BING_LANG_CODE_ZH_CHT;\n\n\tAS_BING_LANG[EF_LANG_CODE_CH] = BING_LANG_CODE_ZH_CHT;\n\tAS_BING_LANG[EF_LANG_CODE_CS] = BING_LANG_CODE_ZH_CHS;\n\tAS_BING_LANG[EF_LANG_CODE_GE] = BING_LANG_CODE_DE;\n\tAS_BING_LANG[EF_LANG_CODE_HK] = BING_LANG_CODE_ZH_CHT;\n\tAS_BING_LANG[EF_LANG_CODE_ID] = BING_LANG_CODE_ID;\n\tAS_BING_LANG[EF_LANG_CODE_JP] = BING_LANG_CODE_JA;\n\tAS_BING_LANG[EF_LANG_CODE_KR] = BING_LANG_CODE_KO;\n\tAS_BING_LANG[EF_LANG_CODE_SP] = BING_LANG_CODE_ES;\n\tAS_BING_LANG[EF_LANG_CODE_PT] = BING_LANG_CODE_PT;\n\n\t/*!\n\t * language code map from culture code to EF language code\n\t */\n\tAS_EF_LANG[CULTURE_CODE_ES_CL] = EF_LANG_CODE_SP;\n\tAS_EF_LANG[CULTURE_CODE_ID_ID] = EF_LANG_CODE_ID;\n\tAS_EF_LANG[CULTURE_CODE_JA_JP] = EF_LANG_CODE_JP;\n\tAS_EF_LANG[CULTURE_CODE_KO_KR] = EF_LANG_CODE_KR;\n\tAS_EF_LANG[CULTURE_CODE_PT_BR] = EF_LANG_CODE_PT;\n\tAS_EF_LANG[CULTURE_CODE_ZH_CN] = EF_LANG_CODE_CS;\n\tAS_EF_LANG[CULTURE_CODE_ZH_HK] = EF_LANG_CODE_CH;\n\tAS_EF_LANG[CULTURE_CODE_ZH_TW] = EF_LANG_CODE_CH;\n\n\treturn {\n\t\t\"getBingLangByCultureCode\": function onGetBingLangByCultureCode(cultureCode) {\n\t\t\treturn AS_BING_LANG[cultureCode] || cultureCode;\n\t\t},\n\n\t\t\"getEFLangByCultureCode\": function onGetEFLangByCultureCode(cultureCode) {\n\t\t\treturn AS_EF_LANG[cultureCode] || cultureCode;\n\t\t},\n\n\t\t\"getBingLangByEFLang\": function onGetBingLangByEFLang(eflangCode) {\n\t\t\treturn AS_BING_LANG[eflangCode] || eflangCode;\n\t\t}\n\t};\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/translator/translator.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-ui-tts-translating\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"44578\\\" data-text-en=\\\"LOADING...Please wait\\\"></div>\\n<div class=\\\"ets-ui-tts-translation\\\"></div>\\n<div class=\\\"ets-ui-tts-translator-ft ets-none\\\">\\n    <div class=\\\"ets-ui-tts-notebook\\\"></div>\\n    <div class=\\\"ets-ui-tts-bing\\\"></div>\\n</div>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/translator/translation.html',[],function() { return function template(data) { var o = \"\";\n    var model = data || {},\n        isEnglish = model.isEnglish,\n        SEP_CHAR = isEnglish ? \"\" : \"; \",\n        result = model.result || {};\no += \"\\n<h5 class=\\\"ets-ui-tts-translation-hd\\\">\\n    <p class=\\\"ets-ui-tts-word\\\">\" +result.wordText+ \"</p>\\n    \"; if(result.uk) { o += \"\\n    <span class=\\\"ets-ui-tts-ipa-region\\\">UK</span>\\n    <span class=\\\"ets-ui-tts-ipa\\\">/\" +result.uk+ \"/</span>\\n    \";}o += \"\\n    \"; if(result.us) { o += \"\\n    <span class=\\\"ets-ui-tts-ipa-region\\\">US</span>\\n    <span class=\\\"ets-ui-tts-ipa\\\">/\" +result.us+ \"/</span>\\n    \";}o += \"\\n</h5>\\n<ul class=\\\"ets-ui-tts-translation-bd\" +(isEnglish ? \" ets-english\" : \"\")+ \"\\\">\\n    \"; renderTranslation(result.pos || []); o += \"\\n</ul>\\n\\n\"; function renderTranslation(posList) {\n    var posCount = posList.length;\n    for(var i = 0; i < posCount; i++) {\n        renderPartOfSpeech(posList[i]);\n    }\n}o += \"\\n\\n\"; function renderPartOfSpeech(pos) { o += \"\\n<li class=\\\"ets-ui-tts-word-pos\\\">\\n    <p>\" +pos.partOfSpeech+ \"</p>\\n    <ul class=\\\"ets-ui-tts-word-sense\\\">\\n        \"; renderDefinition(pos.definitions || []); o += \"\\n    </ul>\\n</li>\\n\";}o += \"\\n\\n\";\n// For English layout : <li>definition1</li><li>definition2</li>\n// Non English layout : <li>definition1; definition2</li>\nfunction renderDefinition(definitions) {\n    var index = 0,\n        count = definitions.length,\n        outerLoopCount = isEnglish ? count : (count > 0 ? 1 : 0),\n        innerLoopCount = count - outerLoopCount + 1;\n    for(var i = 0; i < outerLoopCount; i++) {\no += \"\\n<li class=\\\"ets-ui-tts-word-def\\\">\\n    \"; for(var j = 0; j < innerLoopCount; j++) { o += \"\\n    \" +definitions[index++]+ \"\" +SEP_CHAR+ \"\\n    \";}o += \"\\n</li>\\n\";}} return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/translator/notebook.html',[],function() { return function template(data) { var o = \"\";\n    var NOTEBOOK_TIP = \"Add to My Notebook\";\n    var model = data || {},\n        wordGroupList = model.wordGroups || [],\n        wordGroupCount = wordGroupList.length,\n        wordGroup;\no += \"\\n\";if(model.enableTranslatorDetail) {o += \"<a class=\\\"ets-ui-tts-detail-btn\\\" href=\\\"javascript:void(0)\\\" data-action=\\\"open/translator\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"163088\\\" data-text-en=\\\"Details\\\"></a>\";}o += \"\\n<div class=\\\"ets-ui-tts-wordgroup\\\">\\n    <span class=\\\"ets-ui-tts-notebook-tip ets-ui-tts-toggle-wordgroup\\\" data-action=\\\"notebook/toggle/wordgroup\\\">\" +NOTEBOOK_TIP+ \"</span>\\n    <ul class=\\\"ets-ui-tts-wordgroup-list\\\">\\n        <li class=\\\"ets-ui-tts-wordgroup-tip ets-ui-tts-toggle-wordgroup\\\" data-action=\\\"notebook/toggle/wordgroup\\\">\" +NOTEBOOK_TIP+ \"</li>\\n        \"; for(var i = 0; i < wordGroupCount; i++) {\n            wordGroup = wordGroupList[i];\n        o += \"\\n        <li class=\\\"ets-ui-tts-add-word\\\" data-action=\\\"notebook/add/word(wordGroupId)\\\" data-word-group-id=\\\"\" +wordGroup.wordGroup_id+ \"\\\">\" +wordGroup.wordGroupName+ \"</li>\\n        \";}o += \"\\n    </ul>\\n</div>\\n<p class=\\\"ets-ui-tts-notebook-msg ets-done\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167354\\\" data-text-en=\\\"Add success!\\\"></p>\\n<p class=\\\"ets-ui-tts-notebook-msg ets-fail\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"167355\\\" data-text-en=\\\"Add failure, please try again!\\\"></p>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/tts/translator/bing.html',[],function() { return function template(data) { var o = \"\";\n    var model = data,\n        langList = model.languageList,\n        langCount = langList.length,\n        lang, langCode;\no += \"\\n<div class=\\\"ets-ui-tts-bing-logo\\\">Powered by Microsoft<sup> &copy; </sup>Translator</div>\\n<div class=\\\"ets-ui-tts-bing-lang\\\">\\n    <span class=\\\"ets-ui-tts-bing-tip\\\" data-action=\\\"bing/toggle/lang\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"163091\\\" data-text-en=\\\"Translate to\\\"></span>\\n    <ul class=\\\"ets-ui-tts-bing-lang-list\\\">\\n        \"; for(var i = 0; i < langCount; i++) {\n            lang = langList[i];\n            langCode = lang.cultureCode;\n        o += \"\\n        <li data-lang-code=\\\"\" +langCode+ \"\\\" class=\\\"ets-ui-tts-bing-translate \" +(langCode === 'en' ? 'ets-selected' : '')+ \"\\\" data-action=\\\"bing/translate(langCode)\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +lang.text+ \"\\\"></li>\\n        \";}o += \"\\n    </ul>\\n</div>\"; return o; }; });\n","/**\n * TTS translator module definition\n */\ndefine('school-ui-shared/tts/translator/main',[\n\t\"jquery\",\n\t\"when\",\n\t'logger',\n\t\"troopjs-ef/component/widget\",\n\t\"template!./translator.html\",\n\t\"template!./translation.html\",\n\t\"template!./notebook.html\",\n\t\"template!./bing.html\",\n\t\"./lang-helper\"\n], function TTSTranslatorModule(\n\t$,\n\twhen,\n\tLogger,\n\tWidget,\n\ttTranslator,\n\ttTranslation,\n\ttNotebook,\n\ttBing,\n\tLangHelper\n) {\n\t\"use strict\";\n\tvar $ELEMENT = \"$element\";\n\n\tvar DOT = \".\",\n\t\tNULL = null,\n\t\tLANG_EN = \"en\",\n\t\tDEFAULT_WORDGROUP_NAME = \"from translator\";\n\n\tvar CLS_SELECTED = \"ets-selected\",\n\t\tCLS_EXPANDED = \"ets-expanded\",\n\t\tCLS_LOADING = \"ets-loading\",\n\t\tCLS_NONE = \"ets-none\",\n\t\tCLS_BING = \"ets-bing\",\n\t\tCLS_DONE = \"ets-done\",\n\t\tCLS_FAIL = \"ets-fail\";\n\n\tvar SEL_TRANSLATION = \".ets-ui-tts-translation\",\n\t\tSEL_TRANSLATOR_FOOT = \".ets-ui-tts-translator-ft\",\n\t\tSEL_NOTEBOOK = \".ets-ui-tts-notebook\",\n\t\tSEL_WORDGROUP = \".ets-ui-tts-wordgroup\",\n\t\tSEL_NOTEBOOK_MSG = \".ets-ui-tts-notebook-msg\",\n\t\tSEL_BING = \".ets-ui-tts-bing\",\n\t\tSEL_BING_LANG = \".ets-ui-tts-bing-lang\";\n\n\tvar TOPIC_ADD_USER_WORDGROUP = \"school/notebook/AddUserWordGroup\",\n\t\tTOPIC_ADD_WORDS_TO_USER_WORDGROUP = \"school/notebook/AddWordsToUserWordGroup\",\n\t\tTOPIC_SET_TTS_URL = \"tts/set/url\",\n\t\tTOPIC_SET_ENGLISH = \"tts/set/english\",\n\t\tTOPIC_GET_TRANSLATION_ERROR = \"tts/get/translation/error\",\n\t\tTOPIC_OPEN_TRANSLATOR = \"tts/open/translator\";\n\n\tvar QUERY_TOOLKIT_CONTEXT = \"toolkit_context!current\",\n\t\tQUERY_NOTEBOOK_WORDGROUP = \"notebook_wordgroup!current\",\n\t\tQUERY_PREFIX_TOOLKIT_TRANSLATION = \"toolkit_translation!\";\n\n\tvar MAX_LOG_TEXT_LEN = 30;\n\n\t/*!\n\t * widget data key\n\t */\n\tvar CULTURE_CODE = \"_cultureCode\",\n\t\tBING_LANG_TO = \"_bingLangTo\";\n\n\tfunction init() {\n\t\tvar me = this;\n\t\ttoggleFoot.call(me, false, false);\n\n\t\tif (me._inited) {\n\t\t\treturn when.resolve();\n\t\t}\n\n\t\treturn me.query(QUERY_TOOLKIT_CONTEXT)\n\t\t\t.spread(function doneQuery(result) {\n\t\t\t\tif (result) {\n\t\t\t\t\tme.publish(TOPIC_SET_TTS_URL, result.speechServerUrl);\n\t\t\t\t\tme._languageList = result.lngs || [];\n\t\t\t\t}\n\t\t\t\tme._inited = true;\n\t\t\t}, function failCall() {\n\t\t\t\tme._inited = false;\n\t\t\t});\n\t}\n\n\tfunction reset() {\n\t\tvar me = this;\n\t\tme[$ELEMENT]\n\t\t\t.find(SEL_NOTEBOOK_MSG)\n\t\t\t.stop(true, true)\n\t\t\t.hide();\n\n\t\ttoggleWordGroup.call(me, false);\n\t\ttoggleLanguage.call(me, false);\n\t}\n\n\tfunction toggleFoot(show, bing) {\n\t\tthis[$ELEMENT]\n\t\t\t.find(SEL_TRANSLATOR_FOOT)\n\t\t\t.toggleClass(CLS_NONE, !show)\n\t\t\t.toggleClass(CLS_BING, !!bing);\n\t}\n\n\tfunction renderNotebook(wordText) {\n\t\tvar me = this;\n\t\t//Save for add to notebook\n\t\tme._wordText = wordText;\n\t\treturn when.resolve()\n\t\t\t.then(function () {\n\t\t\t\tif (me._notebookRendered) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tme._notebookRendered = true;\n\t\t\t\treturn loadWordGroup.call(me)\n\t\t\t\t\t.then(function doneCall(wordGroups) {\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\"wordGroups\": wordGroups || [],\n\t\t\t\t\t\t\t\"enableTranslatorDetail\": me[$ELEMENT].data(\"enableTranslatorDetail\")\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn me[$ELEMENT]\n\t\t\t\t\t\t\t.find(SEL_NOTEBOOK)\n\t\t\t\t\t\t\t.html(tNotebook(data))\n\t\t\t\t\t\t\t.find(\"*\")\n\t\t\t\t\t\t\t.weave();\n\t\t\t\t\t}, function failCall() {\n\t\t\t\t\t\tme._notebookRendered = false;\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\ttoggleFoot.call(me, true, false);\n\t\t\t});\n\t}\n\n\tfunction loadWordGroup() {\n\t\tvar me = this;\n\t\treturn me.query(QUERY_NOTEBOOK_WORDGROUP)\n\t\t\t.spread(function doneQuery(wordGroup) {\n\t\t\t\tvar result = wordGroup && wordGroup.result;\n\t\t\t\tif (result && result.length > 0) {\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\"groupName\": DEFAULT_WORDGROUP_NAME\n\t\t\t\t\t};\n\t\t\t\t\treturn me.publish(TOPIC_ADD_USER_WORDGROUP, data)\n\t\t\t\t\t\t.spread(function doneUpdate(added) {\n\t\t\t\t\t\t\tadded = added && (added[0] || added);\n\t\t\t\t\t\t\tif (added && added.isSuccess) {\n\t\t\t\t\t\t\t\tresult = [{\n\t\t\t\t\t\t\t\t\t\"wordGroup_id\": added.result,\n\t\t\t\t\t\t\t\t\t\"wordGroupName\": DEFAULT_WORDGROUP_NAME\n\t\t\t\t\t\t\t\t}];\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new Error('cannot load word group');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tfunction toggleWordGroup(show) {\n\t\tthis[$ELEMENT]\n\t\t\t.find(SEL_WORDGROUP)\n\t\t\t.toggleClass(CLS_EXPANDED, show);\n\t}\n\n\tfunction renderBing() {\n\t\tvar me = this;\n\n\t\treturn when.resolve()\n\t\t\t.then(function () {\n\t\t\t\tif (me._bingRendered) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tme._bingRendered = true;\n\t\t\t\treturn when.resolve()\n\t\t\t\t\t.then(function () {\n\t\t\t\t\t\tif (me._languageList) {\n\t\t\t\t\t\t\treturn { \"lngs\": me._languageList };\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn me.query(QUERY_TOOLKIT_CONTEXT).spread(function (result) {\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t.then(function doneQuery(result) {\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\"languageList\": (result || {}).lngs || []\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn me[$ELEMENT]\n\t\t\t\t\t\t\t.find(SEL_BING)\n\t\t\t\t\t\t\t.html(tBing(data))\n\t\t\t\t\t\t\t.find(\"*\")\n\t\t\t\t\t\t\t.weave();\n\t\t\t\t\t}, function failQuery() {\n\t\t\t\t\t\tme._bingRendered = false;\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\ttoggleFoot.call(me, true, true);\n\t\t\t});\n\t}\n\n\tfunction toggleLanguage(show) {\n\t\tthis[$ELEMENT]\n\t\t\t.find(SEL_BING_LANG)\n\t\t\t.toggleClass(CLS_EXPANDED, show);\n\t}\n\n\tfunction addWordToWordGroup(wordGroupId, wordText) {\n\t\tvar me = this;\n\t\tvar $notebook = me[$ELEMENT].find(SEL_NOTEBOOK);\n\t\tvar showMessage = function (success) {\n\t\t\t$notebook\n\t\t\t\t.find(SEL_NOTEBOOK_MSG + DOT + (success ? CLS_DONE : CLS_FAIL))\n\t\t\t\t.stop(true, true)\n\t\t\t\t.show()\n\t\t\t\t.delay(1000)\n\t\t\t\t.fadeOut(2000);\n\t\t};\n\n\t\ttoggleWordGroup.call(me, false);\n\n\t\tvar data = {\n\t\t\t\"wordGroup_id\": wordGroupId,\n\t\t\t\"wordTexts\": [wordText || me._text]\n\t\t};\n\t\tme.publish(TOPIC_ADD_WORDS_TO_USER_WORDGROUP, data)\n\t\t\t.spread(function doneUpdate(added) {\n\t\t\t\tadded = added && (added[0] || added);\n\t\t\t\tif (added && added.isSuccess) {\n\t\t\t\t\tshowMessage.call(me, true);\n\t\t\t\t} else {\n\t\t\t\t\tshowMessage.call(me, false);\n\t\t\t\t}\n\t\t\t}, function failUpdate() {\n\t\t\t\tshowMessage.call(me, false);\n\t\t\t});\n\t}\n\n\tfunction toggleTranslating(translating) {\n\t\tthis[$ELEMENT].toggleClass(CLS_LOADING, translating);\n\t}\n\n\t/*!\n\t * translate text\n\t *\n\t * @param {String} text\n\t * @param {String} from, from bing lang code\n\t * @param {String} to, to bing lang code\n\t * @param {Object} deferred\n\t * @return {void}\n\t */\n\tfunction translate(text, to) {\n\t\tvar me = this;\n\n\t\treturn translateByBing.call(me, text, to)\n\t\t\t.catch(function failCall() {\n\t\t\t\treturn translateByEF.call(me, text);\n\t\t\t});\n\t}\n\n\tfunction translateByBing(text, to) {\n\t\tvar me = this;\n\t\tvar isEnglish = me[CULTURE_CODE] === LANG_EN;\n\t\t//if is en & without space & without num , we use ef tts\n\t\tif(isEnglish && !/\\s/.test(text) && !/\\d/.test(text)){\n\t\t\treturn when.reject(new Error('translate with ef tts'));\n\t\t}\n\t\tto = me[BING_LANG_TO] || to;\n\t\tlogBingTTS(text, me[CULTURE_CODE], to);\n\t\treturn me.query(QUERY_TOOLKIT_CONTEXT)\n\t\t\t.spread(function doneQueryToken(contextResult) {\n\t\t\t\tvar url = [\n\t\t\t\t\tcontextResult.translateTextAPIUrl + \"?appid=Bearer \" + encodeURIComponent(contextResult.AzureApiToken),\n\t\t\t\t\t\"text=\" + encodeURIComponent(text),\n\t\t\t\t\t\"to=\" + to\n\t\t\t\t].join(\"&\");\n\n\t\t\t\tvar options = {\n\t\t\t\t\t\"type\": \"GET\",\n\t\t\t\t\t\"url\": url,\n\t\t\t\t\t\"cache\": true\n\t\t\t\t};\n\n\t\t\t\treturn $.ajax(options);\n\t\t\t})\n\t\t\t.then(function doneQueryTranslate(result) {\n\t\t\t\tif (!result) {\n\t\t\t\t\tthrow new Error('cannot translate with bing');\n\t\t\t\t} else {\n\t\t\t\t\tvar translatedText = $(result).find('string').text();\n\t\t\t\t\tvar english = to === LANG_EN ? translatedText : (isEnglish ? text : \"\");\n\t\t\t\t\tif (english) {\n\t\t\t\t\t\tsetEnglish.call(me, english);\n\t\t\t\t\t}\n\t\t\t\t\trenderTranslation.call(me, encodeHtml(translatedText));\n\t\t\t\t\trenderBing.call(me);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tfunction logBingTTS(text, sourceLang, targetLang) {\n\t\tvar partialText = text.substr(0, MAX_LOG_TEXT_LEN);\n\t\tLogger.log('BingTTS chars=' + text.length + ' sourceLang=' + sourceLang + ' targetLang=' + targetLang + ' text=' + partialText);\n\t}\n\n\tfunction translateByEF(text) {\n\t\tvar me = this, regEn = /^([a-zA-Z`,.])+$/gim;\n\t\t//just pass pure letter\n\t\tif (regEn.test($.trim(text))) {\n\t\t\treturn me.query(QUERY_PREFIX_TOOLKIT_TRANSLATION + '\"' + text + '\"')\n\t\t\t\t.catch(function (e) {\n\t\t\t\t\trenderTranslation.call(me, NULL);\n\t\t\t\t\tthrow new Error('translate by ef error: ' + e);\n\t\t\t\t})\n\t\t\t\t.spread(function doneQuery(translation) {\n\t\t\t\t\tif (translation && translation.isFound) {\n\t\t\t\t\t\tvar result = (translation.result || [])[0] || {};\n\t\t\t\t\t\tvar wordText = result.wordText;\n\t\t\t\t\t\tresult.wordText = encodeHtml(wordText);\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\"isEnglish\": (me[CULTURE_CODE] || LANG_EN) === LANG_EN,\n\t\t\t\t\t\t\t\"result\": result\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsetEnglish.call(me, wordText || text);\n\t\t\t\t\t\trenderTranslation.call(me, tTranslation(data));\n\t\t\t\t\t\trenderNotebook.call(me, wordText);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trenderTranslation.call(me, NULL);\n\t\t\t\t\t\treturn when.reject(new Error('cannot translate by ef'));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse {\n\t\t\trenderTranslation.call(me, NULL);\n\t\t\treturn when.reject(new Error('cannot translate by ef'));\n\t\t}\n\t}\n\n\tfunction renderTranslation(translation) {\n\t\tvar me = this;\n\t\tif (translation === NULL) {\n\t\t\tme.publish(TOPIC_GET_TRANSLATION_ERROR)\n\t\t\t\t.then(function doneCall(errorMessage) {\n\t\t\t\t\ttranslation = errorMessage;\n\t\t\t\t});\n\t\t}\n\t\tme[$ELEMENT]\n\t\t\t.find(SEL_TRANSLATION)\n\t\t\t.html(translation);\n\t}\n\n\tfunction setEnglish(english) {\n\t\tthis.publish(TOPIC_SET_ENGLISH, english);\n\t}\n\n\tfunction encodeHtml(text) {\n\t\treturn (\"\" + text).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n\t}\n\n\treturn Widget.extend({\n\t\t\"sig/initialize\": function onInit() {\n\t\t\treturn this.html(tTranslator);\n\t\t},\n\n\t\t\"hub/tts/translator/reset\": function onReset() {\n\t\t\treset.call(this);\n\t\t},\n\n\t\t\"hub/tts/translator/translate\": function onTranslate(text, cultureCode) {\n\t\t\tvar me = this;\n\t\t\tvar to = me[BING_LANG_TO] || LANG_EN;\n\n\t\t\tme._text = text;\n\t\t\tme[CULTURE_CODE] = cultureCode;\n\n\t\t\ttoggleTranslating.call(me, true);\n\t\t\treturn init.call(me)\n\t\t\t\t.then(function doneCall() {\n\t\t\t\t\treturn translate.call(me, me._text, to);\n\t\t\t\t})\n\t\t\t\t.ensure(function alwaysCall() {\n\t\t\t\t\ttoggleTranslating.call(me, false);\n\t\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-toggle-wordgroup/click\": function onToggleWordGroup() {\n\t\t\ttoggleWordGroup.call(this);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-add-word/click\": function onAddWord($event) {\n\t\t\tvar me = this;\n\t\t\tvar $elem = $($event.currentTarget);\n\t\t\taddWordToWordGroup.call(me, $elem.data('wordGroupId'), me._wordText);\n\t\t\t//send useraction tracking\n\t\t\tme.publish(\"tracking/useraction\", {\n\t\t\t\t\"action.translateAddtoNotebook\": \"1\"\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-detail-btn/click\": function onOpenTranslator() {\n\t\t\tthis.publish(TOPIC_OPEN_TRANSLATOR);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-bing-tip/click\": function onBingToggleLang() {\n\t\t\ttoggleLanguage.call(this);\n\t\t},\n\n\t\t\"dom:.ets-ui-tts-bing-translate/click\": function onBingTranslate($event) {\n\t\t\tvar me = this;\n\t\t\tvar $lang = $($event.currentTarget);\n\t\t\tvar to = me[BING_LANG_TO] = LangHelper.getBingLangByEFLang($lang.data('langCode'));\n\n\t\t\tif (!$lang.hasClass(CLS_SELECTED)) {\n\t\t\t\t$lang.parent().find(DOT + CLS_SELECTED).removeClass(CLS_SELECTED);\n\t\t\t\t$lang.addClass(CLS_SELECTED);\n\t\t\t}\n\n\t\t\ttoggleLanguage.call(me, false);\n\t\t\ttoggleTranslating.call(me, true);\n\t\t\ttranslate.call(me, me._text, to)\n\t\t\t\t.ensure(function alwaysCall() {\n\t\t\t\t\ttoggleTranslating.call(me, false);\n\t\t\t\t});\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/utils/audio-output',[\n\t'when'\n], function (when) {\n\tvar HAS_ENUMERATE_DEVICES = Boolean(navigator.mediaDevices) &&\n\t\ttypeof navigator.mediaDevices.enumerateDevices === 'function';\n\n\tvar MP3_DATA_URI = 'data:audio/mpeg;base64,/+OIxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+OIxAAAAANIAAAAAExBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV';\n\n\tvar body = document.body;\n\n\tfunction canPlayAudio() {\n\t\treturn when\n\t\t\t.promise(function (resolve, reject) {\n\t\t\t\tvar audio = document.createElement('audio');\n\t\t\t\tif (!audio.canPlayType('audio/mpeg')) {\n\t\t\t\t\treject(new Error('cannot play mp3'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\taudio.addEventListener('error', function (event) {\n\t\t\t\t\tif (event.srcElement && event.srcElement.error &&\n\t\t\t\t\t\tevent.srcElement.error.code === MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED) {\n\t\t\t\t\t\tresolve(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(new Error('Unexpected audio error ' + event));\n\t\t\t\t\t}\n\t\t\t\t\tbody.removeChild(audio);\n\t\t\t\t});\n\t\t\t\taudio.addEventListener('play', function () {\n\t\t\t\t\tresolve(true);\n\t\t\t\t\tbody.removeChild(audio);\n\t\t\t\t});\n\t\t\t\taudio.autoplay = true;\n\t\t\t\taudio.src = MP3_DATA_URI;\n\t\t\t\tbody.appendChild(audio);\n\t\t\t});\n\t}\n\n\tfunction hasAudioOutput() {\n\t\tif (HAS_ENUMERATE_DEVICES) {\n\t\t\treturn when.resolve()\n\t\t\t\t.then(function () { // encapsulate in then() to catch exceptions\n\t\t\t\t\treturn navigator.mediaDevices.enumerateDevices();\n\t\t\t\t})\n\t\t\t\t.then(function (devices) {\n\t\t\t\t\treturn devices.reduce(function (hasOutputDevices, device) {\n\t\t\t\t\t\treturn hasOutputDevices || device.kind === 'audiooutput';\n\t\t\t\t\t}, false);\n\t\t\t\t});\n\t\t} else {\n\t\t\treturn when.resolve();\n\t\t}\n\t}\n\n\treturn {\n\t\thasAudioOutput: hasAudioOutput,\n\t\tcanPlayAudio: canPlayAudio\n\t};\n});\n\n","define('school-ui-shared/utils/browser-check',[],function(){\n    // mapping from https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx#TriToken\n    var TRIDENT_TO_MSIE = {\n        '4': '8.0',\n        '5': '9.0',\n        '6': '10.0',\n        '7': '11.0',\n        '8': '11.0' // see http://answers.microsoft.com/en-us/ie/forum/ie11-iewindows_10/trident-version-being-reported-as-trident80-in/00091417-43c7-4f60-9198-f6634cd1c352\n    };\n\n    function parseUserAgent(userAgent) {\n        var ua = userAgent.toLowerCase();\n\n        var match = /(edge)\\/([\\w.]+)/.exec(ua) ||    //make sure test edge before Chrome, because \"chrome\" keyword is in Edge's UA\n            /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(firefox)[ \\/]([\\w.]+)/.exec(ua) ||\n            /version\\/([\\d|.]+)(?: mobile\\/[\\w.]+)? (safari)/.exec(ua) ||\n            /(webkit)[ \\/]([\\w.]+)/.exec(ua) ||\n            /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) ||\n            // use to check compatible mode in ie\n            /(?:(msie) ([\\d.]+).*)?(trident)\\/(\\d+)/.exec(ua) ||\n            /(msie) ([\\w.]+)/.exec(ua) ||\n            [];\n\n        var compatibilityMode = false;\n        var actualVersionOfCompatibility = null;\n\n        if (match[2] === \"safari\") {\n            match[2] = match[1];\n            match[1] = \"safari\";\n        } else if (match[3] === \"trident\") {\n            var actualMsieVersion = TRIDENT_TO_MSIE[match[4]];\n            if (!match[1]) {\n                match[1] = \"msie\";\n                match[2] = actualMsieVersion;\n            }\n            compatibilityMode = ua.indexOf('compatible') >= 0\n                && match[2] !== actualMsieVersion; // IE9 reports itself has \"compatible\" in default mode\n            if (compatibilityMode) {\n                actualVersionOfCompatibility = parseFloat(actualMsieVersion);\n            }\n        }\n\n        // TODO: if we need to check anyother OS, add here\n        var platform = /(ipad)[\\S\\s]*os (\\d+)_(\\d+)/.exec(ua) ||\n            /(iphone)[\\S\\s]*os (\\d+)_(\\d+)/.exec(ua) ||\n            //this is recommend by google, but unfortunately, few browser to follow it.\n            /(android)[\\S\\s]*(mobile)/.exec(ua) ||\n            /(android)[\\S\\s]*(?!mobile)/.exec(ua) ||\n            //kindle fire, so special\n            /(kfjwi) /.exec(ua) ||\n            /(kftt) /.exec(ua) ||\n            /(kfot) /.exec(ua) ||\n            [];\n\n        var os = platform[1];\n\n        var device = \"pc\";\n\n        if (os === \"android\" || os === \"kfjwi\" || os === \"kftt\" || os === \"kfot\") {\n            var screen = window.screen,\n                screenW = screen.width,\n                screenH = screen.height,\n                minSize = Math.min(screenW, screenH);\n                device = minSize >= 512 ? \"tablet\" : \"mobile\";\n                os = \"android\";\n        }\n        else if (os === \"ipad\") {\n            device = \"tablet\";\n            os = \"ios\";\n        }\n        else if (os === \"iphone\") {\n            device = \"mobile\";\n            os = \"ios\";\n        }\n\n\t    if (device === \"pc\" && !os) {\n\t\t    if (/mac os x/i.test(ua)) {\n\t\t\t    os = \"osx\";\n\t\t    } else if (/windows/i.test(ua)) {\n\t\t\t    os = \"windows\";\n\t\t    }\n\t    }\n\n        return {\n            browser: match[1] || \"\",\n            version: match[2] || \"0.0\",\n            os: os,\n            device: device,\n            compatibilityMode: compatibilityMode,\n            actualVersionOfCompatibility: actualVersionOfCompatibility\n        };\n    }\n\n    var result = parseUserAgent(navigator.userAgent);\n    result.parseUserAgent = parseUserAgent; // for tests\n    return result;\n});\n\n","define('school-ui-shared/utils/ccl',[\n\t\"jquery\",\n\t\"troopjs-ef/component/gadget\",\n\t\"school-ui-shared/utils/query-builder\"\n], function CCLUtilModule($, Gadget, queryBuilder) {\n\t\"use strict\";\n\n\tvar ARRAY_SLICE = Array.prototype.slice;\n\n\treturn Gadget.create({\n\t\tenableLockUnit: function enableLockUnit(queryResult) {\n\t\t\treturn (queryResult || {}).value === \"false\";\n\t\t},\n\n\t\tgetCCLByKey : function onGetCCLByKey(key){\n\t\t\tvar me = this;\n\t\t\tvar args = ARRAY_SLICE.call(arguments);\n\n\t\t\t$.each(args,function(key,val){\n\t\t\t\targs[key] = queryBuilder.buildCCLQuery(val);\n\t\t\t});\n\n\t\t\treturn me.query(args);\n\t\t},\n\t\tindicateCCLStringValue: function(queryResult) {\n\t\t\treturn (queryResult || {}).value.toLowerCase() === \"true\";\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/utils/feature-access',[\"school-ui-shared/enum/feature-access-id\"], function(FeatureAccessId){\n\t//var featureBits = \"\\u0000\\u0002\\u0070\\u0040\\u0019\";//get from service\n\tvar cache = {},\n\t\tFEATURE_UNICODE = \"unicode\";\n\n\tfunction validate(featureAccessId){\n\t\t// featureAccessId is always >= 1\n\t\tvar quotient = Math.floor(featureAccessId / 16),\n\t\t\tremainder = featureAccessId % 16 || 16;\n\n\t\treturn (cache[FEATURE_UNICODE].charCodeAt(quotient) & (1 << (remainder-1))) ? true : false;\n\t}\n\n\treturn {\n\t\tvalidateFeatureByte: function validateFeatureByte(featureAccessId){\n\t\t\treturn validate(featureAccessId);\n\t\t},\n\t\thasWritingClassFeature:function hasWritingClassFeature(){\n\t\t\tvar WRT_LIMT = \"Writing class limited\",\n\t\t\t\tWRT_UNLIMT = \"Writing class unlimited\";\n\n\t\t\treturn validate(FeatureAccessId[WRT_LIMT]) || validate(FeatureAccessId[WRT_UNLIMT]);\n\t\t},\n\t\thasGLClassFeature: function () {\n\t\t\tvar GL = \"Group discussion\",\n\t\t\t\tGL_UNLIMIT = \"Group discussion (unlimited)\",\n\t\t\t\tGL_UPSELL = \"Group discussion upsell\";\n\n\t\t\treturn validate(FeatureAccessId[GL]) ||\n\t\t\t\tvalidate(FeatureAccessId[GL_UNLIMIT]) ||\n\t\t\t\tvalidate(FeatureAccessId[GL_UPSELL]);\n\t\t},\n\t\thasPLClassFeature: function () {\n\t\t\tvar PL = \"Private lesson\",\n\t\t\t\tPL_MOVEON = \"Private Lesson 40 - Unit Move On\";\n\n\t\t\treturn validate(FeatureAccessId[PL]) ||\n\t\t\t\tvalidate(FeatureAccessId[PL_MOVEON]);\n\t\t},\n\t\thasCP20ClassFeature: function () {\n\t\t\tvar PL20 = \"Private Lesson 20\",\n\t\t\t\tPL20_MOVEON = \"Private Lesson 20 - Unit Move On\",\n\t\t\t\tCP20 = \"Check Point 20\",\n\t\t\t\tCP20_UNLIMIT = \"Check Point 20 (unlimited)\";\n\n\t\t\treturn validate(FeatureAccessId[PL20]) ||\n\t\t\t\tvalidate(FeatureAccessId[PL20_MOVEON]) ||\n\t\t\t\tvalidate(FeatureAccessId[CP20]) ||\n\t\t\t\tvalidate(FeatureAccessId[CP20_UNLIMIT]);\n\t\t},\n\t\thasEFTClassFeature: function () {\n\t\t\tvar EFT = \"EFT\";\n\t\t\treturn validate(FeatureAccessId[EFT]);\n\t\t},\n\t\tsetFeaturesUnicode: function setFeaturesUnicode(featureAccessId){\n\t\t\tcache[FEATURE_UNICODE] = featureAccessId;\n\t\t},\n\t\tgetFeaturesUnicode: function getFeaturesUnicode(){\n\t\t\treturn cache[FEATURE_UNICODE];\n\t\t}\n\t}\n});\n","// adjust viewport meta tag for mobile devices\n// that screen width is less than minimal requirement\ndefine('school-ui-shared/utils/fix-viewport',[\n\t'./browser-check'\n], function (browserCheck) {\n\tvar VIEWPORT = 'viewport';\n\n\tvar HTML_MIN_WIDTH = parseInt(getComputedStyle(document.documentElement).minWidth, 10) || 0;\n\tvar BODY_MIN_WIDTH = parseInt(getComputedStyle(document.body).minWidth, 10) || 0;\n\tvar MIN_REQUIRED_WIDTH = 1010;  //10px for ePaper handler\n\tvar MIN_WIDTH = Math.max(HTML_MIN_WIDTH, BODY_MIN_WIDTH, MIN_REQUIRED_WIDTH);\n\n\tvar _metaViewport;\n\tvar _initialSettings = '';\n\n\tfunction _getMetaViweport() {\n\t\tif (!_metaViewport) {\n\t\t\t_metaViewport = document.querySelector('meta[name=' + VIEWPORT + ']');\n\n\t\t\tif (!_metaViewport) {\n\t\t\t\t_metaViewport = document.createElement('meta');\n\t\t\t\t_metaViewport.name = VIEWPORT;\n\t\t\t\t(document.head || document.getElementsByTagName('head')[0]).appendChild(_metaViewport);\n\t\t\t}\n\t\t}\n\n\t\treturn _metaViewport;\n\t}\n\n\tfunction _doFixViewPort() {\n\t\tvar newSettings = screen.width >= MIN_WIDTH ?\n\t\t\t_initialSettings :\n\t\t\t'width=' + MIN_WIDTH + ',user-scalable=no';\n\n\t\tvar metaViewport = _getMetaViweport();\n\t\tmetaViewport.content = newSettings;\n\t}\n\n\tfunction fixViewPort() {\n\t\tvar device = browserCheck.device;\n\t\tif (device !== 'tablet' && device !== 'mobile') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!screen.width || !screen.height) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (screen.width >= MIN_WIDTH && screen.height >= MIN_WIDTH) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar metaViewport = _getMetaViweport();\n\t\t_initialSettings = metaViewport.content;\n\n\t\t_doFixViewPort();\n\n\t\tif (\n\t\t\t(screen.width >= MIN_WIDTH && screen.height < MIN_WIDTH) ||\n\t\t\t(screen.height >= MIN_WIDTH && screen.width < MIN_WIDTH)\n\t\t) {\n\t\t\twindow.addEventListener(\"orientationchange\", _doFixViewPort);\n\t\t}\n\t}\n\n\treturn fixViewPort;\n});\n","define('school-ui-shared/utils/https-compatibility',[\n\t'troopjs-core/pubsub/hub',\n\t'logger'\n], function HttpsCompatibility(Hub, Logger) {\n\t\"use strict\";\n\n\tvar loc = window.location;\n\n\tif (loc.protocol !== 'https:') {\n\t\treturn;\n\t}\n\n\tvar whitelist = null;\n\tvar prefix = 'http://' + loc.hostname;\n\n\tfunction onContext() {\n\t\tHub.publish('query', 'https_compatible_urls!current')\n\t\t\t.spread(function (whitelistResponse) {\n\t\t\t\twhitelist = whitelistResponse && whitelistResponse.result || null;\n\t\t\t});\n\t}\n\n\tHub.subscribe('context', Hub, onContext);\n\tHub.reemit('context', false, Hub, onContext);\n\n\tfunction isWhitelisted(url) {\n\t\tif (!whitelist) {\n\t\t\tLogger.log('HTTPS whitelist not yet loaded');\n\t\t\treturn true;\n\t\t}\n\t\tif (url.length === 0 || url.charAt(0) !== '/') {\n\t\t\treturn true;\n\t\t}\n\t\tfor (var i = 0; i < whitelist.length; ++i) {\n\t\t\tif (url.indexOf(whitelist[i]) === 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction handleEvent(event) {\n\t\tvar node = event.target;\n\t\twhile (node && node.tagName !== 'A') {\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\tif (node) {\n\t\t\tvar href = node.getAttribute('href') || '';\n\t\t\tif (!isWhitelisted(href)) {\n\t\t\t\tnode.setAttribute('href', prefix + href);\n\t\t\t}\n\t\t}\n\t}\n\n\tdocument.body.addEventListener('focus', handleEvent, true);\n\tdocument.body.addEventListener('click', handleEvent, false);\n\n\n\tfunction patchOpenFunction(thisWindow, open) {\n\t\treturn function (url) {\n\t\t\tif (!isWhitelisted(url)) {\n\t\t\t\t// force http\n\t\t\t\tvar fixedArgs = Array.prototype.slice.call(arguments, 1);\n\t\t\t\tfixedArgs.unshift(prefix + url);\n\t\t\t\treturn open.apply(thisWindow, fixedArgs);\n\t\t\t}\n\t\t\t// default behaviour\n\t\t\treturn open.apply(thisWindow, arguments);\n\t\t};\n\t}\n\n\twindow.open = patchOpenFunction(window, window.open);\n\n\n\t// Special case for window.parent.open used in legacy code to\n\t// open /translator/ page, we want to force http only in this case\n\tfunction patchParentOpenTranslatorFunction(thisWindow, open) {\n\t\treturn function (url, windowName) {\n\t\t\tif (url.indexOf('/translator/') === 0 && windowName === 'Translator') {\n\t\t\t\t// force http\n\t\t\t\tvar fixedArgs = Array.prototype.slice.call(arguments, 1);\n\t\t\t\tfixedArgs.unshift(prefix + url);\n\t\t\t\treturn open.apply(thisWindow, fixedArgs);\n\t\t\t}\n\t\t\t// default behaviour\n\t\t\treturn open.apply(thisWindow, arguments);\n\t\t};\n\t}\n\n\tif (window.parent !== window) {\n\t\ttry {\n\t\t\twindow.parent.open = patchParentOpenTranslatorFunction(window.parent, window.parent.open);\n\t\t} catch (ignored) {\n\t\t\t// probably cross-origin parent\n\t\t}\n\t}\n});\n\n","define('school-ui-shared/utils/hub-memory',[\n\t\"troopjs-core/pubsub/hub\"\n], function (Hub) {\n\n\treturn {\n\t\treadMemory: function (topic) {\n\t\t\tvar result;\n\t\t\tvar callback = function (value) {\n\t\t\t\tresult = value;\n\t\t\t};\n\t\t\t// Use \"callback\" as context to ensure it doesn't conflict with another subscription\n\t\t\tHub.subscribe(topic, callback, callback);\n\t\t\tHub.reemit(topic, false, callback, callback);\n\t\t\tHub.unsubscribe(topic, callback, callback);\n\t\t\treturn result;\n\t\t}\n\t}\n\n});\n\n","define('hyphenate-Hyphenator', [\"shadow!hyphenator#exports=Hyphenator\"], function (Hyphenator) {\n\treturn Hyphenator;\n});\n\ndefine('school-ui-shared/utils/hyphenate',[\n\t\"require\",\n\t\"poly\",\n\t\"when\",\n\t\"troopjs-ef/component/gadget\",\n\t\"../enum/hyphenator-languages\"\n\t//Don't depend on Hyphenator here, require the lib only if actually needed\n], function (require, poly, when, Gadget, HyphenatorLanguages) {\n\n\tvar loadedLanguages = {};\n\n\tfunction loadLanguage(hyphenatorLanguage) {\n\t\tif (hyphenatorLanguage in loadedLanguages) {\n\t\t\treturn loadedLanguages[hyphenatorLanguage];\n\t\t}\n\t\tvar promise = when.promise(function (resolve) {\n\t\t\trequire([\n\t\t\t\t\"shadow!hyphenator/patterns/\" + hyphenatorLanguage + \"#Hyphenator=hyphenate-Hyphenator&exports=Hyphenator\"\n\t\t\t], resolve);\n\t\t});\n\t\tloadedLanguages[hyphenatorLanguage] = promise;\n\t\treturn promise;\n\t}\n\n\tvar currentLanguageDefer = when.defer();\n\n\tvar gadget = Gadget.create({\n\t\t\"hub:memory/context\": function (context) {\n\t\t\tcurrentLanguageDefer.resolver.resolve(context.cultureCode);\n\t\t},\n\t\t\"hyphenate\": function (text) {\n\t\t\tvar languagePromise = currentLanguageDefer.promise;\n\t\t\treturn languagePromise.then(function (language) {\n\t\t\t\tvar hyphenatorLanguage = HyphenatorLanguages[language.toLowerCase()];\n\t\t\t\tif (hyphenatorLanguage) {\n\t\t\t\t\treturn loadLanguage(hyphenatorLanguage).then(function (Hyphenator) {\n\t\t\t\t\t\ttext = Hyphenator.hyphenate(text, hyphenatorLanguage) || text;\n\t\t\t\t\t\treturn [text];\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn [text];\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tgadget.start();\n\n\treturn gadget;\n});\n","define('school-ui-shared/utils/language-fixing',[\"poly/array\"],\n\tfunction () {\n\t\tvar CLS_ARABIC_FIX = \"ets-ui-arabic-fix\";\n\n\t\tfunction arabicFix(el, data) {\n\t\t\t// Add rtl direction in Arabic-English mixing layout\n\t\t\tArray.prototype.every.call(data, function (e, i) {\n\t\t\t\tif (e.charCodeAt(0) > 160) {\n\t\t\t\t\tel.addClass(CLS_ARABIC_FIX);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\n\t\treturn function (el, data, cultureCode) {\n\t\t\tif (/^ar/.test(cultureCode)) {\n\t\t\t\tarabicFix(el, data);\n\t\t\t}\n\t\t}\n\t});\n","define('school-ui-shared/utils/location-helper',[], function () {\n\t//constructor\n\tfunction LocationHelper(initHref) {\n\t\tvar me = this;\n\t\tif (!(me instanceof LocationHelper)) {\n\t\t\treturn new LocationHelper(initHref);\n\t\t}\n\n\t\tme.link = document.createElement('a');\n\t\tif (initHref) {\n\t\t\tme.link.href = initHref;\n\t\t}\n\t}\n\n\t//common function\n\tLocationHelper.prototype.getUrl = function () {\n\t\treturn this.link.href;\n\t};\n\n\tLocationHelper.prototype.toString = LocationHelper.prototype.getUrl;\n\tLocationHelper.prototype.valueOf = LocationHelper.prototype.getUrl;\n\n\t//href\n\tLocationHelper.prototype.getHref = LocationHelper.prototype.getUrl;\n\tLocationHelper.prototype.setHref = function (value) {\n\t\tvar me = this;\n\t\tme.link.href = value;\n\t\treturn me;\n\t};\n\n\t//protocol\n\tLocationHelper.prototype.getProtocol = function () {\n\t\treturn this.link.protocol;\n\t};\n\tLocationHelper.prototype.setProtocol = function (value) {\n\t\tvar me = this;\n\t\tme.link.protocol = value;\n\t\treturn me;\n\t};\n\n\t//host\n\tLocationHelper.prototype.getHost = function () {\n\t\treturn this.link.host;\n\t};\n\tLocationHelper.prototype.setHost = function (value) {\n\t\tvar me = this;\n\t\tme.link.host = value;\n\t\treturn me;\n\t};\n\n\t//hostname\n\tLocationHelper.prototype.getHostname = function () {\n\t\treturn this.link.hostname;\n\t};\n\tLocationHelper.prototype.setHostname = function (value) {\n\t\tvar me = this;\n\t\tme.link.hostname = value;\n\t\treturn me;\n\t};\n\n\t//port\n\tLocationHelper.prototype.getPort = function () {\n\t\treturn this.link.port;\n\t};\n\tLocationHelper.prototype.setPort = function (value) {\n\t\tvar me = this;\n\t\tme.link.port = value;\n\t\treturn me;\n\t};\n\n\t//pathname\n\tLocationHelper.prototype.getPathname = function () {\n\t\treturn this.link.pathname;\n\t};\n\tLocationHelper.prototype.setPathname = function (value) {\n\t\tvar me = this;\n\t\tme.link.pathname = value;\n\t\treturn me;\n\t};\n\n\t//search\n\tLocationHelper.prototype.getSearch = function () {\n\t\treturn this.link.search;\n\t};\n\tLocationHelper.prototype.setSearch = function (value) {\n\t\tvar me = this;\n\t\tme.link.search = value;\n\t\treturn me;\n\t};\n\n\t//hash\n\tLocationHelper.prototype.getHash = function () {\n\t\treturn this.link.hash;\n\t};\n\tLocationHelper.prototype.setHash = function (value) {\n\t\tvar me = this;\n\t\tme.link.hash = value;\n\t\treturn me;\n\t};\n\n\treturn LocationHelper;\n});\n","define('school-ui-shared/utils/media-player',[\n\t\"jquery\",\n\t\"when\",\n\t\"troopjs-core/component/factory\",\n\t \"./browser-check\",\n\t\"./ccl\",\n\t\"../enum/ccl\"\n], function ($, when, Factory, BROWSERCHECK, CCL, ENUM) {\n    var VALUE = \"value\";\n    var SHIM = \"shim\";\n    var AUTO = \"auto\";\n    var TYPE = \"type\";\n    var BROWSER = \"browser\";\n    var VERSION = \"version\";\n    var PLAYER = \"player\";\n    var AUDIO = \"audio\";\n    var VIDEO = \"video\";\n\n    function player(type) {\n        // Quick fail if required parameter were not provided\n        if (!type) {\n            return when.reject(new Error(\"required parameters not provided\"));\n        }\n\n\t\t// Query CCL for rules\n\t\treturn CCL\n\t\t\t.getCCLByKey(ENUM.playerRules)\n            .spread(function (rules) {\n                // Parse rules\n                rules = rules\n                    && $.parseJSON(rules[VALUE]);\n\n                // Get browser and version from BROWSERCHECK\n                var browser = BROWSERCHECK[BROWSER];\n                var version = BROWSERCHECK[VERSION];\n\n                // Map players for combined rules\n                var players = $.map(rules || false, function (rule) {\n                    return rule\n                        && (!(TYPE in rule) || type === rule[TYPE])\n                        && (!(BROWSER in rule) || browser === rule[BROWSER])\n                        && (!(VERSION in rule) || version >= rule[VERSION])\n                        && rule[PLAYER];\n                });\n\n                // Resolve with last matched rule or SHIM\n                return players.pop() || SHIM;\n            });\n    }\n\n    var MediaPlayer = Factory.create({\n        \"videoPlayer\" : function () {\n            return player.call(this, VIDEO);\n        },\n\n        \"audioPlayer\" : function () {\n            return player.call(this, AUDIO);\n        }\n    });\n\n    MediaPlayer[SHIM] = SHIM;\n    MediaPlayer[AUTO] = AUTO;\n\n    return MediaPlayer;\n});\n","define('school-ui-shared/utils/media',[], function () {\n\t\"use strict\";\n\n\tfunction findErrorName(error) {\n\t\tvar code = error && error.code || null;\n\t\tvar result = typeof code === 'number' ? String(code) : null;\n\t\tvar ME = window.MediaError || {};\n\t\tObject.keys(ME).some(function (name) {\n\t\t\tif (name.indexOf('MEDIA_') === 0 && ME[name] === code) {\n\t\t\t\tresult = name;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\treturn result;\n\t}\n\n\treturn {\n\t\tfindErrorName: findErrorName\n\t};\n});\n\n","define('school-ui-shared/utils/path-formatter',[\"troopjs-ef/component/gadget\", \"./typeid-parser\"], function(Gadget, typeIdParser){\n\n\tvar UNDEF;\n\tvar URI = \"URI\";\n\tvar NUMBER_ANY = '234';\n\n\tvar EXPAND = [ , \"enrollment!$2\", \"course!$2\", \"level!$2\", \"unit!$2\", \"lesson!$2\", \"step!$2\", \"activity!$2.activityContent\" ];\n\tvar PLACEHOLDER_ID = '$2';\n\tvar PREFIX = [];\n\tvar PREFIX_POSITION = {};\n\tvar inited = false;\n\n\t/**\n\t * update uri according to the IDs that passed in.\n\t * @param IDs\n\t */\n\tfunction routeUri() {\n\t\tvar me = this;\n\t\tvar uri = me[URI];\n\t\tvar path = uri.path || [];\n\t\tvar length = 0;\n\n\t\t$.each(arguments, function (i, entity) {\n\t\t\tvar matches = typeIdParser.parse(entity);\n\t\t\tvar type;\n\t\t\tvar id;\n\t\t\tvar position;\n\n\t\t\t// Is this an entity\n\t\t\tif (matches) {\n\t\t\t\ttype = matches.type;\n\t\t\t\tid = matches.id || \"\";\n\n\t\t\t\t// Do we know where to change\n\t\t\t\tif (type in PREFIX_POSITION) {\n\t\t\t\t\t// Get position\n\t\t\t\t\tposition = PREFIX_POSITION[type];\n\n\t\t\t\t\t// Update path\n\t\t\t\t\tpath[position] = id;\n\n\t\t\t\t\t// Update length\n\t\t\t\t\tlength = Math.max(length, position);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Did we modify anything?\n\t\tif (++length > 1) {\n\t\t\t// Remove trailing part of path\n\t\t\tpath.length = length;\n\t\t\t// Reroute\n\t\t\tme.route(uri);\n\t\t}\n\t}\n\n\t/**\n\t * remove some id value in url hash\n\t * @param id id or type\n\t */\n\tfunction unrouteUri(id) {\n\t\tvar me = this;\n\n\t\tvar uri = me[URI];\n\n\t\tvar path = uri.path || [];\n\t\tvar type = id;\n\n\t\tif (typeIdParser.isId(id)){\n\t\t\ttype = typeIdParser.parseType(id);\n\t\t}\n\n\t\tvar pos = PREFIX_POSITION[type];\n\n\t\tif (!pos){\n\t\t\tthrow \"pathFormatter: no such type\";\n\t\t}\n\n\t\twhile(path.length > pos) {\n\t\t\tpath.pop();\n\t\t}\n\n\t\tme.route(uri);\n\t}\n\n\tvar pathFormatter = Gadget.create(function(){\n\t\tvar expand, type, l;\n\n\t\tinit : {\n\n\t\t\tif (inited){\n\t\t\t\tbreak init;\n\t\t\t}\n\n\t\t\t// get prefixes and prefix positions\n\t\t\tfor(var l = EXPAND.length; l--;){\n\n\t\t\t\ttype = UNDEF;\n\n\t\t\t\texpand = EXPAND[l];\n\n\t\t\t\tif (expand){\n\t\t\t\t\ttype = typeIdParser.parseType(expand.replace(PLACEHOLDER_ID, NUMBER_ANY));\n\n\t\t\t\t\tPREFIX_POSITION[type] = l;\n\t\t\t\t}\n\n\t\t\t\tPREFIX.unshift(type);\n\n\t\t\t}\n\n\t\t\tinited = true;\n\t\t}\n\n\t}, {\n\t\tPREFIX: PREFIX,\n\t\tEXPAND: EXPAND,\n\t\tPOSITION: PREFIX_POSITION,\n\t\t\"displayName\" : \"school-ui-shared/utils/path-formatter\",\n\t\t\"hub:memory/route\" : function onRoute(uri) {\n\t\t\tthis[URI] = uri;\n\t\t},\n\t\t/**\n\t\t * update uri according to the IDs that passed in.\n\t\t * @param IDs\n\t\t */\n\t\texpand: routeUri,\n\n\t\t/**\n\t\t * remove some id value in url hash\n\t\t * @param id id or type\n\t\t */\n\t\tcollapse: unrouteUri\n\t});\n\n\tpathFormatter.start();\n\treturn pathFormatter;\n});\n","define('school-ui-shared/utils/performance',[\n], function () {\n\t\"use strict\";\n\n\tvar performance = window.performance;\n\tvar HAS_PERFORMANCE_API = Boolean(\n\t\tperformance\n\t\t&& typeof performance.getEntries === 'function'\n\t\t&& window.PerformanceResourceTiming\n\t);\n\n\tif (HAS_PERFORMANCE_API) {\n\t\tif (typeof performance.clearResourceTimings === 'function'\n\t\t\t&& typeof performance.setResourceTimingBufferSize === 'function') {\n\t\t\tperformance.onresourcetimingbufferfull = (function (onresourcetimingbufferfull) {\n\t\t\t\tif (performance.getEntries().length < 1000) {\n\t\t\t\t\tperformance.setResourceTimingBufferSize(1000);\n\t\t\t\t}\n\t\t\t\tonresourcetimingbufferfull.apply(this, arguments);\n\t\t\t\tperformance.clearResourceTimings();\n\t\t\t})(performance.onresourcetimingbufferfull || function () {});\n\t\t}\n\t}\n\n\treturn {\n\t\t\"getLogMessage\": function () {\n\t\t\tif (HAS_PERFORMANCE_API) {\n\t\t\t\tvar perfs = {\n\t\t\t\t\ttiming: performance.timing,\n\t\t\t\t\tentries: performance.getEntries().slice(-50),\n\t\t\t\t};\n\t\t\t\treturn JSON.stringify(perfs, function (key, value) {\n\t\t\t\t\tif (typeof value === 'number') {\n\t\t\t\t\t\treturn Number(value.toFixed(3));\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\treturn value.replace(/\\s/g, '~');\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t};\n});\n\n","define('school-ui-shared/utils/progress-state',[\n\t\"jquery\",\n\t\"school-ui-shared/enum/progress-state\",\n\t\"troopjs-ef/component/gadget\"\n], function ProgressStateUtilModule($, ProgressStateEnum, Gadget) {\n\t\"use strict\";\n\n\tvar progressState = Gadget.create({\n\t\tnotStarted: function notStarted (state) {\n\t\t\treturn (state === ProgressStateEnum.notStarted);\n\t\t},\n\n\t\thasStarted: function hasStarted (state) {\n\t\t\treturn (state === ProgressStateEnum.started);\n\t\t},\n\n\t\thasPassed: function hasPassed(state){\n\t\t\treturn (state === ProgressStateEnum.completed);\n\t\t}\n\t});\n\n\tprogressState.start();\n\n\treturn progressState;\n});\n","define('school-ui-shared/utils/update-command',[\n\t\"when\",\n\t\"troopjs-ef/component/gadget\"\n], function (when, Gadget) {\n\t\"use strict\";\n\tvar DEBUG = true;\n\n\t/*!\n\t * constants\n\t */\n\tvar ID = \"id\",\n\t\tFAULT = \"fault!\",\n\t\tFAULT_CODE = \"faultCode\",\n\t\tFAULT_MSG = \"faultMessage\";\n\n\t/*!\n\t * get error status and status text from ajax error\n\t *\n\t * TODO: For ajax error we need a framework layer process?\n\t *\n\t * @param {Object} ex\n\t * @return {String} error\n\t */\n\tfunction errorOf(ex) {\n\t\tvar error = \"Sorry! Error occurred, please contact Administrator.\";\n\t\tif(!DEBUG) {\n\t\t\treturn error;\n\t\t}\n\n\t\tif(ex && ex.status) {\n\t\t\terror = ex.status + \" \" + ex.statusText;\n\t\t} else {\n\t\t\terror = ex || \"unknown error\";\n\t\t}\n\t\treturn when.reject(error);\n\t}\n\n\t/*!\n\t * verify results\n\t *\n\t * @param {Array} results\n\t * @return {Object} verified\n\t */\n\tfunction verify(results) {\n\t\tvar result = results && (results[0] || results),\n\t\t\tverified = { success: true, data: result };\n\n\t\tif(!result || result[ID] === FAULT) {\n\t\t\tverified.success = false;\n\t\t\tverified.data = result ? result[FAULT_MSG] : \"verify failed, unknown error\";\n\t\t}\n\t\treturn verified;\n\t}\n\n\t/*!\n\t * call update service by api\n\t *\n\t * @param {String} apiName\n\t * @param {Object} data\n\t * @param {String} topic\n\t */\n\tfunction update(apiName, data, topic) {\n\t\tvar me = this;\n\t\tvar promise;\n\t\tme.publish(\"school/spinner\", promise = me.publish(apiName, data));\n\t\treturn promise.spread(function doneUpdate(results) {\n\t\t\tvar verified = verify.call(me, results),\n\t\t\t\tresult  = verified.data;\n\n\t\t\tif(verified.success && results !== data) {\n\t\t\t\tif(topic) {\n\t\t\t\t\tme.publish(topic, result);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\tthrow result;\n\t\t\t}\n\t\t}).otherwise(function(ex){\n\t\t\treturn errorOf.call(me, ex);\n\t\t});\n\t}\n\n\treturn Gadget.create({\n\t\tupdate: update\n\t});\n});\n\n","/**\n * # util/update-help.js\n *\n * Update service wrapper\n *\n * @author UX Team\n * @version 0.0.1\n */\ndefine('school-ui-shared/utils/update-helper',[\n\t\"./update-command\"\n], function UpdateHelperUtilModule(UpdateCommand) {\n\t\"use strict\";\n\n\t/*!\n\t * api name\n\t */\n\tvar API_SUBMIT_SCORE = \"school/scoring/SubmitActivityScore\";\n\tvar API_UPDATE_ENROLLMENT = \"school/enrollment/UpdateCurrentEnrollment\";\n\tvar API_SAVE_MEMBER_SITE = \"school/member_site_setting/Save\";\n\tvar API_INTEGRATION_SUBMIT_WRITING = \"schoolintegration/integration_writing/SubmitWriting\";\n\tvar API_SUBMIT_RATING = \"school/rating/SubmitRating\";\n\tvar API_FEATURE_LOG = \"school/featuresupport/Log\";\n\tvar API_ACT_EVENT_LOG = \"school/school_event_log/LogActivityEvent\";\n\tvar API_WRITING_CORRECTION_SUBMIT_RATING = \"school/writing_correction_rating/SubmitRating\";\n\tvar API_PLATFORM_MIGRATE = \"school/platform2migrate/Migrate\";\n\tvar API_NEW_CONTENT_MIGRATE = \"school/newcontentupgrade/Migrate\";\n\n\t/*!\n\t * hub name\n\t */\n\tvar HUB_UPDATE_PROGRESS = \"ef/update/progress\";\n\n\treturn {\n\t\tsubmitScore: function onSubmitScore(data) {\n\t\t\treturn UpdateCommand.update(API_SUBMIT_SCORE, data, HUB_UPDATE_PROGRESS);\n\t\t},\n\n\t\tmoveOnUnit: function onMoveOnUnit(data) {\n\t\t\treturn UpdateCommand.update(API_MOVE_ON_UNIT, data, HUB_UPDATE_PROGRESS);\n\t\t},\n\n\t\tupdateEnrollment: function onUpdateEnrollment(data) {\n\t\t\treturn UpdateCommand.update(API_UPDATE_ENROLLMENT, data);\n\t\t},\n\n\t\tsubmitRating: function onSubmitRating(data) {\n\t\t\treturn UpdateCommand.update(API_SUBMIT_RATING, data);\n\t\t},\n\n\t\tsaveMemberSite: function onSubmitRating(data) {\n\t\t\treturn UpdateCommand.update(API_SAVE_MEMBER_SITE, data);\n\t\t},\n\n\t\tintegrationSubmitWriting: function onSubmitWriting(data) {\n\t\t\treturn UpdateCommand.update(API_INTEGRATION_SUBMIT_WRITING, data);\n\t\t},\n\n\t\tlogFeature: function onLogFeature(data) {\n\t\t\treturn UpdateCommand.update(API_FEATURE_LOG, data);\n\t\t},\n\n\t\tlogActEvent: function onLogActEvent(data) {\n\t\t\treturn UpdateCommand.update(API_ACT_EVENT_LOG, data);\n\t\t},\n\n\t\tsubmitWritingCorrectionRating: function onSubmitWritingCorrectionRating(data) {\n\t\t\treturn UpdateCommand.update(API_WRITING_CORRECTION_SUBMIT_RATING, data);\n\t\t},\n\n\t\tplatformMigrate: function onPlatformMigrate(data) {\n\t\t\treturn UpdateCommand.update(API_PLATFORM_MIGRATE, data);\n\t\t},\n\n\t\tnewContentMigrate: function onPlatformMigrate(data) {\n\t\t\treturn UpdateCommand.update(API_NEW_CONTENT_MIGRATE, data);\n\t\t}\n\t};\n});\n\n","define('school-ui-shared/widget/abtest-helper',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"when\"\n], function($, Widget, loom, when){\n\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\treturn Widget.extend({\n\t\t// controller\n\t\t// {\n\t\t//  \"value1\": \"widgetA\",\n\t\t//  \"value2\": \"widgetB\"\n\t\t// }\n\t\t\"sig/start\": function onSingle() {\n\t\t\tvar me = this;\n\t\t\tvar $data = me[$ELEMENT].data();\n\n\t\t\tif($data.query && $data.controller) {\n\t\t\t\treturn me.query($data.query).spread(function(data){\n\t\t\t\t\tif(typeof $data.controller == \"string\") {\n\t\t\t\t\t\t$data.controller = $.parseJSON($data.controller);\n\t\t\t\t\t}\n\t\t\t\t\tvar widget = $data.controller[data.value];\n\n\t\t\t\t\tif(widget) {\n\t\t\t\t\t\tme[$ELEMENT].html($(\"<div>\").attr(loom.weave, widget).attr(\"data-abtest\", data.value));\n\t\t\t\t\t\treturn me.weave();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn when.resolve();\n\t\t\t}\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/widget/audio-player/main',[\n\t'jquery',\n\t'when',\n\t'logger',\n\t\"../../utils/performance\",\n\t'troopjs-ef/component/widget',\n\t\"school-ui-shared/utils/browser-check\",\n\t'school-ui-shared/utils/media',\n\t'school-ui-shared/utils/hub-memory',\n\t'school-ui-shared/utils/location-helper',\n\t'school-ui-shared/utils/audio-output',\n\t'mediaelement-and-player'\n], function audioPlayerModule($,\n                              when,\n                              Logger,\n                              performanceUtils,\n                              Widget,\n                              browserCheck,\n                              Media,\n                              HubMemory,\n                              LocationHelper,\n                              AudioOutput,\n                              mejs) {\n\t\"use strict\";\n\n\tvar $ELEMENT = '$element';\n\n\tvar SEL_CONTAINER = '.mejs-container';\n\tvar SEL_BTN_PLAY = '.mejs-play';\n\n\tvar CLS_CONTROLS_PLAYING = 'mejs-controls-playing';\n\n\tvar EVENTS_TO_FORWARD = [\n\t\t'play', 'playing', 'pause', 'ended'\n\t];\n\tvar FORWARDED_EVENT_PREFIX = 'media/';\n\tvar MODE_NATIVE = \"native\";\n\n\tvar blankAudio = 'data:audio/mpeg;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAAATGF2ZjU3LjQxLjEwMAAAAAAAAAAAAAAA/+NAwAAAAAAAAAAAAEluZm8AAAAPAAAABwAABoYAPz8/Pz8/Pz8/Pz8/Pz9fX19fX19fX19fX19fX39/f39/f39/f39/f39/n5+fn5+fn5+fn5+fn5+fv7+/v7+/v7+/v7+/v7/f39/f39/f39/f39/f3///////////////////AAAAAExhdmM1Ny40OAAAAAAAAAAAAAAAACQAAAAAAAAAAAaGYncOXgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/jQMQAAAADSAAAAABMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/40LEOwAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/jQsQ7AAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+NCxDsAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/40LEOwAAA0gAAAAAVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/jQsQ7AAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+NCxDsAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=';\n\n\tvar logIdGenerator = 1000;\n\n\tfunction mediaPlayerLog(message) {\n\t\tvar me = this;\n\t\tvar mode = me.audioInstance ? me.audioInstance.media.pluginType : 'unknown';\n\t\tvar finalMessage = me._logPrefix + ' mode=' + mode + ' ' + message;\n\t\tLogger.log(finalMessage);\n\t}\n\n\tfunction mediaPlayerLogAudioOutput(message) {\n\t\tvar me = this;\n\t\tvar logPrefix = me._logPrefix;\n\t\tvar mode = me.audioInstance ? me.audioInstance.media.pluginType : 'unknown';\n\n\t\tvar promiseHasAudioOutput = AudioOutput.hasAudioOutput()\n\t\t.then(function (result) {\n\t\t\treturn 'HasOutput=' + result;\n\t\t})\n\t\t.otherwise(function (error) {\n\t\t\treturn 'FailedToGetOutput=' + (error.message || String(error)).replace(/\\s+/g, '_');\n\t\t});\n\n\t\tvar promiseCanPlayAudio = AudioOutput.canPlayAudio()\n\t\t.then(function (result) {\n\t\t\treturn 'CanPlayMedia=' + result;\n\t\t})\n\t\t.otherwise(function (error) {\n\t\t\treturn 'FailedToPlayMedia=' + (error.message || String(error)).replace(/\\s+/g, '_');\n\t\t});\n\n\t\twhen.all([promiseHasAudioOutput, promiseCanPlayAudio]).spread(function (hasAudioOutput, canPlayAudio) {\n\t\t\tvar finalMessage = logPrefix + ' mode=' + mode + ' ' + hasAudioOutput + ' ' + canPlayAudio + ' ' + message;\n\t\t\tLogger.log(finalMessage);\n\t\t});\n\t}\n\n\tfunction bindMediaElement(mediaElement, domElement, player) {\n\t\tfunction _onStartPlay() {\n\t\t\tme.publish('audio/event/play', mediaElement);\n\t\t\tplayer.controls.addClass(CLS_CONTROLS_PLAYING);\n\t\t}\n\n\t\tfunction _onStopPlay(){\n\t\t\tplayer.controls.removeClass(CLS_CONTROLS_PLAYING);\n\t\t}\n\n\t\tvar me = this;\n\t\tvar $domElement = $(domElement);\n\n\t\tmediaElement.addEventListener('play', _onStartPlay);\n\t\tmediaElement.addEventListener('pause', _onStopPlay);\n\t\tmediaElement.addEventListener('ended', _onStopPlay);\n\n\t\tEVENTS_TO_FORWARD.forEach(function (eventName) {\n\t\t\t// var listener = $domElement.trigger.bind($domElement, FORWARDED_EVENT_PREFIX + eventName);\n\t\t\tvar listener = function () {\n\t\t\t\t$domElement.trigger(FORWARDED_EVENT_PREFIX + eventName);\n\t\t\t};\n\t\t\tmediaElement.addEventListener(eventName, listener, false);\n\t\t});\n\n\t\tvar onError = function (e) {\n\t\t\tif (me._preloadFix) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar message = e.message || Media.findErrorName(mediaElement.error) || String(e);\n\t\t\tvar url = e.src || me._audioUrl || '';\n\n\t\t\t//for Frontend log\n\t\t\tvar mode = mediaElement.pluginType || \"\";\n\t\t\tLogger.log(\"Error loading audio \" + mode + \" for \" + url + \": \" + message);\n\n\t\t\t//for Media log\n\t\t\tvar perfLog = performanceUtils.getLogMessage();\n\t\t\tif (perfLog) {\n\t\t\t\tmediaPlayerLog.call(me, 'Error.Media.Perfs ' + perfLog);\n\t\t\t}\n\t\t\tmediaPlayerLogAudioOutput.call(me, 'Error.Media ' + message);\n\t\t};\n\t\tmediaElement.addEventListener('error', onError, false);\n\t}\n\n\tfunction initPlayer() {\n\t\tvar me = this;\n\t\tvar customOptions = $.extend(true, {}, me._audioOptions);\n\n\t\t//init mep\n\t\tvar audio = me[$ELEMENT].get(0);\n\t\tif (!audio.src) {\n\t\t\tme._preloadFix =\n\t\t\t\t(browserCheck.browser === 'msie' && parseInt(browserCheck.version) > 9 ) ||\n\t\t\t\tbrowserCheck.browser === 'edge';\n\n\t\t\tif (me._preloadFix) {\n\t\t\t\taudio.src = blankAudio;\n\t\t\t}\n\t\t\telse {\n\t\t\t\taudio.src = audio.attributes['data-src'].value;\n\t\t\t}\n\t\t}\n\n\t\treturn (me._finalized ?\n\t\t\t\twhen.resolve() :\n\t\t\t\tinitMediaelementPlayer.call(me, customOptions)\n\t\t).catch(function (ex) {\n\t\t\tex.player && ex.player.controls && ex.player.controls.show();\n\n\t\t\tvar message = 'Error.Init ';\n\t\t\tif (ex.canPlayType) {\n\t\t\t\tmessage += 'CanPlayType=' + ex.canPlayType('audio/mpeg');\n\t\t\t}\n\t\t\telse if (ex.error) {\n\t\t\t\tmessage += ex.error;\n\t\t\t}\n\t\t\telse if (ex.message) {\n\t\t\t\tmessage += ex.message;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmessage += String(ex);\n\t\t\t}\n\t\t\tme._logDefer.resolver.resolve(message);\n\t\t\tthrow ex;\n\t\t});\n\t}\n\n\tfunction wrapPlayToHandleRejection(play) {\n\t\treturn function playWithHandledRejection() {\n\t\t\tvar mediaElement = this;\n\t\t\tvar promise = play.apply(mediaElement, arguments);\n\t\t\tif (promise) {\n\t\t\t\twhen(promise).catch(function (error) {\n\t\t\t\t\tif (typeof DOMException !== 'undefined' && error instanceof DOMException) {\n\t\t\t\t\t\tif (error.code === DOMException.ABORT_ERR) {\n\t\t\t\t\t\t\t// ignore\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar nodes = [mediaElement].concat(\n\t\t\t\t\t\tArray.prototype.slice.call(mediaElement.querySelectorAll('source')));\n\t\t\t\t\tvar src = nodes.map(function (node) {\n\t\t\t\t\t\treturn node.src;\n\t\t\t\t\t}).join(', ');\n\t\t\t\t\tLogger.log('Audio play() exception: ' + String(error) + '\\n' + src);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\t}\n\n\tfunction initMediaelementPlayer(customOptions) {\n\t\tvar me = this;\n\n\t\treturn when.promise(function (resolve, reject) { //handle exceptions\n\t\t\tme.audioInstance = new mejs.MediaElementPlayer(me[$ELEMENT].get(0), {\n\t\t\t\tmode: MODE_NATIVE,\n\t\t\t\tplugins: [],\n\t\t\t\tpauseOtherPlayers: (typeof customOptions.pauseOtherPlayers === 'boolean' ? customOptions.pauseOtherPlayers : true),\n\t\t\t\talwaysShowControls: (typeof customOptions.alwaysShowControls === 'boolean' ? customOptions.alwaysShowControls : true),\n\t\t\t\tplaypauseText: '',\n\t\t\t\tsuccess: function (mediaElement, domElement, player) {\n\t\t\t\t\tmediaElement.play = wrapPlayToHandleRejection(mediaElement.play);\n\n\t\t\t\t\tvar $domElement = $(domElement);\n\t\t\t\t\t$domElement.closest(SEL_CONTAINER).css(\"display\", \"inline-block\");\n\n\t\t\t\t\tif (me._preloadFix) {\n\t\t\t\t\t\tme[$ELEMENT].closest(SEL_CONTAINER).find(SEL_BTN_PLAY).one('click', me._onFirstTimePlay = function onFirstTimePlay(e) {\n\t\t\t\t\t\t\tme._preloadFix = false;\n\t\t\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\t\t\tvar src = $domElement.data(\"src\");\n\t\t\t\t\t\t\tme._audioUrl = src;\n\t\t\t\t\t\t\tupdateLogPrefix.call(me);\n\n\t\t\t\t\t\t\tmediaElement.pause();\n\t\t\t\t\t\t\tmediaElement.setSrc(src);\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tbindMediaElement.call(me, mediaElement, domElement, player);\n\n\t\t\t\t\tme._logDefer.resolver.resolve();\n\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\terror: reject\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction updateLogPrefix() {\n\t\tvar me = this;\n\t\tvar $el = me[$ELEMENT];\n\n\t\tvar course = HubMemory.readMemory('load/course');\n\t\tvar level = HubMemory.readMemory('load/level');\n\t\tvar activity = HubMemory.readMemory('load/activity');\n\t\tvar activityOption = $el.closest('.ets-act-bd-activity').data('option');\n\t\tvar activityContent = activityOption && activityOption.activityContent;\n\n\t\tvar courseTypeCode = course && course.courseTypeCode || '';\n\t\tvar levelId = level && (level.templateLevelId || level.id) || '';    //templateLevelId for platform 2, id for platform 1\n\t\tvar levelCode = level && (level.levelCode || level.levelNo) || '';\n\t\tvar activityId = activity && (activity.templateActivityId || activity.id) || '';    //templateActivityId for platform 2, id for platform 1\n\t\tvar activityTemplateCode = activityContent && activityContent.templateCode || '';\n\t\tvar mediaUrl = me._audioUrl.replace(/ /g, '%20');\n\t\tvar browser = browserCheck.browser + '/' + parseInt(browserCheck.actualVersionOfCompatibility || browserCheck.version, 10);\n\t\tif (!me._logid) {\n\t\t\tme._logid = (new Date().getTime()) + '.' + (logIdGenerator++);\n\t\t}\n\n\t\tme._logPrefix = [\n\t\t\t'NewMediaPlayer audio',\n\t\t\t'courseTypeCode=' + courseTypeCode,\n\t\t\t'level=' + levelId,\n\t\t\t'levelCode=' + courseTypeCode + '_' + levelCode,\n\t\t\t'activity=' + activityId,\n\t\t\t'activityType=' + activityTemplateCode,\n\t\t\t'url=' + mediaUrl,\n\t\t\t'browser=' + browser,\n\t\t\t'logid=' + me._logid\n\t\t].join(' ');\n\t}\n\n\treturn Widget.extend(function () {\n\t\tvar me = this;\n\t\tme._finalized = false;\n\t\tme._audioOptions = me[$ELEMENT].data();\n\t\tme._audioUrl = me[$ELEMENT].data('src') || me[$ELEMENT].get(0).src;\n\t\tme.audioInstance = null;\n\t\tupdateLogPrefix.call(me);\n\n\t\tme._preloadFix = false;\n\n\t\tme._logDefer = when.defer();\n\t\tme._logDefer.promise.then(function (message) {\n\t\t\tmessage && mediaPlayerLog.call(me, message);\n\t\t});\n\t}, {\n\t\t\"sig/start\": function onStart() {\n\t\t\tvar me = this;\n\t\t\treturn initPlayer.call(me);\n\t\t},\n\t\t'sig/stop': function () {\n\t\t\tvar me = this;\n\t\t\tme._finalized = true;\n\t\t\tme.audioInstance.pause();\n\t\t\tme.audioInstance = null;\n\t\t},\n\n\t\t\"hub/audio/event/play\": function (sourceMediaElement) {\n\t\t\tvar me = this;\n\n\t\t\t// on another audio-player plays\n\t\t\tif (me.audioInstance\n\t\t\t\t&& sourceMediaElement !== me.audioInstance.media\n\t\t\t\t&& me.audioInstance.media.currentTime > 0\n\t\t\t) {\n\t\t\t\t// force reset current time to match previous behaviour\n\t\t\t\tme.audioInstance.media.setCurrentTime(0);\n\t\t\t\tme.audioInstance.media.pause();\n\t\t\t}\n\t\t},\n\n\t\t\"dom/player/play\": function play($event, src) {\n\t\t\tvar me = this;\n\t\t\tif (me.audioInstance) {\n\t\t\t\tif (src) {\n\t\t\t\t\tif (me._preloadFix) {\n\t\t\t\t\t\tme._preloadFix = false;\n\t\t\t\t\t\tme._onFirstTimePlay && me[$ELEMENT].closest(SEL_CONTAINER).find(SEL_BTN_PLAY).unbind('click', me._onFirstTimePlay);\n\t\t\t\t\t}\n\n\t\t\t\t\tme._audioUrl = src;\n\t\t\t\t\tupdateLogPrefix.call(me);\n\n\t\t\t\t\tme.audioInstance.media.pause();\n\t\t\t\t\tme.audioInstance.media.setSrc(src);\n\t\t\t\t\tme.audioInstance.media.load();\n\t\t\t\t}\n\t\t\t\tme.audioInstance.media.play();\n\t\t\t}\n\t\t},\n\t\t\"dom/player/pause\": function pause() {\n\t\t\tvar me = this;\n\t\t\tif (me.audioInstance) {\n\t\t\t\tme.audioInstance.media.pause();\n\t\t\t}\n\t\t},\n\t\t\"dom/player/seek\": function seek($event, seekedTime) {\n\t\t\tvar me = this;\n\t\t\tif (me.audioInstance) {\n\t\t\t\tvar paused = me.audioInstance.media.paused;\n\t\t\t\tme.audioInstance.media.setCurrentTime(seekedTime);\n\t\t\t\tif (paused) {\n\t\t\t\t\tme.audioInstance.media.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"dom/player/end\": function end() {\n\t\t\tvar me = this;\n\t\t\tif (me.audioInstance) {\n\t\t\t\tme.audioInstance.media.setCurrentTime(0);\n\t\t\t\tme.audioInstance.media.pause();\n\t\t\t}\n\t\t},\n\t\t\"dom/player/volume\": function setVolume($event, volumeInfo) {\n\t\t\tvar me = this;\n\t\t\tif (me.audioInstance) {\n\t\t\t\tme.audioInstance.media.setVolume(volumeInfo.volume);\n\n\t\t\t\tif (typeof volumeInfo.muted === 'boolean') {\n\t\t\t\t\tme.audioInstance.media.setMuted(volumeInfo.muted);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});\n\n","define('school-ui-shared/widget/blurb',[\n\t\"when\",\n\t\"troopjs-ef/component/widget\"\n\t], function(when, Widget){\n\n\t\tvar RE = /(?:\\^(\\w+)\\^)/g;\n\t\tvar PATTERNS = {\n\t\t\t\"default\" : RE\n\t\t};\n\n\t\treturn Widget.extend({\n\t\t\t\"sig/start\" : function cclBlurbStart () {\n\t\t\t\tvar me = this;\n\t\t\t\tvar data = me.$element.data();\n\t\t\t\t//if there is a blurb-ccl in data, we try to use the ccl value as the blurb id\n\t\t\t\treturn when(data.blurbCcl && me.query(\"ccl!'\" + data.blurbCcl + \"'\"))\n\t\t\t\t\t.then(function(cclValue){\n\t\t\t\t\t\t//if the ccl value is undefined, we use origin blurb id in data\n\t\t\t\t\t\tvar id = cclValue && cclValue[0] && cclValue[0].value || data.blurbId;\n\t\t\t\t\t\tif(id){\n\t\t\t\t\t\t\t// Query for blurb\n\t\t\t\t\t\t\treturn me.query(\"blurb!\" + id).spread(function doneQuery(blurb) {\n\t\t\t\t\t\t\t\tvar pattern = data.pattern;\n\t\t\t\t\t\t\t\tvar values = data.values;\n\t\t\t\t\t\t\t\tvar translation = blurb && blurb.translation || \"\";\n\n\t\t\t\t\t\t\t\tif (translation && values) {\n\t\t\t\t\t\t\t\t\tpattern = pattern\n\t\t\t\t\t\t\t\t\t\t? PATTERNS[pattern] || RegExp(pattern, \"g\")\n\t\t\t\t\t\t\t\t\t\t: RE;\n\n\t\t\t\t\t\t\t\t\t\ttranslation = translation.replace(pattern, function (match, key, position, original) {\n\t\t\t\t\t\t\t\t\t\t\treturn values[key] || key;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Set html, pass deferred\n\t\t\t\t\t\t\t\treturn me.html(translation);\n\t\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t});\n\t});\n","define('school-ui-shared/widget/hyphenate',[\n\t\"poly\",\n\t\"when\",\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"../utils/hyphenate\"\n], function (poly, when, $, Widget, loom, HyphenateGadget) {\n\n\tvar $ELEMENT = \"$element\";\n\tvar PROP_WIDGET_NAME = \"_widgetName\";\n\tvar requestAnimationFrame = window.requestAnimationFrame ||\n\t\twindow.webkitRequestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame ||\n\t\twindow.oRequestAnimationFrame ||\n\t\twindow.msRequestAnimationFrame ||\n\t\tfunction (callback) {\n\t\t\twindow.setTimeout(callback, 16);\n\t\t};\n\n\treturn Widget.extend(function ($element, name, widgetName) {\n\t\tthis[PROP_WIDGET_NAME] = widgetName;\n\t}, {\n\t\t\"sig/start\": function onStart() {\n\t\t\tvar me = this;\n\t\t\tvar $element = me[$ELEMENT];\n\n\t\t\tvar promise;\n\t\t\tif (me[PROP_WIDGET_NAME]) {\n\t\t\t\tvar $newWidget = $element.clone();\n\t\t\t\t$newWidget.attr(loom.weave, me[PROP_WIDGET_NAME]);\n\t\t\t\t$newWidget.removeAttr(loom.unweave);\n\t\t\t\t$newWidget.removeAttr(loom.woven);\n\t\t\t\tpromise = me.html($newWidget);\n\t\t\t} else {\n\t\t\t\tpromise = when.resolve();\n\t\t\t}\n\n\t\t\treturn promise.then(function () {\n\t\t\t\t//wait next animation frame, content is likely to have been rendered so we can measure width\n\t\t\t\t// without blocking\n\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\trequestAnimationFrame(resolve);\n\t\t\t\t});\n\t\t\t}).then(function () {\n\t\t\t\tif ($element.width() > $element.parent().width()) {\n\t\t\t\t\t//overflow, need to hyphenate texts\n\n\t\t\t\t\t//In case it contains DOM elements, hyphenate each text node one by one\n\t\t\t\t\tvar hyphenatePromises = $element.find('*').andSelf().contents()\n\t\t\t\t\t\t.filter(function(){\n\t\t\t\t\t\t\treturn this.nodeType === 3; //text node\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map(function(){\n\t\t\t\t\t\t\t//can't use this.textContent in IE8, use .text() and createTextNode() instead\n\t\t\t\t\t\t\tvar $textNode = $(this);\n\t\t\t\t\t\t\tvar text = $textNode.text() || '';\n\t\t\t\t\t\t\treturn HyphenateGadget.hyphenate(text).spread(function (hyphenatedText) {\n\t\t\t\t\t\t\t\t$textNode.replaceWith(document.createTextNode(hyphenatedText));\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.get();\n\n\t\t\t\t\treturn when.all(hyphenatePromises);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/container/container.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-uo-container ets-uo-loading\\\">\\n\\t<div class=\\\"ets-uo-title-bar\\\">\\n\\t\\t<div class=\\\"ets-uo-title\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"450055\\\" data-text-en=\\\"Unit overview\\\"></div>\\n\\t\\t\"; if (!data.hideWorldList && data.showDownloadButton) { o += \"\\n\\t\\t<div class=\\\"ets-uo-export\\\" data-weave-delay=\\\"school-ui-shared/widget/unit-overview/export-pdf/main\\\"></div>\\n\\t\\t\"; } o += \"\\n\\t</div>\\n\\t<div class=\\\"ets-uo-unit-info\\\" data-weave-delay=\\\"school-ui-shared/widget/unit-overview/unit-info/main(data)\\\"></div>\\n\\t\"; if (!data.hideWorldList) { o += \"\\n\\t<div class=\\\"ets-uo-word-list\\\" data-weave-delay=\\\"school-ui-shared/widget/unit-overview/word-list/main(data)\\\"></div>\\n\\t\"; } o += \"\\n</div>\"; return o; }; });\n","define('school-ui-shared/widget/unit-overview/container/main',[\n\t'when',\n\t'troopjs-ef/component/widget',\n\t\"troopjs-browser/loom/config\",\n\t'template!./container.html',\n\t\"module\"\n], function (when, Widget, loom, tContainer, module) {\n\t'use strict';\n\n\tvar MODULE_CONFIG = module.config() || {\n\t\t\"showDownloadButton\": true\n\t}\n\n\tvar $ELEMENT = '$element';\n\tvar SEL_UNIT_INFO = \".ets-uo-unit-info\";\n\tvar SEL_WORD_LIST = \".ets-uo-word-list\";\n\tvar SEL_EXPORT = \".ets-uo-export\";\n\n\tvar CLS_LOADING = 'ets-uo-loading';\n\tvar SEL_LOADING = '.' + CLS_LOADING;\n\n\tvar CLS_MODAL_LOADING = \"ets-uo-modal-loading\";\n\tvar SEL_MODAL_LOADING = \".\" + CLS_MODAL_LOADING;\n\n\tvar DATA_WEAVE_DELAY = 'data-weave-delay';\n\n\tfunction weaveDelayedWidget(selector, data) {\n\t\tvar me = this;\n\t\tvar $widget = me[$ELEMENT].find(selector);\n\t\tif (data) {\n\t\t\t$widget.data('data', data);\n\t\t}\n\t\treturn $widget.attr(loom.weave, $widget.attr(DATA_WEAVE_DELAY)).weave();\n\t}\n\n\tfunction loadUnitInfo(templateUnitId) {\n\t\tvar me = this;\n\t\treturn me.query('student_unit!template_unit;' + templateUnitId + '.unitImage, .parent, .children').spread(function (unit) {\n\t\t\treturn {\n\t\t\t\tlevel: unit.parent,\n\t\t\t\tunit: unit,\n\t\t\t\tlessons: unit.children\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction loadWordList(templateUnitId) {\n\t\tvar me = this;\n\t\treturn me.query('template_course_item_word!' + templateUnitId).spread(function (wordList) {\n\t\t\treturn {\n\t\t\t\twords: wordList && wordList.words || []\n\t\t\t};\n\t\t});\n\t}\n\n\treturn Widget.extend(function (element, path, templateUnitId) {\n\t\tthis._templateUnitId = templateUnitId;\n\t\tthis._hideWorldList = Boolean(element.data('hideWorldList'));\n\t}, {\n\t\t'sig/start': function () {\n\t\t\tvar me = this;\n\n\t\t\tvar containerRender = me.html(tContainer, {\n\t\t\t\thideWorldList: me._hideWorldList,\n\t\t\t\tshowDownloadButton: MODULE_CONFIG.showDownloadButton\n\t\t\t});\n\t\t\tvar unitInfoLoad = loadUnitInfo.call(me, me._templateUnitId);\n\t\t\tvar wordListLoad = loadWordList.call(me, me._templateUnitId);\n\n\t\t\tvar unitInfoRender = when.all([\n\t\t\t\tunitInfoLoad,\n\t\t\t\tcontainerRender\n\t\t\t]).spread(function (unitInfo) {\n\t\t\t\treturn weaveDelayedWidget.call(me, SEL_UNIT_INFO, unitInfo);\n\t\t\t});\n\n\t\t\tvar wordListRender = when.all([\n\t\t\t\twordListLoad,\n\t\t\t\tcontainerRender\n\t\t\t]).spread(function (wordList) {\n\t\t\t\treturn weaveDelayedWidget.call(me, SEL_WORD_LIST, wordList);\n\t\t\t});\n\n\t\t\twhen.all([\n\t\t\t\tunitInfoRender,\n\t\t\t\twordListRender\n\t\t\t]).then(function () {\n\t\t\t\treturn weaveDelayedWidget.call(me, SEL_EXPORT);\n\t\t\t}).ensure(function () {\n\t\t\t\tme[$ELEMENT].find(SEL_LOADING).removeClass(CLS_LOADING);\n\t\t\t\tme[$ELEMENT].closest(SEL_MODAL_LOADING).removeClass(CLS_MODAL_LOADING);\n\t\t\t});\n\n\t\t\treturn containerRender;\n\t\t}\n\t});\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/export-pdf.html',[],function() { return function template(data) { var o = \"<a class=\\\"ets-uo-export-link\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"134772\\\" data-text-en=\\\"Download\\\"></a>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/pdf-style.html',[],function() { return function template(data) { var o = \"<style type=\\\"text/css\\\">\\n\\tbody {\\n\\t\\tfont: 14px/1.5 Helvetica, Arial, sans-serif;\\n\\t}\\n\\n\\t.ets-uo-title {\\n\\t\\tfloat: left;\\n\\t\\tmargin: 0 15px 5px 0;\\n\\t\\tcolor: #070;\\n\\t}\\n\\n\\t.ets-uo-unit-info .ets-uo-course-location {\\n\\t\\tfloat: left;\\n\\t\\tmargin: 0 15px 5px 0;\\n\\t\\tcolor: #070;\\n\\t}\\n\\n\\t.ets-uo-unit-info .ets-uo-unit-name {\\n\\t\\tclear: left;\\n\\t\\tcolor: #15a;\\n\\t\\tmargin-bottom: 20px;\\n\\t\\tfont-size: 16px;\\n\\t\\tfont-weight: bold;\\n\\t}\\n\\n\\t.ets-uo-word-list .ets-uo-word-list-title {\\n\\t\\tcolor: #15a;\\n\\t\\tfont-size: 14px;\\n\\t}\\n\\n\\t.ets-uo-word-list table {\\n\\t\\tborder-collapse: collapse;\\n\\t\\tborder: 1px #eee solid;\\n\\t\\twidth: 640px;\\n\\t\\tfont-size: 12px;\\n\\t}\\n\\n\\t.ets-uo-word-list th,\\n\\t.ets-uo-word-list td {\\n\\t\\tborder: 1px #eee solid;\\n\\t\\tpadding: 5px 8px;\\n\\t\\tempty-cells: show;\\n\\t}\\n\\n\\t.ets-uo-word-list th {\\n\\t\\twhite-space: nowrap;\\n\\t\\tbackground: #f1f1f1;\\n\\t}\\n\\n\\t.ets-uo-word-list td {\\n\\t\\tcolor: #333;\\n\\t}\\n</style>\"; return o; }; });\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/export-pdf/submit-form.html',[],function() { return function template(data) { var o = \"<form method=\\\"post\\\" action=\\\"\" +data.exportPdfUrl+ \"\\\">\\n\\t<input type=\\\"hidden\\\" name=\\\"pdfContent\\\" value=\\\"\" +data.pdfContent.replace(/\\\"/g,'&quot;')+ \"\\\"/>\\n\\t<input type=\\\"hidden\\\" name=\\\"fileName\\\" value=\\\"\" +data.fileName+ \"\\\"/>\\n\\t<input type=\\\"hidden\\\" name=\\\"cacheServers\\\" value='[\\\"\\\"]'/>\\n</form>\"; return o; }; });\n","define('school-ui-shared/widget/unit-overview/export-pdf/main',[\n\t'jquery',\n\t'school-ui-shared/module',\n\t'troopjs-ef/component/widget',\n\t'template!./export-pdf.html',\n\t'template!./pdf-style.html',\n\t'template!./submit-form.html'\n], function ($, module, Widget, tExportPdf, tPdfStyle, tSubmitForm) {\n\t'use strict';\n\n\tvar MODULE_CONFIG = $.extend({\n\t\texportPdfUrl: \"/school/StudyTools/downloads/PDF/Export\"\n\t}, module.config());\n\n\tvar $ELEMENT = '$element';\n\tvar SEL_CONTAINER = '.ets-uo-container';\n\tvar SEL_LEVEL_NO = '.ets-uo-level-no';\n\tvar SEL_UNIT_NO = '.ets-uo-unit-no';\n\tvar SEL_FORM = 'form';\n\n\tfunction getExportHtml() {\n\t\tvar me = this;\n\n\t\tvar $html = $('<html/>');\n\n\t\tvar $head = $('<head/>').appendTo($html);\n\t\t$head.append(tPdfStyle());\n\n\t\tvar $body = $('<body/>').appendTo($html);\n\t\tvar $clonedContainer = me[$ELEMENT].closest(SEL_CONTAINER).clone();\n\t\t$clonedContainer.find('.ets-uo-export, .ets-uo-unit-image, .ets-uo-unit-task, .ets-uo-word-list-column-player').remove();\n\t\t$body.append($clonedContainer);\n\n\t\treturn $html[0].outerHTML;\n\t}\n\n\tfunction getExportFileName() {\n\t\tvar me = this;\n\t\tvar $container = me[$ELEMENT].closest(SEL_CONTAINER);\n\t\tvar levelNo = $container.find(SEL_LEVEL_NO).text();\n\t\tvar unitNo = $container.find(SEL_UNIT_NO).text();\n\t\treturn 'unit-overview-level' + levelNo + '-unit' + unitNo;\n\t}\n\n\treturn Widget.extend({\n\t\t'sig/start': function () {\n\t\t\treturn this.html(tExportPdf);\n\t\t},\n\t\t'dom:.ets-uo-export-link/click': function () {\n\t\t\tvar me = this;\n\t\t\tvar $form = me[$ELEMENT].children(SEL_FORM);\n\n\t\t\tif (!$form.length) {\n\t\t\t\tvar submitData = {\n\t\t\t\t\tpdfContent: getExportHtml.call(me),\n\t\t\t\t\tfileName: getExportFileName.call(me),\n\t\t\t\t\texportPdfUrl: MODULE_CONFIG.exportPdfUrl\n\t\t\t\t};\n\t\t\t\t$form = $(tSubmitForm(submitData)).appendTo(me[$ELEMENT]);\n\t\t\t}\n\n\t\t\t$form.submit();\n\t\t}\n\t});\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/modal-container/modal-container.html',[],function() { return function template(data) { var o = \"<div class=\\\"modal fade ets-uo-modal ets-uo-modal-loading\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"Unit Overview\\\" aria-hidden=\\\"true\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-hidden=\\\"true\\\">&times;</button>\\n\\t\\t\\t<!--<div data-weave=\\\"school-ui-shared/widget/unit-overview/container/main(templateUnitId)\\\"></div>-->\\n\\t\\t</div>\\n\\t</div>\\n</div>\"; return o; }; });\n","define('school-ui-shared/widget/unit-overview/modal-container/main',[\n\t'when',\n\t'jquery',\n\t\"jquery.gudstrap\",\n\t'troopjs-ef/component/widget',\n\t'template!./modal-container.html'\n], function (when, $, $GUD, Widget, tModalContainer) {\n\t'use strict';\n\n\tvar $ELEMENT = '$element';\n\tvar SEL_MODAL = \".modal\";\n\tvar SEL_MODAL_CONTENT = \".modal-content\";\n\n\treturn Widget.extend(function (element, path, templateUnitId) {\n\t\tthis._templateUnitId = templateUnitId;\n\t\tthis._hideWorldList = Boolean(element.data('hideWorldList'));\n\t}, {\n\t\t'sig/start': function () {\n\t\t\tvar me = this;\n\n\t\t\treturn me.html(tModalContainer).then(function () {\n\t\t\t\tvar $container = $('<div></div>', {\n\t\t\t\t\t\"data-weave\": \"school-ui-shared/widget/unit-overview/container/main(templateUnitId)\",\n\t\t\t\t\t\"data\": {\n\t\t\t\t\t\t\"templateUnitId\": me._templateUnitId,\n\t\t\t\t\t\t\"hideWorldList\": me._hideWorldList\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn $container.appendTo(me[$ELEMENT].find(SEL_MODAL_CONTENT)).weave().then(function () {\n\t\t\t\t\tme[$ELEMENT].find(SEL_MODAL).modal({\n\t\t\t\t\t\tbackdrop: 'static'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/unit-info/unit-info.html',[],function() { return function template(data) { var o = \"\";\nvar data = data || {};\nvar isGE = data.isGE;\nvar level = data.level || {};\nvar unit = data.unit || {};\nvar lessons = data.lessons || [];\no += \"\\n<div class=\\\"ets-uo-unit-image\\\">\\n\\t<img src=\\\"\" + unit.unitImage.url + \"\\\"/>\\n</div>\\n<div class=\\\"ets-uo-unit-fields\\\">\\n\\t<div class=\\\"ets-uo-course-location\\\">\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"126799\\\" data-text-en=\\\"Level\\\"></span>\\n\\t\\t<span class=\\\"ets-uo-level-no\\\">\" +(isGE ? level.levelNo : level.levelName)+ \"</span>\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"126802\\\" data-text-en=\\\"Unit\\\"></span>\\n\\t\\t<span class=\\\"ets-uo-unit-no\\\">\" +unit.unitNo+ \"</span>\\n\\t</div>\\n\\t<div class=\\\"ets-uo-unit-name\\\">\" +unit.unitName+ \"</div>\\n\\t<div class=\\\"ets-uo-unit-desc\\\">\" +(unit.unitDesc || '')+ \"</div>\\n</div>\\n<div class=\\\"ets-uo-unit-task\\\">\\n\\t<div data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"470915\\\" data-text-en=\\\"Tasks\\\"></div>\\n\\t<ul>\\n\\t\\t\"; lessons.forEach(function (lesson) { o += \"\\n\\t\\t<li>\" + lesson.lessonName + \"</li>\\n\\t\\t\"; }); o += \"\\n\\t</ul>\\n</div>\"; return o; }; });\n","define('school-ui-shared/widget/unit-overview/unit-info/main',[\n\t'troopjs-ef/component/widget',\n\t\"school-ui-shared/enum/course-type\",\n\t'template!./unit-info.html'\n], function (Widget, courseType, tUnitInfo) {\n\t'use strict';\n\n\treturn Widget.extend(function (element, path, data) {\n\t\tvar me = this;\n\t\tvar unitInfo = data;\n\n\t\tvar level = unitInfo.level;\n\t\tunitInfo.isGE = courseType.isGECourse(level);\n\n\t\treturn me.html(tUnitInfo, unitInfo);\n\t});\n});\n\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/unit-overview/word-list/word-list.html',[],function() { return function template(data) { var o = \"\";\nvar wordList = data || {};\nvar words = wordList.words;\no += \"\\n<h2 class=\\\"ets-uo-word-list-title\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"110570\\\" data-text-en=\\\"Vocabulary\\\"></h2><!-- only visible for pdf export -->\\n<table>\\n\\t<thead>\\n\\t<tr>\\n\\t\\t<th class=\\\"ets-uo-word-list-column-player\\\"></th>\\n\\t\\t<th class=\\\"ets-uo-word-list-column-vocabulary\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"126660\\\" data-text-en=\\\"Vocabulary\\\"></th>\\n\\t\\t<th class=\\\"ets-uo-word-list-column-phonetic\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"135412\\\" data-text-en=\\\"Phonetic spelling\\\"></th>\\n\\t\\t<th class=\\\"ets-uo-word-list-column-partofspeech\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"126662\\\" data-text-en=\\\"Part of speech\\\"></th>\\n\\t\\t<th class=\\\"ets-uo-word-list-column-translation\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"126661\\\" data-text-en=\\\"Translation / definition\\\"></th>\\n\\t</tr>\\n\\t</thead>\\n\\t<tbody>\\n\\t\\t\"; words.forEach(function(wordItem) { o += \"<tr style=\\\"page-break-inside: avoid;\\\">\\n\\t\\t\\t<td class=\\\"ets-uo-word-list-column-player\\\">\\n\\t\\t\\t\\t<audio src=\\\"\" + wordItem.audioPath + \"\\\" preload=\\\"none\\\"></audio>\\n\\t\\t\\t</td>\\n\\t\\t\\t<td class=\\\"ets-uo-word-list-column-vocabulary\\\">\" + wordItem.word + \"</td>\\n\\t\\t\\t<td class=\\\"ets-uo-word-list-column-phonetic\\\">\\n\\t\\t\\t\\t\";if (wordItem.pronunciation.uk) {o += \"\\n\\t\\t\\t\\t\\t[<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"135413\\\" data-text-en=\\\"UK\\\"></span>]\" + wordItem.pronunciation.uk + \"\\n\\t\\t\\t\\t\";}o += \"\\n\\t\\t\\t\\t\";if (wordItem.pronunciation.us) {o += \"\\n\\t\\t\\t\\t\\t[<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"135414\\\" data-text-en=\\\"US\\\"></span>]\" + wordItem.pronunciation.us + \"\\n\\t\\t\\t\\t\";}o += \"\\n\\t\\t\\t</td>\\n\\t\\t\\t<td class=\\\"ets-uo-word-list-column-partofspeech\\\">\" + wordItem.partofSpeech + \"</td>\\n\\t\\t\\t<td class=\\\"ets-uo-word-list-column-translation\\\">\" + wordItem.translation + \"</td>\\n\\t\\t</tr>\"; }); o += \"\\n\\t</tbody>\\n</table>\"; return o; }; });\n","define('school-ui-shared/widget/unit-overview/word-list/main',[\n\t'when',\n\t'troopjs-ef/component/widget',\n\t'mediaelement-and-player',\n\t'template!./word-list.html'\n], function (when, Widget, mejs, tWordList) {\n\t'use strict';\n\n\tvar $ELEMENT = '$element';\n\tvar CLS_WORD_SELECTED = 'etc-unit-overview-word-selected';\n\n\treturn Widget.extend(function (element, path, data) {\n\t\tvar wordList = data;\n\t\tvar me = this;\n\t\treturn me.html(tWordList, wordList).then(function () {\n\t\t\tvar mediaelementInits = [];\n\t\t\tme[$ELEMENT].find('audio').each(function (index, audio) {\n\t\t\t\tmediaelementInits.push(when.promise(function (resolve, reject) {\n\t\t\t\t\tnew MediaElementPlayer(audio, {\n\t\t\t\t\t\tpauseOtherPlayers: true,\n\t\t\t\t\t\talwaysShowControls: true,\n\t\t\t\t\t\tplaypauseText: '',\n\t\t\t\t\t\tmode: 'native',\n\t\t\t\t\t\tfeatures: ['playpause'],\n\t\t\t\t\t\tdefaultAudioWidth: 20,\n\t\t\t\t\t\tdefaultAudioHeight: 20,\n\t\t\t\t\t\tsuccess: function (mediaElement, domObject, player) {\n\t\t\t\t\t\t\tmediaElement.addEventListener('play', function () {\n\t\t\t\t\t\t\t\tthis.currentTime = 0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: reject\n\t\t\t\t\t});\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\treturn when.all(mediaelementInits);\n\t\t});\n\t}, {\n\t\t'dom:tr/click': function (evt) {\n\t\t\tvar $tr = $(evt.currentTarget);\n\t\t\t$tr.addClass(CLS_WORD_SELECTED);\n\t\t\t$tr.siblings().removeClass(CLS_WORD_SELECTED);\n\t\t}\n\t});\n});\n\n","/* vector images support for ie8 & modern browsers\n * use in this way : \"<div data-weave=\"school-ui-progress-report/utils/vector(\"filename\", \"width\", \"height\")\"></div>\"\n * exp : \"<div data-weave=\"school-ui-progress-report/utils/vector(check, 50, 50)\"></div>\"\n */\n\ndefine('school-ui-shared/widget/vector',[\n\t\"require\",\n\t\"when\",\n\t\"poly\",\n\t\"school-ui-shared/utils/browser-check\",\n\t\"troopjs-ef/component/widget\"\n], function (localRequire, when, poly, browserCheck, Widget) {\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar PREFIX_TEMPLATE = \"template!\";\n\tvar SUFFIX_SVG = \"svg\";\n\tvar SUFFIX_VML = \"vml\";\n\n\tvar REG_SVG_WIDTH = /(\\<svg[^\\<]*width=\\\")(\\S*)(\\\"[^\\<]*\\>)/gmi;\n\tvar REG_SVG_HEIGHT = /(\\<svg[^\\<]*height=\\\")(\\S*)(\\\"[^\\<]*\\>)/gmi;\n\tvar REG_VML_WIDTH = /<v[^>]*width[^>]?:[^>]?([\\d]+)[^>]*>/mi;\n\tvar REG_VML_HEIGHT = /<v[^>]*height[^>]?:[^>]?([\\d]+)[^>]*>/mi;\n\n\t//for ie8 we use vml to display vector image\n\tvar VECTOR_TYPE = browserCheck.browser === \"msie\" &&\n\tparseInt(browserCheck.version) === 8 ? SUFFIX_VML : SUFFIX_SVG;\n\n\treturn Widget.extend(function (path, $element, vector, width, height) {\n\t\tvar me = this;\n\n\t\tme.width = width;\n\t\tme.height = height;\n\t\tme.vector = vector;\n\n\t\t//for optimize vml performance in ie8,\n\t\t//we hide element before append the vml, and display inline-block after appending\n\t\tme[$ELEMENT].css(\"display\", \"none\");\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\n\t\t\tif (me.width && me.height && me.vector) {\n\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\t// use template plugin to load vector,\n\t\t\t\t\t// and then we can pack them together in grunt\n\t\t\t\t\tlocalRequire(\n\t\t\t\t\t\t[PREFIX_TEMPLATE + me.vector + \".\" + VECTOR_TYPE],\n\t\t\t\t\t\tresolve\n\t\t\t\t\t);\n\t\t\t\t}).then(me.render.bind(me));\n\t\t\t}\n\n\t\t\treturn when.resolve();\n\t\t},\n\t\t\"render\": function (template) {\n\t\t\tvar me = this;\n\t\t\tvar html = template();\n\t\t\tvar width;\n\t\t\tvar height;\n\n\t\t\tif (VECTOR_TYPE === SUFFIX_VML) {\n\t\t\t\twidth = html.match(REG_VML_WIDTH);\n\t\t\t\theight = html.match(REG_VML_HEIGHT);\n\t\t\t\tif (width[1] && height[1]) {\n\t\t\t\t\t//can't use a top width and height in vml to set the size, so we use zoom here\n\t\t\t\t\t//don't use jquery function here, because ignore zoom will be ignored...\n\t\t\t\t\thtml = \"<div style='zoom:\" + Math.min(parseInt(me.height, 10) / height[1], parseInt(me.width, 10) / width[1]) + \"'>\" + html + \"</div>\";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//replace height and width for svg element\n\t\t\t\thtml = html.replace(\n\t\t\t\t\tREG_SVG_WIDTH,\n\t\t\t\t\tfunction (match, $1, $2, $3) {\n\t\t\t\t\t\treturn $1 + me.width + \"px\" + $3;\n\t\t\t\t\t});\n\t\t\t\thtml = html.replace(\n\t\t\t\t\tREG_SVG_HEIGHT,\n\t\t\t\t\tfunction (match, $1, $2, $3) {\n\t\t\t\t\t\treturn $1 + me.height + \"px\" + $3;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tme[$ELEMENT].html(html);\n\t\t\t//show and set the width and height\n\t\t\tme[$ELEMENT].css({\n\t\t\t\t\"display\": \"inline-block\",\n\t\t\t\t\"width\": me.width,\n\t\t\t\t\"height\": me.height,\n\t\t\t\t\"line-height\": 0,\n\t\t\t\t\"vertical-align\": \"middle\",\n\t\t\t\t\"overflow\": \"hidden\"\n\t\t\t});\n\t\t}\n\t});\n});\n","\ndefine('troopjs-requirejs/template!school-ui-shared/widget/video-player/video-player.html',[],function() { return function template(data) { var o = \"\";\n\tvar videoUrl = data.video && data.video.url || \"\";\n\tvar videoLowQualityUrl = data.video && data.video.lowQualityUrl || \"\";\n\tvar posterUrl = data.poster && data.poster.url || \"\";\n\tvar customClass = data.customClass || \"\";\no += \"\\n<video class=\\\"ets-vp \" +customClass+ \"\\\" width=\\\"640\\\" height=\\\"360\\\" playsinline=\\\"playsinline\\\" \"; if (posterUrl && posterUrl.indexOf(\".jpg\") > 0) { o += \"poster=\\\"\" +posterUrl+ \"\\\"\"; } o += \" preload=\\\"none\\\">\\n\\t<source type=\\\"video/mp4\\\" src=\\\"\" +videoUrl+ \"\\\" data-switch-src=\\\"\" +videoLowQualityUrl+ \"\\\" />\\n</video>\"; return o; }; });\n","define('school-ui-shared/widget/video-player/main',[\n\t\"when\",\n\t\"logger\",\n\t\"../../utils/performance\",\n\t\"mediaelement-plugin-ef\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/browser-check\",\n\t\"school-ui-shared/utils/media\",\n\t\"school-ui-shared/utils/hub-memory\",\n\t\"school-ui-shared/utils/location-helper\",\n\t\"template!./video-player.html\"\n], function videoPlayerModule(\n\twhen,\n\tLogger,\n\tperformanceUtils,\n\tmejs,\n\tWidget,\n\tbrowserCheck,\n\tMedia,\n\tHubMemory,\n\tLocationHelper,\n\ttTemplate\n) {\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\tvar $ = mejs.$;\n\n\tvar CLS_VP_PLAYED = \"ets-vp-played\";\n\n\tvar SEL_VP = \".ets-vp\";\n\tvar SEL_OVERLAY_PLAY = \".mejs-overlay-play\";\n\tvar SEL_CONTROLS_BUTTON_PLAYPAUSE = \"mejs-controls .mejs-playpause-button\";\n\tvar SEL_CONTAINTER = \".mejs-container\";\n\n\tvar ME_DEFAULT_FEATURES_BEFORE = [\"playpause\", \"current\", \"progress\", \"duration\", \"IgnoreKeyEvent\"];\n\tvar ME_DEFAULT_FEATURES_AFTER = [\"volume\"];\n\n\tvar MODE_NATIVE = \"native\";\n\n\tvar logIdGenerator = 1000;\n\n\tfunction mediaPlayerLog(message) {\n\t\tvar me = this;\n\t\tvar mode = (me.videoInstance && me.videoInstance.media) ? me.videoInstance.media.pluginType : 'unknown';\n\t\tvar finalMessage = me._logPrefix + ' mode=' + mode + ' ' + message;\n\t\tLogger.log(finalMessage);\n\t}\n\n\tfunction initPlayer() {\n\t\tvar me = this;\n\t\tvar customOptions = $.extend(true, {}, me._options);\n\n\t\t//init mep\n\t\tvar translationPromise = getTranslations.call(me);\n\t\tvar renderPromise = me.html(tTemplate, me._videoInfo);\n\n\t\treturn when.all([\n\t\t\ttranslationPromise,\n\t\t\trenderPromise\n\t\t]).spread(function (translations) {\n\t\t\treturn me._finalized ?\n\t\t\t\twhen.resolve() :\n\t\t\t\tinitMediaelementPlayer.call(me, customOptions, translations, me._onSuccess);\n\t\t}).catch(function (ex) {\n\t\t\tex.player && ex.player.controls && ex.player.controls.show();\n\n\t\t\tvar message = 'Error.Init ';\n\t\t\tif (ex.canPlayType) {\n\t\t\t\tmessage += 'CanPlayType=' + ex.canPlayType('video/mp4');\n\t\t\t}\n\t\t\telse if (ex.error) {\n\t\t\t\tmessage += ex.error;\n\t\t\t}\n\t\t\telse if (ex.message) {\n\t\t\t\tmessage += ex.message;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmessage += String(ex);\n\t\t\t}\n\t\t\tme._logDefer.resolver.resolve(message);\n\t\t\tthrow ex;\n\t\t});\n\t}\n\n\tfunction wrapPlayToHandleRejection(play) {\n\t\treturn function playWithHandledRejection() {\n\t\t\tvar mediaElement = this;\n\t\t\tvar promise = play.apply(mediaElement, arguments);\n\t\t\tif (promise) {\n\t\t\t\twhen(promise).catch(function (error) {\n\t\t\t\t\tif (typeof DOMException !== 'undefined' && error instanceof DOMException) {\n\t\t\t\t\t\tif (error.code === DOMException.ABORT_ERR) {\n\t\t\t\t\t\t\t// ignore\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar nodes = [mediaElement].concat(\n\t\t\t\t\t\tArray.prototype.slice.call(mediaElement.querySelectorAll('source')));\n\t\t\t\t\tvar src = nodes.map(function (node) {\n\t\t\t\t\t\treturn node.src;\n\t\t\t\t\t}).join(', ');\n\t\t\t\t\tLogger.log('Video play() exception: ' + String(error) + '\\n' + src);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn promise;\n\t\t};\n\t}\n\n\tfunction initMediaelementPlayer(customOptions, translations, cbOnSuccess) {\n\t\tvar me = this;\n\n\t\treturn when.promise(function (resolve, reject) { //handle exceptions\n\t\t\tvar videoOptions = {\n\t\t\t\tmode: MODE_NATIVE,\n\t\t\t\tplugins: [],\n\t\t\t\tpauseOtherPlayers: (typeof customOptions.pauseOtherPlayers === 'boolean' ? customOptions.pauseOtherPlayers : true),\n\t\t\t\talwaysShowControls: true,\n\t\t\t\tstartVolume: 0.8,\n\t\t\t\tsuccess: function (mediaElement, domElement, player) {\n\t\t\t\t\tmediaElement.play = wrapPlayToHandleRejection(mediaElement.play);\n\n\t\t\t\t\tvar $container = $(domElement).closest(SEL_CONTAINTER);\n\n\t\t\t\t\t//add attribute data-at-id for automation testing\n\t\t\t\t\tvar $playButton = $container.find(SEL_OVERLAY_PLAY);\n\t\t\t\t\t$playButton.attr(\"data-at-id\", \"btn-video-start\");\n\n\t\t\t\t\tvar $playPauseButton = $container.find(SEL_CONTROLS_BUTTON_PLAYPAUSE);\n\t\t\t\t\t$playPauseButton.attr(\"data-at-id\", \"btn-video-playpause\");\n\n\t\t\t\t\tmediaElement.addEventListener(\"error\", function (e) {\n\t\t\t\t\t\tvar message = e.message || Media.findErrorName(mediaElement.error) || String(e);\n\t\t\t\t\t\tvar url = e.src || (me._videoInfo.video && me._videoInfo.video.url) || '';\n\n\t\t\t\t\t\t//for Frontend log\n\t\t\t\t\t\tvar mode = mediaElement.pluginType || \"\";\n\t\t\t\t\t\tLogger.log(\"Error loading video \" + mode + \" for \" + url + \": \" + message);\n\n\t\t\t\t\t\t//for Media log\n\t\t\t\t\t\tvar perfLog = performanceUtils.getLogMessage();\n\t\t\t\t\t\tif (perfLog) {\n\t\t\t\t\t\t\tmediaPlayerLog.call(me, 'Error.Media.Perfs ' + perfLog);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmediaPlayerLog.call(me, 'Error.Media ' + message);\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tmediaElement.addEventListener('play', function handleFirstPlay() {\n\t\t\t\t\t\tme[$ELEMENT].addClass(CLS_VP_PLAYED);\n\t\t\t\t\t\tmediaElement.removeEventListener('play', handleFirstPlay);\n\t\t\t\t\t}, false);\n\n\t\t\t\t\tme._logDefer.resolver.resolve();\n\n\t\t\t\t\tcbOnSuccess && cbOnSuccess.apply(me, arguments);\n\n\t\t\t\t\tresolve();\n\t\t\t\t},\n\t\t\t\terror: reject\n\t\t\t};\n\n\t\t\tcustomOptions.features = ME_DEFAULT_FEATURES_BEFORE.concat(customOptions.features || []).concat(ME_DEFAULT_FEATURES_AFTER);\n\n\t\t\tme.videoInstance = new mejs.MediaElementPlayer(\n\t\t\t\tme[$ELEMENT].find(SEL_VP)[0],\n\t\t\t\t$.extend({}, videoOptions, customOptions, translations)\n\t\t\t);\n\t\t});\n\t}\n\n\tfunction getTranslations() {\n\t\tvar me = this;\n\n\t\tvar translations = {\n\t\t\tplaypauseText: '470485',\n\t\t\tmuteText: '469863',\n\t\t\ttracksText: '469864',\n\t\t\tfullscreenText: '470489',\n\t\t\tqualityText: '469865',\n\t\t\ttracksOnText: '480847',\n\t\t\ttracksOffText: '480848',\n\t\t\toutOfTimeRangeText: '468588'\n\t\t};\n\n\t\tvar blurbPrefix = \"blurb!\";\n\t\tvar translationNames = Object.keys(translations);\n\t\tvar blurbIds = [];\n\n\t\ttranslationNames.forEach(function (name, index) {\n\t\t\t//use keys[index] instead of key.push to make code easier to understand\n\t\t\tblurbIds[index] = blurbPrefix + translations[name];\n\t\t});\n\n\t\treturn me.query(blurbIds).then(function (blurbs) {\n\t\t\tblurbs.forEach(function (blurb, index) {\n\t\t\t\ttranslations[translationNames[index]] = blurb.translation;\n\t\t\t});\n\t\t\treturn translations;\n\t\t});\n\t}\n\n\tfunction updateLogPrefix() {\n\t\tvar me = this;\n\t\tvar $el = me[$ELEMENT];\n\n\t\tvar course = HubMemory.readMemory('load/course');\n\t\tvar level = HubMemory.readMemory('load/level');\n\t\tvar activity = HubMemory.readMemory('load/activity');\n\t\tvar activityOption = $el.closest('.ets-act-bd-activity').data('option');\n\t\tvar activityContent = activityOption && activityOption.activityContent;\n\n\t\tvar courseTypeCode = course && course.courseTypeCode || '';\n\t\tvar levelId = level && (level.templateLevelId || level.id) || '';    //templateLevelId for platform 2, id for platform 1\n\t\tvar levelCode = level && (level.levelCode || level.levelNo) || '';\n\t\tvar activityId = activity && (activity.templateActivityId || activity.id) || '';    //templateActivityId for platform 2, id for platform 1\n\t\tvar activityTemplateCode = activityContent && activityContent.templateCode || '';\n\t\tvar mediaUrl = me._videoInfo.video && me._videoInfo.video.url.replace(/ /g, '%20') || '';\n\t\tvar browser = browserCheck.browser + '/' + parseInt(browserCheck.actualVersionOfCompatibility || browserCheck.version, 10);\n\t\tif (!me._logid) {\n\t\t\tme._logid = (new Date().getTime()) + '.' + (logIdGenerator++);\n\t\t}\n\n\t\tme._logPrefix = [\n\t\t\t'NewMediaPlayer video',\n\t\t\t'courseTypeCode=' + courseTypeCode,\n\t\t\t'level=' + levelId,\n\t\t\t'levelCode=' + courseTypeCode + '_' + levelCode,\n\t\t\t'activity=' + activityId,\n\t\t\t'activityType=' + activityTemplateCode,\n\t\t\t'url=' + mediaUrl,\n\t\t\t'browser=' + browser,\n\t\t\t'logid=' + me._logid\n\t\t].join(' ');\n\t}\n\n\treturn Widget.extend(\n\t\t/**\n\t\t * Constructor\n\t\t * @param {Object}    $el\n\t\t * @param {Object}    module\n\t\t * @param {Object}    videoInfo (video, scripts, stopPoints)\n\t\t * @param {Function}  onSuccess\n\t\t * @param {Object}    options\n\t\t */\n\t\tfunction Ctor($el, module, videoInfo, options, onSuccess) {\n\t\t\tvar me = this;\n\t\t\tme._videoInfo = videoInfo;\n\t\t\tme._onSuccess = onSuccess;\n\t\t\tme._options = options;\n\t\t\tme._finalized = false;\n\t\t\tme.videoInstance = null;\n\t\t\tupdateLogPrefix.call(me);\n\n\t\t\tme._logDefer = when.defer();\n\t\t\tme._logDefer.promise.then(function (message) {\n\t\t\t\tmessage && mediaPlayerLog.call(me, message);\n\t\t\t});\n\t\t}, {\n\t\t\t\"sig/start\": function onStart() {\n\t\t\t\tvar me = this;\n\t\t\t\tinitPlayer.call(me);\n\t\t\t},\n\t\t\t\"sig/stop\": function () {\n\t\t\t\tvar me = this;\n\t\t\t\tme._finalized = true;\n\t\t\t\tif (me.videoInstance) {\n\t\t\t\t\tme.videoInstance.pause();\n\t\t\t\t\tme.videoInstance.remove();\n\t\t\t\t\tme.videoInstance = null;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"play\": function () {\n\t\t\t\tvar me = this;\n\t\t\t\tme.videoInstance.media.play();\n\t\t\t}\n\t\t});\n});\n\n"]}