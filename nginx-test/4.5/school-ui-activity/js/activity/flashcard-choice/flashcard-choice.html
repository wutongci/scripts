<%
var blurb = function(id,en){
	    var res = "data-weave='troopjs-ef/blurb/widget' data-blurb-id='"+id+"' data-text-en='"+en+"'";
	    return res;
	};
%>

<div class="ets-act-fce">
	<div class="ets-act-fce-main">
		<div class="ets-act-fce-bd">
			<div class="ets-act-fce-stack">
				<%
				var data = data || {};
				var cards = data.cards;
				var correctRequired = data.correctRequired;
				for(var i = 0; i < cards.length; i++){
					writeItem(cards[i], i);%>
				<%}%>
			</div>
			<div class="ets-act-fce-ctrl">
				<div class="ets-bd">
					<div data-at-id="btn-skip" class="ets-act-fce-btn ets-act-btn-skip ets-btn-skip"><span <%=blurb(450011,"Skip")%>></span></div>
					<div class="ets-act-fce-number">
						<span class="ets-act-fce-number-current"></span> / <span class="ets-act-fce-number-total"></span>
					</div>
				</div>
			</div>
		</div>
		<div class="ets-act-fce-ft">
			<div class="ets-act-fce-choice">
				<%
				for(var i = 0; i < cards.length; i++){
					writeOption(cards[i], i);%>
				<%}%>
			</div>
		</div>
	</div>
	
	<!-- Activity Summary Start-->
	<div class="ets-act-summary-wrap"></div>
	<!-- Activity Summary End-->
</div>

<% function writeItem(data, index) { 
	var index = parseInt(index) + 1;
	%>
	<div class="ets-act-fce-card <%if (index > 4) {%>ets-candidate <%} else {%> ets-stack-<%=index%> <%}%>" id="ets-act-fce-card<%=data._id%>" data-id="<%=data._id%>" data-at-id="<%=data._id%>">
		<div class="ets-bd">
			<img src="<%=data.image.url%>" />
		</div>
        <div class="ets-icon">
            <span></span>
        </div>
		<div class="ets-ft">
			<div class="ets-act-fce-word ets-audio-only">
				<div class="ets-audio">
					<div class="ets-act-ap-wrap"><div data-at-id="btn-audio-start" class="ets-act-ap ets-ap-small">
						<audio data-weave="school-ui-shared/widget/audio-player/main" preload="none"
						       data-src="<%=data.audio.url%>" type="audio/mpeg"
						       data-at-id="answer_audio_<%=data._id%>"
						       class="ets-ap ets-ap-small ets-ap-nobar"></audio>
					</div></div>
				</div>
			</div>
		</div>
	</div>
<% } %>

<% function writeOption(data, index) { 
	var index = parseInt(index) + 1;
	%>
	<ul class="ets-options ets-cf ets-none" id="<%=data._id%>" data-id="<%=data._id%>">
		<%for (var l = 0; l < data.options.length; l ++) {%>
		<li id="<%=data.options[l]._id%>"  data-id="<%=data.options[l]._id%>" data-at-id="<%=data.options[l]._id%>"><span><%=data.options[l].text%></span></li>
		<%}%>
	</ul>
<% } %>
