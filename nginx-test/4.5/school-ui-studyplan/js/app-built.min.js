// Englishtown_Efekta_12_Study_Plan - 1.0.7-b2b @ 2020-02-20 09:41:05

define("school-ui-studyplan/enum/client-storage-pair",{gl_tips:{keyName:"school_studyplan_gl_optional_tips",keyValue:["closed"]},pl_tips:{keyName:"school_studyplan_pl_optional_tips",keyValue:["closed"]},cp20_tips:{keyName:"school_studyplan_cp20_optional_tips",keyValue:["closed"]},techcheck_state:{keyName:"school_studyplan_techcheck_state",keyValue:["passed"]},legacy_techcheck_state:{keyName:"_TECHCHECK_PASSED",keyValue:[!0]},shown_popover_ids:{keyName:"school_studyplan_item_shown_popover_ids"},shown_level_first:{keyName:"campus_studyplan_level_first_enter"}}),define("school-ui-studyplan/enum/page-name",{createSelectPace:"School:StudyPlan:Create:SelectPace",createConfirm:"School:StudyPlan:Create:Confirm",lesson1:"School:StudyPlan:Unit:Lesson1",lesson2:"School:StudyPlan:Unit:Lesson2",lesson3:"School:StudyPlan:Unit:Lesson3",lesson4:"School:StudyPlan:Unit:Lesson4",gl:"School:StudyPlan:Unit:GroupClass",pl:"School:StudyPlan:Unit:PrivateClass",goal:"School:StudyPlan:Unit:Goal"}),define("school-ui-studyplan/enum/studyplan-item-state",{Completed:1,Locked:2}),define("school-ui-studyplan/enum/studyplan-item-typecode",{lesson:"lesson",goal:"goal",gl:"gl",pl20:"sppl20",pl40:"pl",cp20:"cp20"}),define("school-ui-studyplan/enum/studyplan-mode",{Create:0,Locked:1,Study:2}),define("school-ui-studyplan/enum/studyplan-state",{NotStarted:0,Started:1,Completed:2}),define("school-ui-studyplan/enum/studyplan-status",{Completed:{progressMsg:656554,subMsg:695052,tooltipMsg:"",customClass:"cp-progress-complete"},Nopace:{progressMsg:656581,subMsg:695048,tooltipMsg:"",customClass:"cp-progress-nopace"},Fast:{progressMsg:694967,subMsg:656562,tooltipMsg:"",customClass:"cp-progress-fast"},Normal:{progressMsg:694967,subMsg:656561,tooltipMsg:"",customClass:"cp-progress-normal"},Slow:{progressMsg:694967,subMsg:656563,tooltipMsg:"",customClass:"cp-progress-slow"},Crashing:{progressMsg:694967,subMsg:656582,tooltipMsg:"",customClass:"cp-progress-crashing"},Crashed:{progressMsg:695050,subMsg:695051,tooltipMsg:"",customClass:"cp-progress-crashed"}}),define("school-ui-studyplan/enum/studyplan-velocity",{Slow:1,Normal:2,Fast:3,Crashing:4,Crashed:5}),define("school-ui-studyplan/module",["module"],function(a){return a}),define("school-ui-studyplan/service/load-preview",["troopjs-ef/component/service","troopjs-browser/route/uri","troopjs-utils/merge","when/keys","when","poly","school-ui-shared/utils/typeid-parser"],function(a,b,c,d,e,f,g){function h(){var a=this;return u.call(arguments).forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})}),a}function i(a){return a.slice(0,a.reduce(function(a,b,c){return b!==o?c+1:a},0))}function j(a){return a[0]}function k(a){return a&&a.id?a.id.replace(r,""):a}function l(a){var b,d=a.path,e=a.query;switch(d?d[0]:o){case"preview":b={prefix:d[0],studyplan:d[1],studyplan_item:d[2],lesson:e.lesson_id};break;case"config":b={prefix:d[0],unit:e.unit_id};break;case"study":b={prefix:d[0],studyplan:d[1],studyplan_item:d[2]};break;case"school":b={prefix:d[0],enrollment:d[1],course:d[2],level:d[3],unit:d[4],lesson:d[5],step:d[6],activity:d[7]};break;default:b={}}return c.call(b,{command:e&&e.command?e.command.split("|"):o}),b}function m(a){var d=b();switch(delete d.path,a.prefix){case"preview":d.path=b.Path(i([a.prefix,k(a.studyplan),k(a.studyplan_item)])),d.query=b.Query({lesson_id:t+k(a.lesson.templateLessonId)});break;case"config":d.path=b.Path(i([a.prefix])),d.query=b.Query({unit_id:s+k(a.unit.templateUnitId)});break;case"study":d.path=b.Path(i([a.prefix,k(a.studyplan),k(a.studyplan_item)]));break;case"school":d.path=b.Path(i([a.prefix,k(a.enrollment),k(a.course),k(a.level),k(a.unit),k(a.lesson),k(a.step),k(a.activity)]))}return a.command&&c.call(d.query?d.query:d.query={},b.Query({command:a.command.join("|")})),d}function n(a,b,c){function f(a,c){return b[a]&&k(b[a])==c&&[b[a]]}var i,l=this,m=[];if(a)return b=b||{},c=c||{},Object.keys(a).forEach(function(b){var c=a[b];switch(v.call(c)){case"[object Object]":if(!c)break;if(c.load===!1){a[b]=c.value;break}c=c.value;case"[object String]":case"[object Number]":switch(b){case"prefix":a[b]=c;break;case"studyplan":a[b]=e(f(b,c)||l.query("campus_student_"+b+"!"+c+".items")).spread(function(a){return a&&m.push({unit:s+a.properties.templateUnitId,unit_studyplan:a.properties.templateUnitId}),a});break;case"studyplan_item":a[b]=e(f(b,c)||l.query("campus_student_"+b+"!"+c)).then(j);break;case"unit_studyplan":a[b]=e(f(b,c)||l.query("campus_student_"+b+"!"+c+".studyPlan.items,.studyPlan.progress")).then(j);break;case"unit":a[b]=e(f(b,c)||l.query("student_"+b+"!"+c+".parent.parent")).spread(function(a){return a&&m.push({enrollment:g.parseId(a.parent.parent.studentCourseId),course:g.parseId(a.parent.parent.id),level:g.parseId(a.parent.id),unit_studyplan:a.templateUnitId}),a});break;case"level":a[b]=e(f(b,c)||l.query("student_"+b+"!"+c+".levelName,.children")).then(j);break;case"lesson":a[b]=e(f(b,c)||l.query("student_"+b+"!"+c+".lessonImage")).then(j);break;case"activity":a[b]=e(f(b,c)||l.query("student_"+b+"!"+c+".activityContent")).then(j);break;case"enrollment":a[b]=e(f(b,c)||l.query("student_course_"+b+"!"+c)).then(j);break;default:a[b]=e(f(b,c)||l.query("student_"+b+"!"+c)).then(j)}break;default:a[b]=c}}),l.publish("school/spinner",i=d.all(a)),i.then(function(a){if(Object.keys(a).forEach(function(b){c[b]=a[b]}),m.length)return n.call(l,h.apply({},m),b,c)}).yield(c)}var o,p="_route",q="_cache",r=/^[^!]+!/,s="template_unit;",t="template_lesson;",u=Array.prototype.slice,v=Object.prototype.toString;return a.extend({displayName:"school-ui-studyplan/service/load","hub:memory/route":function(a){var b=this;b[p]&&a&&b[p].toString()===a.toString()||b.publish("load",l(a))},"hub/load":function(a){var b,c,d=this;if(a)return d[q]=d[q]||{},d[p]=d[p]||m({}),b=h.call({},d[q]),a.prefix?(c=a,b={}):(c=h.call(l(d[p]),a),Object.keys(c).forEach(function(c){c in a&&delete b[c]})),d.publish("load/requests",c).spread(function(a){return d.publish("load/launcher",h.call({},a)).then(function(){return n.call(d,a,b).then(function(a){var b={},c=d[q],e=Object.keys(a).reduce(function(d,e){return(e in a&&!(e in c)||c[e]!==a[e])&&(b[e]=a[e],d=!0),c[e]=a[e],d},!1);return d[p]=m(c),e?d.publish("load/results",a).then(function(){return d.publish("load/updates",b).then(function(){return d.publish("route/set",d[p]).then(function(){Object.keys(b).map(function(a){d.publish("load/"+a,b[a])})})})}).yield(b):d.publish("load/results",a).yield(b)})})})}})}),define("school-ui-studyplan/service/load",["troopjs-ef/component/service","troopjs-browser/route/uri","troopjs-utils/merge","when/keys","when","poly","school-ui-studyplan/enum/studyplan-mode","school-ui-shared/utils/typeid-parser"],function(a,b,c,d,e,f,g,h){function i(){var a=this;return u.call(arguments).forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})}),a}function j(a){return a.slice(0,a.reduce(function(a,b,c){return b!==p?c+1:a},0))}function k(a){return a[0]}function l(a){return a&&a.id?a.id.replace(s,""):a}function m(a){var b,d=a.path,e=a.query;switch(d?d[0]:p){case"config":b={prefix:d[0],unit:e.unit_id};break;case"study":b={prefix:d[0],studyplan:d[1],studyplan_item:d[2]};break;case"school":b={prefix:d[0],enrollment:d[1],course:d[2],level:d[3],unit:d[4],lesson:d[5],step:d[6],activity:d[7]};break;default:b={}}return c.call(b,{command:e&&e.command?e.command.split("|"):p}),b}function n(a){var d=b();switch(delete d.path,a.prefix){case"config":d.path=b.Path(j([a.prefix])),d.query=b.Query({unit_id:t+l(a.unit.templateUnitId)});break;case"study":d.path=b.Path(j([a.prefix,l(a.studyplan),l(a.studyplan_item)]));break;case"school":d.path=b.Path(j([a.prefix,l(a.enrollment),l(a.course),l(a.level),l(a.unit),l(a.lesson),l(a.step),l(a.activity)]))}return a.command&&c.call(d.query?d.query:d.query={},b.Query({command:a.command.join("|")})),d}function o(a,b,c){function f(a,c){return b[a]&&l(b[a])==c&&[b[a]]}var j,m=this,n=[];if(a)return b=b||{},c=c||{},Object.keys(a).forEach(function(b){var c=a[b];switch(v.call(c)){case"[object Object]":if(!c)break;if(c.load===!1){a[b]=c.value;break}c=c.value;case"[object String]":case"[object Number]":switch(b){case"prefix":a[b]=c;break;case"studyplan":a[b]=e(f(b,c)||m.query("campus_student_"+b+"!"+c+".items")).spread(function(a){return a&&n.push({unit:t+a.properties.templateUnitId,unit_studyplan:a.properties.templateUnitId}),a});break;case"studyplan_item":a[b]=e(f(b,c)||m.query("campus_student_"+b+"!"+c)).spread(function(a){if(a)switch(a.typeCode){case p:return p;case"lesson":return m.query("pc_student_lesson_map!"+a.properties.templateLessonId).spread(function(b){return n.push({lesson:h.parseId(b.lesson.id)}),a});default:return a}});break;case"unit_studyplan":var d="campus_student_"+b+"!"+c+".studyPlan";a[b]=e(f(b,c)||m.query(d+".items")).spread(function(a){return a.mode===g.Study?m.query(d+".progress").then(k):a});break;case"unit":a[b]=e(f(b,c)||m.query("student_"+b+"!"+c+".parent.parent")).spread(function(a){return a&&n.push({enrollment:h.parseId(a.parent.parent.studentCourseId),course:h.parseId(a.parent.parent.id),level:h.parseId(a.parent.id),unit_studyplan:a.templateUnitId}),a});break;case"level":a[b]=e(f(b,c)||m.query("student_"+b+"!"+c+".levelName,.children")).then(k);break;case"lesson":a[b]=e(f(b,c)||m.query("student_"+b+"!"+c+".lessonImage")).then(k);break;case"activity":a[b]=e(f(b,c)||m.query("student_"+b+"!"+c+".activityContent")).then(k);break;case"enrollment":a[b]=e(f(b,c)||m.query("student_course_"+b+"!"+c)).then(k);break;default:a[b]=e(f(b,c)||m.query("student_"+b+"!"+c)).then(k)}break;default:a[b]=c}}),m.publish("school/spinner",j=d.all(a)),j.then(function(a){if(Object.keys(a).forEach(function(d){c[d]=a[d],b[d]=c[d]}),n.length)return o.call(m,i.apply({},n),b,c)}).yield(c)}var p,q="_route",r="_cache",s=/^[^!]+!/,t="template_unit;",u=Array.prototype.slice,v=Object.prototype.toString;return a.extend({displayName:"school-ui-studyplan/service/load","hub:memory/route":function(a){var b=this;b[q]&&a&&b[q].toString()===a.toString()||b.publish("load",m(a))},"hub/load":function(a){var b,c,d=this;if(a)return d[r]=d[r]||{},d[q]=d[q]||n({}),b=i.call({},d[r]),a.prefix?(c=a,b={}):(c=i.call(m(d[q]),a),Object.keys(c).forEach(function(c){c in a&&delete b[c]})),d.publish("load/requests",c).spread(function(a){return d.publish("load/launcher",i.call({},a)).then(function(){return o.call(d,a,b).then(function(a){var b={},c=d[r],e=Object.keys(a).reduce(function(d,e){return(e in a&&!(e in c)||c[e]!==a[e])&&(b[e]=a[e],d=!0),c[e]=a[e],d},!1);return d[q]=n(c),e?d.publish("load/results",a).then(function(){return d.publish("load/updates",b).then(function(){return d.publish("route/set",d[q]).then(function(){Object.keys(b).map(function(a){d.publish("load/"+a,b[a])})})})}).yield(b):d.publish("load/results",a).yield(b)})})})}})}),define("school-ui-studyplan/service/republish",["jquery","troopjs-ef/component/service","school-ui-shared/utils/typeid-parser","poly"],function(a,b,c,d){"use strict";return b.extend({"hub/load/requests":function(a){var b={};if(a)return Object.keys(a).forEach(function(c){var d=a[c];b[c]="activity"===c&&"summary"===d?{value:d,load:!1}:d}),[b]},"hub/load/results":function(a){a.activity&&a.activity.templateActivityId&&this.publish("start/load/activity",{id:a.activity.templateActivityId})},"hub:memory/load/activity":function(a){"summary"==a&&this.publish("load/step/summary")}})}),define("troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-config/pace-config.html",[],function(){return function(a){var b="",c=a.blurbIds;return b+="\n\n","Completed"===a.status.key&&(b+='\n\t<div class="cp-pace-complete">\n\t\t',"level_complete"===a.status.code&&(b+='\n\t\t\t<div class="complete-left">\n\t\t\t\t<div class="cp-certificate">\n\t\t\t\t\t<div class="cp-certificate-content">\n\t\t\t\t\t\t<span class="cp-certificate-text" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695071">You\'ve already passed this level test</span>\n\t\t\t\t\t\t<i class="ets-icon-badge-checkmark"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="cp-certificate-action">\n\t\t\t\t\t\t<a data-url="'+a.certUrl+'" class="cp-certificate-action-text" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695072">view certificate</a>\n\t\t\t\t\t\t<i class="ets-icon-cp-arrow-right"></i>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="cp-retake">\n\t\t\t\t\t<a href="'+a.levelTestPath+"?testid="+a.levelTestId+'" class="btn cp-complete-next" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695073">\n\t\t\t\t\t</a>\n\t\t\t\t\t<span class="ets-icon-cp-arrow-right"></span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),b+='\n\t\t<div class="complete-right">\n\t\t\t<div>\n\t\t\t\t<img src="/_imgs/school/changecourse/pepper/ge/13.jpg"/>\n\t\t\t</div>\n\t\t\t',"unit_complete"===a.status.code?b+='\n\t\t\t\t<a class="btn cp-complete-next cp-next-unit" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+c.cpNextUnit+'">\n\t\t\t\t</a>\n\t\t\t':"course_change"===a.status.code?b+='\n\t\t\t\t<a class="btn cp-complete-next cp-course-change" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+c.cpCourseChange+'">\n\t\t\t\t</a>\n\t\t\t':"level_complete"===a.status.code?(b+="\n\t\t\t\t",b+=a.isLastLevel?'\n\t\t\t\t<a class="btn cp-complete-next cp-course-change" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+c.cpCourseChange+'">\n\t\t\t\t</a>\n\t\t\t\t':'\n\t\t\t\t<a class="btn cp-complete-next cp-next-level" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695074">\n\t\t\t\t</a>\n\t\t\t\t',b+="\n\t\t\t"):b+='\n\t\t\t\t<a href="'+a.levelTestPath+"?testid="+a.levelTestId+'" class="btn cp-complete-next" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695076">\n\t\t\t\t</a>\n\t\t\t',b+="\n\t\t</div>\n\t</div>\n"),b}}),define("school-ui-studyplan/utils/widget-creator",["jquery","lodash"],function(a,b){"use strict";function c(a,c,d){var e;return b.isEmpty(c)?d:(e="data"+b.size(a.data()),a.data(e,c),d+"("+e+")")}return function(d){var e=a("<div>"),f=b.mapKeys(d,b.partial(c,e));return e.attr("data-weave",b.keys(f).join(" "))}}),define("school-ui-studyplan/shared/cp-pace-config/main",["school-ui-studyplan/module","jquery","when","moment","poly","lodash","troopjs-ef/component/widget","school-ui-shared/enum/moment-language","template!./pace-config.html","school-ui-studyplan/utils/widget-creator","school-ui-shared/utils/typeid-parser","school-ui-shared/enum/course-type"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){return{date:d(a.certificateDate).lang("en").format("MMM DD, YYYY"),course:a.courseName||"",level:a.levelName,Key:a.key,levelCertificate:a.certificateName,coursetype:2,name:a.studentName}}function n(a,b){var c=[],d=[];[a,b].forEach(function(a){a.forEach(function(a){var b=m(a);l.isGECourse(a.courseTypeCode)?c.push(b):d.push(b)})}),window.generalCertificates=c,window.spinCertificates=d}function o(){var a=this;return c.all([a.dfdResults.promise,a.levelTestVersionPromise,a.certPromise]).spread(function(c,d,e){var f=e[0],g=e[1],h=b.extend(!0,[],f.items),j=b.extend(!0,[],g.items),k=1===d?c.level.legacyLevelId:c.level.templateLevelId;return n.call(a,h,j),a.html(i,{isLastLevel:p(c),status:a[t],levelTestPath:q.levelTestPath,levelTestId:k,certUrl:q.certUrl+c.course.courseTypeCode+"_"+c.level.levelCode,blurbIds:q.blurbIds})})}function p(a){var b=l.isGECourse((a.course||{}).courseTypeCode),c=a.level,d=a.course.children,e=a.course.children.length,f=!1;return b?c.templateLevelId===d[e-1].templateLevelId&&(f=!0):f=!0,f}var q=f.merge({changeCourseUrl:"/school/changecourse",certUrl:"/school/course/CertificateBoard.aspx?key=",levelTestPath:"/school/content/leveltest.aspx",blurbIds:{cpNextUnit:"695095",cpCourseChange:"656560"}},a.config()||{}),r="$element",s="_culture_code",t="_status",u="member_site_setting!'school;student.leveltest.version'";return g.extend(function(){var a=this;a[t]=a[r].data("status"),a.dfdResults=c.defer(),a.levelTestVersionPromise=a.query(u).spread(function(a){return parseInt(a&&a.value||1)}),a.certPromise=a.query(["student_certificate!*","student_archive_certificate!*"])},{"hub:memory/common_context":function(a){var b=this;a&&o.call(b,b[s]=a.values.culturecode.value)},"hub:memory/load/results":function(a){this.dfdResults.resolve(a)},"dom: .cp-next-unit/click":function(){var a=this;a.publish("ef/next/unit")},"dom: .cp-next-level/click":function(){var a=this;a.publish("enroll/next/level")},"dom: .cp-course-change/click":function(){window.location.href=q.changeCourseUrl},"dom: .cp-certificate-action/click":function(){var a=this,b=a.$element.find(".cp-certificate-action-text").data("url");window.open(b)}})}),define("troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-select/pace-select.html",[],function(){return function(a){for(var b="",c=0;c<a.paces.length;c++){b+="\n\t";var d=a.paces[c].selected?"pace-item-selected":"",e=0===a.paces[c].paceDays?"cp-goal-own-pace":"",f=0===a.paces[c].paceDays?"no-pace":"pace-value";b+='\n\t<div class="pace-item-edit '+d+" "+e+'" data-pacedays = "'+a.paces[c].paceDays+'">\n\t\t<div class="ets-sp-cfg-item cp-pace-item cp-pace-left">\n\t\t\t<div class="cp-pace-left-body">\n\t\t\t\t<span class="pace-item-icon"></span> \n\t\t\t\t<span class="'+f+'">'+a.paces[c].text+'</span>\n\t\t\t\t<span class="pace-name" data-weave="troopjs-ef/blurb/widget" data-blurb-id="694970"\n\t\t\t\t>Hours Weekly</span>\n\t\t\t</div>\n\t\t</div><!--\n\t\t--><div class="ets-sp-cfg-item cp-pace-item cp-pace-right">\n\t\t\t<p class="goal-date">'+a.paces[c].targetDate+'</p>\n\t\t\t<p class="goal-timezone"></p>\n\t\t</div>\n\t</div>\n'}return b}}),define("school-ui-studyplan/shared/cp-pace-select/main",["jquery","lodash","troopjs-ef/component/widget","template!./pace-select.html"],function(a,b,c,d){"use strict";function e(){var a=this,b=a[g].find(l).outerHeight();a[g].find(n).height(b),a[g].attr("data-status","open")}function f(){var a=this;a[g].find(n).height(0),a[g].attr("data-status","close")}var g="$element",h="_paces",i="mousedown.pace",j=".ets-studyplan",k=".ets-sp-cfg-pace",l=".ets-sp-cfg-paceList",m=".ets-sp-cfg-pace-button",n=".ets-sp-cfg-paceList-wrapper",o="ets-cfg-paceSelect-view",p="config/pace-select";return c.extend(function(){var a=this;a[h]=a[g].data("paces")},{"sig/start":function(){var b=this;return a(j).off(i).on(i,function(c){0==a(c.target).parents(k).length&&f.call(b)}),b.html(d,{paces:b[h]})},"sig/stop":function(){a(j).off(i)},"hub/config/pace-select/toggle":function(a){var b=this;"open"===a?e.call(b):"close"===a&&f.call(b)},"dom:.ets-sp-cfg-pace-button/click":function(a){var b=this;b[g].hasClass(o)||e.call(b)},"dom:ul li .ets-sp-cfg-pace-item/click":function(b){var c=this,d=a(b.currentTarget),e=parseInt(d.attr("data-days"));c.publish(p,e),c[g].find(m).find("div").html(d.html()),f.call(c)},"dom:.pace-item-edit/click":function(b){var c=this,d=a(b.currentTarget);d.addClass("pace-item-selected").siblings().removeClass("pace-item-selected"),c.publish(p,d.data("pacedays"))}})}),define("troopjs-requirejs/template!school-ui-studyplan/shared/pace-config/pace-config.html",[],function(){return function(a){var b="",c=a.paces,d=a.targetDate,e=a.paceDays,f=a.leftDays,g=a.paceSelectMode;return b+='\n<div class="ets-sp-cfg-item">\n\t<div class="ets-sp-cfg-item-title">\n\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="656056" data-text-en="My pace"></span>\n\t</div>\n\t<div class="ets-sp-cfg-item-detail">\n\t\t<div class="ets-cfg-paceSelect '+("view"===g?"ets-cfg-paceSelect-view":"")+'" data-weave="school-ui-studyplan/shared/pace-select/main" data-paces=\''+JSON.stringify(c).replace(/\'/g,"&#39;")+'\'></div>\n\t</div>\n</div>\n<div class="ets-sp-cfg-item">\n\t<div class="ets-sp-cfg-item-title">\n\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="569851" data-text-en="Target date"></span>\n\t</div>\n\t<div class="ets-sp-cfg-item-detail ets-sp-cfg-item-targetDate">\n\t\t<h2>'+(d?d:"&mdash;&mdash;")+'</h2>\n\t</div>\n</div>\n<div class="ets-sp-cfg-item">\n\t<div class="ets-sp-cfg-item-title">\n\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="656057" data-text-en="Remaining days"></span>\n\t</div>\n\t<div class="ets-sp-cfg-item-detail ets-sp-cfg-item-days">\n\t\t<h2>'+(void 0===f?e?e:"&mdash;&mdash;":f)+'</h2>\n\t\t<span class="'+(e?"":"ets-none")+'" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656058" data-text-en="Days">Days</span>\n\t</div>\n</div>'}}),define("school-ui-studyplan/shared/pace-config/main",["jquery","when","moment","poly","troopjs-ef/component/widget","school-ui-shared/enum/moment-language","template!./pace-config.html"],function(a,b,c,d,e,f,g){"use strict";function h(a,c){var d,e,f=this,h=c?c:f[o];return h.paceDays?d=parseInt(h.paceDays,10):(e=h.paces.every(function(a,b){return!a.selected||(d=a.paceDays,!1)}),e&&(h.paces[0].selected=!0,d=h.paces[0].paceDays)),b(h.endDate?j(a,h.endDate).format("ll"):i.call(f,a,d)).then(function(a){return f.html(g,{paces:h.paces,targetDate:d?a:k,paceDays:d,leftDays:h.leftDays,paceSelectMode:f[p]}).then(function(){e&&f.publish("config/pace-config/mode",z)})})}function i(a,b){var c=this;return c.publish("studyplan/get/serverTime").then(function(c){return j(a,c).add("days",b).format("ll")})}function j(a,b){var d=c(b);return d.lang(f[a.toLowerCase()]),d}var k,l="$element",m="_culture_code",n="_paces",o="_config",p="_mode",q="_config_original",r="&mdash;&mdash;",s=".ets-sp-cfg-item-targetDate",t=".ets-sp-cfg-item-days",u=".ets-cfg-paceSelect",v="ets-none",w="ets-cfg-paceSelect-view",x=200,y="view",z="edit",A="config/pace-select/toggle",B="config/pace-change";return e.extend(function(){var b=this,c=b[l].data("config");b[o]=c,b[q]=a.extend(!0,{},c),b[n]=b[o].paces,b[p]=b[l].data("mode")},{"hub:memory/common_context":function(a){var b=this;a&&h.call(b,b[m]=a.values.culturecode.value)},"hub/config/pace-select":function(a){var b=this,c=b[l].find(s).find("h2"),d=b[l].find(t).find("h2");i.call(b,b[m],a).then(function(e){a?(c.html(e),d.html(a),d.siblings("span").removeClass(v)):(c.html(r),d.html(r),d.siblings("span").addClass(v)),b[n].forEach(function(b,c){b.selected&&delete b.selected,b.paceDays==a&&(b.selected=!0)}),b.publish(B,b[n])})},"hub/config/pace-config/mode":function(a){var b=this,c=b[l].find(u);switch(b[p]=a,b[l].attr("data-mode",a),a){case z:b.publish(A,"open"),setTimeout(function(){c.removeClass(w)},x),b.publish(B,b[n]);break;case y:b.publish(A,"close"),c.addClass(w),h.call(b,b[m],b[q])}}})}),define("troopjs-requirejs/template!school-ui-studyplan/shared/pace-select/pace-select.html",[],function(){return function(a){function b(a){d+="\n\t",a.selected&&(d+='\n\t\t<div class="ets-sp-cfg-pace-item ets-sp-cfg-pace-button">\n\t\t\t<div>\n\t\t\t',d+=a.paceDays?"\n\t\t\t\t<h2>"+a.text+'</h2><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="569848" data-text-en="hours weekly"></span>\n\t\t\t':"\n\t\t\t\t"+a.text+"\n\t\t\t",d+='\n\t\t\t</div> <i class="glyphicon icon-caret-down"></i>\n\t\t</div>\n\t'),d+="\n"}function c(a){d+='\n\t<li>\n\t\t<div class="ets-sp-cfg-pace-item" data-days="'+a.paceDays+'" data-points="'+a.pacePoints+'" data-text="'+a.text+'">\n\t\t\t',d+=a.paceDays?"\n\t\t\t\t<h2>"+a.text+'</h2><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="569848" data-text-en="hours weekly"></span>\n\t\t\t':"\n\t\t\t\t"+a.text+"\n\t\t\t",d+="\n\t\t</div>\n\t</li>\n"}var d="",e=a;d+='\n<div class="ets-sp-cfg-pace">\n\n\t';for(var f=0;f<e.length;f++)b(e[f],f);d+='\n\t<div class="ets-sp-cfg-paceList-wrapper">\n\t\t<ul class="ets-sp-cfg-paceList">\n\t\t\t';for(var f=0;f<e.length;f++)c(e[f],f);return d+="\n\t\t</ul>\n\t</div>\n</div>\n\n",d+="\n\n"}}),define("school-ui-studyplan/shared/pace-select/main",["jquery","troopjs-ef/component/widget","template!./pace-select.html"],function(a,b,c){"use strict";function d(){var a=this,b=a[f].find(k).outerHeight();a[f].find(m).height(b),a[f].attr("data-status","open")}function e(){var a=this;a[f].find(m).height(0),a[f].attr("data-status","close")}var f="$element",g="_paces",h="mousedown.pace",i=".ets-studyplan",j=".ets-sp-cfg-pace",k=".ets-sp-cfg-paceList",l=".ets-sp-cfg-pace-button",m=".ets-sp-cfg-paceList-wrapper",n="ets-cfg-paceSelect-view",o="config/pace-select";return b.extend(function(){var a=this;a[g]=a[f].data("paces")},{"sig/start":function(){var b=this;return a(i).off(h).on(h,function(c){0==a(c.target).parents(j).length&&e.call(b)}),b.html(c,b[g])},"sig/stop":function(){a(i).off(h)},"hub/config/pace-select/toggle":function(a){var b=this;"open"===a?d.call(b):"close"===a&&e.call(b)},"dom:.ets-sp-cfg-pace-button/click":function(a){var b=this;b[f].hasClass(n)||d.call(b)},"dom:ul li .ets-sp-cfg-pace-item/click":function(b){var c=this,d=a(b.currentTarget),g=parseInt(d.attr("data-days"));c.publish(o,g),c[f].find(l).find("div").html(d.html()),e.call(c)}})}),define("troopjs-requirejs/template!school-ui-studyplan/shared/tooltip/main.html",[],function(){return function(a){var b='<div class="campus-tooltip '+a.customClass+'">\n\t<div class="tooltip-title">\n\t\t<span class="title-text"></span>\n\t\t<div class="title-icon">\n\t\t\t<span class="ets-icon-mob-tip"></span>\n\t\t\t<span class="ets-icon-cp-arrow-up '+a.expand+'"></span>\n\t\t</div>\n\t</div>\n\t<div class="tooltip-body '+a.expand+'">\n\t\t<p class="tooltip-content" data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+a.content+'"></p>\n\t\t<span class="ets-icon-cp-close"></span>\n\t</div>\n</div>';return b}}),define("school-ui-studyplan/shared/tooltip/main",["jquery","troopjs-ef/component/widget","template!./main.html"],function(a,b,c){"use strict";return b.extend(function(a,b,c){var d=this;d.options=c},{"sig/start":function(){var a=this;return a.html(c,{content:a.options.content,customClass:a.options.customClass,expand:a.options.expand?"":"ets-none"})},"dom:.campus-tooltip/click":function(a){a.stopPropagation()},"dom: .title-icon/click":function(){var a=this;a.$element.find(".ets-icon-cp-arrow-up").toggleClass("ets-none"),a.$element.find(".tooltip-body").toggleClass("ets-none")},"dom:.ets-icon-cp-close/click":function(){var a=this;a.$element.find(".ets-icon-cp-arrow-up").addClass("ets-none"),a.$element.find(".tooltip-body").addClass("ets-none"),a.$element.trigger("tooltip/close")}})}),define("school-ui-studyplan/utils/animation-helper",["when","poly/array","poly/object","troopjs-ef/component/gadget"],function(a,b,c,d){"use strict";function e(){var b=[];Object.keys(t).forEach(function(a,c){if(t[a][o].length>0){var d=t[a][o].reduce(function(b,c){return q[a]&&q[a][m]&&q[a][n]!=k&&(q[c]&&q[c][n]===l||q[c]===i)?b&&!0:b&&!1},!0);d&&(t[a][p].length>0?f(a):b.push(a)&&(q[a][n]=k))}}),b.length>0&&setTimeout(function(){a.map(b,function(a,b){return q[a][m]()}).then(function(){b.forEach(function(a,b){q[a].state=l,f(a)})})},s)}function f(a){var b=[a];t[a][p].forEach(function(a,c){b.push(a)});var c=b.sort().join("^");if(r[c]||(r[c]=[]),r[c].push(a),Object.keys(r[c]).length===b.length){var d=Object.keys(b).reduce(function(a,c){return a&&q[b[c]][n]===j},!0);d&&(b.forEach(function(a,b){g(a)}),delete r[c])}}function g(a){setTimeout(function(){q[a][m]&&q[a][m]().then(function(){q[a].state=l,e()})},s)}function h(a,b){q[a]={cb:b,state:j}}var i,j="ready",k="wait",l="finished",m="cb",n="state",o="deps",p="sync",q={},r={},s=0,t={unitNav_seqCon:{deps:[],sync:["unitNav_seqNav"]},unitNav_seqNav:{deps:[],sync:["unitNav_seqCon"]},itemChange_seqCon:{deps:[],sync:[]},goalEnter:{deps:["itemChange_seqCon","unitNav_seqNav","unitNav_seqCon"],sync:[]}};return d.create({request:function(a,b){b&&(h(a,b),t[a]&&(t[a][o]&&0===t[a][o].length?t[a][p]&&0===t[a][p].length?g(a):f(a):e()))}})}),define("school-ui-studyplan/utils/client-storage",["school-ui-studyplan/enum/client-storage-pair","poly"],function(a,b){var c=window.localStorage,d=window.sessionStorage;return{setLocalStorage:function(b,d){a[b]&&(!a[b].keyValue||a[b].keyValue.indexOf(d)>-1)&&c&&c.setItem(a[b].keyName,JSON.stringify(d))},getLocalStorage:function(b){var d=c&&a[b]&&c.getItem(a[b].keyName);return d&&JSON.parse(d)},setSessionStorage:function(b,c){a[b]&&(!a[b].keyValue||a[b].keyValue.indexOf(c)>-1)&&d&&d.setItem(a[b].keyName,JSON.stringify(c))},getSessionStorage:function(b){var c=d&&a[b]&&d.getItem(a[b].keyName);return c&&JSON.parse(c)}}}),define("school-ui-studyplan/utils/server-time",["when","troopjs-ef/component/gadget"],function(a,b){"use strict";var c="_defer_context",d="_client_start_time",e=b.create(function(){this[c]=a.defer()},{"hub/studyplan/get/serverTime":function(){var b=this;return a(b[c].promise).then(function(a){return a.serverTime+(new Date).getTime()-b[d]})},"hub:memory/context":function(a){var b=this;a&&(b[d]=(new Date).getTime(),b[c].resolve(a))}});return e.start(),e}),define("school-ui-studyplan/utils/state-parser",[],function(){return{parseFlag:function(a,b){var c={};if(a)for(stateName in a)a.hasOwnProperty(stateName)&&(c[stateName]=(a[stateName]&b)===a[stateName]);return c},map:function(a,b){if(a)for(stateName in a)if(a.hasOwnProperty(stateName)&&a[stateName]===b)return stateName}}}),define("school-ui-studyplan/utils/studyplan-update-helper",["school-ui-shared/utils/update-command"],function(a){"use strict";var b="campusstudyplan/campus_student_unit_studyplan/CreateStudyPlan",c="campusstudyplan/campus_student_unit_studyplan/RestartCurrentStudyPlan";return{createStudyplan:function(c){return a.update(b,c)},restartStudyplan:function(b){return a.update(c,b)}}}),define("school-ui-studyplan/utils/time-parser",["troopjs-ef/component/gadget","moment"],function(a,b){"use strict";var c=a.create({toLocalTime:function(a,c){var d;return d=void 0===c?b(a):b.utc(a).zone(0-c),{dayOfWeek:d.day(),year:d.year(),month:d.month()+1,day:d.date(),hour:d.hour(),minute:d.minute(),second:d.second(),timezone:d.format("Z")}}});return c.start(),c}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/announcement/index.html",[],function(){return function(a){var b='<div class="sp-evc-announcement-container">\n    '+a+'\n</div>\n\n<style type="text/css">\n    .sp-evc-announcement-container{\n        width: 680px;\n        margin: 0 auto;\n        padding: 15px 0;\n    }\n    .sp-evc-announcement-main{\n        padding: 20px 50px;\n    }\n    .sp-evc-announcement-container p{\n        margin: 10px 0 0 0;\n    }\n    .sp-evc-announcement-container .sp-evc-announcement-toggle\n    {\n        cursor: pointer;\n        margin-left: 5px;\n        color: #4a4a4a;\n        top: -1px;\n    }\n    .sp-evc-announcement-container .sp-evc-announcement-toggle:hover\n    {\n        text-decoration: none;\n        color: #4a4a4a;\n    }\n    .sp-evc-announcement-container .sp-evc-announcement-content\n    {\n        margin-top: 10px;\n    }\n    .sp-evc-announcement-content > p:last-child\n    {\n        margin-bottom: 0;\n    }\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/announcement/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";var d='<small><a data-action="toggle" class="glyphicon icon-chevron-sign-down sp-evc-announcement-toggle" style="display: none;"></a></small>',e='<small><a data-action="toggle" class="glyphicon icon-chevron-sign-up sp-evc-announcement-toggle"></a></small>',f=".sp-evc-announcement-title",g=".sp-evc-announcement-content";return a.extend({render:function(a){var b=this,g=b.$element;a&&b.html(c,a).then(function(){var a=g.find(f);a.length<=0||a.append(d).append(e)})},"dom:[data-action=toggle]/click":function(a){a.preventDefault();var c=this,d=c.$element,e=(b(a.currentTarget),d.find(g));e.length<=0||(e.toggle("slow"),d.find("[data-action=toggle]").toggle())}})}),define("school-ui-studyplan/widget/gl-pl/credit/service",["troopjs-core/component/gadget","jquery","when"],function(a,b,c){"use strict";return a.extend(function(){},{get:function(a){var d=this,e=c.defer();return a||e.reject(),d.publish("query",["evcmember!current"]).spread(function(c){c&&c.features&&c.courseInfo||e.reject();var d=c.courseInfo,f=c.features,g={},h={};b.each(f,function(b,c){
if(c.featureType.toUpperCase()===a.toUpperCase())return h.buyUrl=c.buyUrl,h.canAccess=c.canAccess,h.canBuyMore=c.canBuyMore,h.couponLeft=c.couponLeft,h.isUnlimitedAccess=c.isUnlimitedAccess,!1}),g.courseInfo=d,g.credit=h,e.resolve(g)}),e.promise}})}),define("school-ui-studyplan/widget/gl-pl/announcement/cp20",["./main","jquery","../credit/service"],function(a,b,c){"use strict";var d="cms!School#EVC#studyPlanAnnouncement#PL_";return a.extend({"sig/start":function(){var a=this;(new c).get("PL").then(function(b){if(b){var c=b.courseInfo,e=c.academicLevel;a.publish("query",[d+e]).spread(function(b){b.content?a.render(b.content):a.publish("studyplan/evc/cp20/announcement/disable")})}})}})}),define("school-ui-studyplan/widget/gl-pl/announcement/gl",["./main","jquery","../credit/service"],function(a,b,c){"use strict";var d="cms!School#EVC#studyPlanAnnouncement#GL_";return a.extend({"sig/start":function(){var a=this;(new c).get("GL").then(function(b){if(b){var c=b.courseInfo,e=c.academicLevel;a.publish("query",[d+e]).spread(function(b){b.content?a.render(b.content):a.publish("studyplan/evc/gl/announcement/disable")})}})}})}),define("school-ui-studyplan/widget/gl-pl/announcement/pl",["./main","jquery","../credit/service"],function(a,b,c){"use strict";var d="cms!School#EVC#studyPlanAnnouncement#PL_";return a.extend({"sig/start":function(){var a=this;(new c).get("PL").then(function(b){if(b){var c=b.courseInfo,e=c.academicLevel;a.publish("query",[d+e]).spread(function(b){b.content?a.render(b.content):a.publish("studyplan/evc/pl/announcement/disable")})}})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-cp20/index.html",[],function(){return function(a){var b="",c=a.bookUrl;return b+='\n<div class="evc-studyplan-btn-book">\n\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="639505" data-text-en="Welcome to your private lesson"></h2>\n\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="639506" data-text-en="Review what youâ€™ve learned in this unit in your private lesson. This live session with a teacher takes 20 minutes and is included with your subscription."></p>\n\t<div class="evc-studyplan-btn-warp">\n\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="639507" data-text-en="Your private lesson must be booked 24 hours in advance."></p>\n\t\t<button class="btn btn-default" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="639508" data-text-en="Skip your private lesson"></button>\n\t\t<a href="'+c+'" class="btn btn-primary" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="639509" data-text-en="Book your private lesson"><i class="glyphicon icon-caret-right"></i></a>\n\t</div>\n</div>\n<p class="text-muted" data-weave="troopjs-ef/blurb/widget" data-blurb-id="639510" data-text-en="You can skip your private lesson, but we strongly recommend you book it."></p>\n<style type="text/css">\n\t.evc-studyplan-activity-container .evc-studyplan-gap-2x {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\twidth: 660px;\n\t}\n\t.evc-studyplan-btn-book{\n\t\tpadding: 30px 20px;\n\t\tcolor: #555555;\n\t\tbackground-color: #f0f0f0;\n\t}\n\t.evc-studyplan-btn-book h2 {\n\t\tmargin-bottom: 10px;\n\t}\n\t.evc-studyplan-btn-book .btn{\n\t\tdisplay: inline-block;\n\t\tmargin: 10px 8px;\n\t}\n\t.evc-studyplan-btn-book p {\n\t\tfont-size: 1.3em;\n\t}\n\t.evc-studyplan-btn-warp {\n\t\tmargin-top: 20px;\n\t}\n\tp.text-muted{\n\t\tmargin-top: 8px;\n\t}\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/book-cp20/main",["troopjs-ef/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";return a.extend(function(a,b,c){var d=this;d.unitId=c},{"hub:memory/studyplan/evc/cp20/enter-token":function(a){var b=this,d={};b.unitId&&b.query("evc_url_resource!current").spread(function(e){d.bookUrl=e.studyPlanUrls.CP20Booking.replace("{unitId}",b.unitId).replace("{source}",window.encodeURIComponent(window.location.href)).replace("{token}",a?a:""),b.html(c,d)})},"dom:.btn-default/click":function(){var a=this;a.publish("studyplan/sequence/navigate/goal")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-pl/index.html",[],function(){return function(a){var b="",c=a.bookUrl,d=a.credit;return b+='\n<div class="evc-studyplan-btn-book">\n    ',b+=d.couponLeft<=0?'\n        <a class="btn btn-default disabled" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568596"></a>\n    ':'\n        <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="568597"></p>\n        <a href="'+c+'" class="btn btn-primary" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568596"></a>\n    ',b+='\n</div>\n<style type="text/css">\n    .evc-studyplan-btn-book{\n    }\n    .evc-studyplan-btn-book > a{\n        display: inline-block;\n    }\n    .evc-studyplan-btn-book > p{\n        font-size: 1.3em;\n        font-weight: bold;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/book-pl/main",["troopjs-ef/component/widget","jquery","../credit/service","school-ui-studyplan/enum/studyplan-item-typecode","template!./index.html"],function(a,b,c,d,e){"use strict";return a.extend(function(a,b,c,d){var e=this;e.unitId=c,e.spTypeCode=d},{"sig/start":function(){var a=this;a.unitId&&a.query("evc_url_resource!current").spread(function(b){var f=Boolean(a.spTypeCode===d.pl20),g={};g.bookUrl=(f?b.studyPlanUrls.SPPL20Booking:b.studyPlanUrls.SPPL40Booking).replace("{unitid}",a.unitId).replace("{source}",window.encodeURIComponent(window.location.href)),(new c).get(f?"PL20":"PL").then(function(b){b&&(g.credit=b.credit,a.html(e,g))})})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupbox/index.html",[],function(){return function(a){function b(a){c+="\n    ",a&&(c+='\n        <style>\n            .popupbox a.popupbox-close\n            {\n                width: 34px;\n                height: 35px;\n                overflow: hidden;\n                background: url(data:image/png;base64,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) left top no-repeat;\n                *background-image: url(/_imgs/evc/block/high/btn_close.png);\n                position: absolute;\n                right: -15px;\n                top: -10px;\n                cursor: pointer;\n                text-indent: -5000px;\n            }\n        </style>\n        <a class="popupbox-close" title="Close">Close</a>\n    '),c+="\n"}var c='<div class="popupbox-cover" style="\n    z-index: '+(a.zIndex||1)+";\n    background-color: "+(a.bgColor||"#000")+";\n    opacity: "+(a.opacity||.8)+";\n    filter: alpha(opacity="+100*(a.opacity||.8)+");\n    margin-top: "+(a.top||0)+'px;\n">\n    ';return a.keySupport&&(c+='\n        <style>\n            input.popupbox-keysupport\n            {\n                width: 1px;\n                height: 1px;\n                border-width: 0;\n                overflow: hidden;\n                float: right;\n                background-color: transparent;\n                outline: none;\n                position: absolute;\n                top: -1px;\n            }\n        </style>\n        <input class="popupbox-keysupport" type="text" />\n    '),c+='\n</div>\n<div class="popupbox" style="\n    z-index: '+(a.zIndex||1)+";\n    margin-top: "+(a.top||0)+'px;\n">\n    <div class="popupbox-main" style="\n        height: 100%;\n        ',a.fullSize||(c+="\n            text-align: center;\n        "),c+='\n    ">\n        ',a.isInnerClose||b(a.hasCloseButton),c+='\n        <div class="popupbox-content popupbox-out" style="\n            ',a.fullSize||(c+="\n                text-align: left;\n                display: inline-block;\n                *display: inline;\n                *zoom: 1;\n            "),c+='\n        ">\n            ',a.isInnerClose&&b(a.hasCloseButton),c+="\n        </div>\n    </div>\n</div>\n\n",c+="\n<style>\n    style\n    {\n        display: none;\n    }\n    /*\n    * Animation for pop effect\n    */\n    /* No animation */\n    .popupbox-in\n    {\n        visibility: visible;\n    }\n    .popupbox-out\n    {\n        visibility: hidden;\n    }\n    /* With animation */\n    .popupbox-pop {\n        -webkit-transform-origin: 50% 50%;\n        -moz-transform-origin: 50% 50%;\n    }\n    .popupbox-pop.popupbox-in {\n        visibility: visible;\n        opacity: 1;\n        -webkit-transform: scale(1);\n\n        -webkit-animation-name: popin;\n        -moz-animation-name: popin;\n        -webkit-animation-duration: 200ms;\n        -moz-animation-duration: 200ms;\n        -webkit-animation-timing-function: ease-out;\n        -moz-animation-timing-function: ease-out;\n    }\n    .popupbox-pop.popupbox-out {\n        visibility: visible;\n        opacity: 0;\n        -webkit-transform: scale(.8);\n\n        -webkit-animation-name: popout;\n        -moz-animation-name: popout;\n        -webkit-animation-duration: 100ms;\n        -moz-animation-duration: 100ms;\n        -webkit-animation-timing-function: ease-in;\n        -moz-animation-timing-function: ease-in;\n    }\n    @-webkit-keyframes popin {\n        from {\n            -webkit-transform: scale(.8);\n            opacity: 0;\n        }\n        to {\n            -webkit-transform: scale(1);\n            opacity: 1;\n        }\n    }\n    @-webkit-keyframes popout {\n        from {\n            -webkit-transform: scale(1);\n            opacity: 1;\n        }\n        to {\n            -webkit-transform: scale(.8);\n            opacity: 0;\n        }\n    }\n    /* evc style */\n    .popupbox-cover,\n    .popupbox\n    {\n        position: "+(a.position||"fixed")+";\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    .popupbox-main,\n    .popupbox-content\n    {\n        position: relative;\n    }\n    .popupbox-main\n    {\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n    .popupbox-content\n    {\n        -webkit-transition: margin-top .3s ease-out;\n        -moz-transition: margin-top .3s ease-out;\n        -o-transition: margin-top .3s ease-out;\n        transition: margin-top .3s ease-out;\n    }\n</style>"}}),define("school-ui-studyplan/widget/gl-pl/popupbox/main",["module","jquery","template!./index.html"],function(a,b,c){"use strict";function d(){var a=navigator.userAgent;return a.indexOf("Windows NT")>=0||a.indexOf("Macintosh")>=0}function e(a,c){return!a||a.length<=0?{popIn:b.noop,popOut:b.noop}:(c?a.removeClass("popupbox-pop"):a.addClass("popupbox-pop"),{popIn:function(){a.removeClass("popupbox-out").addClass("popupbox-in")},popOut:function(){a.removeClass("popupbox-in").addClass("popupbox-out")}})}var f=function(a){this.el=a.el||"body",this.body="body"===this.el,this.msg=a.msg||"",this.overLap=a.overLap||"replace",this.stick=a.stick||!1,this.stickTop=a.stickTop||0,this.top=a.top||0,this.noAnimation=a.noAnimation||!1,this.bgColor=a.bgColor||"#000",this.opacity=a.opacity||.6,this.zIndex=a.zIndex||1,this.fullSize=a.fullSize||!1,this.closeble=a.closeble||!1,this.closeButtonHide=a.closeButtonHide||!1,this.closeButtonList=a.closeButtonList||[],this.closeInner=a.closeInner||!1,this.closeCallback=a.closeCallback||b.noop};return f.prototype={open:function(){function a(){h.closeButtonList.length>0&&b.each(h.closeButtonList,function(a,b){h.$popupBox.on("click",b,function(a){a.preventDefault(),h.close()})})}function f(){var a=h.$popupBoxCover.find("input.popupbox-keysupport");a.length>0&&a.focus().keydown(function(a){27==a.which&&h.close(),a.preventDefault()})}function g(){b(window).resize(function(a){h.centralize()})}var h=this,i=b.Deferred(),j=b(h.el);j.length<=0&&(j=b("body"));var k=j.find(" > div.popupbox, > div.popupbox-cover");if(k.length>0){if("cancel"===h.overLap)return i.reject(),i.promise();"replace"===h.overLap&&k.remove()}return h.$popupBoxWrapper=b(c({position:h.body?"fixed":"absolute",bgColor:h.bgColor,opacity:h.opacity,zIndex:h.zIndex,top:h.top,fullSize:h.fullSize,keySupport:d(),hasCloseButton:h.closeble&&!h.closeButtonHide,isInnerClose:h.closeInner})),h.$popupBoxCover=h.$popupBoxWrapper.filter(".popupbox-cover"),h.$popupBox=h.$popupBoxWrapper.filter(".popupbox"),h.$popupBoxMain=h.$popupBox.find(".popupbox-main"),h.$popupBoxContent=h.$popupBox.find(".popupbox-content"),h.stick||g(),h.$popupBoxContent.prepend(h.msg),h.$popupBoxWrapper.appendTo(j),h.closeble&&(h.closeButtonList.push("a.popupbox-close"),a(),f()),h.centralize(),h.noAnimation?(h.$popupBoxCover.show(),e(h.$popupBoxContent,!0).popIn(),i.resolve(h.$popupBoxContent)):h.$popupBoxCover.fadeIn(400,function(){e(h.$popupBoxContent).popIn(),i.resolve(h.$popupBoxContent)}),i.promise()},close:function(a){function c(){a||d.closeCallback()}var d=this,f=b.Deferred();return d.noAnimation?(e(d.$popupBoxContent,!0).popOut(),d.$popupBoxCover.hide(),c(),d.$popupBoxWrapper.remove(),f.resolve(b)):(e(d.$popupBoxContent).popOut(),window.setTimeout(function(){d.$popupBoxCover.fadeOut(200,function(){c(),d.$popupBoxWrapper.remove(),f.resolve(b)})},100)),f.promise()},centralize:function(){var a=this,b=a.$popupBox,c=a.$popupBoxContent,d=b.height(),e=c.outerHeight(),f=a.stick?a.stickTop:Math.floor((d-e)/2);return f=f<0?0:f,c.css("margin-top",f),a}},f}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-cp20/index.html",[],function(){return function(a){var b='<div class="studyplan-cancel-action clearfix">\n    <button class="evc-studyplan-cancel-btn" role="button" data-action="cancelBooking" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568585" data-toggle="tooltip" data-placement="bottom" title="Cancel Class"></button>\n</div>\n<div class="gud studyplan-cancel-confirm clearfix">\n    <div class="gud studyplan-cancel-confirm-content">\n        <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="18748"></p>\n        <button class="btn btn-default btn-sm" role="button" data-action="confirmCancel" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568588"></button>\n        <button class="btn btn-secondary btn-sm" role="button" data-action="keepBooking" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568589"></button>\n    </div>\n</div>\n<style type="text/css">\n.studyplan-cancel-action .tooltip-arrow{\n    border-bottom-color:#000;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n}\n.studyplan-cancel-action .tooltip-inner{\n    padding: 10px;\n    max-width: 260px;\n    background: #000;\n    background: rgba(0, 0, 0, 0.9);\n}\n.studyplan-cancel-confirm {\n    display: none;\n}\n.studyplan-cancel-confirm-content {\n    display: inline-block;\n    border: 1px solid #4a4a4a;\n    padding: 30px 40px;\n    background-color: #fff;\n    background-color: rgba(255, 255, 255, 0.8);\n    text-align: center;\n}\n.studyplan-cancel-confirm-content button {\n    margin: 0 10px;\n}\n.studyplan-cancel-confirm-content p {\n    font-size: 1.4em;\n    font-weight: bold;\n    text-align: center;\n}\n.evc-studyplan-cancel-btn{\n    border:none;\n    border-bottom: 1px solid #000;\n    background: none;\n    padding: 0;\n}\n.evc-studyplan-cancel-btn:hover{\n    color:#333;\n    border-bottom: 1px solid #333;\n}\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/cancel-cp20/main",["troopjs-browser/component/widget","jquery","troopjs-ef/command/service","troopjs-data/cache/component","school-ui-studyplan/widget/gl-pl/popupbox/main","template!./index.html"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){var d=!1;return{unhook:function(){a.unbind(b),d=!1},hook:function(){d||(a.bind(b,c),d=!0)}}}var h="started",i=".ets-sp-init",j=[["Sunday","78946"],["Monday","78940"],["Tuesday","78941"],["Wednesday","78942"],["Thusday","78943"],["Friday","78944"],["Saterday","78945"]],k=[["January","77396"],["February","77397"],["March","77398"],["April","77399"],["May","77400"],["June","77401"],["July","77402"],["August","77403"],["September","77404"],["October","77405"],["November","77406"],["December","77407"]];return a.extend(function(){},{"hub:memory/studyplan/evc/cp20/status":function(a){var b=this;a&&a.bookedClass&&a.bookedClass.classId&&(b.classId=a.bookedClass.classId,a.countdown.timeIn<=0||(b.html(f),b.showNotice(a)))},showNotice:function(a){var b,c=this,d=c.$element,e=d.find(".evc-studyplan-cancel-btn"),f=a.suggestedCancelTime,g="UTC "+f.timezone;b=f.minute>9?f.hour+":"+f.minute:f.hour+":0"+f.minute,c.publish("query",["blurb!"+j[f.dayOfWeek][1],"blurb!"+k[f.month-1][1],"blurb!639584"]).spread(function(a,c,d){var h=a.translation,i=c.translation,j=d.translation,k=b+", "+h+" "+i+" "+f.day;j=j.replace("%%Canceltime%%",k).replace("%%timezone%%",g),e.attr("title",j),e.tooltip()})},"hub:memory/studyplan/evc/cp20/start-status":function(a){var b=this,c=b.$element;a===h&&c.remove()},"dom:[data-action=cancelBooking]/click":function(a){a.preventDefault();var b=this,c=b.$element,d=c.find(".studyplan-cancel-confirm").html();b.popupbox=new e({el:i,zIndex:160,msg:d,bgColor:"#fff",closeble:!0,closeButtonHide:!0}),b.popupbox.open().then(function(a){var c=a.find("button[data-action='keepBooking']");g(c,"click",function(a){a.preventDefault(),b.popupbox.close()}).hook();var d=a.find("button[data-action='confirmCancel']");g(d,"click",function(a){a.preventDefault(),b.popupbox.close();var c={classId:b.classId};b.publish("/commands/classes/cancel",c).then(function(){b.publish("studyplan/sequence/update"),b.publish("studyplan/sequence-container/reload")})}).hook()})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-pl/index.html",[],function(){return function(a){var b='<div class="studyplan-cancel-action clearfix">\n    <button class="evc-studyplan-cancel-btn" role="button" data-action="cancelBooking" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568585" data-toggle="tooltip" data-placement="bottom" title="Cancel Class"></button>\n</div>\n<div class="gud studyplan-cancel-confirm clearfix">\n    <div class="gud studyplan-cancel-confirm-content">\n        <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="18748"></p>\n        <button class="btn btn-default btn-sm" role="button" data-action="confirmCancel" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568588"></button>\n        <button class="btn btn-secondary btn-sm" role="button" data-action="keepBooking" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568589"></button>\n    </div>\n</div>\n<style type="text/css">\n.studyplan-cancel-action .tooltip-arrow{\n    border-bottom-color:#000;\n    border-bottom-color: rgba(0, 0, 0, 0.9);\n}\n.studyplan-cancel-action .tooltip-inner{\n    padding: 10px;\n    max-width: 260px;\n    background: #000;\n    background: rgba(0, 0, 0, 0.9);\n}\n.studyplan-cancel-confirm {\n    display: none;\n}\n.studyplan-cancel-confirm-content {\n    display: inline-block;\n    border: 1px solid #4a4a4a;\n    padding: 30px 40px;\n    background-color: #fff;\n    background-color: rgba(255, 255, 255, 0.8);\n    text-align: center;\n}\n.studyplan-cancel-confirm-content button {\n    margin: 0 10px;\n}\n.studyplan-cancel-confirm-content p {\n    font-size: 1.4em;\n    font-weight: bold;\n    text-align: center;\n}\n.evc-studyplan-cancel-btn{\n    border:none;\n    border-bottom: 1px solid #000;\n    background: none;\n    padding: 0;\n}\n.evc-studyplan-cancel-btn:hover{\n    color:#333;\n    border-bottom: 1px solid #333;\n}\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/cancel-pl/main",["troopjs-browser/component/widget","jquery","troopjs-ef/command/service","troopjs-data/cache/component","school-ui-studyplan/widget/gl-pl/popupbox/main","template!./index.html"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){var d=!1;return{unhook:function(){a.unbind(b),d=!1},hook:function(){d||(a.bind(b,c),d=!0)}}}var h="started",i=".ets-sp-init",j=[["Sunday","78946"],["Monday","78940"],["Tuesday","78941"],["Wednesday","78942"],["Thusday","78943"],["Friday","78944"],["Saterday","78945"]],k=[["January","77396"],["February","77397"],["March","77398"],["April","77399"],["May","77400"],["June","77401"],["July","77402"],["August","77403"],["September","77404"],["October","77405"],["November","77406"],["December","77407"]];return a.extend(function(){},{"hub:memory/studyplan/evc/pl/status":function(a){var b=this;a&&a.bookedClass&&a.bookedClass.classId&&(b.classId=a.bookedClass.classId,a.countdown.timeIn<=0||(b.html(f),b.showNotice(a)))},showNotice:function(a){var b,c=this,d=c.$element,e=d.find(".evc-studyplan-cancel-btn"),f=a.suggestedCancelTime,g="UTC "+f.timezone;b=f.minute>9?f.hour+":"+f.minute:f.hour+":0"+f.minute,c.publish("query",["blurb!"+j[f.dayOfWeek][1],"blurb!"+k[f.month-1][1],"blurb!568586"]).spread(function(a,c,d){var h=a.translation,i=c.translation,j=d.translation,k=b+", "+h+" "+i+" "+f.day;j=j.replace("%%Canceltime%%",k).replace("%%timezone%%",g),e.attr("title",j),e.tooltip()})},"hub:memory/studyplan/evc/pl/start-status":function(a){var b=this,c=b.$element;a===h&&c.remove()},"dom:[data-action=cancelBooking]/click":function(a){a.preventDefault();var b=this,c=b.$element,d=c.find(".studyplan-cancel-confirm").html();b.popupbox=new e({el:i,zIndex:160,msg:d,bgColor:"#fff",closeble:!0,closeButtonHide:!0}),b.popupbox.open().then(function(a){var c=a.find("button[data-action='keepBooking']");g(c,"click",function(a){a.preventDefault(),b.popupbox.close()}).hook();var d=a.find("button[data-action='confirmCancel']");g(d,"click",function(a){a.preventDefault(),b.popupbox.close();var c={classId:b.classId};b.publish("/commands/classes/cancel",c).then(function(){b.publish("studyplan/sequence/update"),b.publish("studyplan/sequence-container/reload")})}).hook()})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/checkpoint20/index.html",[],function(){return function(a){var b="",c=a.statusCode,d=(a.unitId,"welcome"),e="nevertake",f="dropout",g="pending",h="attended";return b+='\n<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/announcement/cp20"></div>\n<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/statusbar/cp20"></div>\n<div class="evc-studyplan-wrapper">\n\t',c===d?b+='\n\t\t<div class="evc-studyplan-column-single evc-studyplan-welcome" data-weave="school-ui-studyplan/widget/gl-pl/welcome-cp20/main"></div>\n\t':(b+='\n\t\t<div class="evc-studyplan-column-full"></div>\n\t\t',c!==e&&c!==f&&(b+='\n\t\t\t<div class="evc-studyplan-column-single">\n\t\t\t\t<div class="evc-studyplan-gap-2x" data-weave="school-ui-studyplan/widget/gl-pl/lesson/cp20"></div>\n\t\t\t\t',c!==g&&c!==h&&(b+='\n\t\t\t\t\t<div class="evc-studyplan-gap-1x evc-studyplan-class-info"></div>\n\t\t\t\t'),b+="\n\t\t\t</div>\n\t\t"),b+='\n\t\t<div class="evc-studyplan-activity-container">\n\t\t</div>\n\t'),b+='\n</div>\n\n<style type="text/css">\n\t.evc-studyplan-wrapper{\n\t\ttext-align: center;\n\t\tpadding: 30px 0 50px;\n\t\tcolor: #4a4a4a;\n\t}\n\t.evc-studyplan-column-full{\n\t\tdisplay: inline-block;\n\t}\n\t.evc-studyplan-column-single{\n\t\tdisplay: inline-block;\n\t\twidth: 980px;\n\t}\n\t.evc-studyplan-column-single hr{\n\t\tmargin-bottom: 0;\n\t}\n\t.evc-studyplan-gap-2x{\n\t\ttext-align: left;\n\t\twidth: 620px;\n\t\tpadding-left: 35px;\n\t\tpadding-right: 35px;\n\t\tvertical-align: top;\n\t\tdisplay: inline-block;\n\t\tmargin: 20px auto;\n\t}\n\t.evc-studyplan-gap-1x{\n\t\ttext-align: left;\n\t\twidth: 330px;\n\t\tvertical-align: top;\n\t\tmargin: auto;\n\t\tpadding-left: 30px;\n\t\tdisplay: inline-block;\n\t\tborder-left:1px #eee solid;\n\t}\n\t.evc-studyplan-gap-1x .evc-studyplan-gap-block{\n\t\tmargin-bottom: 15px;\n\t}\n\t.st-evc-status{\n\t\tcolor: #4a4a4a;\n\t\tbackground-color: #e6e6e6;\n\t}\n\t.evc-studyplan-gray{\n\t\tcolor:#999999;\n\t}\n\t.evc-studyplan-green{\n\t\tcolor:#87c600;\n\t}\n\t.evc-studyplan-blue{\n\t\tcolor: #00bee3;\n\t}\n\t.evc-none{\n\t\tdisplay: none;\n\t}\n\t.evc-studyplan-activity-container {\n\t\twidth:880px;\n\t\tmargin:0 auto;\n\t}\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/checkpoint20/main",["when","jquery","troopjs-browser/component/widget","school-ui-studyplan/module","school-ui-studyplan/utils/client-storage","school-ui-studyplan/utils/time-parser","template!./index.html"],function(a,b,c,d,e,f,g){"use strict";function h(a,c,d){var e=this,f=b("<div>");return a===z?f.attr("data-weave",a+"(unitId, classId)").data("classId",e[L]):f.attr("data-weave",a+"(unitId)"),f.addClass(d||"").data("unitId",e[K]).appendTo(e.$element.find(c)).weave()}var i=b.extend(!0,{cacheServer:"",useLegacyUnitId:!0},d.config()||{}),j="$element",k="_item",l="nevertake",m="booked",n="dropout",o="pending",p="attended",q="welcome",r="optional_msg_pl",s="notyet",t="incountdown",u="started",v="school-ui-studyplan/widget/gl-pl/countdown/cp20",w="school-ui-studyplan/widget/gl-pl/class-status/cp20",x="school-ui-studyplan/widget/gl-pl/feedback/cp20",y="school-ui-studyplan/widget/gl-pl/feedback-pending/main",z="school-ui-studyplan/widget/gl-pl/enter-class/cp20",A="school-ui-studyplan/widget/gl-pl/book-cp20/main",B="school-ui-studyplan/widget/gl-pl/dropout-cp20/main",C="school-ui-studyplan/widget/gl-pl/cancel-cp20/main",D=".evc-studyplan-activity-container",E=".evc-studyplan-class-info",F=".ets-sp-glpl-enter-class",G="evc-studyplan-gap-2x text-center",H="evc-studyplan-gap-block",I="ets-sp-glpl-enter-class",J="ets-none",K="_unit_id",L="_class_id",M=i.useLegacyUnitId?"legacyUnitId":"templateUnitId",N=i.cacheServer+"/_imgs/evc/pl/topic/100x100/",O=i.cacheServer+"/_imgs/evc/pl/pl_default_100x100.png";return c.extend(function(b,c,d){var f=this;(d||d.properties)&&(f[k]=d,f.closeOptionalTips="closed"===e.getLocalStorage("cp20_tips"),f.cpStatusDeferred=a.defer())},{"hub:memory/load/unit":function(a){var b=this;a&&a[M]&&(b.unitId=a[M],b.publish("query",["member_site_setting!evc;FirstTimeStudyPlanCP20"]).spread(function(a){a&&("true"===a.value.toString()?b.publish("studyplan/evc/cp20/load"):b.html(g,{unitId:b.unitId,statusCode:q}))}))},"hub:memory/studyplan/evc/cp20/start-status":function(a){var b=this;switch(a){case s:b.$element.find(F).addClass(J);break;case t:b.$element.find(F).addClass(J);break;case u:b.$element.find(F).removeClass(J)}},"hub/studyplan/evc/cp20/load":function(){var b=this;b[K]=b.unitId,a.all([b.publish("query",["checkpointstate!cp20;"+b.unitId]),b.publish("query",[b[k].id+".progress"])]).spread(function(a,c){var d=a[0],i=c[0];if(d&&d.topic&&d.statusCode){var k={},q=d.topic,t=d.statusCode.toLowerCase();if(b.cpStatusDeferred.resolver.notify(t),k.status={statusCode:t},k.lessonInfo={topic:q.topicBlurbId,description:q.descBlurbId,image:q.imageUrl?N+q.imageUrl:O},t===m||t===p||t===o||t===l||t===n){var u=d.bookedClass||d.pastClass;if(u&&u.easternStartTime&&(b[L]=u.classId,k.timezoneId=u.timezoneId,k.bookedClass={classId:u.classId,teacherId:u.teacherId},k.customizedStartTime=f.toLocalTime(u.easternStartTime,u.timeZoneOffset)),t===m){if(!u||!u.easternSuggestedCancelTime||!d.countdown)return;var F=d.countdown;k.countdown={timeIn:F.secondsLeftForStart,timeOut:F.secondsLeftForEnter},k.suggestedCancelTime=f.toLocalTime(u.easternSuggestedCancelTime,u.timeZoneOffset)}else if(t===o){if(!d.feedback)return;k.feedback={teacherId:d.feedback.teacherId}}else if(t===p){if(!d.feedback)return;var K=d.feedback;k.feedback={feedbackId:K.feedbackId,teacherId:K.teacherId}}var M=u&&u.evcServerCode||"",P=M.toLowerCase().indexOf("evc")<0;P||e.setSessionStorage("techcheck_state","passed"),b.html(g,{unitId:b.unitId,statusCode:t}).then(function(){switch(b[j].find(E).empty(),b[j].find(D).empty(),b.publish("studyplan/evc/cp20/status",k),b.publish("studyplan/evc/cp20/start-status",s),b.publish("studyplan/evc/cp20/enter-token",i.progress.properties.token),b.closeOptionalTips||b.publish("studyplan/evc/cp20/notification",{statusCode:r}),t.toLowerCase()){case l:h.call(b,A,D,G);break;case n:h.call(b,B,D,G);break;case m:h.call(b,v,E,H),h.call(b,w,E,H),h.call(b,z,E,H+" "+I+" "+J),h.call(b,C,E,H);break;case p:h.call(b,x,D,G);break;case o:h.call(b,y,D,G)}})}}})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/class-status/class-status.html",[],function(){return function(a){var b='<div class="evc-studyplan-class-tips '+(a.classname?a.classname:"")+'">\n    <i class="'+(a.icon?a.icon:"glyphicon icon-comment")+'"></i>\n    <span   data-weave="troopjs-ef/blurb/widget" \n            data-text-en="'+a.en+'" \n            data-blurb-id="'+a.blurbId+'" >\n    </span>\n</div>\n<style>\n    .evc-studyplan-class-tips{\n        font-family: "roboto_condensedbold", "Helvetica Neue", Helvetica, Arial, sans-serif;\n        text-transform: uppercase;\n        font-size: 18px;\n    }\n    .evc-studyplan-class-tips .glyphicon {\n\t    margin-right: 10px;\n    }\n    .evc-studyplan-class-tips *{\n        vertical-align: middle;\n    }\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/class-status/cp20",["troopjs-ef/component/widget","school-ui-studyplan/utils/client-storage","template!./class-status.html"],function(a,b,c){var d="_unitId",e="_statusCode",f="booked",g="incountdown",h="started",i={tckNoPass:{BOOKED:{blurbId:"568587",
en:"Class booked",classname:"evc-studyplan-green"},CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"656134",en:"Classroom is open but you cannot enter",classname:"evc-studyplan-blue"}},tckPassed:{BOOKED:{blurbId:"568587",en:"Class booked",classname:"evc-studyplan-green"},CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"568579",en:"Classroom is open",classname:"evc-studyplan-blue"}}};return a.extend(function(a,b,c){var e=this;e[d]=c},{"sig/initialize":function(){var a=this;return a.query("checkpointstate!cp20;"+a[d]).spread(function(b){if(a[e]=b.statusCode.toLowerCase(),a[e]===f)return a.render("BOOKED")})},"hub:memory/studyplan/evc/cp20/start-status":function(a){var b=this;b[e]===f&&(a===h?b.render("OPEN"):a===g&&b.render("CLOSED"))},render:function(a){var d="passed"===b.getSessionStorage("techcheck_state")?i.tckPassed:i.tckNoPass;if(d[a])return this.html(c,d[a])}})}),define("school-ui-studyplan/widget/gl-pl/class-status/gl",["troopjs-ef/component/widget","school-ui-studyplan/utils/client-storage","template!./class-status.html"],function(a,b,c){var d={tckNoPass:{CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"656134",en:"Classroom is open but you cannot enter",classname:"evc-studyplan-blue"}},tckPassed:{CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"568579",en:"Classroom is open",classname:"evc-studyplan-blue"}}},e="started";return a.extend({"hub:memory/studyplan/evc/gl/start-status":function(a){var f=this,g="passed"===b.getSessionStorage("techcheck_state")?d.tckPassed:d.tckNoPass;a===e?f.html(c,g.OPEN):f.html(c,g.CLOSED)}})}),define("school-ui-studyplan/widget/gl-pl/class-status/pl",["troopjs-ef/component/widget","school-ui-studyplan/utils/client-storage","template!./class-status.html"],function(a,b,c){var d="_unitId",e="_statusCode",f="booked",g="incountdown",h="started",i={tckNoPass:{BOOKED:{blurbId:"568587",en:"Class booked",classname:"evc-studyplan-green"},CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"656134",en:"Classroom is open but you cannot enter",classname:"evc-studyplan-blue"}},tckPassed:{BOOKED:{blurbId:"568587",en:"Class booked",classname:"evc-studyplan-green"},CLOSED:{blurbId:"656133",en:"Classroom not open",classname:"evc-studyplan-gray"},OPEN:{blurbId:"568579",en:"Classroom is open",classname:"evc-studyplan-blue"}}};return a.extend(function(a,b,c){var e=this;e[d]=c},{"sig/initialize":function(){var a=this;return a.query("plclass!"+a[d]).spread(function(b){if(a[e]=b.statusCode.toLowerCase(),a[e]===f)return a.render("BOOKED")})},"hub:memory/studyplan/evc/pl/start-status":function(a){var b=this;b[e]===f&&(a===h?b.render("OPEN"):a===g&&b.render("CLOSED"))},render:function(a){var d="passed"===b.getSessionStorage("techcheck_state")?i.tckPassed:i.tckNoPass;if(d[a])return this.html(c,d[a])}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown-scoreboard/index.html",[],function(){return function(a){var b='<div class="countdown-scoreboard text-center clearfix">\n    <div class="countdown-scoreboard-boards pull-left">\n        <ol class="boards-container">\n            <li class="countdown-scoreboard-board hh">\n                <div class="top">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="top-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <span class="hh">HOUR</span>\n            </li>\n            <li class="board-separator"></li>\n            <li class="countdown-scoreboard-board mm">\n                <div class="top">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="top-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <span class="mm">MIN</span>\n            </li>\n            <li class="board-separator"></li>\n            <li class="countdown-scoreboard-board ss">\n                <div class="top">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="top-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <div class="bottom-animation">\n                    <span class="tens disabled">0</span>\n                    <span class="ones disabled">0</span>\n                </div>\n                <span class="ss">SEC</span>\n            </li>\n        </ol>\n    </div>\n</div>\n\n<style type="text/css">\n.countdown-scoreboard, .countdown-scoreboard .countdown-scoreboard-boards li, .countdown-scoreboard .countdown-scoreboard-labels li {\n    display: inline-block;\n    *display: inline;\n    *zoom: 1;\n}\n.countdown-scoreboard {\n    position: relative;\n    font-family: Arial;\n    text-align: center;\n}\n.countdown-scoreboard .countdown-scoreboard-boards {\n    position: relative;\n}\n.countdown-scoreboard ol, .countdown-scoreboard ul {\n    margin: 0;\n    list-style: none;\n}\n.countdown-scoreboard .boards-container {\n    border-radius: 4px;\n    position: relative;\n}\n.countdown-scoreboard .countdown-scoreboard-boards li {\n    font-size: 0px;\n    text-align: center;\n    vertical-align: middle;\n}\n.countdown-scoreboard .countdown-scoreboard-board,\n.countdown-scoreboard .countdown-scoreboard-board div,\n.countdown-scoreboard .countdown-scoreboard-board span {\n    width: 38px;\n    height: 31px;\n    line-height: 29px;\n    margin-bottom: 10px;\n}\n.countdown-scoreboard .countdown-scoreboard-board {\n    position:relative;\n    -webkit-perspective: 5em;\n    -moz-perspective: 5em;\n    -ms-perspective: 5em;\n    -o-perspective: 5em;\n    perspective: 5em;\n    text-align:center;\n}\n.countdown-scoreboard .countdown-scoreboard-board div {\n    height: 50%;\n    overflow: hidden;\n    position:absolute;\n    left:0;\n}\n.countdown-scoreboard .countdown-scoreboard-board span {\n    width: auto;\n    color: #000;\n    font-size : 18px;\n    font-family: "roboto_condensedbold", "Helvetica Neue", Helvetica, Arial, sans-serif;\n    font-weight: bold;\n}\n.countdown-scoreboard .board-separator {\n    width: 0px;\n    border-right: 1px solid #828275;\n    height: 32px;\n    vertical-align: middle;\n}\n.countdown-scoreboard .top,\n.countdown-scoreboard .top-animation {\n    border-top-left-radius: 4px;\n    border-top-right-radius: 4px;\n    top: 0;\n}\n.countdown-scoreboard .bottom,\n.countdown-scoreboard .bottom-animation {\n    border-bottom-left-radius: 4px;\n    border-bottom-right-radius: 4px;\n    top: 50%;\n}\n.countdown-scoreboard .top span,\n.countdown-scoreboard .top-animation span,\n.countdown-scoreboard .bottom span,\n.countdown-scoreboard .bottom-animation span {\n    height: 200%;\n    position: relative;\n}\n.countdown-scoreboard .bottom span,\n.countdown-scoreboard .bottom-animation span {\n    top: -100%;\n}\n.countdown-scoreboard .top-animation,\n.countdown-scoreboard .bottom-animation {\n    visibility: hidden;\n}\n.countdown-scoreboard .top-animation.animation,\n.countdown-scoreboard .bottom-animation.animation {\n    visibility: visible;\n}\n@keyframes countdownScoreboardBottom {\n    from {\n        transform: rotateX(0);\n    }\n    to {\n        transform: rotateX(90deg);\n    }\n}\n@-webkit-keyframes countdownScoreboardBottom {\n    from {\n        -webkit-transform: rotateX(0);\n    }\n    to {\n        -webkit-transform: rotateX(90deg);\n    }\n}\n@-moz-keyframes countdownScoreboardBottom {\n    from {\n        -moz-transform: rotateX(0);\n    }\n    to {\n        -moz-transform: rotateX(90deg);\n    }\n}\n@-ms-keyframes countdownScoreboardBottom {\n    from {\n        -ms-transform: rotateX(0);\n    }\n    to {\n        -ms-transform: rotateX(90deg);\n    }\n}\n@-o-keyframes countdownScoreboardBottom {\n    from {\n        -o-transform: rotateX(0);\n    }\n    to {\n        -o-transform: rotateX(90deg);\n    }\n}\n@keyframes countdownScoreboardTop {\n    from {\n        transform: rotateX(-90deg);\n    }\n    to {\n        transform: rotateX(0);\n    }\n}\n@-webkit-keyframes countdownScoreboardTop {\n    from {\n        -webkit-transform: rotateX(-90deg);\n    }\n    to {\n        -webkit-transform: rotateX(0);\n    }\n}\n@-ms-keyframes countdownScoreboardTop {\n    from {\n        -ms-transform: rotateX(-90deg);\n    }\n    to {\n        -ms-transform: rotateX(0);\n    }\n}\n@-o-keyframes countdownScoreboardTop {\n    from {\n        -o-transform: rotateX(-90deg);\n    }\n    to {\n        -o-transform: rotateX(0);\n    }\n}\n.countdown-scoreboard .bottom-animation.animation {\n    -webkit-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\n    -moz-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\n    -ms-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\n    -o-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\n    animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\n    -webkit-transform-origin: 0 top;\n    -moz-transform-origin: 0 top;\n    -ms-transform-origin: 0 top;\n    -o-transform-origin: 0 top;\n    transform-origin: 0 top;\n}\n.countdown-scoreboard .top-animation {\n    -webkit-transform: rotateX(-90deg);\n    -moz-transform: rotateX(-90deg);\n    -ms-transform: rotateX(-90deg);\n    -o-transform: rotateX(-90deg);\n    transform: rotateX(-90deg);\n}\n.countdown-scoreboard .top-animation.animation {\n    -webkit-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\n    -moz-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\n    -ms-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\n    -o-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\n    animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\n    -webkit-transform-origin: 0 bottom;\n    -moz-transform-origin: 0 bottom;\n    -mstransform-origin: 0 bottom;\n    -o-transform-origin: 0 bottom;\n    transform-origin: 0 bottom;\n}\n.countdown-scoreboard .boards-axis {\n    width: 149px;\n    height: 1px;\n    position: absolute;\n    left: 3px;\n    top: 17px;\n    background: #eee;\n    opacity: 0.5;\n}\n.countdown-scoreboard .countdown-scoreboard-labels li {\n    font-size: 9px;\n}\n.countdown-scoreboard .countdown-scoreboard-board .hh,\n.countdown-scoreboard .countdown-scoreboard-board .ss,\n.countdown-scoreboard .countdown-scoreboard-board .mm {\n    font-size : 10px;\n    width: 38px;\n    position: relative;\n    bottom:-18px;\n    margin-bottom: 0;\n}\n/*.countdown-scoreboard .button,*/\n.countdown-scoreboard div.countdown-scoreboard-action {\n    position: relative;\n}\n.countdown-scoreboard div.countdown-scoreboard-action button.countdown-scoreboard-tips {\n    display: none;\n    color: #56c2d5;\n    background-color: #fff;\n    cursor: default;\n}\n.countdown-scoreboard .countdown-scoreboard-tips-icon {\n    transform: scaleX(-1);\n    -o-transform: scaleX(-1);\n    -moz-transform: scaleX(-1);\n    -webkit-transform: scaleX(-1);\n}\n.countdown-scoreboard .countdown-scoreboard-tips-txt {\n    white-space: nowrap;\n    text-transform: uppercase;\n}\n.countdown-scoreboard div.countdown-scoreboard-action button.countdown-scoreboard-enter {\n    display: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main",["jquery","template!./index.html"],function(a,b){"use strict";function c(b){b=a.extend({finished:!1,paused:!1},b);var c=b.$el,e=!1;a.contains(document.body,c[0])||(e=!0,c.appendTo("body"));var g=(c.find(".countdown-scoreboard-boards"),c.find(".countdown-scoreboard-enter"));c.find(".countdown-scoreboard-waitting");g.css("left",0),e&&c.remove();var h=!1;return h?c.on("animationend webkitAnimationEnd msAnimationend oAnimationEnd",".animation",function(){var b=a(this).removeClass("animation");b.is(".bottom-animation")&&b.siblings(".top-animation").html(b.siblings(".bottom").html()),b.is(".top-animation")&&b.siblings(".top").html(b.html())}):c.find(".top-animation, .bottom-animation").remove(),{$el:c,disabled:!1,checkPoints:{afterEnd:{},beforeEnd:{}},secondTimer:d,afterEndTimer:[],timeoutTimer:d,timeIn:b.timeIn,enterClickHandler:a.noop,secondsLeft:b.timeIn,timeOut:b.timeOut,timeOutHandler:a.noop,startHandler:a.noop,afterEnd:function(a,b){var c=this;return c.checkPoints.afterEnd[a]=b,c},beforeEnd:function(a,b){var c=this;return c.checkPoints.beforeEnd[a]=b,c},disableEnter:function(){var a=this;return a.disabled=!0,a.$el.find(".countdown-scoreboard-enter").addClass("disabled"),a},onDurationEnd:function(){var b=this;b.finished=!0;b.$el;return b.timeOut&&(b.timeoutTimer&&clearTimeout(timeoutTimer),b.timeoutTimer=setTimeout(b.timeOutHandler,1e3*(b.timeOut-b.timeIn))),a.each(b.checkPoints.afterEnd,function(a,c){b.afterEndTimer.push(setTimeout(function(){c.apply(b)},1e3*a))}),b},onEnterClick:function(a){var b=this;return b.enterClickHandler=a,b},onTimeout:function(a){var b=this;return b.timeOutHandler=a,b},onStart:function(a){var b=this;return b.startHandler=a,b},pause:function(){var a=this;return a.paused=!0,a},start:function(){var a=this;a.$el;return a.secondsLeft?(a.updateBoards(0,a.secondsLeft),function b(){if(!a.finished&&!a.paused){if(0===a.secondsLeft)return void a.onDurationEnd();var c=a.secondsLeft,d=--a.secondsLeft;a.updateBoards(c,d),a.checkPoints.beforeEnd[a.secondsLeft]&&a.checkPoints.beforeEnd[a.secondsLeft](),a.secondTimer=setTimeout(b,1e3)}}(),a.startHandler()):(a.checkPoints.beforeEnd[0]&&a.checkPoints.beforeEnd[0](),a.onDurationEnd()),a},updateBoard:function(a,b){var c=this,d=c.$el.find("."+a),e=b.oldDigits,f=b.newDigits;return d.find(".tens").text(f.tens).end().find(".ones").text(f.ones),h&&d.find(".top .tens, .top-animation .tens, .bottom-animation .tens").text(e.tens).end().find(".top .ones, .top-animation .ones, .bottom-animation .ones").text(e.ones).end().find(".bottom-animation, .top-animation").addClass("animation"),c},updateBoards:function(a,b){var c=this,d=["hh","mm","ss"],e=!0;a=f.convertToObject(a),b=f.convertToObject(b);for(var g=0;g<d.length;g++){var h=d[g],i=a[h],j=b[h];j.tens===i.tens&&j.ones===i.ones||c.updateBoard(d[g],{oldDigits:i,newDigits:j});for(var k,l=["tens","ones"],m=0;m<l.length;m++)k=c.$el.find("."+h+" ."+l[m]),e?j[l[m]]?(k.removeClass("disabled").addClass("enabled"),e=!1):k.removeClass("enabled").addClass("disabled"):k.removeClass("disabled").addClass("enabled")}return c}}}var d,e=86400,f={convertToObject:function(a){return{hh:this.extractDigits(a/3600>>>0),mm:this.extractDigits(a%3600/60>>>0),ss:this.extractDigits(a%60)}},extractDigits:function(a){if(a<10)return{ones:a,tens:0};var b=(""+a).split("");return{ones:b[1]>>>0,tens:b[0]>>>0}},updateDigits:function(a){}},g=function(){var d=a(b()),f={};return f.$el=d.appendTo("body").remove(),f.init=function(b){var d=this;if(!b)throw b={},"Init should have an input object.";var f=b.timeIn,g=b.timeOut;if(isNaN(f))throw b.timeIn=e-1,"timeIn should be a number.";if(f>=e)throw b.timeIn=e-1,"timeIn should little than 24 * 60 * 60.";f<0?b.timeIn=0:"number"==typeof g&&g<=f&&(b.timeOut=0);var h=c(a.extend(b,{$el:d.$el}));return setTimeout(function(){h.start()},0),{afterEnd:function(a,b){var c=this;return a>=0&&h.afterEnd(a,b),c},beforeEnd:function(a,b){var c=this;return 0<=a&&(a<=h.secondsLeft?h.beforeEnd(a,b):b&&b()),c},disableEnter:function(){var a=this;return h.disableEnter(),a},onEnd:function(a){var b=this;return this.afterEnd(0,a),b},onEnterClick:function(a){var b=this;return h.onEnterClick(a),b},onTimeout:function(a){var b=this;return h.onTimeout(a),b},onStart:function(a){var b=this;return h.onStart(a),b},restart:function(){h.start()},stop:function(){return h.secondTimer&&clearTimeout(h.secondTimer),h.timeoutTimer&&clearTimeout(h.timeoutTimer),h.afterEndTimer.forEach(function(a){clearTimeout(a)}),this}}},f};return g}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown/index.html",[],function(){return function(a){var b="",c=a.time,d=a.day,e=a.timezone;return b+='\n<div class="evc-studyplan-countdown">\n    <div class="evc-studyplan-countdown-block">\n        <strong><span>'+c+"</span></strong><span>,</span>&nbsp;<span>"+d+"</span>&nbsp;<span>UTC&nbsp;"+e+'</span>\n    </div>\n</div>\n\n<style type="text/css">\n    .evc-studyplan-countdown{\n        font-size: 14px;\n        display: inline-block;\n\t    background:#eee;\n    }\n    .evc-studyplan-countdown-block{\n        display: inline-block;\n        padding: 10px 18px;\n    }\n    .evc-studyplan-countdown-status{\n        color: #fff;\n        background-color: #bbb;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/countdown/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";var d=[["Sunday","78946"],["Monday","78940"],["Tuesday","78941"],["Wednesday","78942"],["Thusday","78943"],["Friday","78944"],["Saterday","78945"]],e=[["January","77396"],["February","77397"],["March","77398"],["April","77399"],["May","77400"],["June","77401"],["July","77402"],["August","77403"],["September","77404"],["October","77405"],["November","77406"],["December","77407"]];return a.extend({disableEnter:function(){var a=this;a.countdownScoreboard&&a.countdownScoreboard.disableEnter()},renderDate:function(a,b){var f=this;if(a){var g,h;g=a.minute>9?a.hour+":"+a.minute:a.hour+":0"+a.minute,b?f.publish("query",["blurb!"+d[a.dayOfWeek][1],"blurb!"+e[a.month-1][1]]).spread(function(b,d){var e=b.translation,i=d.translation;h=e+" "+i+" "+a.day,f.html(c,{time:g,day:h,timezone:a.timezone})}):f.publish("query",["blurb!103048"]).spread(function(b){h=b.translation||"Today",f.html(c,{time:g,day:h,timezone:a.timezone})})}}})}),define("school-ui-studyplan/widget/gl-pl/countdown/cp20",["jquery","./main","school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main"],function(a,b,c){"use strict";var d=3600,e="incountdown",f="started";return b.extend({"sig/stop":function(){var a=this;a.countdownScoreboard&&a.countdownScoreboard.stop()},render:function(a){var b=this;if(a){var d=new c;b.html(d.$el);var g=a.countdown.timeIn,h=a.countdown.timeOut;b.publish("studyplan/evc/cp20/start-status",e),b.$element.toggleClass("evc-none",0===g),b.countdownScoreboard=d.init({timeIn:g,timeOut:h}).onTimeout(function(){b.publish("studyplan/evc/cp20/load")}).onEnd(function(){b.$element.addClass("evc-none"),b.publish("studyplan/evc/cp20/start-status",f)})}},"hub:memory/studyplan/evc/cp20/status":function(a){var b=this;a&&a.customizedStartTime&&a.suggestedCancelTime&&(b.lesson=a,b.customizedStartTime=a.customizedStartTime,b.suggestedCancelTime=a.suggestedCancelTime,b.timezoneId=a.timezoneId,b.lessonMinutesOfDay=60*b.customizedStartTime.hour+b.customizedStartTime.minute,b.lessonSecondsOfDay=60*b.lessonMinutesOfDay,a.countdown.timeIn>b.lessonSecondsOfDay?b.onemoreDayLesson():a.countdown.timeIn>d?b.onemoreHourLesson():b.render(a))},onemoreDayLesson:function(){var a=this;a.renderDate(a.customizedStartTime,!0)},onemoreHourLesson:function(b){var c=this;b=b||c.lesson.countdown.timeIn-d,window.setTimeout(function(){c.render(a.extend(!0,c.lesson,{countdown:{timeIn:d}}))},1e3*b),c.renderDate(c.customizedStartTime)}})}),define("school-ui-studyplan/widget/gl-pl/grouplesson/service",["troopjs-core/component/gadget","jquery","when","moment","school-ui-studyplan/module"],function(a,b,c,d,e){"use strict";var f=b.extend(!0,{cacheServer:""},e.config()||{}),g=f.cacheServer+"/_imgs/evc/gl/topic/100x100/";return a.extend(function(a){var b=this;b.unitId=a},{get:function(){var a=this,b=c.defer();return a.publish("query",["glclass!"+a.unitId]).spread(function(a){a||b.reject();var c=a.topic,e=a.countDown,f=a.room,h={};h.lessonInfo={topic:c.topicBlurb,description:c.descriptionBlurb,image:g+c.topicImageUrl},h.countdown={timeIn:e.secondsLeftForStart,timeOut:e.secondsLeftForEnter,startTime:d(e.classStartTime).valueOf(),hasClassScheduled:e.hasClassScheduled},h.classroom={global:f.global,local:f.local},h.topicId=a.topic.topicId,b.resolve(h)}),b.promise}})}),define("school-ui-studyplan/widget/gl-pl/countdown/gl",["jquery","when","./main","../grouplesson/service","school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main","template!./index.html"],function(a,b,c,d,e,f){"use strict";var g="incountdown",h="started";return c.extend(function(a,c,d){var e=this;e.unitId=d,e.creditDeferred=b.defer()},{"sig/start":function(){var a=this;new d(a.unitId).get().then(function(b){b&&a.render(b)})},"sig/stop":function(){var a=this;a.countdownScoreboard&&a.countdownScoreboard.stop()},render:function(a){var b=this;if(a){var c=new e,d=a.countdown.timeIn,f=a.countdown.timeOut,i=a.countdown.startTime;b.publish("studyplan/evc/gl/start-time",i),b.publish("studyplan/evc/gl/start-status",g),a.countdown.hasClassScheduled&&(b.$element.toggleClass("evc-none",0===d),b.html(c.$el),b.countdownScoreboard=c.init({timeIn:d,timeOut:f}).onTimeout(function(){b.publish("studyplan/evc/gl/load")}).onEnd(function(){b.$element.addClass("evc-none"),b.publish("studyplan/evc/gl/start-status",h)}))}}})}),define("school-ui-studyplan/widget/gl-pl/countdown/pl",["jquery","./main","school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main"],function(a,b,c){"use strict";var d=3600,e="incountdown",f="started";return b.extend({"sig/stop":function(){var a=this;a.countdownScoreboard&&a.countdownScoreboard.stop()},render:function(a){var b=this;if(a){var d=new c;b.html(d.$el);var g=a.countdown.timeIn,h=a.countdown.timeOut;b.publish("studyplan/evc/pl/start-status",e),b.$element.toggleClass("evc-none",0===g),b.countdownScoreboard=d.init({timeIn:g,timeOut:h}).onTimeout(function(){b.publish("studyplan/evc/pl/load")}).onEnd(function(){b.$element.addClass("evc-none"),b.publish("studyplan/evc/pl/start-status",f)})}},"hub:memory/studyplan/evc/pl/status":function(a){var b=this;a&&a.customizedStartTime&&a.suggestedCancelTime&&(b.lesson=a,b.customizedStartTime=a.customizedStartTime,b.suggestedCancelTime=a.suggestedCancelTime,b.timezoneId=a.timezoneId,b.lessonMinutesOfDay=60*b.customizedStartTime.hour+b.customizedStartTime.minute,b.lessonSecondsOfDay=60*b.lessonMinutesOfDay,a.countdown.timeIn>b.lessonSecondsOfDay?b.onemoreDayLesson():a.countdown.timeIn>d?b.onemoreHourLesson():b.render(a))},onemoreDayLesson:function(){var a=this;a.renderDate(a.customizedStartTime,!0)},onemoreHourLesson:function(b){var c=this;b=b||c.lesson.countdown.timeIn-d,window.setTimeout(function(){c.render(a.extend(!0,c.lesson,{countdown:{timeIn:d}}))},1e3*b),c.renderDate(c.customizedStartTime)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/credit/index.html",[],function(){return function(a){var b='<p class="evc-studyplan-coupon">\n    <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568613"></span>&nbsp;<span>'+a.couponLeft+"</span>\n    ";return a.canBuyMore&&(b+='\n        <a class="evc-studyplan-coupon-buymore" href="'+a.buyUrl+'">\n            <span class="evc-studyplan-coupon-plus">+</span>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="176459"></span>\n        </a>\n    '),b+='\n</p>\n<style type="text/css">\n    .evc-studyplan-gap-block .evc-studyplan-coupon{\n        margin: 20px 0 0 0;\n    }\n    .evc-studyplan-gap-block:first-child .evc-studyplan-coupon{\n        margin: 20px 0 20px 0;\n    }\n    .evc-studyplan-coupon{\n        font-weight: bold;\n        margin-bottom: 0;\n        line-height: 24px;\n\t    text-align: left;\n    }\n    a.evc-studyplan-coupon-buymore, /*add "a" tag to increase css priority*/\n    a.evc-studyplan-coupon-buymore:hover {\n        text-decoration: none;\n        color: #333;\n        margin-left: 10px;\n    }\n    .evc-studyplan-coupon-plus {\n        width: 18px;\n        height: 18px;\n        line-height: 18px;\n        vertical-align: baseline;\n        text-align: center;\n        color: #fff;\n        font-weight: bold;\n        font-family: arial;\n        font-size: 14px;\n        display: inline-block;\n        background-color: #81ba1a;\n        margin-right: 5px;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/credit/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";function d(a,b,c){if(a){var d="";if(a.indexOf("#")!==-1&&(a=a.substr(0,a.indexOf("#"))),a.indexOf("?")!==-1){for(var e=a.substr(1),f=e.split("&"),g=0,h=f.length;g<h;g++)f[g].split("=")[0]===b&&(d=a.replace(f[g].split("=")[1],c));d||(d=a+"&"+b+"="+c)}return d||(d=a+"?"+b+"="+c),d}}return a.extend({render:function(a){var b=this;if(a){var e=location.pathname+location.search+location.hash;a.buyUrl=d(a.buyUrl,"upurl",encodeURIComponent(e)),b.html(c,a)}},generateBuyMoreUrl:function(a){if(a.buyUrl){var b=location.pathname+location.search+location.hash,c=d(a.buyUrl,"upurl",encodeURIComponent(b));return c}}})}),define("school-ui-studyplan/widget/gl-pl/credit/gl",["jquery","./main","./service"],function(a,b,c){"use strict";var d="no_coupon_gl";return b.extend({"sig/start":function(){var a=this;(new c).get("GL").then(function(b){var c=b.credit;if(c)if(c.isUnlimitedAccess)a.publish("studyplan/evc/gl/credit",!0);else{var e,f=c.couponLeft>0;f||(c.canBuyMore&&c.buyUrl&&(e=a.generateBuyMoreUrl(c)),a.publish("studyplan/evc/gl/notification",{statusCode:d,link:e})),a.publish("studyplan/evc/gl/credit",f),a.render(c)}})}})}),define("school-ui-studyplan/widget/gl-pl/credit/pl",["jquery","./main","./service"],function(a,b,c){"use strict";var d="no_coupon_pl";return b.extend({"sig/start":function(){var a=this;(new c).get("PL").then(function(b){if(b){var c,e=b.credit;e.couponLeft<=0&&(e.canBuyMore&&e.buyUrl&&(c=a.generateBuyMoreUrl(e)),a.publish("studyplan/evc/pl/notification",{statusCode:d,link:c})),a.render(e)}})}})}),define("school-ui-studyplan/widget/gl-pl/credit/sppl20",["jquery","./main","./service"],function(a,b,c){"use strict";var d="no_coupon_pl";return b.extend({"sig/start":function(){var a=this;(new c).get("PL20").then(function(b){if(b){var c,e=b.credit;e.couponLeft<=0&&(e.canBuyMore&&e.buyUrl&&(c=a.generateBuyMoreUrl(e)),a.publish("studyplan/evc/pl/notification",{statusCode:d,link:c})),a.render(e)}})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/dropout-cp20/index.html",[],function(){return function(a){var b="";a.bookUrl;return b+='\n<div class="evc-studyplan-btn-book">\n\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="639519" data-text-en="You missed your private lesson"></h2>\n\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="639583" data-text-en="Either you didn\'t show up or you canceled your Private Class too late."></p>\n\t<div class="evc-studyplan-btn-warp">\n\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="639513" data-text-en="Unfortunately, you cannot book a private lesson again. If you believe this was a mistake, please get in touch with us."></p>\n\t\t<button class="btn btn-default" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="639514" data-text-en="Continue"></button>\n\t</div>\n</div>\n<style type="text/css">\n\t.evc-studyplan-activity-container .evc-studyplan-gap-2x {\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\twidth: 660px;\n\t}\n\t.evc-studyplan-btn-book{\n\t\tpadding: 30px 20px;\n\t\tcolor: #555555;\n\t\tbackground-color: #f0f0f0;\n\t}\n\t.evc-studyplan-btn-book h2 {\n\t\tmargin-bottom: 10px;\n\t}\n\t.evc-studyplan-btn-book .btn{\n\t\tdisplay: inline-block;\n\t\tmargin: 10px 8px;\n\t}\n\t.evc-studyplan-btn-book p {\n\t\tfont-size: 1.3em;\n\t}\n\t.evc-studyplan-btn-warp {\n\t\tmargin-top: 20px;\n\t}\n\tp.text-muted {\n\t\tmargin-top: 8px;\n\t}\n\t.text-muted a {\n\t\tcolor: #999;\n\t\ttext-decoration: underline;\n\t}\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/dropout-cp20/main",["jquery","troopjs-ef/component/widget","template!./index.html"],function(a,b,c){"use strict";var d="/school/evc/pl/unitaligned",e="SP";return b.extend(function(a,b,c){var d=this;d.unitId=c},{"sig/start":function(){var a=this;if(a.unitId){var b={};b.bookUrl=d+"/"+a.unitId+"?source="+encodeURIComponent(location.href)+"&key="+e+"#booking",a.html(c,b)}},"dom:.btn-default/click":function(){var a=this;a.publish("studyplan/sequence/navigate/goal")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/enter-class/enter-class.html",[],function(){return function(a){var b="",a=a||{};return b+='\n<div class="evc-studyplan-enter">\n\t<button class="btn btn-primary countdown-scoreboard-enter" data-weave="troopjs-ef/blurb/widget" data-blurb-id="78907">Enter class</button>\n</div>\n',a.hasRecord&&(b+='\n<label class="evc-studyplan-record '+(a.recordDisabled?"evc-studyplan-record-disabled":"")+'">\n\t<input type="checkbox" class="evc-studyplan-record-check" '+(a.recordChecked?'checked="checked"':"")+" "+(a.recordDisabled?'disabled="disabled"':"")+'/>\n\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="708472" data-text-en="Send me class video"></span>\n\t<span class="glyphicon glyphicon-exclamation-sign" data-toggle="popover" data-trigger="hover" data-placement="bottom" data-content="'+a.recordHint+'"></span>\n</label>\n'),b+='\n<style>\n\t.evc-studyplan-enter{\n\t\tmargin:20px 0;\n\t}\n\t.evc-studyplan-enter .btn {\n\t\tfont-family: "roboto_condensedbold", "Helvetica Neue", Helvetica, Arial, sans-serif;\n\t\ttext-transform: uppercase;\n\t\tpadding:10px 30px;\n\t}\n\tlabel.evc-studyplan-record {\n\t\tfont-weight: normal;\n\t}\n\tlabel.evc-studyplan-record-disabled {\n\t\tcolor: #ccc;\n\t}\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/enter-class/cp20",["troopjs-ef/component/widget","template!./enter-class.html"],function(a,b){function c(a,b){var c=this;return c[f].replace("?","?showcontentonly=y&").replace("{unitId}",a).replace("{source}",window.encodeURIComponent(window.location.href)).replace("{classId}",b)}var d="_unitId",e="_classId",f="_cp20_enter_url",g="started";return a.extend(function(a,b,c,f){var g=this;g[d]=c,g[e]=f},{"sig/start":function(){var a=this;return a.query("evc_url_resource!current").spread(function(b){a[f]=b.studyPlanUrls.CP20Entering})},"hub:memory/studyplan/evc/cp20/start-status":function(a){var c=this;a===g&&c.html(b)},"dom:.countdown-scoreboard-enter/click":function(){var a=this;window.open(c.call(a,a[d],a[e]),"_self")}})}),define("school-ui-studyplan/widget/gl-pl/enter-class/gl",["jquery.gudstrap","troopjs-ef/component/widget","client-tracking","template!./enter-class.html"],function(a,b,c,d){function e(a){var b=this,c=b[q].replace("{unitId}",a).replace("{source}",window.encodeURIComponent(window.location.href));return b[o]&&(c+=";glRecordChecked="+b[p]),
c}function f(){return"gl_record_checked_"+this[n]}function g(){var a;try{a=localStorage.getItem(f.call(this))}catch(b){a=null}return a}function h(a){try{localStorage.setItem(f.call(this),a)}catch(a){}}var i="_unitId",j="_gl_credit",k="_started",l="_topicID",m="_class_start_time",n="_member_id",o="_has_gl_record",p="_user_gl_record",q="_gl_enter_url",r="_record_hint",s="started";return b.extend(function(a,b,c){var d=this;d[i]=c},{"sig/start":function(){var a=this;return a.query(["user!current","evc_url_resource!current","evcmember!current","blurb!708473"]).spread(function(b,c,d,e){a[n]=b.member_id,a[q]=c.studyPlanUrls.SPGL,a[o]=d.enableGLRecord,a[p]=d.defaultGLRecordOption,a[r]=e&&e.translation||"",a.render()})},render:function(a){var b=this;if(b[k]&&b[j]&&b[m]&&b[n]){var c=g.call(b),e=b[m]+"_",f=null!==c&&c.substr(0,e.length)===e;return b.html(d,{hasRecord:b[o],recordChecked:b[p],recordDisabled:f,recordHint:b[r]}).then(function(){var a=b.$element.find(".glyphicon-exclamation-sign");a.popover()})}},"hub:memory/studyplan/evc/gl/credit":function(a){var b=this;b[j]=a,b.render()},"hub:memory/studyplan/evc/gl/start-time":function(a){var b=this;b[m]=a,b.render()},"hub:memory/studyplan/evc/gl/start-status":function(a){var b=this;b[k]=a===s,b.render()},"hub:memory/studyplan/evc/gl/topicId":function(a){var b=this;b[l]=a},"dom:.countdown-scoreboard-enter/click":function(){var a=this;c.useraction({"action.joinGL":a[l]}),h.call(a,a[m]+"_"+a[p]),window.open(e.call(a,a[i]),"_self")},"dom:.evc-studyplan-record-check/change":function(a){this[p]=a.currentTarget.checked}})}),define("school-ui-studyplan/widget/gl-pl/enter-class/pl",["troopjs-ef/component/widget","client-tracking","school-ui-studyplan/enum/studyplan-item-typecode","template!./enter-class.html"],function(a,b,c,d){function e(a){var b=this;return b[i].replace("?","?showcontentonly=y&").replace("{source}",window.encodeURIComponent(window.location.href)).replace("{classId}",a)}var f="_unitId",g="_classId",h="_spTypeCode",i="_pl_enter_url",j="_topicId",k="started";return a.extend(function(a,b,c,d,e){var i=this;i[f]=c,i[g]=d,i[h]=e},{"sig/start":function(){var a=this;return a.query("evc_url_resource!current").spread(function(b){a[i]=a[h]===c.pl20?b.studyPlanUrls.SPPL20Entering:b.studyPlanUrls.SPPL40Entering})},"hub:memory/studyplan/evc/pl/start-status":function(a){var b=this;a===k&&b.html(d)},"hub:memory/studyplan/evc/pl/status":function(a){var b=this;b[j]=a.topicId},"dom:.countdown-scoreboard-enter/click":function(){var a=this;b.useraction({"action.joinPL":a[j]}),window.open(e.call(a,a[g]),"_self")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback-pending/index.html",[],function(){return function(a){var b="";return b+='\n<div class="text-center">\n    <p class="evc-studyplan-pedding-status" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568580"></p>\n    <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="568582"></p>\n    <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="568606"></p>\n</div>\n<style type="text/css">\n    .evc-studyplan-pedding-status{\n        font-size: 1.3em;\n        font-weight: bold;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/feedback-pending/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";return a.extend({"sig/start":function(){var a=this;a.html(c)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback/index.html",[],function(){return function(a){var b="",c=a.url,d=a.date;return b+='\n<div class="evc-studyplan-btn-feedback text-center">\n    <p class="evc-studyplan-feedback-status" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568590"></p>\n    <p>\n        <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568591"></span>\n        <span>'+d+'</span>\n    </p>\n    <a href="'+c+'" class="btn btn-primary" role="button" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568592"></a>\n</div>\n<style type="text/css">\n    .evc-studyplan-btn-feedback{\n        margin-top: 20px;\n    }\n    .evc-studyplan-btn-feedback > a{\n        display: inline-block;\n    }\n    .evc-studyplan-feedback-status{\n        font-size: 1.3em;\n        font-weight: bold;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/feedback/main",["when","jquery","moment","school-ui-shared/enum/moment-language","troopjs-ef/component/widget","template!./index.html"],function(a,b,c,d,e,f){"use strict";var g="_context_promise";return e.extend({"sig/start":function(){this[g]=a.defer()},"hub:memory/context":function(a){a&&this[g].resolve([a])},render:function(a){var b=this;a&&b[g].promise.spread(function(e){var g=c(new Date(a.year,a.month-1,a.day));g.lang(d[e.cultureCode.toLowerCase()]),b.html(f,{url:a.url,date:g.format("LL")})})}})}),define("school-ui-studyplan/widget/gl-pl/feedback/cp20",["jquery","./main","school-ui-studyplan/module"],function(a,b,c){"use strict";var d="(FEEDBACK_ID)",e="detail/cp20",f=a.extend(!0,{progressReportUrl:"/school/progressreport",teacherFeedbackHash:"#teacher-feedback?fb_id=EVC_"+d},c.config()||{});return b.extend({"hub:memory/studyplan/evc/cp20/status":function(a){var b=this;if(a&&a.feedback&&a.customizedStartTime){var c=(a.feedback,a.customizedStartTime),d=c.year,g=c.month,h=c.day,i=f.progressGoals+e;b.render({url:i,year:d,month:g,day:h})}}})}),define("school-ui-studyplan/widget/gl-pl/feedback/gl",["jquery","./main","school-ui-studyplan/module"],function(a,b,c){"use strict";var d="(FEEDBACK_ID)",e="detail/gl",f=a.extend(!0,{progressReportUrl:"/school/progressreport",teacherFeedbackHash:"#teacher-feedback?fb_id=EVC_"+d},c.config()||{});return b.extend({"hub:memory/studyplan/evc/gl/status":function(a){var b=this;if(a&&a.feedback){var c=a.feedback,d=c.customizedEntryDate,g=f.progressGoals+e,h=d.year,i=d.month,j=d.day;b.render({url:g,year:h,month:i,day:j})}}})}),define("school-ui-studyplan/widget/gl-pl/feedback/pl",["jquery","./main","school-ui-studyplan/module"],function(a,b,c){"use strict";var d="(FEEDBACK_ID)",e=a.extend(!0,{progressReportUrl:"/school/progressreport",teacherFeedbackHash:"#teacher-feedback?fb_id=EVC_"+d},c.config()||{});return b.extend({"hub:memory/studyplan/evc/pl/status":function(a){var b=this;if(a&&a.feedback&&a.customizedStartTime){var c=a.feedback,f=a.customizedStartTime,g=f.year,h=f.month,i=f.day,j=e.progressReportUrl+e.teacherFeedbackHash.replace(d,c.feedbackId);b.render({url:j,year:g,month:h,day:i})}}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/grouplesson/index.html",[],function(){return function(a){var b='<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/announcement/gl"></div>\n<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/statusbar/gl"></div>\n<div class="evc-studyplan-wrapper">\n    ';return b+="welcome"===a.statusCode?'\n        <div class="evc-studyplan-column-single evc-studyplan-welcome" data-weave="school-ui-studyplan/widget/gl-pl/welcome-gl/main"></div>\n    ':'\n        <div class="evc-studyplan-column-single">\n            <div class="evc-studyplan-gap-2x" data-weave="school-ui-studyplan/widget/gl-pl/lesson/gl"></div>\n            <div class="evc-studyplan-gap-1x evc-studyplan-class-info">\n            </div>\n        </div>\n        <div class="evc-studyplan-activity-container">\n        </div>\n    ',b+='\n</div>\n<style type="text/css">\n    .evc-studyplan-wrapper{\n        text-align: center;\n        padding: 30px 0 50px;\n        color: #4a4a4a;\n    }\n    .evc-studyplan-column-full{\n        display: inline-block;\n    }\n    .evc-studyplan-column-single{\n        display: inline-block;\n        width: 980px;\n    }\n    .evc-studyplan-column-single hr{\n        margin-bottom: 0;\n    }\n    .evc-studyplan-welcome{\n        width: 900px;\n        padding-top: 50px;\n    }\n    .evc-studyplan-gap-2x{\n        text-align: left;\n        width: 620px;\n        padding-left: 35px;\n        padding-right: 35px;\n        vertical-align: top;\n        display: inline-block;\n        margin: 20px auto;\n    }\n    .evc-studyplan-gap-1x{\n        text-align: left;\n        width: 330px;\n        vertical-align: top;\n        margin: auto;\n        padding-left: 30px;\n        display: inline-block;\n        border-left:1px #eee solid;\n    }\n    .evc-studyplan-gap-1x .evc-studyplan-gap-block{\n        margin-bottom: 15px;\n    }\n    .st-evc-status{\n        color: #4a4a4a;\n        background-color: #e6e6e6;\n    }\n    .evc-studyplan-gray{\n        color:#999999;\n    }\n    .evc-studyplan-green{\n        color:#87c600;\n    }\n    .evc-studyplan-blue{\n        color: #00bee3;\n    }\n    .evc-none{\n        display: none;\n    }\n    .evc-studyplan-activity-container {\n        width:880px;\n        margin:0 auto;\n    }\n    .evc-studyplan-activity-tc {\n        text-align: left;\n        padding-right: 330px;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/grouplesson/main",["when","jquery","moment","troopjs-ef/component/widget","school-ui-shared/enum/moment-language","school-ui-studyplan/module","school-ui-studyplan/utils/client-storage","template!./index.html"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,c,d){var e=this;return b("<div>").attr("data-weave",a+"(unitId)").addClass(d||"").data("unitId",e[N]).appendTo(e[k].find(c)).weave()}var j=b.extend(!0,{cacheServer:"",useLegacyUnitId:!0},f.config()||{}),k="$element",l="dropout",m="nevertake",n="pending",o="attended",p="welcome",q="optional_msg_gl",r="leftearly",s="notyet",t="incountdown",u="started",v=j.cacheServer+"/_imgs/evc/gl/topic/100x100/",w=j.cacheServer+"/_imgs/evc/gl/gl_default_100x100.jpg",x="_context_promise",y="school-ui-studyplan/widget/gl-pl/countdown/gl",z="school-ui-studyplan/widget/gl-pl/class-status/gl",A="school-ui-studyplan/widget/gl-pl/credit/gl",B="school-ui-studyplan/widget/gl-pl/feedback/gl",C="school-ui-studyplan/widget/gl-pl/feedback-pending/main",D="school-ui-studyplan/widget/gl-pl/enter-class/gl",E="school-ui-studyplan/widget/gl-pl/terms-and-conditions/main",F=".evc-studyplan-activity-container",G=".evc-studyplan-class-info",H=".ets-sp-glpl-enter-class",I="evc-studyplan-gap-2x text-center",J="evc-studyplan-gap-block",K="ets-sp-glpl-enter-class",L="ets-none",M="evc-studyplan-activity-tc",N="_unit_id",O=j.useLegacyUnitId?"legacyUnitId":"templateUnitId";return d.extend(function(b,c,d){if(d||d.properties){var e=this;e.closeOptionalTips="closed"===g.getLocalStorage("gl_tips"),e[x]=a.defer()}},{"hub:memory/load/unit":function(a){var b=this;a&&a[O]&&(b.unitId=a[O],b.publish("query",["member_site_setting!evc;FirstTimeStudyPlanGL"]).spread(function(a){a&&("true"===a.value.toString()?b.publish("studyplan/evc/gl/load"):b.html(h,{statusCode:p}))}))},"hub:memory/studyplan/evc/gl/start-status":function(a){var b=this;switch(a){case s:b.$element.find(H).addClass(L);break;case t:b.$element.find(H).addClass(L);break;case u:b.$element.find(H).removeClass(L)}},"hub/studyplan/evc/gl/load":function(){var d=this;d[N]=d.unitId,d.publish("query",["glstatus!"+d.unitId,"glclass!"+d.unitId]).spread(function(f,j){if(f){var p=f.statusCode.toLowerCase(),t=f.feedback,u={unitId:d.unitId,statusCode:p,teacherId:t.teacherId||"",feedbackId:t.feedbackId||"",topic:{},feedback:t||{}};if(p===n||p===o){var H=t.topic;H&&(u.topic={topic:H.topicBlurb,description:H.descriptionBlurb,image:v+H.topicImageUrl||w})}var N=j&&j.evcServerCode||"",O=N.toLowerCase().indexOf("evc")<0;O||g.setSessionStorage("techcheck_state","passed");var P=f;b.extend(!0,P,{unitId:d.unitId}),d.html(h,P).then(function(){if(d[k].find(G).empty(),d[k].find(F).empty(),d.publish("studyplan/evc/gl/start-time",new Date(j.countDown.classStartTime||0).getTime()),d.publish("studyplan/evc/gl/status",u),d.publish("studyplan/evc/gl/start-status",s),d.closeOptionalTips||d.publish("studyplan/evc/gl/notification",{statusCode:q}),p===l){if(!t.entryDate)return;a.all([d[x].promise,d.query("blurb!568599")]).spread(function(a,b){var f=a[0],g=c(t.entryDate);g.lang(e[f.cultureCode.toLowerCase()]);var h=b[0],i=h.translation;i=i.replace("%%date%%",g.format("YYYY-MM-DD")).replace("%%time%%",g.format("HH:mm")),d.publish("studyplan/evc/gl/notification",{statusCode:r,link:"http://www.ef.com",msg:i})})}switch(p.toLowerCase()){case m:case l:i.call(d,y,G,J),i.call(d,z,G,J),i.call(d,D,G,J+" "+K+" "+L),i.call(d,A,F,J),i.call(d,E,F,M);break;case n:i.call(d,C,F,I),i.call(d,A,F,J);break;case o:i.call(d,B,F,I),i.call(d,A,F,J)}})}})},"hub:memory/context":function(a){a&&this[x].resolve([a])}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/lesson/index.html",[],function(){return function(a){var b="",c=a.lessonInfo,d=a.profile;return b+='\n<div class="clearfix ',d&&(b+="evc-studyplan-withteacher"),b+='" >\n    <div class="pull-left evc-studyplan-topic-pic">\n        <img src="'+c.image+'" width="100" height="100" alt="" />\n        ',d&&(b+='\n            <div class="evc-studyplan-teacher">\n                ',b+=d.link?'\n                    <a href="'+d.link+'" target="_blank">\n                        <img class="img-circle" src="'+d.imageUrl+'" width="42" height="42" alt="'+d.nickname+'">\n                    </a>\n                ':'\n                    <img class="img-circle" src="'+d.imageUrl+'" width="42" height="42" alt="'+d.nickname+'">\n                ',b+="\n            </div>\n        "),b+='\n    </div>\n    <div class="pull-left evc-studyplan-topic">\n        ',b+=a.changeTopicTitle?'\n            <h5 data-weave="troopjs-ef/blurb/widget" data-blurb-id="490207"></h5>\n        ':'\n            <h5 data-weave="troopjs-ef/blurb/widget" data-blurb-id="80310"></h5>\n        ',b+='\n        <h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+c.topic+'"></h2>\n        ',d&&(b+='\n            <p><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="78910"></span>&nbsp;<span>'+d.nickname+"</span></p>\n        "),b+='\n    </div>\n</div>\n<div class="evc-studyplan-description">\n    <p data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+c.description+'"></p>\n</div>\n\n<style type="text/css">\n    .evc-studyplan-withteacher {\n        padding-bottom: 14px;\n    }\n    .evc-studyplan-topic-pic {\n        position: relative;\n        width: 100px;\n        height: 100px;\n        margin-right: 20px;\n    }\n    .evc-studyplan-teacher {\n        position: absolute;\n        left: 72px;\n        top: 72px;\n        white-space: nowrap;\n    }\n    .evc-studyplan-teacher a {\n        display: inline-block;\n        text-decoration: none;\n    }\n    .evc-studyplan-teacher a:hover {\n        text-decoration: none;\n    }\n    .evc-studyplan-topic {\n        width: 420px;\n    }\n    .evc-studyplan-topic h5 {\n        margin-bottom: 5px;\n    }\n    .evc-studyplan-topic h2 {\n        margin-top: 0;\n        line-height: 1em;\n    }\n    .evc-studyplan-topic p {\n        font-size: 112%;\n        font-weight: bold;\n        vertical-align: middle;\n        margin-bottom: 0;\n        margin-top: 6px;\n    }\n    .evc-studyplan-description {\n        margin-top: 10px;\n        clear: both;\n        line-height: 1.55em;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/lesson/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";var d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkEzNzkzNzJDRDQ1MTFFNEJCQTBDRTQ3OUEzNjM5OEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkEzNzkzNzNDRDQ1MTFFNEJCQTBDRTQ3OUEzNjM5OEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTM3OTM3MENENDUxMUU0QkJBMENFNDc5QTM2Mzk4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTM3OTM3MUNENDUxMUU0QkJBMENFNDc5QTM2Mzk4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjsNI60AAA0mSURBVHja7F13UBXd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";return a.extend({render:function(a){var b=this;a&&("https:"===window.location.protocol&&a.profile&&a.profile.imageUrl&&0===a.profile.imageUrl.indexOf("http://")&&(a.profile.imageUrl=d),b.html(c,a))}})}),define("school-ui-studyplan/widget/gl-pl/lesson/cp20",["jquery","./main","template!./index.html"],function(a,b,c){"use strict";var d="booked",e="pending",f="attended";return b.extend({"hub/studyplan/evc/cp20/status":function(a){var b=this;if(a){var c=a.status,g=c.statusCode,h="",i={};if(i.lessonInfo=a.lessonInfo,i.changeTopicTitle=!1,g===f||g===e){if(!a.feedback)return;h=a.feedback.teacherId,i.changeTopicTitle=!0}else if(g===d){if(!a.bookedClass)return;h=a.bookedClass.teacherId}h&&h>0?b.publish("query",["teacherprofile!"+h]).spread(function(a){a&&(i.profile={imageUrl:a.imageUrl,link:"",nickname:a.displayName},b.render(i))}):b.render(i)}}})}),define("school-ui-studyplan/widget/gl-pl/lesson/gl",["jquery","./main","../grouplesson/service"],function(a,b,c){"use strict";var d="pending",e="attended";return b.extend({"hub/studyplan/evc/gl/status":function(a){var b=this;if(a&&a.statusCode&&a.unitId){var f,g,h=a.statusCode,i=a.unitId,j={};if(j.changeTopicTitle=!1,h===d||h===e){if(!a.topic)return;f=a.topic,g=a.teacherId,j.lessonInfo=f,j.changeTopicTitle=!0,g?b.publish("query",["teacherprofile!"+g]).spread(function(a){a&&(j.profile={imageUrl:a.imageUrl,link:a.pageUrl,nickname:a.displayName},b.render(j))}):b.render(j)}else new c(i).get().then(function(a){a&&a.lessonInfo&&(j.lessonInfo=a.lessonInfo,b.render(j),b.publish("studyplan/evc/gl/topicId",a.topicId))})}}})}),define("school-ui-studyplan/widget/gl-pl/lesson/pl",["jquery","./main","template!./index.html"],function(a,b,c){"use strict";var d="booked",e="pending",f="attended";return b.extend({"hub/studyplan/evc/pl/status":function(a){var b=this;if(a){var c=a.status,g=c.statusCode,h="",i={};if(i.lessonInfo=a.lessonInfo,i.changeTopicTitle=!1,g===f||g===e){if(!a.feedback)return;h=a.feedback.teacherId,i.changeTopicTitle=!0}else if(g===d){if(!a.bookedClass)return;h=a.bookedClass.teacherId}h&&h>0?b.publish("query",["teacherprofile!"+h]).spread(function(a){a&&(i.profile={imageUrl:a.imageUrl,link:a.pageUrl,nickname:a.displayName},b.render(i))}):b.render(i)}}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/mark/booked.html",[],function(){return function(a){var b='<span class="badge evc-studyplan-mark evc-studyplan-mark-booked" data-weave="troopjs-ef/blurb/widget" data-text-en="Booked" data-blurb-id="78918"></span>\n<style type="text/css">\n    .evc-studyplan-mark-booked,\n    .gud .evc-studyplan-mark-booked\n    {\n        background-color: #232c33;\n    }\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/mark/cp20",["troopjs-ef/component/widget","when","jquery","school-ui-studyplan/module","school-ui-shared/utils/console","template!./booked.html"],function(a,b,c,d,e,f){var g=c.extend(!0,{useLegacyUnitId:!0},d.config()||{}),h="booked",i=g.useLegacyUnitId?"legacyUnitId":"templateUnitId";return a.extend(function(a,c,d){function e(a){a&&a[i]&&(f.getUnit.resolver.resolve(a[i]),f.unsubscribe("load/unit",e))}var f=this;f.getUnit=b.defer(),f.subscribe("load/unit",e),f.republish("load/unit",!1,e)},{"sig/start":function(){var a=this;return a.getUnit.promise.then(function(c){return a.publish("query",["checkpointstate!cp20;"+c]).spread(function(c){if(!c||!c.statusCode)return b.reject("skip CP20 mark, CP20 status query failed.");var d=c.statusCode.toLowerCase();return d!==h?b.reject("skip CP20 mark, CP20 not booked."):void a.html(f)})})}})}),define("school-ui-studyplan/widget/gl-pl/mark/pl",["troopjs-ef/component/widget","when","jquery","school-ui-studyplan/module","school-ui-shared/utils/console","template!./booked.html"],function(a,b,c,d,e,f){var g=c.extend({useLegacyUnitId:!0},d.config()||{}),h="booked",i=g.useLegacyUnitId?"legacyUnitId":"templateUnitId";return a.extend(function(a,c,d){function e(a){a&&a[i]&&(f.getUnit.resolver.resolve(a[i]),f.unsubscribe("load/unit",e))}var f=this;f.getUnit=b.defer(),f.subscribe("load/unit",e),f.republish("load/unit",!1,e)},{"sig/start":function(){var a=this;return a.getUnit.promise.then(function(c){return a.publish("query",["plclass!"+c]).spread(function(c){if(!c||!c.statusCode)return b.reject("skip PL mark, PL status query failed.");var d=c.statusCode.toLowerCase();return d!==h?b.reject("skip PL mark, PL not booked."):void a.html(f)})})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupvideo/index.html",[],function(){return function(a){var b='<div class="evc-studyplan-popup-video modal">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t</div>\n\t\t<div class="close" data-dismiss="modal"></div>\n\t</div>\n</div>\n\n<style type="text/css">\n\t.evc-studyplan-popup-video .modal-dialog {\n\t\tpadding:0;\n\t\twidth:640px;\n\t\theight: 400px;\n\t}\n\t.evc-studyplan-popup-video .close {\n\t\tposition: absolute;\n\t\ttop: -14px;\n\t\tright: -24px;\n\t\twidth:35px;\n\t\theight:35px;\n\t\tbackground: url(data:image/png;base64,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) center top no-repeat;\n\t\t*background-image: url(/_imgs/evc/block/high/btn_close.png);\n\t\tfilter:none;\n\t}\n\t.evc-studyplan-popup-video .close:hover {\n\t\topacity: 1;\n\t\tfilter:none;\n\t}\n</style>';return b}}),define("school-ui-studyplan/widget/gl-pl/popupvideo/main",["jquery","jquery.gudstrap","jquery.mediaelement","troopjs-ef/component/widget","template!./index.html"],function(a,b,c,d,e){"use strict";var f="$element",g="_video_url",h="_media_element",i=".evc-studyplan-popup-video";return d.extend({"sig/start":function(){var b=this;return b[g]=b[f].data("videoUrl"),b.html(e).then(function(){var d=b[f].find(".modal-content");a(i).on("shown.bs.modal",function(){var e=a("<video/>",{class:"ets-vp",width:"100%",height:"100%",type:"video/mp4",controls:"controls",src:b[g]});e.appendTo(d.empty()),c.MediaElementPlayer(e,{pauseOtherPlayers:!0,alwaysShowControls:!0,startVolume:.8,features:["playpause","progress","current","duration","tracks","volume"],videoWidth:640,videoHeight:360,success:function(a,c,d){a.play(),b[h]=a}})}),a(i).on("hide.bs.modal",function(){b[h].pause(),d.find("video")[0].player.remove()})})},"hub/studyplan/evc/welcome-video/show":function(){this[f].find(i).modal()},"dom:.mejs-cover/click":function(){var a=this;!a[h].paused&&a[h].pause()}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/privatelesson/index.html",[],function(){return function(a){var b="",c="welcome",d=a.statusCode;a.unitId;return b+='\n<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/announcement/pl"></div>\n<div class="st-evc-status" data-weave="school-ui-studyplan/widget/gl-pl/statusbar/pl"></div>\n<div class="evc-studyplan-wrapper">\n    ',b+=d===c?'\n        <div class="evc-studyplan-column-single evc-studyplan-welcome" data-weave="school-ui-studyplan/widget/gl-pl/welcome-pl/main"></div>\n    ':'\n        <div class="evc-studyplan-column-single">\n            <div class="evc-studyplan-gap-2x" data-weave="school-ui-studyplan/widget/gl-pl/lesson/pl"></div>\n            <div class="evc-studyplan-gap-1x evc-studyplan-class-info">\n            </div>\n        </div>\n        <div class="evc-studyplan-activity-container">\n        </div>\n    ',b+='\n</div>\n\n<style type="text/css">\n\n    .evc-studyplan-wrapper{\n        text-align: center;\n        padding: 30px 0 50px;\n        color: #4a4a4a;\n    }\n    .evc-studyplan-column-full{\n        display: inline-block;\n    }\n    .evc-studyplan-column-single{\n        display: inline-block;\n        width: 980px;\n    }\n    .evc-studyplan-column-single hr{\n        margin-bottom: 0;\n    }\n    .evc-studyplan-welcome{\n        width: 900px;\n        padding-top: 50px;\n    }\n    .evc-studyplan-gap-2x{\n        text-align: left;\n        width: 620px;\n        padding-left: 35px;\n        padding-right: 35px;\n        vertical-align: top;\n        display: inline-block;\n\t\tmargin: 20px auto;\n    }\n    .evc-studyplan-gap-1x{\n        text-align: left;\n        width: 330px;\n        vertical-align: top;\n        margin: auto;\n\t    padding-left: 30px;\n        display: inline-block;\n\t    border-left:1px #eee solid;\n    }\n    .evc-studyplan-gap-1x .evc-studyplan-gap-block{\n\t    margin-bottom: 15px;\n    }\n    .st-evc-status{\n        color: #4a4a4a;\n        background-color: #e6e6e6;\n    }\n    .evc-studyplan-gray{\n        color:#999999;\n    }\n    .evc-studyplan-green{\n        color:#87c600;\n    }\n    .evc-studyplan-blue{\n        color: #00bee3;\n    }\n    .evc-none{\n        display: none;\n    }\n    .evc-studyplan-activity-container {\n\t    width:880px;\n\t    margin:0 auto;\n    }\n</style>';
}}),define("school-ui-studyplan/widget/gl-pl/privatelesson/main",["troopjs-browser/component/widget","when","jquery","school-ui-studyplan/module","school-ui-studyplan/utils/client-storage","school-ui-studyplan/utils/time-parser","school-ui-studyplan/enum/studyplan-item-typecode","template!./index.html"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,d){var e=this,f=c("<div>");return a===C?f.attr("data-weave",a+"(unitId, classId, spTypeCode)").data("classId",e[N]):f.attr("data-weave",a+"(unitId, spTypeCode)"),f.addClass(d||"").data("unitId",e[M]).data("spTypeCode",e[R]).appendTo(e.$element.find(b)).weave()}var j=c.extend(!0,{cacheServer:"",useLegacyUnitId:!0},d.config()||{}),k="$element",l="nevertake",m="booked",n="dropout",o="pending",p="attended",q="welcome",r="optional_msg_pl",s="missingclass",t="notyet",u="incountdown",v="started",w="school-ui-studyplan/widget/gl-pl/countdown/pl",x="school-ui-studyplan/widget/gl-pl/class-status/pl",y="school-ui-studyplan/widget/gl-pl/credit/pl",z="school-ui-studyplan/widget/gl-pl/credit/sppl20",A="school-ui-studyplan/widget/gl-pl/feedback/pl",B="school-ui-studyplan/widget/gl-pl/feedback-pending/main",C="school-ui-studyplan/widget/gl-pl/enter-class/pl",D="school-ui-studyplan/widget/gl-pl/book-pl/main",E="school-ui-studyplan/widget/gl-pl/cancel-pl/main",F=".evc-studyplan-activity-container",G=".evc-studyplan-class-info",H=".ets-sp-glpl-enter-class",I="evc-studyplan-gap-2x text-center",J="evc-studyplan-gap-block",K="ets-sp-glpl-enter-class",L="ets-none",M="_unit_id",N="_class_id",O=j.useLegacyUnitId?"legacyUnitId":"templateUnitId",P=j.cacheServer+"/_imgs/evc/pl/topic/100x100/",Q=j.cacheServer+"/_imgs/evc/pl/pl_default_100x100.png",R="_type_code",S="_widget_credit";return a.extend(function(a,b,c){var d=this;(c||c.properties)&&(d[R]=c.typeCode,d[S]=d[R]===g.pl20?z:y,d.closeOptionalTips="closed"===e.getLocalStorage("pl_tips"))},{"hub:memory/load/unit":function(a){var b=this;a&&a[O]&&(b.unitId=a[O],b.publish("query",["member_site_setting!evc;FirstTimeStudyPlanPL"]).spread(function(a){a&&("true"===a.value.toString()?b.publish("studyplan/evc/pl/load"):b.html(h,{unitId:b.unitId,statusCode:q}))}))},"hub:memory/studyplan/evc/pl/start-status":function(a){var b=this;switch(a){case t:b.$element.find(H).addClass(L);break;case u:b.$element.find(H).addClass(L);break;case v:b.$element.find(H).removeClass(L)}},"hub/studyplan/evc/pl/load":function(){var a=this;a[M]=a.unitId,a.publish("query",["plclass!"+a.unitId]).spread(function(b){if(b&&b.topic&&b.statusCode){var c={},d=b.topic,g=b.statusCode.toLowerCase();if(c.status={statusCode:g},c.lessonInfo={topic:d.topicBlurb,description:d.descriptionBlurb,image:d.topicImageUrl?P+d.topicImageUrl:Q},c.topicId=b.topic.topicId,g===m||g===p||g===o){if(!b.bookedClass||!b.bookedClass.easternStartTime)return;var j=b.bookedClass;if(a[N]=j.classId,c.timezoneId=j.timezoneId,c.bookedClass={classId:j.classId,teacherId:j.teacherId},c.customizedStartTime=f.toLocalTime(j.easternStartTime,j.timeZoneOffset),g===m){if(!j.easternSuggestedCancelTime||!b.countDown)return;var q=b.countDown;c.countdown={timeIn:q.secondsLeftForStart,timeOut:q.secondsLeftForEnter},c.suggestedCancelTime=f.toLocalTime(j.easternSuggestedCancelTime,j.timeZoneOffset)}else if(g===p||g===o){if(!b.feedback)return;var u=b.feedback;c.feedback={feedbackId:u.feedbackId,teacherId:u.teacherId,entryDate:u.entryDate}}}a.html(h,{unitId:a.unitId,statusCode:g}).then(function(){a[k].find(G).empty(),a[k].find(F).empty(),a.publish("studyplan/evc/pl/status",c),a.publish("studyplan/evc/pl/start-status",t),a.closeOptionalTips||a.publish("studyplan/evc/pl/notification",{statusCode:r}),g===n&&a.publish("studyplan/evc/pl/notification",{statusCode:s});var d=b.bookedClass&&b.bookedClass.evcServerCode||"",f=d.toLowerCase().indexOf("evc")<0;switch(f||e.setSessionStorage("techcheck_state","passed"),g.toLowerCase()){case l:case n:i.call(a,D,G,J),i.call(a,a[S],F,J);break;case m:i.call(a,w,G,J),i.call(a,x,G,J),i.call(a,C,G,J+" "+K+" "+L),i.call(a,E,G,J),i.call(a,a[S],F,J);break;case o:i.call(a,B,F,I),i.call(a,a[S],F,J);break;case p:i.call(a,A,F,I),i.call(a,a[S],F,J)}})}})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/statusbar/index.html",[],function(){return function(a){function b(){h+='\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568598"></h4>\n    <p class="evc-studyplan-status-subline">\n        <span>'+a.msg+'</span><br>\n        <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568602"></span>\n    </p>\n'}function c(){h+='\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568621"></h4>\n    <p class="evc-studyplan-status-subline">\n        <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568622"></span>\n        <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568602"></span>\n    </p>\n'}function d(){h+='\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568594"></h4>\n    ',p&&(h+='\n        <p class="evc-studyplan-status-subline">\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568593"></span>\n            <strong>\n                <a href="'+p+'" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568595"></a>\n            </strong>\n<!--             ',a.showSkip&&(h+='\n                <span data-blurb-id="101321" data-weave="troopjs-ef/blurb/widget">or</span>\n                <strong data-weave="school-ui-studyplan/widget/gl-pl/skip-pl/main"></strong>\n            '),h+=" -->\n        </p>\n    "),h+="\n"}function e(){h+='\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="570577"></h4>\n    ',p&&(h+='\n        <p class="evc-studyplan-status-subline">\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="570578"></span>\n            <strong>\n                <a href="'+p+'" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568595"></a>\n            </strong>\n        </p>\n    '),h+="\n"}function f(){h+='\n    <button type="button" class="close" aria-hidden="true" data-action="closeGLOptionalMsg">&times;</button>\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="629827"></h4>\n    <p class="evc-studyplan-status-subline">\n        <span data-weave="school-ui-shared/widget/blurb" data-blurb-ccl="school.courseware.blurb.629828" data-blurb-id="629828" data-text-en="The Group Class is a great opportunity to practice your English, meet other students and get answers to your questions from one of our experienced teachers."></span>\n    </p>\n'}function g(){h+='\n    <button type="button" class="close" aria-hidden="true" data-action="closePLOptionalMsg">&times;</button>\n    <h4 data-weave="troopjs-ef/blurb/widget" data-blurb-id="629827"></h4>\n    <p class="evc-studyplan-status-subline">\n        <span data-weave="school-ui-shared/widget/blurb" data-blurb-ccl="school.courseware.blurb.629829" data-blurb-id="629829" data-text-en="The Private Class is a great opportunity for you to practice and get feedback from one of our experienced teachers on what youâ€™ve just learned."></span>\n    </p>\n'}var h="",i="leftearly",j="missingclass",k="no_coupon_pl",l="no_coupon_gl",m="optional_msg_gl",n="optional_msg_pl",o=a.statusCode,p=a.link||"";switch(h+="\n",h+=o===m?'\n    <div class="evc-studyplan-status-container evc-studyplan-status-optional-gl-container clearfix">\n':o===n?'\n    <div class="evc-studyplan-status-container evc-studyplan-status-optional-pl-container clearfix">\n':'\n    <div class="evc-studyplan-status-container clearfix">\n',h+='\n    <hr>\n    <div class="evc-studyplan-status-tips">\n        ',o){case i:b();break;case j:c();break;case k:d();break;case l:e();break;case m:f();break;case n:g()}return h+="\n    </div>\n</div>\n\n",h+="\n\n",h+="\n\n",h+="\n\n",h+="\n\n",h+="\n\n",h+='\n\n<style type="text/css">\n    .evc-studyplan-status-container{\n        text-align: left;\n        width: 680px;\n        margin: 0 auto;\n    }\n    .evc-studyplan-status-container hr{\n        border-top-color: #bdbdbd;\n        margin: 0;\n    }\n    .evc-studyplan-status-tips{\n        margin: 15px 0;\n    }\n    .evc-studyplan-status-tips .evc-studyplan-status-subline {\n        font-size: 12px;\n        margin-top: 6px;\n    }\n    .evc-studyplan-status-tips .evc-studyplan-status-subline strong {\n        white-space: nowrap;\n        font-style: italic;\n    }\n    .evc-studyplan-status-tips .evc-studyplan-status-subline strong a{\n        cursor: pointer;\n    }\n    .evc-studyplan-status-tips button.close {\n        float: right;\n        padding: 0;\n        cursor: pointer;\n        background: transparent;\n        border: 0;\n        -webkit-appearance: none;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/statusbar/main",["troopjs-browser/component/widget","jquery","template!./index.html"],function(a,b,c){"use strict";return a.extend({render:function(a){var b=this;a&&b.append(c,a)},hideSeparateLine:function(){var a=this,b=a.$element,c=b.find("hr").eq(0);c.length>0&&c.hide()}})}),define("school-ui-studyplan/widget/gl-pl/statusbar/cp20",["./main","jquery","school-ui-studyplan/utils/client-storage","template!./index.html"],function(a,b,c,d){"use strict";var e=".evc-studyplan-status-optional-pl-container";return a.extend({"hub/studyplan/evc/cp20/notification":function(a){var b=this;b.render(a)},"hub/studyplan/evc/cp20/announcement/disable":function(){var a=this;a.hideSeparateLine()},"dom:[data-action = closePLOptionalMsg]/click":function(a){var b=this,d=b.$element;c.setLocalStorage("cp20_tips","closed"),d.find(e).remove(),b.hideSeparateLine()}})}),define("school-ui-studyplan/widget/gl-pl/statusbar/gl",["./main","jquery","school-ui-studyplan/utils/client-storage","template!./index.html"],function(a,b,c,d){"use strict";var e=".evc-studyplan-status-optional-gl-container";return a.extend({"hub/studyplan/evc/gl/notification":function(a){var b=this;b.render(a)},"hub/studyplan/evc/gl/announcement/disable":function(){var a=this;a.hideSeparateLine()},"dom:[data-action = closeGLOptionalMsg]/click":function(a){var b=this,d=b.$element;c.setLocalStorage("gl_tips","closed"),d.find(e).remove(),b.hideSeparateLine()}})}),define("school-ui-studyplan/widget/gl-pl/statusbar/pl",["./main","jquery","school-ui-studyplan/utils/client-storage","template!./index.html"],function(a,b,c,d){"use strict";var e=".evc-studyplan-status-optional-pl-container";return a.extend({"hub/studyplan/evc/pl/notification":function(a){var b=this;b.render(a)},"hub/studyplan/evc/pl/announcement/disable":function(){var a=this;a.hideSeparateLine()},"dom:[data-action = closePLOptionalMsg]/click":function(a){var b=this,d=b.$element;c.setLocalStorage("pl_tips","closed"),d.find(e).remove(),b.hideSeparateLine()}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/terms-and-conditions/main.html",[],function(){return function(a){var b='<p data-blurb-id="708942" data-text-en=""\n\tdata-pattern="\\*{3}([^*]+)\\*{3}"\n\tdata-weave="troopjs-ef/blurb/widget">\n\t<a href="javascript:void(0);" data-value-name="Terms and Conditions"\n\t\tdata-blurb-id="685505"\n\t\tdata-weave-delay="troopjs-ef/blurb/widget"\n\t\tdata-toggle="modal" data-target="#teamsAndConditions"></a>\n</p>\n<!-- Modal -->\n<div class="ets-sp-modal-tc modal fade" id="teamsAndConditions" tabindex="-1" role="dialog" aria-labelledby="teamsAndConditionsLabel" aria-hidden="true">\n\t<div class="modal-dialog" role="document">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header">\n\t\t\t\t<h5 class="modal-title"\n\t\t\t\t\tid="teamsAndConditionsLabel"\n\t\t\t\t\tdata-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\tdata-blurb-id="685505"\n\t\t\t\t\tdata-value-name="Terms and Conditions"\n\t\t\t\t></h5>\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t\t\t\t\t<span aria-hidden="true">&times;</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="modal-body"\n\t\t\t\tdata-blurb-id="708943"\n\t\t\t\tdata-weave="troopjs-ef/blurb/widget">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';return b}}),define("school-ui-studyplan/widget/gl-pl/terms-and-conditions/main",["troopjs-ef/component/widget","template!./main.html","jquery.gudstrap"],function(a,b){return a.extend({"sig/start":function(){this.html(b)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-cp20/index.html",[],function(){return function(a){var b='<div class="clearfix row">\n    <div class="evc-studyplan-welcome-content">\n        <h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568614"></h2>\n        <p class="evc-studyplan-welcome-content-des">\n            <span data-weave="school-ui-shared/widget/blurb" data-blurb-ccl="school.courseware.blurb.568615" data-blurb-id="568615" data-text-en="In the private class you learn English with your own private teacher."></span><br>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568616"></span>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568617"></span><br>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568618"></span>\n        </p>\n        <p>\n            <button type="button" class="btn btn-primary" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568611" data-action="getStart"></button>\n        </p>\n    </div>\n    <div class="evc-studyplan-welcome-image">\n        ';return a.video?b+='\n            <a href="" data-action="showVideo">\n                <img src="'+a.cacheServer+'/_imgs/evc/pl/studyplan/video.jpg">\n            </a>\n            <p class="evc-studyplan-welcome-video-description" data-weave="troopjs-ef/blurb/widget" data-blurb-id="569775"></p>\n            <div data-weave="school-ui-studyplan/widget/gl-pl/popupvideo/main" data-video-url="'+a.video+'"></div>\n        ':a.image&&(b+='\n            <img src="'+a.image+'">\n        '),b+='\n    </div>\n</div>\n\n<style type="text/css">\n    .evc-studyplan-welcome-content{\n        text-align: left;\n        float: left;\n        width: 510px;\n        padding: 0 15px;\n    }\n    .evc-studyplan-welcome-content > p{\n        margin-top: 30px;\n    }\n    .evc-studyplan-welcome-content-des{\n        line-height: 1.7em;\n    }\n    .evc-studyplan-welcome-image{\n        float: right;\n        padding: 0 30px 0 15px;\n        width: 375px;\n    }\n    .evc-studyplan-welcome-image > a{\n        display: inline-block;\n        margin-top: 7px;\n        margin-bottom: 10px;\n    }\n    .evc-studyplan-welcome-video-description {\n        font-style: italic;\n        text-align: center;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/welcome-cp20/main",["jquery","troopjs-ef/component/widget","school-ui-studyplan/module","template!./index.html"],function(a,b,c,d){"use strict";var e=a.extend(!0,{cacheServer:""},c.config()||{}),f="ccl!'school.studyplan.cp20.intro.media'";return b.extend({"sig/start":function(){var a=this;a.query(f).spread(function(b){a.query(b.value).spread(function(b){var c=/\.jpg$|\.png$|\.gif$/i.test(b.url);a.html(d,{cacheServer:e.cacheServer,image:c&&b.url,video:!c&&b.url})})})},"dom:[data-action = getStart]/click":function(a){a.preventDefault();var b=this;b.publish("school/member_site_setting/Save",{siteArea:"evc",keyCode:"FirstTimeStudyPlanCP20",keyValue:"true"}).spread(function(){b.publish("studyplan/evc/cp20/load")})},"dom:[data-action = showVideo]/click":function(a){a.preventDefault(),this.publish("studyplan/evc/welcome-video/show")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-gl/index.html",[],function(){return function(a){var b='<div class="clearfix row">\n    <div class="evc-studyplan-welcome-content">\n        <h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568607"></h2>\n        <p class="evc-studyplan-welcome-content-des">\n            <span data-weave="school-ui-shared/widget/blurb" data-blurb-ccl="school.courseware.blurb.568608" data-blurb-id="568608" data-text-en="In the conversation class you practice your spoken English together with other students."></span><br>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568609"></span>\n        </p>\n        <p>\n            <button type="button" class="btn btn-primary" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568611" data-action="getStart"></button>\n        </p>\n    </div>\n    <div class="evc-studyplan-welcome-image">\n        ';return a.video?b+='\n            <a href="" data-action="showVideo">\n                <img src="'+a.cacheServer+'/_imgs/evc/gl/studyplan/video.jpg">\n            </a>\n            <p class="evc-studyplan-welcome-video-description" data-weave="troopjs-ef/blurb/widget" data-blurb-id="569776"></p>\n            <div data-weave="school-ui-studyplan/widget/gl-pl/popupvideo/main" data-video-url="'+a.video+'"></div>\n        ':a.image&&(b+='\n            <img src="'+a.image+'">\n        '),b+='\n    </div>\n</div>\n\n<style type="text/css">\n    .evc-studyplan-welcome-content{\n        text-align: left;\n        float: left;\n        width: 510px;\n        padding: 0 15px;\n    }\n    .evc-studyplan-welcome-content > p{\n        margin-top: 30px;\n    }\n    .evc-studyplan-welcome-content-des{\n        line-height: 1.7em;\n    }\n    .evc-studyplan-welcome-image{\n        float: right;\n        padding: 0 30px 0 15px;\n        width: 375px;\n    }\n    .evc-studyplan-welcome-image > a{\n        display: inline-block;\n        margin-top: 7px;\n        margin-bottom: 10px;\n    }\n    .evc-studyplan-welcome-video-description {\n        font-style: italic;\n        text-align: center;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/welcome-gl/main",["jquery","troopjs-ef/component/widget","school-ui-studyplan/module","template!./index.html"],function(a,b,c,d){"use strict";var e=a.extend(!0,{cacheServer:""},c.config()||{}),f="ccl!'school.studyplan.gl.intro.media'";return b.extend({"sig/start":function(){var a=this;a.query(f).spread(function(b){a.query(b.value).spread(function(b){var c=/\.jpg$|\.png$|\.gif$/i.test(b.url);a.html(d,{cacheServer:e.cacheServer,image:c&&b.url,video:!c&&b.url})})})},"dom:[data-action = getStart]/click":function(a){a.preventDefault();var b=this;b.publish("school/member_site_setting/Save",{siteArea:"evc",keyCode:"FirstTimeStudyPlanGL",keyValue:"true"}).spread(function(){b.publish("studyplan/evc/gl/load")})},"dom:[data-action = showVideo]/click":function(a){a.preventDefault(),this.publish("studyplan/evc/welcome-video/show")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-pl/index.html",[],function(){return function(a){var b='<div class="clearfix row">\n    <div class="evc-studyplan-welcome-content">\n        <h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="568614"></h2>\n        <p class="evc-studyplan-welcome-content-des">\n            <span data-weave="school-ui-shared/widget/blurb" data-blurb-ccl="school.courseware.blurb.568615" data-blurb-id="568615" data-text-en="In the private class you learn English with your own private teacher."></span><br>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568616"></span>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568617"></span><br>\n            <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="568618"></span>\n        </p>\n        <p>\n            <button type="button" class="btn btn-primary" data-weave="troopjs-ef/blurb/widget" data-blurb-id="568611" data-action="getStart"></button>\n        </p>\n    </div>\n    <div class="evc-studyplan-welcome-image">\n        ';return a.video?b+='\n            <a href="" data-action="showVideo">\n                <img src="'+a.cacheServer+'/_imgs/evc/pl/studyplan/video.jpg">\n            </a>\n            <p class="evc-studyplan-welcome-video-description" data-weave="troopjs-ef/blurb/widget" data-blurb-id="569775"></p>\n            <div data-weave="school-ui-studyplan/widget/gl-pl/popupvideo/main" data-video-url="'+a.video+'"></div>\n        ':a.image&&(b+='\n            <img src="'+a.image+'">\n        '),b+='\n    </div>\n</div>\n\n<style type="text/css">\n    .evc-studyplan-welcome-content{\n        text-align: left;\n        float: left;\n        width: 510px;\n        padding: 0 15px;\n    }\n    .evc-studyplan-welcome-content > p{\n        margin-top: 30px;\n    }\n    .evc-studyplan-welcome-content-des{\n        line-height: 1.7em;\n    }\n    .evc-studyplan-welcome-image{\n        float: right;\n        padding: 0 30px 0 15px;\n        width: 375px;\n    }\n    .evc-studyplan-welcome-image > a{\n        display: inline-block;\n        margin-top: 7px;\n        margin-bottom: 10px;\n    }\n    .evc-studyplan-welcome-video-description {\n        font-style: italic;\n        text-align: center;\n    }\n</style>'}}),define("school-ui-studyplan/widget/gl-pl/welcome-pl/main",["jquery","troopjs-ef/component/widget","school-ui-studyplan/module","template!./index.html"],function(a,b,c,d){"use strict";var e=a.extend(!0,{cacheServer:""},c.config()||{}),f="ccl!'school.studyplan.pl.intro.media'";return b.extend({"sig/start":function(){var a=this;a.query(f).spread(function(b){a.query(b.value).spread(function(b){var c=/\.jpg$|\.png$|\.gif$/i.test(b.url);a.html(d,{cacheServer:e.cacheServer,image:c&&b.url,video:!c&&b.url})})})},"dom:[data-action = getStart]/click":function(a){a.preventDefault();var b=this;b.publish("school/member_site_setting/Save",{siteArea:"evc",keyCode:"FirstTimeStudyPlanPL",keyValue:"true"}).spread(function(){b.publish("studyplan/evc/pl/load")})},"dom:[data-action = showVideo]/click":function(a){a.preventDefault(),this.publish("studyplan/evc/welcome-video/show")}})}),define("school-ui-studyplan/widget/initialization/hash-preview",["jquery","when","troopjs-ef/component/widget","poly"],function(a,b,c,d){"use strict";return c.extend({"hub/school/interface/get/activity-container/closeHash":function(){return[{prefix:"preview",studyplan:0,studyplan_item:0}]}})}),define("school-ui-studyplan/widget/initialization/hash",["jquery","when","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-mode","school-ui-studyplan/enum/studyplan-velocity","poly"],function(a,b,c,d,e,f,g,h){"use strict";function i(){var a=this;a[o]&&a[q]&&"school"==a[t]&&a.query("campus_student_unit_studyplan!"+a[o]+".studyPlan.items,.studyPlan.progress").spread(function(b){var c,e=b.studyPlan.id,g=b.studyPlan,h=[];b.mode===f.Study?(g.items.forEach(function(a,b){"lesson"==a.typeCode?h.push("pc_student_lesson_map!"+a.properties.templateLessonId):h.push(m)}),a.query(h).spread(function(){Array.prototype.forEach.call(arguments,function(b,d){b&&b.lesson&&b.lesson.templateLessonId===a[q]&&(c=g.items[d].id)}),c?a[s]||a[r]?(a[u]=d.parseId(e),a[v]=d.parseId(c)):a[q]&&a.publish("load",{prefix:z,studyplan:d.parseId(e),studyplan_item:d.parseId(c)}):k.call(a,A+a[o])})):window.location.search.indexOf("unlock")<0&&k.call(a,A+a[o])})}function j(a){var b=this,c="campus_student_unit_studyplan!"+a+".studyPlan";b.query(c+".items").spread(function(a){return a.mode===f.Study?b.query(c+".progress"):[a]}).spread(function(a){var c=a.studyPlan,e=d.parseId(c.id);switch(a.mode){case f.Create:b.publish("load",{prefix:y,unit:A+c.properties.templateUnitId});break;case f.Locked:b.publish("load",{prefix:z,studyplan:e,studyplan_item:m});break;case f.Study:var g=c.items.filter(function(a){return c.progress&&a.itemIndex===c.progress.properties.suggestedItemIndex}),h=g.length?g[0]:c.items[0],i=d.parseId(h.id);b.publish("load",{prefix:z,studyplan:e,studyplan_item:i})}})}function k(a){this.publish("load",{prefix:y,unit:a,step:m})}function l(a,b,c){var e=this;if(b&&c&&a&&"2.0"===a.version)switch(b){case y:e.query("campus_student_unit_studyplan!"+c.unit.templateUnitId+".studyPlan.items,.studyPlan.progress").spread(function(a){var b=a.studyPlan;if(a.mode!==f.Create){var c=b.items.filter(function(a){return b.progress&&b.progress.properties&&a.itemIndex===b.progress.properties.suggestedItemIndex}),g=c.length?c[0]:b.items[0];e.publish("load",{prefix:"study",studyplan:d.parseId(b.id),studyplan_item:a.mode===f.Locked?m:d.parseId(g.id)})}});break;case z:c.studyplan?c.studyplan&&!c.studyplan_item?c.unit_studyplan.mode===f.Study&&j.call(e,c.studyplan.properties.templateUnitId):c.studyplan&&c.studyplan_item&&("goal"!==c.studyplan_item.typeCode?e.query(c.studyplan.id+".progress").spread(function(a){if(g.Crashed===a.progress.properties.velocity){var b;a.items.forEach(function(a){"goal"===a.typeCode&&(b=d.parseId(a.id))}),e.publish("load",{studyplan_item:b})}}):e[w]&&e[w].studyplan&&e[w].studyplan.id===c.studyplan.id&&e.publish("studyplan/sequence/update")):j.call(e,"current")}e[w]=c}var m,n="unit_id",o="template_unit_id",p="lesson_id",q="template_lesson_id",r="step_id",s="activity_id",t="prefix",u="studyplan_id",v="studyplan_item_id",w="results",x="platformVersion",y="config",z="study",A="template_unit;";return c.extend({"hub:memory/context":function(a,b,c){var d=this;l.call(d,d[x]=c,d[t],d[w])},"hub:memory/load/prefix":function(a){var b=this;b[t]=a,i.call(b)},"hub:memory/load/unit":function(a){var b=this;a&&(b[n]=d.parseId(a.id),b[o]=a.templateUnitId,i.call(b))},"hub:memory/load/lesson":function(a){var b=this;a&&(b[p]=d.parseId(a.id),b[q]=a.templateLessonId,i.call(b))},"hub:memory/load/step":function(a){var b=this;a&&(b[r]=d.parseId(a.id))},"hub:memory/load/activity":function(a){var b=this;a&&(b[s]=d.parseId(a.id))},"hub:memory/load/studyplan":function(a){var b=this;a&&(b[u]=d.parseId(a.id))},"hub:memory/load/studyplan_item":function(a){var b=this;a&&(b[v]=d.parseId(a.id))},"hub:memory/route":function(a){var b=this,c=b[t];b[t]=a.path?a.path[0]:z,c!==b[t]&&l.call(b,b[x],b[t],b[w])},"hub/enrollment/update":function(){var a=this;return a.publish("load",{studyplan:m,studyplan_item:m,command:m,prefix:m,unit:m})},"hub:memory/load/results":function(a){var b=this;a&&l.call(b,b[x],b[t]=a.prefix,a)},"hub:memory/load/config":function(a){var b=this;j.call(b,a)},"hub/school/interface/get/activity-container/closeHash":function(){var a=this;return[{prefix:z,studyplan:a[u],studyplan_item:a[v]}]}})}),define("troopjs-requirejs/multiversion",[],function(){"use strict";var a=/(.+?)#(.+)$/,b=require.s.contexts;return{load:function(c,d,e){var f,g;null!==(g=a.exec(c))&&(c=g[1],f=g[2],f in b&&(d=b[f].require)),d([c],function(a){e(a)},e.error)}}}),define("troopjs-requirejs/template!school-ui-studyplan/widget/initialization/initialization.html",[],function(){return function(a){var b='<div class="ets-sp-init-container">\n\t<div class="ets-sp-study" data-weave="school-ui-studyplan/widget/studyplan/main"></div>\n</div>\n<div class="ets-sp-loading ets-none">\n\t<div class="ets-inner">\n\t\t<div class="ets-inner-cell">\n\t\t\t<div class="ets-icon">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="ets-backdrop"></div>\n</div>\n<div data-weave="school-ui-shared/plugins/http-request-handling/main"></div>';return b}}),define("school-ui-studyplan/widget/initialization/main",["when","logger","poly","jquery","client-tracking","mv!jquery#troopjs-1.0","troopjs-ef/component/widget","troopjs-browser/loom/config","troopjs-browser/loom/weave","school-ui-shared/enum/course-type","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/server-time","school-ui-shared/plugins/techcheck/techcheck-render","template!./initialization.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";var o="html",p="_page_context_data",q="_rendered";return g.extend(function(){this[p]={}},{"hub:memory/context":function(a,b,c){var d=this;"2.0"===c.version&&(d[q]||d.query("ccl!'school.activity.interaction.sampleRate'").spread(function(b){var c=parseFloat(b.value);d._isSample=a.user.member_id%100<100*c,d.html(n).then(function(){d[q]=!0,f("[data-weave-1]").each(function(a,b){var c=f(b);c.attr("data-weave",c.attr("data-weave-1")).weave()})})}))},"hub:memory/logger/troopjs1":function(a){this._isSample&&b.log(a)},"hub:memory/load/results":function(a){var b,c="null",d=this,f={unitID:c,levelID:c,lessonID:c};Object.keys(a).forEach(function(b){var c=a[b];if(c)switch(b){case"level":c.templateLevelId&&(f.levelID=c.templateLevelId);break;case"unit":c.templateUnitId&&(f.unitID=c.templateUnitId);break;case"lesson":c.templateLessonId&&(f.lessonID=c.templateLessonId)}}),Object.keys(f).forEach(function(a){b=b||f[a]!==d[p]["page."+a],d[p]["page."+a]=f[a]}),b&&e.usercontext(d[p])},"hub/school/toggle/overflow":function(a){d(o).css("overflow",a)},"hub:memory/school/spinner":function(a){var b=this;b.task(function(b,c,d){return a.then(b,c,d)})},"hub/tracking/useraction":function(a){e.useraction(a)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/migration/main.html",[],function(){return function(a){var b='<div class="modal fade ets-sp-migration-progress-modal" data-backdrop="static">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-body">\n\t\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="660194" data-text-en="We are upgrading your school to the latest version, this might take a few seconds. Please don\'t leave this page until the upgrade is complated."></p>\n\t\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="660195" data-text-en="Thank you for your patience!"></p>\n\t\t\t\t<div class="progress progress-striped active">\n\t\t\t\t\t<div class="progress-bar" role="progressbar">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal fade ets-sp-migration-fail-modal" data-backdrop="static">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-body">\n\t\t\t\t<p><span class="glyphicon glyphicon-remove"></span></p>\n\t\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="660196" data-text-en="Oops! Something went wrong during the upgrade of your school. We apologise for the inconvenience, please contact customer support."></p>\n\t\t\t\t<p><a href="/customerservice/contactus/inschool"><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="660199" data-text-en="contact customer support"></span></a></p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-backdrop fade in hidden"></div>';return b}}),define("school-ui-studyplan/widget/migration/main",["jquery","jquery.gudstrap","troopjs-ef/component/widget","school-ui-shared/utils/update-helper","template!./main.html"],function(a,b,c,d,e){"use strict";function f(){var a=this;a[m].find(r).modal("hide")}function g(a){var b=this;i.call(b,t).find(s).width(a-5+"%").text(a+"%"),100===a&&j()}function h(){var a=this;i.call(a,u)}function i(a){var b=this,c=b[m].find(a);return c.on("show.bs.modal",function(a){b[m].find(".modal-backdrop").removeClass("hidden")}).on("hidden.bs.modal",function(a){b[m].find(".modal-backdrop").addClass("hidden")}),c.hasClass("in")||(f.call(b),c.modal({keyboard:!1})),c}function j(){window.open(q,"_self")}function k(){var a=this;a[n]>=p?h.call(a):d.platformMigrate().then(function(b){switch(a[n]++,b.response){case"DONE":j();break;case"OK":l.call(a);break;case"ERROR":h.call(a);break;case"RETRY":k.call(a);break;default:h.call(a)}})}function l(){var a=this,b=function(){window.setTimeout(function(){l.call(a)},o)};a.query("platform_migration!current").spread(function(c){switch(c.status){case"":k.call(a);break;case"QUEUED":case"STARTED":g.call(a,c.progress),b();break;case"TIMEOUT":case"CONFLICTED":case"ERROR":h.call(a);break;case"DONE":g.call(a,100);break;case"CANCELLED":case"RESET":k.call(a);break;default:h.call(a)}})}var m="$element",n="_retry",o=100,p=3,q="/school/course/currentcourse/handler.aspx",r=".modal",s=".progress-bar",t=".ets-sp-migration-progress-modal",u=".ets-sp-migration-fail-modal";return c.extend({"hub:memory/context":function(a,b,c){var d=this;if("1.0"===c.version)return d.html(e).then(function(){d[n]=0,l.call(d)})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/config/config.html",[],function(){
return function(a){var b="";a.unit;return b+='\n<div class="ets-sp-cfg">\n\t<div class="ets-sp-cfg-hd">\n\t\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="656054" data-text-en="set up unit plan"></h2>\n\t\t<h5 data-weave="troopjs-ef/blurb/widget" data-blurb-id="656055" data-text-en="Estimated 6 hours to complete the unit"></h5>\n\t</div>\n\t<div class="ets-sp-cfg-bd">\n        <div data-weave="school-ui-studyplan/shared/pace-config/main" data-mode="'+a.mode+"\" data-config='"+JSON.stringify(a.properties).replace(/\'/g,"&#39;")+'\'></div>\n\t</div>\n\t<div class="ets-sp-cfg-ft">\n\t\t<button type="button" class="btn btn-primary btn-m btn-block ets-sp-cfg-create"><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="656059" data-text-en="Let\'s go"></span> <i class="glyphicon icon-caret-right"></i></button>\n\t</div>\n</div>'}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/config/main",["jquery","poly","json2","moment","when","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/studyplan-update-helper","school-ui-studyplan/enum/studyplan-mode","school-ui-shared/enum/moment-language","template!./config.html"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(b,c){var d=this,e={};if(b&&c){e.unit=b;var f=d[p]=a.extend(!0,{},c.studyPlan);return c.mode===i.Create?(f.items.forEach(function(a){"goal"===a.typeCode&&(d[q]=a,e.properties=a.properties)}),d.query('ccl!"school.studyplan.pace.mode"','member_site_setting!"school;studyplan.newui.enabled"').spread(function(a,b){return e.mode=a.value,"view"===a.value&&m(e.properties.paces),"true"===b.value?h.createStudyplan({studentStudyPlanTemplate:f}).then(function(a){var b=a.id;return d.publish("school/clearCache",c.id).then(function(){d.publish("load",{prefix:"study",studyplan:g.parseId(b)})})}):d.html(k,e)})):void 0}}function m(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];r in d&&(d[r]=!1)}return a[c-1][r]=!0,a}var n="_unit",o="_unit_studyplan",p="_studyplan_template",q="_goal",r="selected";return f.extend({"hub:memory/load/unit":function(a){var b=this;a&&l.call(b,b[n]=a,b[o])},"hub:memory/load/unit_studyplan":function(a){var b=this;a&&l.call(b,b[n],b[o]=a)},"hub/config/pace-change":function(a){var b=this;b[q].properties.paces=a},"dom:.ets-sp-cfg-create/click":function(b){var d=this,e=d[q].properties.paces.every(function(a){return!a.selected});e&&(d.log("Studyplan exception when creating, goal properties is : "+c.stringify(d[q].properties)),d[q].properties.paces[0].selected=!0),a(b.currentTarget).prop("disabled",!0);var f=d[o];h.createStudyplan({studentStudyPlanTemplate:d[p]}).then(function(a){var b=a.id;d.publish("context/update/context").then(function(){return d.publish("school/clearCache",f.id)}).then(function(){d.publish("load",{prefix:"study",studyplan:g.parseId(b)})})})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/goal.html",[],function(){return function(a){var b='<div class="ets-sp-cfg cp-cfg '+a.status+'">\n\t<div class="ets-sp-cfg-hd">\n\t\t<!--\n\t\tthe progress widget will render here\n\t\t-->\n\t</div>\n\t<div class="ets-sp-cfg-bd cp-pace-bd">\n\t\t<!--\n\t\tthe pace config widget will render here\n\t\t-->\n\t</div>\n\t<div class="ets-sp-cfg-ft">\n\t\t<!--\n\t\tthe restart & moveon widget will render here\n\t\t-->\n\t</div>\n\t';return a.isUnitCompleted||(b+='\n\t\t<div class="ets-sp-goal-locked">\n\t\t\t<h1><i class="ets-icon-lock"></i></h1>\n\t\t\t<h1 data-text-en="THE GOAL IS LOCKED" data-blurb-id="724606" data-weave="troopjs-ef/blurb/widget"></h1>\n\t\t\t<p class="ets-sp-goal-tips" data-text-en="You must complete all lessons in this unit before continuing on." data-blurb-id="724607" data-weave="troopjs-ef/blurb/widget"></p>\n\t\t</div>\n\t'),b+="\n</div>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/main",["when","jquery","json2","lodash","troopjs-ef/component/widget","troopjs-browser/loom/config","troopjs-browser/loom/weave","school-ui-shared/utils/progress-state","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/enum/studyplan-velocity","template!./goal.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(a){return this&a}function o(a){return"lesson"===a.typeCode}function p(a){return n.call(a.progress.state,k.Completed)}function q(a,b){return a.progress.state===b.Completed}var r="$element",s="school-ui-studyplan/shared/cp-pace-config/main",t="school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/main",u="school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/main",v=".ets-sp-cfg-hd",w=".ets-sp-cfg-ft",x=".ets-sp-cfg-bd",y=".ets-sp-cfg",z="_data_goal",A='ccl!"school.courseware.enableleveltest"',B="member_site_setting!'school;student.leveltest.version'";return e.extend(function(a,b,c){var d=this;d[z]=c},{"hub:memory/load/results":function(c){var d=c.studyplan;if(d){var e,g=this;return g[z].properties.paces.forEach(function(a){0===a.pacePoints&&(e=a.selected)}),a.all([g.query(d.id+".progress,.items.progress"),g.query("campus_student_unit_studyplan!current.studyPlan.progress,.studyPlan.items.progress,.studentUnit.children.progress.detail,.studentUnit.children.lessonImage,.studentUnit.parent.parent")]).spread(function(a,h){var i=g.getStatusKey(d,e,c,h[0]),k=q(d,j);i.then(function(c){g.html(m,{status:"cp-cfg-"+c.key.toLowerCase(),isUnitCompleted:k}).then(function(){var d,e,h,i,j=a[0];k&&(j.items.forEach(function(a){"goal"===a.typeCode&&(i=a)}),g[r].find(v).append(e=b("<div></div>").attr(f.weave,t).data("studyplan",j).data("status",c).data("config",b.extend({},i&&i.properties,i&&i.progress.properties))),e.weave(),g[r].find(x).append(h=b("<div></div>").attr(f.weave,s).data("mode","view").data("status",c).data("studyplan",j).data("config",b.extend({},i&&i.properties,i&&i.progress.properties))),h.weave(),g[r].find(w).append(d=b("<div></div>").attr(f.weave,u).data("studyplan",j).data("status",c)),d.weave())})})})}},"hub/studyplan/goal/body/status/update":function(a){var b=this;0===a.action?b[r].find(y).removeClass(a.class):b[r].find(y).addClass(a.class)},getStatusKey:function(a,b,c,e){var f=this;return f.checkIfTestIsAvailable({studyPlan:e.studyPlan,course:e.studentUnit.parent.parent,level:e.studentUnit.parent,unit:e.studentUnit}).then(function(e){var f=c.unit,g=f.parent.children,h=g.length,k=q(a,j)?"Completed":"",m=b?"Nopace":"",n=i.parseFlag(l,a.progress.properties.velocity),o="";d.find(n,function(a,b){a&&(o=b)});var p=k||m||o,r=p.toLowerCase();return k&&(r="unit_complete",f.templateUnitId===g[h-1].templateUnitId&&(r="all_unit_complete"),f.templateUnitId===g[h-1].templateUnitId&&e.levelTestIsDone&&(r="level_complete"),f.templateUnitId===g[h-1].templateUnitId&&"GE"!==c.course.courseTypeCode&&(r="course_change")),{key:p,code:r}})},checkLevelIsCompleted:d.memoize(function(a){var b=a.studyPlan,c=a.level,e=a.unit,f=d.filter(b.items,o),g=d.filter(f,p),h=f.length===g.length,i=b.progress&&n.call(b.progress.state,j.Completed),k=c.children.length-1===d.indexOf(c.children,e);return k&&i&&h}),checkIfTestIsAvailable:function(b){var c=this,d=b.level,e=a.defer(),f={};return c.checkLevelIsCompleted(b)?c.query(A,B).spread(function(a,b){var g="true"===a.value.toLowerCase(),i=parseInt(b&&b.value||1);return f.canDoLevelTest=g,g?1===i?c.query("leveltest_overview!"+d.levelCode).spread(function(a){f.levelTestIsDone=a.hasPassed,e.resolve(f)}):c.query(d.id+".levelTest.progress").spread(function(a){f.levelTestIsDone=Boolean(a.levelTest&&h.hasPassed(a.levelTest.progress.state)),e.resolve(f)}):void e.resolve(f)}):e.resolve({canDoLevelTest:!1,levelTestIsDone:!1}),e.promise}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/moveon.html",[],function(){return function(a){var b="";return"all_unit_complete"===a.status.code&&(b+='\n<div class="cp-studyplan-action">\n\t<p class="cp-studyplan-or" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695094"></p>\n\t<div class="cp-action-move">\n\t\t',b+=a.isLastLevel?'\n\t\t<span class="cp-select-course" data-weave="troopjs-ef/blurb/widget" data-link="'+a.changeCourseLink+'" data-blurb-id="'+a.blurbIds.cpSelectCourse+'" data-action="select/course">\n\t\t</span>\n\t\t':'\n\t\t<span class="cp-next-level" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695074" data-action="next/level">\n\t\t</span>\n\t\t',b+='\n\t\t<span class="ets-icon-cp-arrow-right"></span>\n\t</div>\n</div>\n'),b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/main",["school-ui-studyplan/module","jquery","when","poly","lodash","troopjs-ef/component/widget","client-tracking","school-ui-shared/enum/course-type","school-ui-shared/utils/typeid-parser","school-ui-shared/utils/progress-state","school-ui-shared/utils/update-helper","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/utils/state-parser","template!./moveon.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";function o(a,b){return"demo"===a.partnercode.value.toLowerCase()&&(h.isGECourse(b)||h.isBECourse(b))}function p(){var a=this,b=a.course.children,c=a.level,d=b.length,e=a.unit,f=e.parent.children,g=f.length,h={};return e.templateUnitId===f[g-1].templateUnitId?(h.isLastUnit=!0,a.isGE?(h.levelTestId=1===a.levelTestVersion?c.legacyLevelId:c.templateLevelId,c.templateLevelId===b[d-1].templateLevelId&&(h.isLastLevel=!0)):h.isLastLevel=!0):f.every(function(b,c){return b.templateUnitId!==e.templateUnitId||(h.nextUnitIndex=c+2,a.nextUnitId=f[c+1].templateUnitId,!1)}),o(a.common_context,a.course.courseTypeCode)&&(h.isLastUnit=!0,h.isLastLevel=!0),h}function q(){var a=this,b=a[z];a.course&&a.level&&a.unit&&a.common_context&&a.levelTestVersion&&a.query(t,u,v,w,x,a.level.id+".children").spread(function(c,d,e,f,g,h){var i,j=p.call(a);j.isGE=a.isGE,j.enableLevelTest=c&&"true"===c.value.toLowerCase(),j.enableChangeLevel=d&&"true"===d.value.toLowerCase(),j.enableSelectCourse=e&&"true"===e.value.toLowerCase(),j.changeCourseLink=D.changeCourseUrl||f.value,j.status=a[B],j.blurbIds=D.blurbIds,j.optionalItems=[],b.items.forEach(function(a){var b;"goal"!==a.typeCode&&a.isOptional?(b=m.parseFlag(l,a.progress.state),b.Completed||j.optionalItems.push({itemData:a,locked:b.Locked})):i=a}),m.parseFlag(l,i.progress.state).Completed&&(j.isLastLevel&&j.isLastUnit?a.query("blurb!656580").spread(function(b){b&&a.publish(C,b.translation)}):j.isLastUnit?a.query("blurb!656556").spread(function(b){b&&a.publish(C,b.translation)}):a.query("blurb!656555").spread(function(b){b&&a.publish(C,b.translation)})),j.hasActiveSPInCurrentLevel=h.children.reduce(function(a,b){return a||b.templateUnitId===g.studyPlan.properties.templateUnitId},!1),a.html(n,j)})}function r(a){return this.publish("load/config",i.parseId(a))}function s(){var a=this;return a.query("student_course_enrollment!current",a.unit.progress.id).spread(function(b,c){if(a.nextUnitId&&b.studentUnitId===a.unit.studentUnitId&&j.hasPassed(c.state))return k.updateEnrollment({templateId:a.nextUnitId})})}var t='ccl!"school.courseware.enableleveltest"',u='ccl!"school.courseware.enableSelectNextLevel"',v='ccl!"school.menu.changecourse.display"',w="ccl!'school.studyplan.changeCourse.link'",x="campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress",y="member_site_setting!'school;student.leveltest.version'",z="_data_studyplan",A="$element",B="_data_status",C="studyplan/goal/moveon-tips/show",D=e.merge({blurbIds:{cpSelectCourse:"656560"},changeCourseUrl:void 0},a.config()||{});return f.extend(function(){var a=this;a[z]=a[A].data("studyplan"),a[B]=a[A].data("status"),a.query(y).spread(function(b){a.levelTestVersion=parseInt(b&&b.value||1),q.call(a)})},{"hub:memory/common_context":function(a){var b=this;a&&(b.common_context=a.values,q.call(b))},"hub:memory/load/results":function(a){var b=this;!a||b.course===a.course&&b.level===a.level&&b.unit===a.unit||(b.studyplan=a.studyplan,b.isGE=h.isGECourse((a.course||{}).courseTypeCode),b.course=a.course,b.level=a.level,b.unit=a.unit,q.call(b))},"hub/ef/update/progress":function(a){var b=this;b.query(b.studyplan.id+".items.progress").spread(function(a){b[z]=a,q.call(b)})},"hub/ef/next/unit":function(a){var b=this;s.call(b).then(function(){r.call(b,b.nextUnitId)})},"dom:[data-action='next/unit']/click":function(a){var b=this;s.call(b).then(function(){r.call(b,b.nextUnitId)})},"dom:[data-action='next/level']/click":function(a){this.publish("enroll/next/level")},"dom:[data-action='select/course']/click":function(a){var c=b(a.currentTarget).data("link");c?window.location=c:this.publish("show/course/list")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/progress.html",[],function(){return function(a){var b='<div class="ets-sp-goal-progress cp-goal-progress '+a.customClass+'">\n\t<p class="cp-progres-title">\n\t\t<span class="ets-icon-badge-goal-poly"></span>\n\t</p>\n\t<p class="cp-progress-msg" data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+a.progressMsg+'">LEFT TO COMPLETE THIS UNIT</p>\n\t<p class="cp-progress-msg-goal-set" data-weave="troopjs-ef/blurb/widget" data-blurb-id="695058">Set a new study goal</p>\n\t<div class="cp-progress-sub-msg">\n\t\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+a.subMsg+'"></h2>\n\t\t';return a.tooltipMsg&&(b+='\n\t\t<div class="msg-tooltip">\n\t\t\t<div data-weave="school-ui-studyplan/shared/tooltip/main(option)" data-option=\'{"content": '+a.tooltipMsg+', "customClass": "message"}\'>\n\t\t\t</div>\n\t\t</div>\n\t\t'),b+="\n\t</div>\n</div>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/main",["when","lodash","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/animation-helper","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-velocity","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/enum/studyplan-status","template!./progress.html"],function(a,b,c,d,e,f,g,h,i,j,k){var l,m="$element",n="_data_studyplan",o="_config",p="_status",q=".ets-sp-optional-popover",r=".ets-sp-optional-holder",s=".ets-sp-mandatory .ets-sp-finished",t=".ets-sp-optional .ets-sp-finished",u=".ets-sp-moveon-tips",v="ets-none",w=800;return c.extend(function(){var a=this;a[n]=a[m].data("studyplan"),a[o]=a[m].data("config"),a[p]=a[m].data("status")},{velocityState:g,"sig/start":function(){var b,c,d,g,o=this,u=o[n],v=optionalCount=mandatoryFinished=optionalFinished=0,x=[];u.items.forEach(function(a){var c;"goal"!==a.typeCode?(c=f.parseFlag(i,a.progress.state),a.isOptional?(optionalCount++,c.Completed&&optionalFinished++,x.push({itemData:a,locked:c.Locked})):(v++,c.Completed&&mandatoryFinished++)):b=a}),c=v?parseInt(mandatoryFinished/v*100,10)+"%":l,d=optionalCount?parseInt(optionalFinished/optionalCount*100,10)+"%":l,b&&b.properties.paces.forEach(function(a){0===a.pacePoints&&(g=a.selected)});var y=o[p].key;return o.html(k,{completed:u.progress.state===h.Completed,goal:b,isNopace:g,mandatoryRate:c,optionalRate:d,optionalItems:x,velocity:u.progress.properties.velocity,subMsg:j[y].subMsg,progressMsg:j[y].progressMsg,tooltipMsg:j[y].tooltipMsg,customClass:j[y].customClass}).then(function(){var b=o[m].find(q),f=o[m].find(s),g=o[m].find(t);b.data({content:o[m].find(r).html(),trigger:"hover",placement:"bottom",html:!0}),b.popover(),f.css("width",0),g.css("width",0),setTimeout(function(){e.request("goalEnter",function(){return a.promise(function(a){f.css("width",c),g.css("width",d),setTimeout(function(){a()},w)})})},0)})},"hub/studyplan/goal/moveon-tips/show":function(a){a&&this[m].find(u).removeClass(v).text(a)},"hub/studyplan/goal/progress/edit/show":function(a){var b=this[m].find(".cp-goal-progress");a?b.addClass("cp-progress-goal-edit"):b.removeClass("cp-progress-goal-edit")},getStatusKey:function(a,c){var d=a.progress.state===h.Completed?"Completed":"",e=c?"Nopace":"",i=f.parseFlag(g,a.progress.properties.velocity),j="";return b.find(i,function(a,b){if(a)return void(j=b)}),d||e||j}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/restart/restart.html",[],function(){return function(a){var b="",c="true"===a.emailEnable?"":"hidden";return b+='\n<div class="ets-sp-goal-restart cp-goal-restart">\n\t<div class="goal-mail '+c+'">\n\t\t',b+=a.isSubscribed?'\n\t\t<input type="checkbox" name="motivation-mail" checked>\n\t\t':'\n\t\t<input type="checkbox" name="motivation-mail" >\n\t\t',b+='\n\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="695969">Send me motivation emails to help me reach my study goal</span>\n\t</div>\n\t<div class="ets-sp-goal-restart-confirm-wrapper">\n\t\t<button type="button" class="btn  btn-m btn-block cp-goal-change" data-weave="troopjs-ef/blurb/widget" data-blurb-id="694971">change your goal\n\t\t</button>\n\t</div>\n\t<div class="ets-sp-goal-restart-confirm-wrapper">\n\t\t<button type="button" class="btn  btn-m btn-block cp-goal-set" data-weave="troopjs-ef/blurb/widget" data-blurb-id="694972">Set new Goal\n\t\t</button>\n\t</div>\n\t<p class="cp-goal-cancel" data-weave="troopjs-ef/blurb/widget" data-blurb-id="694973">\n\t\tCancel\n\t</p>\n</div>'}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/restart/main",["jquery","poly","when","troopjs-ef/command/service","troopjs-data/cache/component","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/studyplan-update-helper","school-ui-studyplan/enum/studyplan-velocity","template!./restart.html"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="_data_studyplan",l="$element",m="_pacePoints",n=".ets-sp-goal-restart-confirm-wrapper",o=".ets-sp-goal-restart-link",p="btn-primary btn-m btn",q="ets-none",r="campus_student_studyplan_email_subscrib/SubscribStudyPlanEmail",s="campus_student_studyplan_email_subscrib/UnsubscribStudyPlanEmail";return f.extend(function(){var a=this;a[k]=a[l].data("studyplan")},{"sig/start":function(){var a=this,b=a.query("campus_student_studyplan_email_subscription!current",'ccl!"CoachingEmail.enabled"');return c(b).then(function(b){return a.html(j,{isSubscribed:b[0].isSubscribed,emailEnable:b[1].value})}).then(function(){a[k]&&a[k].progress.properties.velocity===i.Crashed&&a[l].find(o).addClass(p)})},"hub/config/pace-change":function(a){var b=this;a.every(function(a,c){return!a.selected||(b[m]=a.pacePoints,!1)})},"dom:.ets-sp-goal-restart-link/click":function(){var a=this;a[l].find(o).addClass(q),a[l].find(n).removeClass(q),a.publish("config/pace-config/mode","edit")},"dom:.ets-sp-goal-restart-confirm/click":function(){var a=this;h.restartStudyplan({reason:"",pacePoints:a[m]}).then(function(b){a.publish("load",{studyplan_item:g.parseId(b.id)})})},"dom:.ets-sp-goal-restart-cancel/click":function(){var a=this;a.publish("config/pace-config/mode","view"),a[l].find(o).removeClass(q),a[l].find(n).addClass(q)},"dom:.cp-goal-change/click":function(){var a=this;a[l].find(".ets-sp-goal-restart").addClass("goal-changing"),a.publish("config/pace-config/mode","edit"),a.publish("studyplan/goal/progress/edit/show",!0),a.publish("studyplan/goal/body/status/update",{action:1,class:"cp-cfg-edit"})},"dom:.cp-goal-set/click":function(){var a=this;a[l].find(".ets-sp-goal-restart").removeClass("goal-changing"),h.restartStudyplan({reason:"",pacePoints:a[m]}).then(function(b){a.publish("load",{studyplan_item:g.parseId(b.id)})})},"dom:.cp-goal-cancel/click":function(){var a=this;a[l].find(".ets-sp-goal-restart").removeClass("goal-changing"),a.publish("config/pace-config/mode","view"),a.publish("studyplan/goal/progress/edit/show",!1),a.publish("studyplan/goal/body/status/update",{action:0,class:"cp-cfg-edit"})},"dom:.goal-mail input/click":function(){var a=this,b=a[l].find("input"),c=b.is(":checked")?r:s;a.publish(c)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp20/locked.html",[],function(){return function(a){var b='<div class="ets-sp-cp20-locked">\n    <h1><i class="ets-icon-lock"></i></h1>\n    <h1 data-weave="troopjs-ef/blurb/widget" data-text-en="The private lesson Is Locked" data-blurb-id="639500"></h1>\n    <p class="ets-sp-cp20-tips" data-weave="troopjs-ef/blurb/widget" data-text-en="You must complete the unit lessons before reviewing what youâ€™ve learned with a teacher." data-blurb-id="639501"></p>\n    <p class="ets-sp-cp20-purpose" data-weave="troopjs-ef/blurb/widget" data-text-en="The purpose of the private lesson is to review what you\'ve learned in this unit with a live teacher. This live session takes 20 minutes and is included with your subscription." data-blurb-id="639502"></p>\n    <p class="ets-sp-cp20-btn-tips" data-weave="troopjs-ef/blurb/widget" data-text-en="You must complete your lessons before booking the private lesson." data-blurb-id="639503"></p>\n    <div class="ets-sp-cp20-next">\n    \t<button type="button" data-action="takeNext" class="btn btn-primary btn-ml ets-sp-btn-next-lesson">\n    \t\t<span data-blurb-id="639504" data-text-en="Take your next lesson" data-weave="troopjs-ef/blurb/widget"></span>\n    \t\t<i class="glyphicon icon-caret-right"></i>\n    \t</button>\n    </div>\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/cp20/main",["jquery","troopjs-ef/component/widget","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-item-state","template!./locked.html"],function(a,b,c,d,e){"use strict";var f="_item_data";return b.extend(function(a,b,c){this[f]=c},{"sig/start":function(){var b=this;if(b[f]||b[f].progress)return b.query(b[f].progress.id).spread(function(g){var h=c.parseFlag(d,g.state);return h.Locked?b.publish("school/interface/studyplan/cp20-locked-widget").spread(function(c){return c?void a("<div></div>",{"data-weave":c+"(itemData)",data:{itemData:b[f]}}).appendTo(b.$element).weave():b.html(e,{itemData:b[f]})}):b.publish("school/interface/studyplan/cp20-container-widget","school-ui-studyplan/widget/gl-pl/checkpoint20/main").spread(function(c){a("<div></div>",{"data-weave":c+"(itemData)",data:{itemData:b[f]}}).appendTo(b.$element).weave()})})},"dom:[data-action=takeNext]/click":function(){this.publish("studyplan/sequence/navigate/suggest-item")}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/gl/main",["jquery","troopjs-ef/component/widget"],function(a,b,c){"use strict";var d="_item_data";return b.extend(function(a,b,c){this[d]=c},{"sig/start":function(){var b=this;return b.publish("school/interface/studyplan/gl-container-widget","school-ui-studyplan/widget/gl-pl/grouplesson/main").spread(function(c){a("<div></div>",{"data-weave":c+"(itemData)",data:{itemData:b[d]}}).appendTo(b.$element).weave()})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/goal.html",[],function(){return function(a){var b='<div class="ets-sp-cfg">\n\t<div class="ets-sp-cfg-hd">\n\t\t<!--\n\t\tthe progress widget will render here\n\t\t-->\n\t</div>\n\t<div class="ets-sp-cfg-bd">\n\t\t<!--\n\t\tthe pace config widget will render here\n\t\t-->\n\t</div>\n\t<div class="ets-sp-cfg-ft">\n\t\t<!--\n\t\tthe restart & moveon widget will render here\n\t\t-->\n\t</div>\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/goal/main",["when","jquery","json2","troopjs-ef/component/widget","troopjs-browser/loom/config","troopjs-browser/loom/weave","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","template!./goal.html"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="$element",l="school-ui-studyplan/shared/pace-config/main",m="school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/main",n="school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/main",o="school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/main",p=".ets-sp-cfg-hd",q=".ets-sp-cfg-ft",r=".ets-sp-cfg-bd",s="ets-sp-blank",t="_data_goal";return d.extend(function(a,b,c){var d=this;d[t]=c},{"hub:memory/load/studyplan":function(c){if(c){var d,f=this;return f[t].properties.paces.forEach(function(a){0===a.pacePoints&&(d=a.selected)}),a.all([f.html(j),f.query(c.id+".progress,.items.progress")]).spread(function(a,c){var g,i,j,t,u=c[0];u.items.forEach(function(a){"goal"===a.typeCode&&(t=a)}),f[k].find(p).append(i=b("<div></div>").attr(e.weave,m).data("studyplan",u)),i.weave(),u.progress.state===h.Completed?(f[k].find(q).append(g=b("<div></div>").attr(e.weave,n).data("studyplan",u)),g.weave()):(f[k].find(r).append(j=b("<div></div>").attr(e.weave,l).data("mode","view").data("config",b.extend({},t&&t.properties,t&&t.progress.properties))),j.weave(),d?f[k].find(q).addClass(s):(f[k].find(q).append(g=b("<div></div>").attr(e.weave,o).data("studyplan",u)),g.weave()))})}}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/moveon.html",[],function(){return function(a){function b(){var b,c="btn btn-m btn-primary",d="btn btn-m btn-default",e=" <button class=",f=' <i class="glyphicon icon-caret-right"></i></button>';return a.isLastLevel?a.isLastUnit&&(a.enableLevelTest&&a.isGE&&(e='<a href="'+a.levelTestPath+"?testid="+a.levelTestId+'" target="_blank"><span class="'+d+'" data-weave="troopjs-ef/blurb/widget" data-blurb-id="450035" data-text-en="Take the level test"></span></a>'+e),a.enableSelectCourse&&(e+='"'+c+'" data-action="select/course" data-link="'+a.changeCourseLink+'">',b='<span data-blurb-id="'+a.blurbIds.cpSelectCourse+'" data-text-en="Select the next course you want to do" data-weave="troopjs-ef/blurb/widget"></span>')):a.isLastUnit?(e+='"'+c+" "+(a.enableChangeLevel?"":"hide")+'" data-action="next/level">',a.enableLevelTest&&a.isGE&&(e='<a href="'+a.levelTestPath+"?testid="+a.levelTestId+'" target="_blank"><span class="'+d+'" data-weave="troopjs-ef/blurb/widget" data-blurb-id="450035" data-text-en="Take the level test"></span></a>'+e),b='<span data-blurb-id="569912" data-text-en="Move to the next level" data-weave="troopjs-ef/blurb/widget"></span> '):(e+='"'+c+'" data-action="next/unit">',b='<span data-blurb-id="569911" data-text-en="Go to Unit ^number^" data-weave="troopjs-ef/blurb/widget" data-values=\'{"number":'+a.nextUnitIndex+"}'></span>"),b?e+b+f:""}var c="";if(c+='\n\n<div class="ets-sp-goal-moveon">\n\t\t',a.hasActiveSPInCurrentLevel&&(c+='\n\t\t<!--\n\t\tif not, we cann\'t render the move on button. because case SPC-4998\n\t\t-->\n\t\t\t<div class="ets-sp-goal-moveon-main">\n\t\t\t\t\t'+b()+"\n\t\t\t</div>\n\t\t"),c+="\n\n\t\t",a.optionalItems.length){c+='\n\t\t<div class="ets-sp-moveon-items">\n\t\t\t<div class="ets-sp-optional-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656559" data-text-en="We recommend you to take optional lessons before you move on"></div>\n\t\t\t<div class="ets-sp-optional-items">\n\t\t\t';for(var d=0;d<a.optionalItems.length;d++)switch(a.optionalItems[d].itemData.typeCode){case"cp20":c+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-check-point"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[d].locked&&(c+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),c+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="639494"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';break;case"pl":c+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-private-lesson"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[d].locked&&(c+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),c+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="569833"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';break;case"gl":c+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-group-lesson"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[d].locked&&(c+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),c+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="638118"></span>\n\t\t\t\t\t\t</div>\n\t\t\t'}c+="\n\t\t\t</div>\n\t\t</div>\n\t\t"}return c+="\n</div>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/main",["school-ui-studyplan/module","jquery","when","poly","lodash","troopjs-ef/component/widget","school-ui-shared/enum/course-type","school-ui-shared/utils/typeid-parser","school-ui-shared/utils/progress-state","school-ui-shared/utils/update-helper","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/utils/state-parser","template!./moveon.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(a,b){return"demo"===a.partnercode.value.toLowerCase()&&(g.isGECourse(b)||g.isBECourse(b))}function o(){var a=this,b=a.course.children,c=a.level,d=b.length,e=a.unit,f=e.parent.children,g=f.length,h={};return e.templateUnitId===f[g-1].templateUnitId||"INDB2B"===a.course.courseTypeCode?(h.isLastUnit=!0,a.isGE?(h.levelTestId=1===a.levelTestVersion?c.legacyLevelId:c.templateLevelId,c.templateLevelId===b[d-1].templateLevelId&&(h.isLastLevel=!0)):h.isLastLevel=!0):f.every(function(b,c){return b.templateUnitId!==e.templateUnitId||(h.nextUnitIndex=c+2,a.nextUnitId=f[c+1].templateUnitId,!1)}),n(a.common_context,a.course.courseTypeCode)&&(h.isLastUnit=!0,h.isLastLevel=!0),h}function p(){var a=this,b=a[y];a.course&&a.level&&a.unit&&a.common_context&&a.levelTestVersion&&a.query(s,t,u,v,w,a.level.id+".children").spread(function(c,d,e,f,g,h){var i,j=o.call(a);j.isGE=a.isGE,j.enableLevelTest=c&&"true"===c.value.toLowerCase(),j.enableChangeLevel=d&&"true"===d.value.toLowerCase(),j.enableSelectCourse=e&&"true"===e.value.toLowerCase(),j.changeCourseLink=B.changeCourseUrl||f.value,j.blurbIds=B.blurbIds,j.levelTestPath=B.levelTestPath,j.optionalItems=[],b.items.forEach(function(a){var b;"goal"!==a.typeCode&&a.isOptional?(b=l.parseFlag(k,a.progress.state),b.Completed||j.optionalItems.push({itemData:a,locked:b.Locked})):i=a}),l.parseFlag(k,i.progress.state).Completed&&(j.isLastLevel&&j.isLastUnit?a.query("blurb!656580").spread(function(b){b&&a.publish(A,b.translation)}):j.isLastUnit?a.query("blurb!656556").spread(function(b){b&&a.publish(A,b.translation)}):a.query("blurb!656555").spread(function(b){b&&a.publish(A,b.translation)})),j.hasActiveSPInCurrentLevel=h.children.reduce(function(a,b){return a||b.templateUnitId===g.studyPlan.properties.templateUnitId},!1),a.html(m,j)})}function q(a){return this.publish("load/config",h.parseId(a))}function r(){var a=this;
return a.query("student_course_enrollment!current",a.unit.progress.id).spread(function(b,c){if(a.nextUnitId&&b.studentUnitId===a.unit.studentUnitId&&i.hasPassed(c.state))return j.updateEnrollment({templateId:a.nextUnitId})})}var s='ccl!"school.courseware.enableleveltest"',t='ccl!"school.courseware.enableSelectNextLevel"',u='ccl!"school.menu.changecourse.display"',v="ccl!'school.studyplan.changeCourse.link'",w="campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress",x="member_site_setting!'school;student.leveltest.version'",y="_data_studyplan",z="$element",A="studyplan/goal/moveon-tips/show",B=e.merge({blurbIds:{cpSelectCourse:"656560"},changeCourseUrl:void 0,levelTestPath:"/school/content/leveltest.aspx"},a.config()||{});return f.extend(function(){var a=this;a[y]=a[z].data("studyplan"),a.query(x).spread(function(b){a.levelTestVersion=parseInt(b&&b.value||1),p.call(a)})},{"hub:memory/common_context":function(a){var b=this;a&&(b.common_context=a.values,p.call(b))},"hub:memory/load/results":function(a){var b=this;!a||b.course===a.course&&b.level===a.level&&b.unit===a.unit||(b.studyplan=a.studyplan,b.isGE=g.isGECourse((a.course||{}).courseTypeCode),b.course=a.course,b.level=a.level,b.unit=a.unit,p.call(b))},"hub/ef/update/progress":function(a){var b=this;b.query(b.studyplan.id+".items.progress").spread(function(a){b[y]=a,p.call(b)})},"dom:[data-action='next/unit']/click":function(a){var b=this;r.call(b).then(function(){q.call(b,b.nextUnitId)})},"dom:[data-action='next/level']/click":function(a){this.publish("enroll/next/level")},"dom:[data-action='select/course']/click":function(a){var c=b(a.currentTarget).data("link");c?window.open(c,"_self"):this.publish("show/course/list")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/progress.html",[],function(){return function(a){var b='<div class="ets-sp-goal-progress">\n\t';if(a.completed)b+='\n\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656554" data-text-en="Congratulations!"></h2>\n\t\t';else if(a.isNopace)b+='\n\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656581" data-text-en="You are studying at your own pace."></h2>\n\t\t';else switch(a.velocity){case this.velocityState.Fast:b+='\n\t\t\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656562" data-text-en="Fantastic. You are running ahead."></h2>\n\t\t\t\t';break;case this.velocityState.Normal:b+='\n\t\t\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656561" data-text-en="Thumbs up. You are right on track."></h2>\n\t\t\t\t';break;case this.velocityState.Slow:b+='\n\t\t\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656563" data-text-en="You are falling behind. Letâ€™s get back on track."></h2>\n\t\t\t\t';break;case this.velocityState.Crashing:b+='\n\t\t\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656582" data-text-en="Your unit plan will expire soon. Letâ€™s get back on track."></h2>\n\t\t\t\t';break;case this.velocityState.Crashed:b+='\n\t\t\t\t<h2 class="ets-sp-velocity" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656564" data-text-en="Your study plan has expired. Set a new one."></h2>\n\t\t\t\t'}if(b+='\n\t\n\t<div class="ets-sp-moveon-tips ets-none"></div>\n\t<div class="ets-sp-bar">\n\t\t<span class="ets-sp-complete-rate">\n\t\t\t<span class="ets-sp-rate-num">'+a.mandatoryRate+'</span>\n\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="656557" data-text-en="completed"></span>\n\t\t</span>\n\t\t\n\t\t<div class="ets-sp-mandatory">\n\t\t\t<div class="ets-sp-progress-border"></div>\n\t\t\t<span class="ets-sp-finished"></span>\n\t\t</div>\t\t\n\t\t',a.optionalItems.length&&(b+='\n\t\t\t<div class="ets-sp-optional-popover">\n\t\t\t\t<div class="ets-sp-optional">\n\t\t\t\t\t<div class="ets-sp-progress-border"></div>\n\t\t\t\t\t<span class="ets-sp-finished"></span>\n\t\t\t\t\t<span class="ets-sp-dots">\n\t\t\t\t\t\t<span class="ets-sp-dot"></span>\n\t\t\t\t\t\t<span class="ets-sp-dot"></span>\n\t\t\t\t\t\t<span class="ets-sp-dot"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'),b+='\n\n\n\t</div>\n</div>\n<!-- use in gubstrap popover plugin -->\n<div class="ets-sp-optional-holder ets-none">\n\t<div class="ets-sp-optional-lessons">\n\t\t<div class="ets-sp-optional-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="656558" data-text-en="Optional lessons"></div>\n\t\t<div class="ets-sp-optional-items">\n\t\t',a.optionalItems&&a.optionalItems.length)for(var c=0;c<a.optionalItems.length;c++)switch(a.optionalItems[c].itemData.typeCode){case"cp20":b+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-check-point"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[c].locked&&(b+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),b+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="639494"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';break;case"pl":b+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-private-lesson"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[c].locked&&(b+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),b+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="569833"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t';break;case"gl":b+='\n\t\t\t\t\t\t<div class="ets-sp-item-small">\n\t\t\t\t\t\t\t<i class="ets-sp-icon">\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t<i class="ets-sp-icon-badge ets-icon-badge-group-lesson"></i>\n\t\t\t\t\t\t\t\t',a.optionalItems[c].locked&&(b+='\n\t\t\t\t\t\t\t\t\t<i class="ets-icon-badge-locked">\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t\t\t\t\t\t\t\t\t\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t'),b+='\n\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t<span class="ets-sp-name" data-weave="troopjs-ef/blurb/widget" data-text-en="Private Class" data-blurb-id="638118"></span>\n\t\t\t\t\t\t</div>\n\t\t\t'}return b+="\n\t\t</div>\t\n\t</div>\n</div>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/main",["when","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/animation-helper","school-ui-studyplan/utils/state-parser","school-ui-studyplan/enum/studyplan-velocity","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","template!./progress.html"],function(a,b,c,d,e,f,g,h,i){var j,k="$element",l="_data_studyplan",m=".ets-sp-optional-popover",n=".ets-sp-optional-holder",o=".ets-sp-mandatory .ets-sp-finished",p=".ets-sp-optional .ets-sp-finished",q=".ets-sp-moveon-tips",r="ets-none",s=800;return b.extend(function(){var a=this;a[l]=a[k].data("studyplan")},{velocityState:f,"sig/start":function(){var b,c,f,q,r=this,t=r[l],u=optionalCount=mandatoryFinished=optionalFinished=0,v=[];return t.items.forEach(function(a){var c;"goal"!==a.typeCode?(c=e.parseFlag(h,a.progress.state),a.isOptional?(optionalCount++,c.Completed&&optionalFinished++,v.push({itemData:a,locked:c.Locked})):(u++,c.Completed&&mandatoryFinished++)):b=a}),c=u?parseInt(mandatoryFinished/u*100,10)+"%":j,f=optionalCount?parseInt(optionalFinished/optionalCount*100,10)+"%":j,b&&b.properties.paces.forEach(function(a){0===a.pacePoints&&(q=a.selected)}),r.html(i,{completed:t.progress.state===g.Completed,goal:b,isNopace:q,mandatoryRate:c,optionalRate:f,optionalItems:v,velocity:t.progress.properties.velocity}).then(function(){var b=r[k].find(m),e=r[k].find(o),g=r[k].find(p);b.data({content:r[k].find(n).html(),trigger:"hover",placement:"bottom",html:!0}),b.popover(),e.css("width",0),g.css("width",0),setTimeout(function(){d.request("goalEnter",function(){return a.promise(function(a){e.css("width",c),g.css("width",f),setTimeout(function(){a()},s)})})},0)})},"hub/studyplan/goal/moveon-tips/show":function(a){a&&this[k].find(q).removeClass(r).text(a)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/restart.html",[],function(){return function(a){var b='<div class="ets-sp-goal-restart">\n\t<span class="ets-sp-goal-restart-link" data-blurb-id="569840" data-text-en="Restart" data-weave="troopjs-ef/blurb/widget"></span>\n\t<div class="ets-sp-goal-restart-confirm-wrapper ets-none">\n\t\t<button type="button" class="btn btn-primary btn-m btn-block ets-sp-goal-restart-confirm" data-blurb-id="450019" data-text-en="Confirm" data-weave="troopjs-ef/blurb/widget"><span></span></button>\n\t\t<span class="ets-sp-goal-restart-cancel" data-blurb-id="450018" data-text-en="Cancel" data-weave="troopjs-ef/blurb/widget"></span>\n\t</div>\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/main",["jquery","poly","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/studyplan-update-helper","school-ui-studyplan/enum/studyplan-velocity","template!./restart.html"],function(a,b,c,d,e,f,g){"use strict";var h="_data_studyplan",i="$element",j="_pacePoints",k=".ets-sp-goal-restart-confirm-wrapper",l=".ets-sp-goal-restart-link",m="btn-primary btn-m btn",n="ets-none";return c.extend(function(){var a=this;a[h]=a[i].data("studyplan")},{"sig/start":function(){var a=this;return a.html(g).then(function(){a[h]&&a[h].progress.properties.velocity===f.Crashed&&a[i].find(l).addClass(m)})},"hub/config/pace-change":function(a){var b=this;a.every(function(a,c){return!a.selected||(b[j]=a.pacePoints,!1)})},"dom:.ets-sp-goal-restart-link/click":function(){var a=this;a[i].find(l).addClass(n),a[i].find(k).removeClass(n),a.publish("config/pace-config/mode","edit")},"dom:.ets-sp-goal-restart-confirm/click":function(){var a=this;e.restartStudyplan({reason:"",pacePoints:a[j]}).then(function(b){a.publish("load",{studyplan_item:d.parseId(b.id)})})},"dom:.ets-sp-goal-restart-cancel/click":function(){var a=this;a.publish("config/pace-config/mode","view"),a[i].find(l).removeClass(n),a[i].find(k).addClass(n)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/lesson.html",[],function(){return function(a){var b="",c=a.lesson,d=a.pcScore,e=a.pcHasPassed,f=a.mobHasPassed,g=a.mobHasStarted,h=a.physicalLesson;return b+='\n<div class="ets-sp-lsn">\n\t<div class="ets-sp-lsn-main">\n\t\t<div class="ets-sp-lsn-hd clearfix">\n\t\t\t<img src="'+(c.lessonImage?c.lessonImage.url:"")+'" width="260" height="160">\n\t\t\t<div class="ets-sp-lsn-info">\n\t\t\t\t<h4><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="490238" data-text-en="Lesson"></span> '+c.lessonNo+"</h4>\n\t\t\t\t<h1>"+c.lessonName+"</h1>\n\t\t\t\t",e?b+='\n\t\t\t\t<div class="ets-sp-lsn-status ets-pass">\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<i class="ets-icon-badge-checkmark"></i>\n\t\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="569854" data-text-en="PASSED"></span> / '+d+"%\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t\t":(b+="\n\t\t\t\t\t",g&&(b+='\n\t\t\t\t\t<div class="ets-sp-lsn-status ets-start">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<i class="ets-mob-icon ets-icon-mob-started"></i>\n\t\t\t\t\t\t\t<span class="ets-mob-status" data-weave="troopjs-ef/blurb/widget" data-blurb-id="661846" data-text-en="Started on mobile"></span>\n\t\t\t\t\t\t\t<i class="ets-icon-mob-tip ets-mob-tip-started"></i>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t'),b+="\n\t\t\t\t\t",f&&(b+='\n\t\t\t\t\t<div class="ets-sp-lsn-status ets-pass">\n\t\t\t\t\t\t<h3>\n\t\t\t\t\t\t\t<i class="ets-mob-icon ets-icon-mob-passed"></i>\n\t\t\t\t\t\t\t<span class="ets-mob-status" data-weave="troopjs-ef/blurb/widget" data-blurb-id="661847" data-text-en="Passed on mobile"></span>\n\t\t\t\t\t\t\t<i class="ets-icon-mob-tip ets-mob-tip-passed"></i>\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t'),b+="\n\t\t\t\t"),b+='\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="ets-sp-lsn-bd">\n\t\t\t<div data-weave="school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/main" data-physical-lesson-id="'+h+'"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal fade ets-mob-modal ets-mob-modal-started" role="dialog">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content ets-mob-modal-tip">\n\t\t\t<div class="ets-tip-icon">\n\t\t\t\t<i class="ets-icon-mob-started"></i>\n\t\t\t</div>\n\t\t\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="661846" data-text-en="Started on mobile"></h2>\n\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="661848" data-text-en="You have started this lesson on your mobile."></p>\n\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="663229" data-text-en="You can choose to study the lesson on the web as well, or continue on your mobile device."></p>\n\t\t\t<div class="ets-tip-button">\n\t\t\t\t<button class="btn btn-default ets-btn-modal-close" data-weave="troopjs-ef/blurb/widget" data-blurb-id="661850" data-text-en="Got it"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal fade ets-mob-modal ets-mob-modal-passed" role="dialog">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content ets-mob-modal-tip">\n\t\t\t<div class="ets-tip-icon">\n\t\t\t\t<i class="ets-icon-mob-passed"></i>\n\t\t\t</div>\n\t\t\t<h2 data-weave="troopjs-ef/blurb/widget" data-blurb-id="661847" data-text-en="Passed on mobile"></h2>\n\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="663228" data-text-en="You have passed this lesson on your mobile."></p>\n\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="661849" data-text-en="You might see more new content herebut don\'t worry, all good!"></p>\n\t\t\t<div class="ets-tip-button">\n\t\t\t\t<button class="btn btn-default ets-btn-modal-close" data-weave="troopjs-ef/blurb/widget" data-blurb-id="661850" data-text-en="Got it"></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/main",["jquery","troopjs-ef/component/widget","school-ui-shared/utils/progress-state","school-ui-shared/utils/typeid-parser","jquery.gudstrap","poly","template!./lesson.html"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b=this;if(a){var d={lesson:a,physicalLesson:b[j].properties.templateLessonId,pcScore:0,pcHasPassed:!1,mobHasStarted:!1,mobHasPassed:!1};return b.query("student_lesson_progress!template_lesson;"+b[j].properties.templateLessonId+".detail").spread(function(a){return a.detail.items.forEach(function(a,b){switch(a.sourceTypeCode){case"PCLesson":d.pcScore=a.score,d.pcHasPassed=c.hasPassed(a.state);break;case"MOBLesson":d.mobHasStarted=c.hasStarted(a.state),d.mobHasPassed=c.hasPassed(a.state)}}),b.html(g,d)})}}var i="$element",j="_studyplan_item",k="_lesson",l=".ets-mob-modal-started",m=".ets-mob-modal-passed",n=".ets-mob-modal";return b.extend(function(a,b,c){var d=this;d[j]=c},{"hub:memory/load/lesson":function(a){var b=this;a&&b.query("pc_student_lesson_map!"+b[j].properties.templateLessonId+".lesson").spread(function(c){c.lesson.templateLessonId===a.templateLessonId&&h.call(b,b[k]=a)})},"hub/lesson/renderer":function(){var a=this;h.call(a,a[k])},"hub/activity/update/progress":function(){var a=this;a.publish("lesson/renderer")},"dom:.ets-mob-tip-started/click":function(){var a=this;a[i].find(l).modal("show")},"dom:.ets-mob-tip-passed/click":function(){var a=this;a[i].find(m).modal("show")},"dom:.ets-btn-modal-close/click":function(){var a=this;a[i].find(n).modal("hide")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/step-list.html",[],function(){return function(a){function b(b){c+='\n\t<!-- Step Start -->\n\t<div data-weave="school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/main" data-id="'+b.id+'" data-physical-lesson-id="'+a.physicalLesson+'" data-show-button="'+!!b._showButton+'" data-has-continue="'+!!b._hasContinue+'"></div>\n\t<!-- Step End -->\n'}var c="",d=a.steps;c+='\n<div class="ets-sp-steps">\n\t';for(var e=0;e<d.length;e++){var f=d[e];b(f)}return c+="\n</div>\n\n"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/main",["jquery","troopjs-ef/component/widget","school-ui-shared/utils/progress-state","school-ui-shared/utils/typeid-parser","template!./step-list.html","poly"],function(a,b,c,d,e){"use strict";function f(a){var b=this;if(a){var d=a.id;return b.query(d+".children.progress").spread(function(a){var d=a.children;return d.every(function(a,b){return!!c.hasPassed(a.progress.state)||(a[h]=!0,!1)}),d.forEach(function(a,b){c.hasStarted(a.progress.state)&&(a[h]=!0,a[i]=!0)}),b.html(e,{steps:d,physicalLesson:b.physicalLessonId})})}}var g="$element",h="_showButton",i="_hasContinue";return b.extend(function(){var a=this;a.physicalLessonId=a[g].data("physical-lesson-id")},{"hub:memory/load/lesson":function(a){var b=this;a&&f.call(b,b.lesson=a)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/step.html",[],function(){return function(a){var b="",c=a.step;return b+='\n<ul class="ets-sp-step '+(a._hasPassed?"ets-pass":"")+" "+(a._showButton?"ets-showButton":"")+"\" data-hash='"+c._hash+'\'>\n\t<li class="ets-sp-step-no">'+c.stepNo+'</li>\n\t<li class="ets-sp-step-type">'+c.stepTypeName+'</li>\n\t<li class="ets-sp-step-title ets-overflow" title="'+c.stepName+'">'+c.stepName+'</li>\n\t<li class="ets-sp-step-action">\n\t\t',a._hasPassed?(b+="\n\t\t\t",b+=a._isPerfect?'\n\t\t\t\t<span class="badge pull-right" data-weave="troopjs-ef/blurb/widget" data-blurb-id="462935" data-text-en="Perfect"><i class="glyphicon glyphicon-ok"></i></span>\n\t\t\t':'\n\t\t\t\t<i class="ets-icon-badge-checkmark"></i>\n\t\t\t',b+="\n\t\t"):(b+='\n\t\t\t<button class="btn btn-primary btn-block btn-sm ets-sp-step-start">\n\t\t\t\t',b+=a._hasContinue?'\n\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="450010" data-text-en="Continue"></span>\n\t\t\t\t':'\n\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="450009" data-text-en="Start"></span>\n\t\t\t\t',b+="\n\t\t\t</button>\n\t\t"),b+="\n\t</li>\n</ul>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/main",["jquery","poly","json2","troopjs-ef/component/widget","school-ui-shared/utils/progress-state","school-ui-shared/utils/typeid-parser","template!./step.html"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b=this;if(a){var d=a+".progress",h="student_lesson!template_lessson;"+b.physicalLessonId+".parent.parent.parent";return b.query(d,h).spread(function(a,d){return a._hash=c.stringify({prefix:"school",enrollment:f.parseId(d.parent.parent.parent.studentCourseId),course:f.parseId(d.parent.parent.parent.id),level:f.parseId(d.parent.parent.id),unit:f.parseId(d.parent.id),lesson:f.parseId(a.parent.id),step:f.parseId(a.id)}),b.html(g,{step:a,_showButton:!(1!=b.showButton),_hasContinue:!(1!=b.hasContinue),_isPerfect:!(100!=a.progress.score),_hasPassed:e.hasPassed(a.progress.state)})})}}var i="$element";return d.extend(function(){var a=this;a.stepId=a[i].data("id"),a.showButton=a[i].data("show-button"),a.hasContinue=a[i].data("has-continue"),a.physicalLessonId=a[i].data("physical-lesson-id")},{"sig/start":function(){var a=this;h.call(a,a.stepId)},"dom:.ets-sp-step/click":function(b){var c=this,d=a(b.currentTarget);return c.publish("load",a.parseJSON(d.attr("data-hash"))),!1}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lock/lock.html",[],function(){return function(a){var b='<div class="ets-sp-unit-locked">\n    <h1><i class="ets-icon-lock"></i></h1>\n    <h1 data-weave="troopjs-ef/blurb/widget" data-text-en="UNIT ^currentunit^ IS LOCKED" data-blurb-id="569834" data-values=\''+JSON.stringify(a.blurbValues)+"'></h1>\n    ";return a.blurbValues.previousunit&&(b+='\n        <h5 data-weave="troopjs-ef/blurb/widget" data-text-en="Complete Unit ^previousunit^ to unlock this unit" data-blurb-id="569835" data-values=\''+JSON.stringify(a.blurbValues)+"'></h5>\n    "),b+="\n</div>"}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/lock/main",["when","poly","troopjs-ef/component/widget","template!./lock.html"],function(a,b,c,d){"use strict";return c.extend({"hub:memory/load/unit":function(a){var b,c=this,e=a&&a.unitNo;a&&(a.parent.children.every(function(c,d){return a.id!==c.id||(b=0==d?void 0:a.parent.children[d-1].unitNo,!1)}),c.html(d,{blurbValues:{currentunit:e,previousunit:b}}))}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/main",["jquery","when","troopjs-ef/component/widget","troopjs-browser/loom/config","troopjs-browser/loom/weave","client-tracking","school-ui-studyplan/enum/studyplan-mode","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/enum/page-name","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/animation-helper","poly/array"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(c,e,f,g){var h=this,i="true"===h[J]&&"goal"===c?"cp-"+c:c,l=a("<div></div>").addClass(B).data("itemData",e).attr(d.weave,G+i+"/main(itemData)");e&&l.attr("data-at-page-id","sp-sequence-item-"+j.parseId(e.id));var m=h[q],n=m.find("."+A),o=n.find("."+B);g&&o.length?(m.addClass(C),n.addClass(C),g===I.L?(n.prepend(l),n.addClass(D)):n.append(l)):(n=a("<div></div>").addClass(A).html(l),m.html(n)),setTimeout(function(){l.weave().then(function(){g&&o.length&&k.request(f,function(){return b.promise(function(a){n.addClass(g===I.L?E:F),setTimeout(function(){n.removeClass([C,D,E,F].join(" ")),o.remove(),m.removeClass(C),a()},H)})})})},0)}function n(a,b,c,d,e){var f,h=this;if(b&&a.mode!==p){switch(a.mode){case g.Create:f="config",h[u]=-1;break;case g.Locked:f="lock";break;case g.Study:f=c&&c.typeCode,h[u]=c&&c.itemIndex}if(f){h[x]=f,h.query('member_site_setting!"school;studyplan.newui.enabled"').spread(function(a){h[J]=a.value,m.call(h,f,c,d,e)});var i;b.items.every(function(a,b){return!c||a.id!==c.id||(i=!0,!1)}),i&&o.call(h,f,c)}}}function o(a,b){var c=this;switch(a){case"lesson":c.query("pc_student_lesson_map!"+b.properties.templateLessonId).spread(function(a){f.pagename(i["lesson"+a.lesson.lessonNo])});break;case"gl":f.pagename(i.gl);break;case"pl":f.pagename(i.pl);break;case"goal":f.pagename(i.goal)}}var p,q="$element",r="template_unit;",s="_studyplan_id",t="_studyplan_item_id",u="_studyplan_item_index",v="_unit_id",w="_unit_template_id",x="_type_code",y="unitNav_seqCon",z="itemChange_seqCon",A="ets-sp-sequence-container",B="ets-sp-sequence-item",C="ets-sp-item-animation",D="ets-sp-prepend-item",E="ets-sp-lt-index",F="ets-sp-gt-index",G="school-ui-studyplan/widget/studyplan/body/sequence-container/",H=600,I={L:"<--",R:"-->"},J="campus_enable";return c.extend({"hub/studyplan/sequence-container/reload":function(){var a=this;a[t]&&b.all([a.query(a[t]),a.query('member_site_setting!"school;studyplan.newui.enabled"'),a[q].find("["+d.woven+"]").unweave()]).spread(function(b,c){a[J]=c[0].value,a[q].find("."+B).remove(),m.call(a,a[x],b[0])})},"hub:memory/load/results":function(a){var b,c,d,e=this;if(a.unit)if(a.studyplan&&e[s]!==a.studyplan.id||!a.studyplan&&e[w]!==a.unit.templateUnitId){e[w]!==a.unit.templateUnitId&&(a.unit.parent.children.forEach(function(b,f){switch(b.templateUnitId){case a.unit.templateUnitId:c=f;break;case e[w]:d=f}}),c!==p&&d!==p&&(b=I[c<d?"L":"R"]));var f=a.unit_studyplan,g=a.studyplan||a.unit_studyplan.studyPlan;e[v]=a.unit&&a.unit.studentUnitId,e[w]=a.unit&&a.unit.templateUnitId,e[s]=g.id,e[t]=a.studyplan_item&&a.studyplan_item.id,n.call(e,f,g,a.studyplan_item,y,b)}else a.studyplan&&a.studyplan_item&&a.unit_studyplan&&e[s]===a.studyplan.id&&e[t]!==(a.studyplan_item&&a.studyplan_item.id)&&(e[u]!==a.studyplan_item.itemIndex&&(b=I[e[u]>a.studyplan_item.itemIndex?"L":"R"]),e[v]=a.unit&&a.unit.studentUnitId,e[w]=a.unit&&a.unit.templateUnitId,e[s]=a.studyplan&&a.studyplan.id,e[t]=a.studyplan_item&&a.studyplan_item.id,n.call(e,a.unit_studyplan,a.studyplan,a.studyplan_item,z,b));else e[v]=e[w]=e[s]=e[t]=p},"hub/load/launcher":function(a){var c=this;if("school"!==a.prefix)return a.studyplan&&a.studyplan!==j.parseId(c[s])||!a.studyplan&&a.unit&&a.unit!==r+c[w]||a.studyplan&&a.studyplan_item&&a.studyplan_item!==j.parseId(c[t])?b.promise(function(a){c[q].find("["+d.woven+"]").unweave().then(function(){a()})}):void 0}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/pl/main",["jquery","troopjs-ef/component/widget"],function(a,b){"use strict";var c="_item_data";return b.extend(function(a,b,d){this[c]=d},{"sig/start":function(){var b=this;return b.publish("school/interface/studyplan/pl-container-widget","school-ui-studyplan/widget/gl-pl/privatelesson/main").spread(function(d){a("<div></div>",{"data-weave":d+"(itemData)",data:{itemData:b[c]}}).appendTo(b.$element).weave()})}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/sppl20/main",["jquery","troopjs-ef/component/widget"],function(a,b){"use strict";var c="_item_data";return b.extend(function(a,b,d){this[c]=d},{"sig/start":function(){var b=this;return b.publish("school/interface/studyplan/pl20-container-widget","school-ui-studyplan/widget/gl-pl/privatelesson/main").spread(function(d){a("<div></div>",{"data-weave":d+"(itemData)",data:{itemData:b[c]}}).appendTo(b.$element).weave()})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/unavailable/unavailable.html",[],function(){return function(a){var b='<div class="ets-sp-chrysalis-unit">\n    <h3><i class="glyphicon glyphicon-info-sign"></i></h3>\n    <h5 data-weave="troopjs-ef/blurb/widget" data-text-en="This unit was completed with an earlier version of the school." data-blurb-id="632524"></h5>\n    <p data-weave="troopjs-ef/blurb/widget" data-text-en="All your progress have been stored, but unfortunately the activities done cannot be reviewed." data-blurb-id="632525"></p>\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-container/unavailable/main",["troopjs-ef/component/widget","template!./unavailable.html"],function(a,b){"use strict";return a.extend({"sig/start":function(){return this.html(b)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/item.html",[],function(){return function(a){var b='<div class="ets-sp-sqn-item-badge">\n\t<i class="ets-sp-sqn-item-icon">\n\t\t<i class="ets-sp-sqn-icon-bg '+a.itemBackgroundClass+'"></i>\n\t\t<i class="ets-sp-sqn-icon-badge '+a.itemClass+'"></i>\n\t</i>\n</div>\n<div class="ets-sp-sqn-item-title">'+a.topic+'</div>\n<i class="ets-icon-arrow-up"></i>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/base",["jquery","jquery.gudstrap","when","troopjs-ef/component/widget","troopjs-browser/loom/config","troopjs-browser/loom/weave","school-ui-studyplan/enum/studyplan-mode","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","school-ui-shared/utils/typeid-parser","school-ui-studyplan/utils/state-parser","school-ui-studyplan/utils/client-storage","school-ui-shared/utils/update-helper","school-ui-shared/utils/console","template!./item.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a,b,c){if(!b)return!1;var d=b.progress.state!==h.Completed;return c===O?d:a.Locked}function q(a,b){return b===g.Study?a+".progress":a}function r(a){var b=this,d="campus_student_studyplan_item!"+a;return c(b[x]&&[b[x]]||b.query(q(d,b[w]))).spread(function(a){return c.all([b[G].topic,b[G].popoverTitle,b[G].popoverContent]).spread(function(c,d,e){return b[G].topic=c,b[G].popoverTitle=d,b[G].popoverContent=e,(b[G].popoverTitle||b[G].popoverContent)&&"fulfilled"!==b[H].promise.inspect().state&&(b[u].popover({trigger:"manual",title:b[G].popoverTitle,content:b[G].popoverContent,placement:"bottom"}),b[H].resolve()),[a]})}).spread(function(a){var d=a.progress.state,e=b[G],f=e.customMark.slice(),g=!!b[u].find("."+z).length,h=k.parseFlag(i,d),j=p(h,b.studyPlan,f[0]);h.Completed&&f.push(N+"check"),j&&f.push(N+"locked");var l=g?c.resolve():b.html(e.template||o,e);return l.then(function(){b[u].toggleClass(B,h.Completed),b[u].toggleClass(E,j),s.call(b,f,a)})})}function s(b,d){var f=this,g=f[u].find("."+z),h=f[u].find("."+A);b.length?b.reduce(function(b,f){return b.then(function(b){return!!b||void c.resolve(f).then(function(b){var c=a("<div></div>").addClass(A).attr(e.weave,b+"(itemData)").attr("data-item-data",JSON.stringify(d)).appendTo(g);return c.weave().then(function(){return!0},function(){return c.unweave().catch(function(a){n.info(a)}).then(function(){c.remove()}),!1})})})},c.resolve(!1)).then(function(){h.remove()}):h.remove()}var t,u="$element",v="_id",w="_unit_studyplan_mode",x="_data",y="_item_ui_status",z="ets-sp-sqn-item-badge",A="ets-badge-custommark",B="ets-pass",C="ets-suggest",D="ets-active",E="ets-locked",F="ets-unavailable",G="_render_data",H="_dfd_popover",I="shown_popover_ids",J=",",K=5e3,L="_delay_hide_popover_timer",M="_store_shown_popover_id",N="school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/",O="school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal";return d.extend(function(){var a=this;a[v]=a[u].data("itemId"),a[w]=a[u].data("unitStudyplanMode"),a[y]={selected:t,suggest:t},a[G]=a[G]||{template:"",customMark:[],topic:"",itemClass:"",itemBackgroundClass:""}},{"sig/start":function(){var a=this;return a[H]=c.defer(),a[M]=!0,r.call(a,a[v])},"hub/studyplan/sequence-item/update":function(a){var b=this;a&&j.parseId(a)!==b[v]||r.call(b,b[v])},"hub:memory/load/studyplan":function(a){var b=this;a&&(b.studyplanId=j.parseId(a.id),b.studyPlan=a,r.call(b,b[v]))},"dom/click":function(){this.clickHandler()},clickHandler:function(){var a=this;a[y].selected||a[y].unavailable||(a.publish("load",{studyplan_item:a[v]}),a.publish("studyplan/sequence-item/selected",a[v]))},"hub/studyplan/sequence-item/trigger/click":function(a){j.parseId(a)===this[v]&&this.clickHandler()},"hub:memory/studyplan/sequence-item/unavailable":function(a,b){var c=this;c[y].unavailable=a&&b!==c[v],c.resetStatusClass(),c.unavailable&&c.unavailable(c[y].unavailable)},"hub:memory/studyplan/sequence-item/selected":function(a){var b=this;a=j.parseId(a),b[y].selected=a===b[v],b.resetStatusClass(),b.selected&&b.selected(b[y].selected,a)},"hub:memory/studyplan/sequence-item/suggest":function(a){var b=this;a=j.parseId(a),b[y].suggest=a===b[v],b.resetStatusClass(),b.suggest&&b.suggest(b[y].suggest,a)},resetStatusClass:function(){var a=this;a[u].toggleClass(C,a[y].suggest),a[u].toggleClass(D,a[y].selected),a[u].toggleClass(F,a[y].unavailable)},showPopover:function(){var a=this;a[H].promise.then(function(){"show"!==a[u].data("popoverStatus")&&a[u].popover("show")&&a[u].data("popoverStatus","show")})},hidePopover:function(){var a=this;a[H].promise.then(function(){"hide"!==a[u].data("popoverStatus")&&a[u].popover("hide")&&a[u].data("popoverStatus","hide");
})},delayHidePopover:function(){var a=this;a[L]&&clearTimeout(a[L]),a[L]=setTimeout(function(){clearTimeout(a[L]),a.hidePopover()},K)},canShowPopover:function(){var a=this;return a[y].suggest&&a[y].selected===!1&&a[y].unavailable===!1&&!a.isShownIdStored()},tryShowPopover:function(){var a=this;a.canShowPopover()&&(a.showPopover(),a.delayHidePopover(),a[M]&&a.storeShownId())},isStoreShownId:function(){return this[M]},setStoreShownId:function(a){return this[M]=a},isShownIdStored:function(){var a=this,b=l.getLocalStorage(I)||J;return b.indexOf(J+a[v]+J)>-1},storeShownId:function(){var a=this;if(!a.isShownIdStored()){var b=l.getLocalStorage(I)||J;b+=a[v]+J,l.setLocalStorage(I,b)}}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/config",["./base"],function(a){var b="_id",c="_data",d="_render_data";return a.extend(function(a,d,e){var f=this;f[c]={id:"config",typeCode:"config",progress:{state:0}},f[b]=f[c].id},{"sig/start":function(){var a=this;a[d]&&(a[d].itemClass="ets-icon-setup",a[d].itemBackgroundClass="glyphicon icon-circle",a[d].topic=a.query("blurb!656053").spread(function(a){return a&&a.translation}))}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/cp-goal",["./base"],function(a){var b="$element",c="_render_data",d="ets-sp-sqn-item-goal",e="_previous_selected_id",f="school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/";return a.extend(function(a,c,e){var f=this;f[b].addClass(d)},{"sig/start":function(){var a=this;a[c]&&(a[c].itemClass="ets-icon-badge-goal-poly",a[c].itemBackgroundClass="ets-icon-goal-bg",a[c].customMark.push(f+"cp-goal"),a[c].topic=a.query("blurb!568667").spread(function(a){return a&&a.translation}),a[c].popoverTitle=a.query("blurb!571166").spread(function(a){return a&&a.translation}),a[c].popoverContent=a.query("blurb!571167").spread(function(a){return a&&a.translation}))},"hub/studyplan/sequence/update":function(){var a=this;a.tryShowPopover()},suggest:function(){var a=this;a.tryShowPopover()},unavailable:function(){var a=this;a.tryShowPopover()},selected:function(a,b){var c=this;b!==c[e]&&(c.canShowPopover()?c.tryShowPopover():c.hidePopover(),c[e]=b)},"hub/activity/opened":function(){var a=this;a.setStoreShownId(!1)},"hub/activity/closed":function(){var a=this;a.setStoreShownId(!0),a.tryShowPopover()}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/cp20",["./base"],function(a){var b="_render_data",c="_previous_selected_id";return a.extend({"sig/start":function(){var a=this;a[b]&&(a[b].itemClass="ets-icon-badge-check-point",a[b].itemBackgroundClass="glyphicon icon-circle",a[b].customMark.push(a.publish("school/interface/studyplan/cp20-mark-widget","school-ui-studyplan/widget/gl-pl/mark/cp20").spread(function(a){return a})),a[b].topic=a.query("blurb!639494").spread(function(a){return a&&a.translation}),a[b].popoverTitle=a.query("blurb!639496").spread(function(a){return a&&a.translation}),a[b].popoverContent=a.query("blurb!639497").spread(function(a){return a&&a.translation}))},"hub/studyplan/sequence/update":function(){var a=this;a.tryShowPopover()},suggest:function(){var a=this;a.tryShowPopover()},unavailable:function(){var a=this;a.tryShowPopover()},selected:function(a,b){var d=this;b!==d[c]&&(d.canShowPopover()?d.tryShowPopover():d.hidePopover(),d[c]=b)},"hub/activity/opened":function(){var a=this;a.setStoreShownId(!1)},"hub/activity/closed":function(){var a=this;a.setStoreShownId(!0),a.tryShowPopover()}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/gl",["./base"],function(a){var b="_render_data";return a.extend({"sig/start":function(){var a=this;a[b]&&(a[b].itemClass="ets-icon-badge-group-lesson",a[b].itemBackgroundClass="glyphicon icon-circle",a[b].topic=a.query("blurb!638118").spread(function(a){return a&&a.translation}))}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/goal",["./base"],function(a){var b="$element",c="_render_data",d="ets-sp-sqn-item-goal",e="_previous_selected_id",f="school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/";return a.extend(function(a,c,e){var f=this;f[b].addClass(d)},{"sig/start":function(){var a=this;a[c]&&(a[c].itemClass="ets-icon-badge-goal-poly",a[c].itemBackgroundClass="ets-icon-goal-bg",a[c].customMark.push(f+"goal"),a[c].topic=a.query("blurb!568667").spread(function(a){return a&&a.translation}),a[c].popoverTitle=a.query("blurb!571166").spread(function(a){return a&&a.translation}),a[c].popoverContent=a.query("blurb!571167").spread(function(a){return a&&a.translation}))},"hub/studyplan/sequence/update":function(){var a=this;a.tryShowPopover()},suggest:function(){var a=this;a.tryShowPopover()},unavailable:function(){var a=this;a.tryShowPopover()},selected:function(a,b){var c=this;b!==c[e]&&(c.canShowPopover()?c.tryShowPopover():c.hidePopover(),c[e]=b)},"hub/activity/opened":function(){var a=this;a.setStoreShownId(!1)},"hub/activity/closed":function(){var a=this;a.setStoreShownId(!0),a.tryShowPopover()}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/lesson",["./base"],function(a){var b="_id",c="_render_data";return a.extend({"sig/start":function(){var a=this;a[b]&&a[c]&&(a[c].itemClass="ets-icon-badge-lesson",a[c].itemBackgroundClass="glyphicon icon-circle",a[c].topic=a.query("campus_student_studyplan_item!"+a[b]+".properties").spread(function(b){return a.query("student_lesson!template_lesson;"+b.properties.templateLessonId)}).spread(function(a){return a.lessonName}))}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/pl",["./base"],function(a){var b="_render_data";return a.extend({"sig/start":function(){var a=this;a[b]&&(a[b].itemClass="ets-icon-badge-private-lesson",a[b].itemBackgroundClass="glyphicon icon-circle",a[b].customMark.push(a.publish("school/interface/studyplan/pl-mark-widget","school-ui-studyplan/widget/gl-pl/mark/pl").spread(function(a){return a})),a[b].topic=a.query("blurb!569833").spread(function(a){return a&&a.translation}))}})}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/sppl20",["./base"],function(a){var b="_render_data";return a.extend({"sig/start":function(){var a=this;a[b]&&(a[b].itemClass="ets-icon-badge-private-lesson",a[b].itemBackgroundClass="glyphicon icon-circle",a[b].customMark.push(a.publish("school/interface/studyplan/pl20-mark-widget","school-ui-studyplan/widget/gl-pl/mark/pl").spread(function(a){return a})),a[b].topic=a.query("blurb!569833").spread(function(a){return a&&a.translation}))}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/sequence-nav.html",[],function(){return function(a){var b='<div class="ets-sp-sqn ets-sp-sequence-item">\n\t<!-- Sequence Navigation Start -->\n\t<div class="ets-sp-sqn-main">\n\t\t<ul class="ets-sp-sqn-container">\n            <div class="ets-sp-sqn-line"></div>\n        </ul>\n\t</div>\n\t<!-- Sequence Navigation End -->\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/main",["when","jquery","troopjs-ef/component/widget","template!./sequence-nav.html","school-ui-shared/utils/typeid-parser","school-ui-studyplan/enum/studyplan-mode","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/enum/studyplan-velocity","school-ui-studyplan/utils/state-parser","troopjs-browser/loom/config","school-ui-studyplan/utils/animation-helper","jquery.gudstrap","lodash"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b){return b===f.Study?a+".progress":a}function p(c,e,f){var g,h=this,i=h[G],j=i.find("."+v),k=j.find("."+A);return h.query(o(e.id,c.mode),'member_site_setting!"school;studyplan.newui.enabled"').spread(function(e,m){if(h[s]=c,h[t]=e,h[Q]=m.value,f&&k.length){var n=f===P.L,o=b(d());return i.addClass(B),j.addClass(B),n?(j.prepend(o),j.addClass(C)):j.append(o),g=o.find("."+w),a.all(q.call(h,g)).then(function(){var b=a.defer();return l.request(M,function(){return a.promise(function(a){j.addClass(n?D:E),setTimeout(function(){j.removeClass([B,C,D,E].join(" ")),k.remove(),i.removeClass(B),a()},N)}).then(b.resolve,b.reject)}),b.promise})}return g=i.find("."+w),g.length||(j=b("<div></div>").addClass(v).html(d()).appendTo(i),g=j.find("."+w)),a.all(q.call(h,g))})}function q(a){var c,d,h,j=this,l=j[s].mode,m=[],o=j[t];a.find("."+y).addClass(z),l===f.Create?(j.publish("studyplan/sequence-item/selected",F),d=[{typeCode:"config"}].concat(o.items),h=F):d=o.items,d.forEach(function(d){var f=d.id&&a.find("[data-item-id='"+e.parseId(d.id)+"']");if(f&&f.data("woven"))f.appendTo(a),f.removeClass(z),j.publish("studyplan/sequence-item/update",e.parseId(d.id));else{var g="true"===j[Q]&&"goal"===d.typeCode?"cp-"+d.typeCode:d.typeCode,l="";o.progress&&(l=n.findKey(i,function(a){return a===o.progress.properties.velocity}).toLowerCase()),f=b("<li class='ets-sp-sqn-item'></li>").attr("data-item-id",e.parseId(d.id)||"").attr("data-type-code",d.typeCode).attr("data-unit-studyplan-mode",j[s].mode).attr(k.weave,H+g+"(itemID)").attr("data-velocity",l).appendTo(a),m.push(f.weave())}"goal"===d.typeCode&&(c=o.progress&&o.progress.properties.velocity===i.Crashed)&&(h=e.parseId(d.id))}),a.toggleClass(x,!(!o.progress||o.progress.state!==g.Completed)),a.find("."+z).each(function(a,c){b(c).popover("destroy")}).remove(),j.publish("studyplan/sequence-item/unavailable",l===f.Create||l===f.Locked||c,h);var p=o.items.filter(function(a){return o.progress&&a.itemIndex===o.progress.properties.suggestedItemIndex}),q=p.length?p[0]:o.items[0];return j.publish("studyplan/sequence-item/suggest",e.parseId(q.id)),m}var r,s="_data_unit_studyplan",t="_data_studyplan",u="template_unit;",v="ets-sp-sequence-navigation-container",w="ets-sp-sqn-container",x="ets-complete",y="ets-sp-sqn-item",z="ets-sp-sqn-removeable",A="ets-sp-sequence-item",B="ets-sp-item-animation",C="ets-sp-prepend-item",D="ets-sp-lt-index",E="ets-sp-gt-index",F="config",G="$element",H="school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/",I="_studyplan_id",J="_unit_studyplan_id",K="_unit_id",L="_unit_template_id",M="unitNav_seqNav",N=600,O="_promise_render",P={L:"<--",R:"-->"},Q="campus_enable";return c.extend({"hub/load/launcher":function(b){var c=this;if("school"!==b.prefix)return b.studyplan&&b.studyplan!==e.parseId(c[I])||!b.studyplan&&b.unit!==u+c[L]?a.promise(function(a){c[G].find("["+k.woven+"]").unweave().then(function(){a()})}):void 0},"hub:memory/load/results":function(a){var b,c,d,e=this;if(a.unit){if(a.studyplan&&e[I]!==a.studyplan.id||!a.studyplan&&e[L]!==a.unit.templateUnitId){e[L]!==a.unit.templateUnitId&&(a.unit.parent.children.forEach(function(b,f){switch(b.templateUnitId){case a.unit.templateUnitId:c=f;break;case e[L]:d=f}}),c!==r&&d!==r&&(b=P[c<d?"L":"R"]));var f=a.unit_studyplan,g=a.studyplan||a.unit_studyplan.studyPlan;e[J]=f.id,e[I]=g.id,e[L]=a.unit&&a.unit.templateUnitId,e[K]=a.unit&&a.unit.studentUnitId,e[O]=p.call(e,f,g,b)}}else e[J]=e[I]=e[L]=e[K]=r},"hub:memory/load/studyplan_item":function(a){var b=this,c=a?e.parseId(a.id):null;b.publish("studyplan/sequence-item/selected",c)},"hub/studyplan/sequence/navigate/suggest-item":function(){var a=this,b=a[t].items.filter(function(b){return a[t].progress&&b.itemIndex===a[t].progress.properties.suggestedItemIndex}),c=b.length?b[0]:r;c&&a.publish("load",{prefix:"study",studyplan:e.parseId(a[t].id),studyplan_item:e.parseId(c.id)})},"hub/studyplan/sequence/navigate/goal":function(){var a,b=this;b[t]&&b[t].items.length>0&&(b[t].items.forEach(function(b){"goal"==b.typeCode&&(a=b.itemIndex)}),b.publish("load",{prefix:"study",studyplan:e.parseId(b[t].id),studyplan_item:e.parseId(b[t].items[a].id)}))},"hub/studyplan/sequence/update":function(){var a=this;a[I]&&a[O]&&"fulfilled"===a[O].inspect().state&&(a[O]=p.call(a,a[s],a[s].studyPlan))},"hub/activity/update/progress":function(){this.publish("studyplan/sequence/update")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/check.html",[],function(){return function(a){var b='<i class="ets-icon-badge-checkmark"></i>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/check",["when","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","template!./check.html"],function(a,b,c,d){var e="_id",f="_item";return b.extend(function(a,b,d){this[e]=c.parseId(d.id),this[f]=d},{"sig/start":function(){return"goal"===this[f].typeCode?a.reject("skip check mark, goal item has no check mark"):this.html(d)},"hub:memory/studyplan/sequence-item/selected":function(a){var b=this,c=b[e];b.$element.toggleClass("ets-none",a==c)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal.html",[],function(){return function(a){var b='<span class="badge ets-sp-badge-normal campus-badge-normal"></span>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal",["jquery","troopjs-ef/component/widget","template!./cp-goal.html"],function(a,b,c){return b.extend(function(a,b,c){},{displayName:"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal","sig/start":function(){var a=this;a.html(c)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal.html",[],function(){return function(a){var b='<span class="badge ets-sp-badge-normal">'+a+"</span>";return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal",["jquery","when","moment","troopjs-ef/component/widget","school-ui-shared/enum/moment-language","school-ui-studyplan/enum/studyplan-item-state","school-ui-studyplan/utils/state-parser","template!./goal.html"],function(a,b,c,d,e,f,g,h){var i="_data",j="_context_defer";return d.extend(function(a,c,d){this[i]=d,this[j]=b.defer()},{displayName:"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal","sig/start":function(){var a=this,d=a[i];return g.parseFlag(f,d.progress.state).Completed?b.reject("skip target date mark, studyplan is completed"):d&&d.progress&&d.progress.properties&&d.progress.properties.endDate?void a[j].promise.spread(function(b){var f=c(d.progress.properties.endDate);b&&(f.lang(e[b.cultureCode.toLowerCase()]),a.html(h,f.format("ll")))}):b.reject("skip target date mark, no endDate in goal")},"hub:memory/context":function(a){a&&this[j].resolve([a])}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/locked.html",[],function(){return function(a){var b='<i class="ets-icon-badge-locked">\n\t<i class="ets-sp-locked-mark-bg glyphicon icon-circle"></i>\n\t<i class="ets-sp-locked-mark-icon ets-icon-lock"></i>\n</i>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/locked",["troopjs-ef/component/widget","template!./locked.html"],function(a,b){return a.extend({"sig/start":function(){return this.html(b)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/skipped.html",[],function(){return function(a){var b='<span class="badge ets-sp-badge-skipped" data-weave="troopjs-ef/blurb/widget" data-text-en="Skipped" data-blurb-id="568736"></span>';return b}}),define("school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/skipped",["troopjs-ef/component/widget","template!./skipped.html"],function(a,b){return a.extend({"sig/start":function(){return this.html(b)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/change-course/course.html",[],function(){return function(a){var b="";return a.enableShowCourseName&&(b+='\n<div class="ets-sp-chc-hd">\n    ',a.changeCourseLink&&a.enableChangeCourse?b+='\n    <div class="ets-sp-chc-widget ets-sp-chc-link">\n        <h3>'+a.courseName+"</h3>\n        <h4>"+a.levelName+'</h4>\n        <a class="ets-sp-chc-link-url" data-weave="troopjs-ef/blurb/widget" data-blurb-id="668938" data-text-en="Change course" href="'+a.changeCourseLink+'"></a>\n    </div>\n    ':(b+='\n    <div class="ets-sp-chc-widget ets-sp-chc-switch '+(a.enableChangeCourse?"ets-sp-chc-hand":"")+'" ',a.enableChangeCourse&&(b+="data-action='switch' "),b+=" >\n        ",a.enableChangeCourse&&(b+='\n            <div class="ets-sp-chc-switch-arrow">\n                <i class="glyphicon icon-caret-down"></i>\n            </div>\n        '),b+='\n        <div class="ets-sp-chc-switch-main">\n            <h3>'+a.courseName+"</h3>\n            <h4>"+a.levelName+"</h4>\n        </div>\n    </div>\n    "),b+="\n</div>\n"),b}}),define("school-ui-studyplan/widget/studyplan/header/change-course/main",["school-ui-studyplan/module","jquery","when","school-ui-shared/utils/ccl","troopjs-browser/loom/config","troopjs-ef/component/widget","template!./course.html"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c){var e=this;if(a&&b&&c)return e.query(i,j,k,l).spread(function(c,f,h,i){return e.html(g,{courseName:a.courseName,levelName:b.levelName,enableChangeCourse:d.indicateCCLStringValue(i)||d.indicateCCLStringValue(c),enableShowCourseName:d.indicateCCLStringValue(f),changeCourseLink:q.changeCourseUrl||h.value}).then(function(){var a=e[m].find(n),b=a[0].scrollWidth;a.width(b),e[m].closest(o).find(p).css("padding-left",b)})})}var i='ccl!"school.menu.changecourse.display"',j='ccl!"school.courseware.showCourseName.enable"',k='ccl!"school.studyplan.changeCourse.link"',l='member_site_setting!"CampusCore;Campus.ChangeCourse.Enable"',m="$element",n=".ets-sp-chc-widget",o=".ets-sp-unit-hd",p=".ets-sp-unn",q=b.extend({changeCourseUrl:void 0},a.config()||{});return f.extend({"hub:memory/load/results":function(a){var b=this;b.course===a.course&&b.level===a.level&&b.unit===a.unit||h.call(b,b.course=a.course,b.level=a.level,b.unit=a.unit)},"dom:[data-action='switch']/click":function(){this.publish("toggle/course/list")}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/course-list/course-list.html",[],function(){return function(a){function b(){var a="<div class='ets-sp-chc-courses-row'>";return a}function c(a,b){return e(a,a.unit_children||a.children,b)}function d(){return"</div>"}function e(a,b,c){var d="<div class='ets-sp-chc-course ets-"+c+"-col clearfix' data-course-type='"+a.courseTypeCode+"'>",e="<h3>"+a.courseName+"</h3>",g=f(b),h="</div>";return d+e+g+h}function f(b){for(var c,d,e=b.length,f=0,g="",h="",i=8,j="ets-pass",k=" data-template-id='{templateId}'";f<e;)f%i===0&&(g+="<ul>"),d=b[f],c=a.hasPassed(d.progress.state),h=c?"class='"+j+"' ":"",g+="<li data-action='select-level' "+h+k.replace("{templateId}",d.templateUnitId||d.templateLevelId)+">",g+=d.unitName||d.levelName,g+=c?'<i class="ets-icon-badge-checkmark"></i></li>':"</li>",++f%i===0&&(g+="</ul>");return g}function g(a){for(var e,f,g,h,i=a.length,j=0,k=4,l=8,m="",n=0;j<i;)h=a[j],h&&(this[h.courseTypeCode]=this[h.courseTypeCode]||h,e=h.unit_children||h.children,f=Math.ceil(e.length/l),g=Math.ceil(f/k),n<f?(m+=0!==j?d():"",m+=b(),m+=c(h,f),n=(k-f%k)%k):(m+=c(h,f),n-=f),++j===i&&(m+=d()));return m}var h="";return h+='\n\n<div class="ets-sp-chc-bd ets-none">\n    <div class="ets-sp-chc-courses clearfix">\n        <button class="btn btn-default btn-sm ets-sp-chc-close" data-action="close">\n        <i class="glyphicon glyphicon-remove"></i> <span data-weave="troopjs-ef/blurb/widget" data-blurb-id="450020" data-text-en="close"></span></button>\n        <div data-action=\'change-level\'>'+g.call(this,a.groups)+'</div>\n    </div>\n</div>\n\n\n<!--\n <div class="ets-sp-chc-courses-row">\n    <div class="ets-sp-chc-course ets-2-col clearfix">\n        <h3>Level Name</h3>\n        <ul>\n            <li class="ets-pass"> Level Item<i class="ets-icon-badge-checkmark"></i></li>\n            <li class="ets-active">Actived Item</li>\n            <li>Normal Item</li>\n        </ul>\n        ...\n    </div>\n</div>\n-->'}}),define("school-ui-studyplan/widget/studyplan/header/course-list/main",["jquery","when","client-tracking","troopjs-ef/component/widget","school-ui-shared/utils/console","school-ui-shared/utils/update-helper","school-ui-shared/utils/progress-state","school-ui-shared/utils/typeid-parser","school-ui-shared/enum/course-type","school-ui-studyplan/enum/studyplan-state","school-ui-studyplan/enum/studyplan-mode","template!./course-list.html","poly"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";function n(){var a=this,b=[],c=[];return da.forEach(function(a,d){b.push(a._name),c.push("blurb!"+a._id)}),a.query(c).then(function(a){a.forEach(function(a,c){ea[b[c]]=a?a.translation:da[c].en})})}function o(a,b){return"GE"===a.courseTypeCode?-1:"GE"===b.courseTypeCode?1:a.children.length>b.children.length?1:-1}function p(){var a=this;return b.all([a.query(E),n.call(a)]).spread(function(b){if(a.courseInfo=b[0],a.courseInfo)return a.html(l,{groups:a.courseInfo.items?a.courseInfo.items.sort(o):[],hasPassed:g.hasPassed}).then(function(){a.$allCourses=a.$element.find(z),a.$courseBody=a.$element.find(x),a.$arraw=a.$element.find(A),v.call(a,a[N]),q.call(a,a[K]&&a[K].templateLevelId,a[L]&&a[L].templateUnitId)})})}function q(){var a=this,b=Array.prototype.slice.call(arguments);b.length&&(a.$allCourses&&a.$allCourses.removeClass(B),b.forEach(function(b){a.$element.find("[data-template-id='"+b+"']").addClass(B)}))}function r(a){a.type=a.type||I;var c=this;return this.publish("enable/show/"+a.type+"-box",!0).spread(function(d){return d?c.publish("show/"+a.type+"-modal-box",a):b.reject("disable show modal box")})}function s(a,c){var d=this,e=b.resolve(),g=i.isGECourse(c),h=i.isBECourse(c);return"demo"===d.common_context.partnercode.value.toLowerCase()&&(e=b.all(b.map(d.courseInfo.items,function(b){return g&&"GE"===b.courseTypeCode?d.query(b.children[6].children[2].id).spread(function(b){a.templateId=b.templateUnitId}):h&&"BE"===b.courseTypeCode?d.query(b.children[4].children[1].id).spread(function(b){a.templateId=b.templateUnitId}):void 0}))),e.then(function(){return f.updateEnrollment(a)}).then(function(a){return d.publish("enrollment/update").then(function(){return d.publish("context/update/context")})})}function t(){var a=this;if(a[K]){var b,c,d=a[K].templateLevelId;if(a.courseInfo&&!a.isSPIN)return b=a.courseInfo.items,b.every(function(a){return a.children.every(function(b,e){return!a.children[e+1]||b.templateLevelId!==d||(c={templateId:a.children[e+1].templateLevelId},!1)})}),c}}function u(a,b,c){var d=this,e=i.isGECourse(a),f=d.isGE&&e,g=f?ea[O]:ea[_],h=f?ea[P]:ea[aa];return r.call(d,{type:H,title:g,body:h})}function v(a){var b=this;a?(b.$courseBody&&b.$courseBody.removeClass(C),b.$arraw&&b.$arraw.addClass(D)):(b.$courseBody&&b.$courseBody.addClass(C),b.$arraw&&b.$arraw.removeClass(D))}var w,x=".ets-sp-chc-bd",y=".ets-sp-chc-course",z=".ets-sp-chc-course li",A=".ets-sp-chc-switch-arrow i",B="ets-active",C="ets-none",D="icon-caret-up",E="student_enrollable_courses!*.items.children.progress",F='ccl!"school.changecourse.minimum.levelno"',G="campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress",H="confirm",I="alert",J="ok",K="_level",L="_unit",M="_course_type_code",N="_show",O="_GE2GE_Title",P="_GE2GE_Body",Q="_GE2GE_Below_Title",R="_GE2GE_Below_Body",S="_topic_unable_to_change",T="_text_unable_to_change",U="_topic_want_change",V="_text_want_change",W="_option_want_change",X="_topic_unable_to_change_course",Y="_text_unable_to_change_course",Z="_topic_sure_want_to_change",$="_text_sure_want_to_change",_="_Title",aa="_Body",ba="_sp_Title",ca="_sp_Body",da=[{_name:J,_id:"150652",en:"OK"},{_name:O,_id:"450016",en:"Are you sure you want to change the level?"},{_name:P,_id:"450311",en:"Your progress in this level will be saved, but we recommend that you complete the levels in order."},{_name:Q,_id:"458008",en:"This course is for Level 6 or higher."},{_name:R,_id:"458009",en:"You need to be studying at General English Level 6 or above to take advantage of this course."},{_name:_,_id:"461321",en:"Do you want to change courses?"},{_name:aa,_id:"461322",en:"Don't worry. Your progress in this course will be saved."},{_name:ba,_id:"569826",en:"Are you sure you want to change the level?"},{_name:ca,_id:"569827",en:"If you change your level your current study plan will be discarded."},{_name:S,_id:"634432",en:"Unable to change level"},{_name:T,_id:"634433",en:"You can not change to this level as you have completed it in an older version of the online school. Please select another one."},{_name:U,_id:"634434",en:"Are you sure you want to change level?"},{_name:V,_id:"634435",en:"Your progress in this level will be saved, but we recommend that you complete the levels in order."},{_name:W,_id:"634436",en:"I want to make a fresh start! Please enrol me at the beginnng of the course and remove my old study progress."},{_name:X,_id:"634437",en:"Unable to change course"},{_name:Y,_id:"634438",en:"You can not change to this course as you have completed it in an older version of the online school."},{_name:Z,_id:"634439",en:"Are you sure you want to change course?"},{_name:$,_id:"634440",en:"Your progress in this course will be saved."}],ea={};return d.extend({"hub:memory/common_context":function(a){var b=this;a&&(b.common_context=a.values,p.call(b))},"hub:memory/load/results":function(a){var b=this;a.course&&(b.isGE=i.isGECourse(b[M]=(a.course||{}).courseTypeCode),b.isSPIN=i.isSpinCourse(b[M]),q.call(b,(b[K]=a.level).templateLevelId,(b[L]=a.unit).templateUnitId))},"hub/enroll/next/level":function(){var a=this;return s.call(a,t.call(a),a[M])},"hub/ef/update/progress":function(a){var b=this;p.call(b)},"hub/show/course/list":function(){this.publish("load",{command:["changecourse"]})},"hub/toggle/course/list":function(){var a=this;a.$courseBody.hasClass(C)?a.publish("load",{command:["changecourse"]}):a.publish("load",{command:w})},"dom:[data-action='close']/click":function(){this.publish("load",{command:w})},"hub:memory/load/command":function(a){var b=this;a&&a.indexOf("changecourse")>=0?(v.call(this,b[N]=!0),c.useraction({"action.changeCourseInitiated":1})):v.call(this,b[N]=!1)},"dom:[data-action='select-level']/click":function(c){var d=this,f=a(c.target),g=f.data("templateId"),h=(f.hasClass("ets-pass"),f.parents(y).data("courseType")),l={templateId:g};if(!f.hasClass(B))return d.query(G,F).spread(function(a,c){var e=i.isGECourse(h),f=(i.isBECourse(h),d[K].levelNo<c.value);return d.isGE&&!e&&f?(r.call(d,{type:I,title:ea[Q],body:ea[R]}),b.reject("change level when below minimum level control, forbidden")):a.mode===k.Study&&a.studyPlan.progress.state===j.Started?r.call(d,{type:H,title:ea[ba],body:ea[ca]}):u.call(d,h,c)}).then(function(){return s.call(d,l,h).then(function(){})}).catch(function(a){e.info(a)})}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-navigation/main.html",[],function(){return function(a){function b(){var b=a.isGE?'<strong data-weave="troopjs-ef/blurb/widget" data-blurb-id="105267" data-text-en="Unit"></strong><strong>'+a.unit.unitNo+"</strong> ":"",c='<span title="'+a.unit.unitName+'">'+a.unit.unitName+"</span>";return'<div class="ets-sp-unn-title"> '+b+c+" </div>"}var c="";return c+='\n\n<div class="ets-sp-unn-main">\n\t',c+=a.enableNavUnit&&a.enableShowCourseName?'\n\t    <div class="ets-sp-unn-prev ets-disabled" data-action="navigate/prev/unit"><i class="glyphicon icon-angle-left"></i></div>\n\t    '+b()+'\n\t    <div class="ets-sp-unn-next ets-disabled" data-action="navigate/next/unit"><i class="glyphicon icon-angle-right"></i></div>\n    ':"\n\t\t"+b()+"\n    ",c+="\n</div>"}}),define("school-ui-studyplan/widget/studyplan/header/unit-navigation/main",["jquery","when","client-tracking","school-ui-shared/utils/ccl","troopjs-ef/component/widget","school-ui-shared/utils/typeid-parser","school-ui-shared/enum/course-type","template!./main.html"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){return"demo"===a.partnercode.value.toLowerCase()&&(g.isGECourse(b)||g.isBECourse(b)||"INDB2B"===b)}function j(a,b){var c=this;c.$prev.toggleClass(o,a===b[0].templateUnitId),c.$next.toggleClass(o,a===b[b.length-1].templateUnitId)}function k(a,b){var c=this,d=c.unit.templateUnitId,e=c.units,f=0,g=e.length,h=0;for(j.call(c,d,e);f<g;f++)if(d===e[f].templateUnitId){if(0===f&&a||f===g-1&&b)return;h=f+(a?-1:b?1:0);break}e[h].templateUnitId&&c.publish("load/config",e[h].templateUnitId)}function l(a,b,c,e,f){var g=this;if(b&&a&&c&&e&&f)return g.query([p,q]).spread(function(b,k){return g.html(h,{isGE:g.isGE,unit:c,enableNavUnit:d.indicateCCLStringValue(b),enableShowCourseName:d.indicateCCLStringValue(k)}).then(function(){var b=g.$element;g.$prev=b.find(m),g.$next=b.find(n),i(f,a.courseTypeCode)||j.call(g,c.templateUnitId,e)})})}var m=".ets-sp-unn-prev",n=".ets-sp-unn-next",o="ets-disabled",p='ccl!"school.courseware.enable.navigateUnit"',q='ccl!"school.courseware.showCourseName.enable"';return e.extend(function(){},{"hub:memory/common_context":function(a){var b=this;a&&l.call(b,b.course,b.level,b.unit,b.units,b.common_context=a.values)},"hub:memory/load/results":function(a){var b=this;b.course===a.course&&b.level===a.level&&b.unit===a.unit||(b.isGE=g.isGECourse(b.courseTypeCode=(a.course||{}).courseTypeCode),b.course=a.course,b.level=a.level,b.unit=a.unit,b.units=a.level&&a.level.children,l.call(b,b.course,b.level,b.unit,b.units,b.common_context))},"hub/ef/update/progress":function(a){var b=this;a&&b.unit&&b.query(b.level.id+".children").spread(function(a){a&&(b.units=a.children),l.call(b,b.course,b.level,b.unit,b.units)})},"dom:[data-action='navigate/prev/unit']/click":function(b){var d=a(b.currentTarget).hasClass(o);d||(k.call(this,!0,!1),c.useraction({"action.unitNavigation":"Previous"}))},"dom:[data-action='navigate/next/unit']/click":function(b){var d=a(b.currentTarget).hasClass(o);d||(k.call(this,!1,!0),c.useraction({"action.unitNavigation":"Next"}))}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-overview/main.html",[],function(){return function(a){var b='<div class="ets-sp-uno-main">\n    <button class="btn btn-default btn-sm ets-sp-uno-btn" data-weave="troopjs-ef/blurb/widget" data-blurb-id="450055" data-text-en="Unit Overview"></button>\n</div>';return b}}),define("school-ui-studyplan/widget/studyplan/header/unit-overview/main",["when","jquery","client-tracking","troopjs-ef/component/widget","template!./main.html"],function(a,b,c,d,e){"use strict";function f(){var a=this;b("."+h).remove();var c=b("<div></div>",{class:h,"data-weave":"school-ui-shared/widget/unit-overview/modal-container/main(templateUnitid)"});return a._dfdUnit.promise.then(function(a){return c.data("templateUnitid",a.templateUnitId).insertAfter(b(g)).weave()})}var g=".ets-sp-study",h="ets-uo-widget";return d.extend({"sig/start":function(){var b=this;b._dfdUnit=a.defer(),b.html(e)},"hub:memory/load/unit":function(b){var c=this;"pending"!==c._dfdUnit.promise.inspect().state&&(c._dfdUnit=a.defer()),c._dfdUnit.resolve(b)},"dom:button/click":function(){c.useraction({"action.unitOverviewClick":"1"});var a=this;f.call(a)}})}),define("troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/main.html",[],function(){return function(a){var b='<div class="ets-theme-daylight ets-studyplan" data-at-page-id="sp-course-page">\n    <div class="ets-sp-main">\n        <!-- Unit Start -->\n        <div class="ets-sp-unit">\n            <!-- Unit Header Start -->\n            <div class="ets-sp-unit-hd">\n                <!-- Change Course Start -->\n                <div class="ets-sp-chc" data-weave="school-ui-studyplan/widget/studyplan/header/change-course/main"></div>\n                <div data-weave="school-ui-studyplan/widget/studyplan/header/course-list/main"></div>\n                <!-- Change Course End -->\n\n                <!-- Unit Navigation Start -->\n                <div class="ets-sp-unn" data-weave="school-ui-studyplan/widget/studyplan/header/unit-navigation/main"></div>\n                <!-- Unit Navigation End -->\n\n                <!-- Unit Overview Start -->\n                <div class="ets-sp-uno"  data-weave="troopjs-ef/ccl/placeholder(\'school-ui-studyplan/widget/studyplan/header/unit-overview/main\')" data-ccl="school.e12.showUnitOverview"></div>\n                <!-- Unit Overview End -->\n            </div>\n            <!-- Unit Header End -->\n\n            <!-- Unit Body Start -->\n            <div class="ets-sp-unit-bd">\n                <!-- Sequence Navigation Start -->\n                <div class="ets-sp-sequence-wrapper" data-weave="school-ui-studyplan/widget/studyplan/body/sequence-navigation/main" data-at-page-id="sp-sequence-navigation-container"></div>\n                <div class="ets-sp-sequence-wrapper" data-weave="school-ui-studyplan/widget/studyplan/body/sequence-container/main"></div>\n            </div>\n            <!-- Unit Body End -->\n        </div>\n        <!-- Unit End -->\n\n    </div>\n</div>\n<div data-weave="school-ui-shared/plugins/confirm-box/main"></div>\n<div data-weave="school-ui-shared/plugins/alert-box/main"></div>';
return b}}),define("school-ui-studyplan/widget/studyplan/main",["troopjs-ef/component/widget","template!./main.html"],function(a,b){"use strict";return a.extend({"sig/start":function(){return this.html(b)}})});
//# sourceMappingURL=app-built.min.js.map
