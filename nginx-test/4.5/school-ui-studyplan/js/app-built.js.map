{
  "version": 3,
  "sources": [
    "enum/client-storage-pair.js",
    "enum/page-name.js",
    "enum/studyplan-item-state.js",
    "enum/studyplan-item-typecode.js",
    "enum/studyplan-mode.js",
    "enum/studyplan-state.js",
    "enum/studyplan-status.js",
    "enum/studyplan-velocity.js",
    "module.js",
    "service/load-preview.js",
    "service/load.js",
    "service/republish.js",
    "troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-config/pace-config.html",
    "utils/widget-creator.js",
    "shared/cp-pace-config/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-select/pace-select.html",
    "shared/cp-pace-select/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/shared/pace-config/pace-config.html",
    "shared/pace-config/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/shared/pace-select/pace-select.html",
    "shared/pace-select/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/shared/tooltip/main.html",
    "shared/tooltip/main.js",
    "utils/animation-helper.js",
    "utils/client-storage.js",
    "utils/server-time.js",
    "utils/state-parser.js",
    "utils/studyplan-update-helper.js",
    "utils/time-parser.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/announcement/index.html",
    "widget/gl-pl/announcement/main.js",
    "widget/gl-pl/credit/service.js",
    "widget/gl-pl/announcement/cp20.js",
    "widget/gl-pl/announcement/gl.js",
    "widget/gl-pl/announcement/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-cp20/index.html",
    "widget/gl-pl/book-cp20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-pl/index.html",
    "widget/gl-pl/book-pl/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupbox/index.html",
    "widget/gl-pl/popupbox/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-cp20/index.html",
    "widget/gl-pl/cancel-cp20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-pl/index.html",
    "widget/gl-pl/cancel-pl/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/checkpoint20/index.html",
    "widget/gl-pl/checkpoint20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/class-status/class-status.html",
    "widget/gl-pl/class-status/cp20.js",
    "widget/gl-pl/class-status/gl.js",
    "widget/gl-pl/class-status/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown-scoreboard/index.html",
    "widget/gl-pl/countdown-scoreboard/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown/index.html",
    "widget/gl-pl/countdown/main.js",
    "widget/gl-pl/countdown/cp20.js",
    "widget/gl-pl/grouplesson/service.js",
    "widget/gl-pl/countdown/gl.js",
    "widget/gl-pl/countdown/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/credit/index.html",
    "widget/gl-pl/credit/main.js",
    "widget/gl-pl/credit/gl.js",
    "widget/gl-pl/credit/pl.js",
    "widget/gl-pl/credit/sppl20.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/dropout-cp20/index.html",
    "widget/gl-pl/dropout-cp20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/enter-class/enter-class.html",
    "widget/gl-pl/enter-class/cp20.js",
    "widget/gl-pl/enter-class/gl.js",
    "widget/gl-pl/enter-class/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback-pending/index.html",
    "widget/gl-pl/feedback-pending/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback/index.html",
    "widget/gl-pl/feedback/main.js",
    "widget/gl-pl/feedback/cp20.js",
    "widget/gl-pl/feedback/gl.js",
    "widget/gl-pl/feedback/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/grouplesson/index.html",
    "widget/gl-pl/grouplesson/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/lesson/index.html",
    "widget/gl-pl/lesson/main.js",
    "widget/gl-pl/lesson/cp20.js",
    "widget/gl-pl/lesson/gl.js",
    "widget/gl-pl/lesson/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/mark/booked.html",
    "widget/gl-pl/mark/cp20.js",
    "widget/gl-pl/mark/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupvideo/index.html",
    "widget/gl-pl/popupvideo/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/privatelesson/index.html",
    "widget/gl-pl/privatelesson/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/statusbar/index.html",
    "widget/gl-pl/statusbar/main.js",
    "widget/gl-pl/statusbar/cp20.js",
    "widget/gl-pl/statusbar/gl.js",
    "widget/gl-pl/statusbar/pl.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/terms-and-conditions/main.html",
    "widget/gl-pl/terms-and-conditions/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-cp20/index.html",
    "widget/gl-pl/welcome-cp20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-gl/index.html",
    "widget/gl-pl/welcome-gl/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-pl/index.html",
    "widget/gl-pl/welcome-pl/main.js",
    "widget/initialization/hash-preview.js",
    "widget/initialization/hash.js",
    "../../resources/troopjs-requirejs/multiversion.js",
    "troopjs-requirejs/multiversion!jquery#troopjs-1.0",
    "troopjs-requirejs/template!school-ui-studyplan/widget/initialization/initialization.html",
    "widget/initialization/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/migration/main.html",
    "widget/migration/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/config/config.html",
    "widget/studyplan/body/sequence-container/config/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/goal.html",
    "widget/studyplan/body/sequence-container/cp-goal/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/moveon.html",
    "widget/studyplan/body/sequence-container/cp-goal/moveon/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/progress.html",
    "widget/studyplan/body/sequence-container/cp-goal/progress/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/restart/restart.html",
    "widget/studyplan/body/sequence-container/cp-goal/restart/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp20/locked.html",
    "widget/studyplan/body/sequence-container/cp20/main.js",
    "widget/studyplan/body/sequence-container/gl/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/goal.html",
    "widget/studyplan/body/sequence-container/goal/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/moveon.html",
    "widget/studyplan/body/sequence-container/goal/moveon/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/progress.html",
    "widget/studyplan/body/sequence-container/goal/progress/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/restart.html",
    "widget/studyplan/body/sequence-container/goal/restart/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/lesson.html",
    "widget/studyplan/body/sequence-container/lesson/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/step-list.html",
    "widget/studyplan/body/sequence-container/lesson/step-list/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/step.html",
    "widget/studyplan/body/sequence-container/lesson/step/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lock/lock.html",
    "widget/studyplan/body/sequence-container/lock/main.js",
    "widget/studyplan/body/sequence-container/main.js",
    "widget/studyplan/body/sequence-container/pl/main.js",
    "widget/studyplan/body/sequence-container/sppl20/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/unavailable/unavailable.html",
    "widget/studyplan/body/sequence-container/unavailable/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/item.html",
    "widget/studyplan/body/sequence-navigation/item/base.js",
    "widget/studyplan/body/sequence-navigation/item/config.js",
    "widget/studyplan/body/sequence-navigation/item/cp-goal.js",
    "widget/studyplan/body/sequence-navigation/item/cp20.js",
    "widget/studyplan/body/sequence-navigation/item/gl.js",
    "widget/studyplan/body/sequence-navigation/item/goal.js",
    "widget/studyplan/body/sequence-navigation/item/lesson.js",
    "widget/studyplan/body/sequence-navigation/item/pl.js",
    "widget/studyplan/body/sequence-navigation/item/sppl20.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/sequence-nav.html",
    "widget/studyplan/body/sequence-navigation/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/check.html",
    "widget/studyplan/body/sequence-navigation/mark/check.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal.html",
    "widget/studyplan/body/sequence-navigation/mark/cp-goal.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal.html",
    "widget/studyplan/body/sequence-navigation/mark/goal.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/locked.html",
    "widget/studyplan/body/sequence-navigation/mark/locked.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/skipped.html",
    "widget/studyplan/body/sequence-navigation/mark/skipped.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/change-course/course.html",
    "widget/studyplan/header/change-course/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/course-list/course-list.html",
    "widget/studyplan/header/course-list/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-navigation/main.html",
    "widget/studyplan/header/unit-navigation/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-overview/main.html",
    "widget/studyplan/header/unit-overview/main.js",
    "troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/main.html",
    "widget/studyplan/main.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9NA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9JA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrRA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxXA;AACA;AACA;AACA;AACA;AACA;AACA,ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7DA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzOA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA,ACDA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvJA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjJA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7OA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtPA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5JA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzIA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA,ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtEA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvXA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChBA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACXA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9IA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA,ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "app-built.js",
  "sourcesContent": [
    "define('school-ui-studyplan/enum/client-storage-pair',{\n\tgl_tips: {\n\t\tkeyName: \"school_studyplan_gl_optional_tips\",\n\t\tkeyValue: [\"closed\"]\n\t},\n\tpl_tips: {\n\t\tkeyName: \"school_studyplan_pl_optional_tips\",\n\t\tkeyValue: [\"closed\"]\n\t},\n\tcp20_tips: {\n\t\tkeyName: \"school_studyplan_cp20_optional_tips\",\n\t\tkeyValue: [\"closed\"]\n\t},\n\ttechcheck_state: {\n\t\tkeyName: \"school_studyplan_techcheck_state\",\n\t\tkeyValue: [\"passed\"]\n\t},\n\tlegacy_techcheck_state: {\n\t\tkeyName: \"_TECHCHECK_PASSED\",\n\t\tkeyValue: [true]\n\t},\n\tshown_popover_ids: {\n\t\tkeyName: \"school_studyplan_item_shown_popover_ids\"\n\t},\n\tshown_level_first: {\n\t\tkeyName: \"campus_studyplan_level_first_enter\"\n\t}\n});\n",
    "define('school-ui-studyplan/enum/page-name',{\n\t\"createSelectPace\": \"School:StudyPlan:Create:SelectPace\",\n\t\"createConfirm\": \"School:StudyPlan:Create:Confirm\",\n\t\"lesson1\": \"School:StudyPlan:Unit:Lesson1\",\n\t\"lesson2\": \"School:StudyPlan:Unit:Lesson2\",\n\t\"lesson3\": \"School:StudyPlan:Unit:Lesson3\",\n\t\"lesson4\": \"School:StudyPlan:Unit:Lesson4\",\n\t\"gl\": \"School:StudyPlan:Unit:GroupClass\",\n\t\"pl\": \"School:StudyPlan:Unit:PrivateClass\",\n\t\"goal\": \"School:StudyPlan:Unit:Goal\"\n});\n",
    "define('school-ui-studyplan/enum/studyplan-item-state',{\n\tCompleted: 1 << 0,\n\tLocked: 1 << 1\n});\n",
    "define('school-ui-studyplan/enum/studyplan-item-typecode',{\n\tlesson: \"lesson\",\n\tgoal: \"goal\",\n\tgl: \"gl\",\n\tpl20: \"sppl20\",\n\tpl40: \"pl\",\n\tcp20: \"cp20\"\n});\n",
    "define('school-ui-studyplan/enum/studyplan-mode',{\n\tCreate: 0,\n\tLocked: 1,\n\tStudy: 2\n});\n",
    "define('school-ui-studyplan/enum/studyplan-state',{\n\tNotStarted : 0,\n\tStarted : 1,\n\tCompleted : 2\n});\n",
    "define('school-ui-studyplan/enum/studyplan-status',{\n\t\"Completed\" : {\n\t\tprogressMsg: 656554,\n\t\tsubMsg: 695052,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-complete'\n\t},\n\t\"Nopace\" : {\n\t\tprogressMsg: 656581,\n\t\tsubMsg: 695048,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-nopace'\n\t},\n\t\"Fast\" : {\n\t\tprogressMsg: 694967,\n\t\tsubMsg: 656562,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-fast'\n\t},\n\t\"Normal\" : {\n\t\tprogressMsg: 694967,\n\t\tsubMsg: 656561,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-normal'\n\t},\n\t\"Slow\" : {\n\t\tprogressMsg: 694967,\n\t\tsubMsg: 656563,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-slow'\n\t},\n\t\"Crashing\" : {\n\t\tprogressMsg: 694967,\n\t\tsubMsg: 656582,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-crashing'\n\t},\n\t\"Crashed\" : {\n\t\tprogressMsg: 695050,\n\t\tsubMsg: 695051,\n\t\ttooltipMsg: '',\n\t\tcustomClass: 'cp-progress-crashed'\n\t}\n});\n",
    "define('school-ui-studyplan/enum/studyplan-velocity',{\n    Slow : 1,\n    Normal : 2,\n    Fast : 3,\n    Crashing : 4,\n    Crashed : 5\n});\n",
    "define('school-ui-studyplan/module',[\"module\"], function(module){\n    return module;\n});\n",
    "define('school-ui-studyplan/service/load-preview',[\n\t\"troopjs-ef/component/service\",\n\t\"troopjs-browser/route/uri\",\n\t\"troopjs-utils/merge\",\n\t\"when/keys\",\n\t\"when\",\n\t\"poly\",\n\t\"school-ui-shared/utils/typeid-parser\"\n], function LoadModule(Service, URI, merge, when_keys, when, poly, Parser) {\n\tvar UNDEFINED;\n\tvar ROUTE = \"_route\";\n\tvar CONTEXT = \"_context\";\n\tvar CACHE = \"_cache\";\n\tvar RE_TYPE = /^[^!]+!/;\n\tvar PREFIX_TEMP_UNIT = \"template_unit;\";\n\tvar PREFIX_TEMP_LESSON = \"template_lesson;\";\n\tvar ARRAY_SLICE = Array.prototype.slice;\n\tvar OBJECT_TOSTRING = Object.prototype.toString;\n\n\tfunction extend() {\n\t\tvar me = this;\n\t\tARRAY_SLICE.call(arguments).forEach(function (arg) {\n\t\t\tObject.keys(arg).forEach(function (key) {\n\t\t\t\tme[key] = arg[key];\n\t\t\t});\n\t\t});\n\n\t\treturn me;\n\t}\n\n\tfunction all() {\n\t\tvar args = ARRAY_SLICE.call(arguments);\n\t\tvar count = args.length;\n\n\t\twhile (args[--count] !== UNDEFINED);\n\n\t\treturn count === -1;\n\t}\n\n\tfunction trim(array) {\n\t\treturn array.slice(0, array.reduce(function (reduced, value, index) {\n\t\t\treturn value !== UNDEFINED\n\t\t\t\t? index + 1\n\t\t\t\t: reduced;\n\t\t}, 0));\n\t}\n\n\tfunction first_value(array) {\n\t\treturn array[0];\n\t}\n\n\tfunction strip_type(entity) {\n\t\treturn entity && entity.id\n\t\t\t? entity.id.replace(RE_TYPE, \"\")\n\t\t\t: entity;\n\t}\n\n\tfunction uri2data(uri) {\n\t\tvar data;\n\n\t\tvar path = uri.path;\n\t\tvar query = uri.query;\n\n\t\tswitch (path ? path[0] : UNDEFINED) {\n\t\t\tcase \"preview\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"studyplan\": path[1],\n\t\t\t\t\t\"studyplan_item\": path[2],\n\t\t\t\t\t\"lesson\": query.lesson_id\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"config\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"unit\": query.unit_id\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"study\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"studyplan\": path[1],\n\t\t\t\t\t\"studyplan_item\": path[2]\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"school\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"enrollment\": path[1],\n\t\t\t\t\t\"course\": path[2],\n\t\t\t\t\t\"level\": path[3],\n\t\t\t\t\t\"unit\": path[4],\n\t\t\t\t\t\"lesson\": path[5],\n\t\t\t\t\t\"step\": path[6],\n\t\t\t\t\t\"activity\": path[7]\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tdefault :\n\t\t\t\tdata = {};\n\t\t}\n\n\t\tmerge.call(data, {\n\t\t\t\"command\" : (query && query.command) ? query.command.split(\"|\") : UNDEFINED\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tfunction data2uri(data) {\n\t\tvar uri = URI();\n\n\t\t//fixed new uri object don't need uri.path prop\n\t\tdelete uri.path;\n\n\t\tswitch (data[\"prefix\"]) {\n\t\t\tcase \"preview\" :\n\t\t\t\turi.path = URI.Path(trim([\n\t\t\t\t\tdata[\"prefix\"],\n\t\t\t\t\tstrip_type(data[\"studyplan\"]),\n\t\t\t\t\tstrip_type(data[\"studyplan_item\"])\n\t\t\t\t]));\n\t\t\t\turi.query = URI.Query({\n\t\t\t\t\t\"lesson_id\" : PREFIX_TEMP_LESSON + strip_type(data[\"lesson\"].templateLessonId)\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"config\" :\n\t\t\t\turi.path = URI.Path(trim([ data[\"prefix\"] ]));\n\t\t\t\turi.query = URI.Query({\n\t\t\t\t\t\"unit_id\" : PREFIX_TEMP_UNIT + strip_type(data[\"unit\"].templateUnitId)\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"study\" :\n\t\t\t\turi.path = URI.Path(trim([\n\t\t\t\t\tdata[\"prefix\"],\n\t\t\t\t\tstrip_type(data[\"studyplan\"]),\n\t\t\t\t\tstrip_type(data[\"studyplan_item\"])\n\t\t\t\t]));\n\t\t\t\tbreak;\n\n\t\t\tcase \"school\" :\n\t\t\t\turi.path = URI.Path(trim([\n\t\t\t\t\tdata[\"prefix\"],\n\t\t\t\t\tstrip_type(data[\"enrollment\"]),\n\t\t\t\t\tstrip_type(data[\"course\"]),\n\t\t\t\t\tstrip_type(data[\"level\"]),\n\t\t\t\t\tstrip_type(data[\"unit\"]),\n\t\t\t\t\tstrip_type(data[\"lesson\"]),\n\t\t\t\t\tstrip_type(data[\"step\"]),\n\t\t\t\t\tstrip_type(data[\"activity\"])\n\t\t\t\t]));\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(data.command) {\n\t\t\tmerge.call(uri.query ? uri.query : uri.query = {}, URI.Query({\n\t\t\t\t\"command\" : data[\"command\"].join(\"|\")\n\t\t\t}));\n\t\t}\n\n\t\treturn uri;\n\t}\n\tfunction load(requests, cache, results) {\n\t\tvar me = this;\n\t\tvar allRequests;\n\t\t//the requests need to load in next tick\n\t\tvar deepRequests = [];\n\n\t\t//if there is a match cache data, use it.\n\t\t//return a array just because we use spread to get value after the promise resolved.\n\t\tfunction checkCache(key, value){\n\t\t\treturn cache[key] && strip_type(cache[key]) == value && [cache[key]];\n\t\t}\n\n\t\tif(!requests) {\n\t\t\treturn;\n\t\t}\n\n\t\tcache = cache || {};\n\t\tresults = results || {};\n\n\t\tObject.keys(requests).forEach(function (key) {\n\n\t\t\tvar value = requests[key];\n\n\t\t\tswitch (OBJECT_TOSTRING.call(value)) {\n\t\t\t\tcase \"[object Object]\":\n\t\t\t\t\tif(!value) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value.load === false) {\n\t\t\t\t\t\trequests[key] = value.value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = value.value;\n\n\t\t\t\tcase \"[object String]\":\n\t\t\t\tcase \"[object Number]\":\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase \"prefix\":\n\t\t\t\t\t\t\trequests[key] = value;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"studyplan\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"campus_student_\" + key + \"!\" + value + \".items\")\n\t\t\t\t\t\t\t\t).spread(function (studyplan) {\n\t\t\t\t\t\t\t\t\tif(studyplan){\n\t\t\t\t\t\t\t\t\t\tdeepRequests.push({\n\t\t\t\t\t\t\t\t\t\t\t\"unit\" : PREFIX_TEMP_UNIT + studyplan.properties.templateUnitId,\n\t\t\t\t\t\t\t\t\t\t\t\"unit_studyplan\": studyplan.properties.templateUnitId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn studyplan;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"studyplan_item\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"campus_student_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"unit_studyplan\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"campus_student_\" + key + \"!\" + value + \".studyPlan.items,.studyPlan.progress\")\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"unit\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".parent.parent\")\n\t\t\t\t\t\t\t\t).spread(function (unit) {\n\t\t\t\t\t\t\t\t\tif(unit){\n\t\t\t\t\t\t\t\t\t\tdeepRequests.push({\n\t\t\t\t\t\t\t\t\t\t\t\"enrollment\": Parser.parseId(unit.parent.parent.studentCourseId),\n\t\t\t\t\t\t\t\t\t\t\t\"course\": Parser.parseId(unit.parent.parent.id),\n\t\t\t\t\t\t\t\t\t\t\t\"level\": Parser.parseId(unit.parent.id),\n\t\t\t\t\t\t\t\t\t\t\t\"unit_studyplan\": unit.templateUnitId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn unit;\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"level\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".levelName,.children\")\n\t\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"lesson\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".lessonImage\")\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"activity\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".activityContent\")\n\t\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"enrollment\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_course_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\trequests[key] = value;\n\t\t\t}\n\t\t});\n\n\t\tme.publish(\"school/spinner\", allRequests = when_keys.all(requests));\n\n\t\treturn allRequests\n\t\t\t.then(function (values) {\n\t\t\t\tObject.keys(values).forEach(function (key) {\n\t\t\t\t\tresults[key] = values[key];\n\t\t\t\t});\n\t\t\t\tif(deepRequests.length){\n\t\t\t\t\treturn load.call(me, extend.apply({}, deepRequests), cache, results);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.yield(results);\n\t}\n\n\treturn Service.extend({\n\t\t\"displayName\" : \"school-ui-studyplan/service/load\",\n\n\t\t\"hub:memory/route\" : function onRoute(uri) {\n\t\t\tvar me = this;\n\n\t\t\tif (!(me[ROUTE] && uri && me[ROUTE].toString() === uri.toString())) {\n\t\t\t\tme.publish(\"load\", uri2data(uri));\n\t\t\t}\n\t\t},\n\n\t\t\"hub/load\" : function onLoad(requests) {\n\t\t\tvar me = this;\n\t\t\tvar loadCache;\n\t\t\tvar allRequests;\n\n\t\t\tif(!requests) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[CACHE] = me[CACHE] || {};\n\t\t\tme[ROUTE] = me[ROUTE] || data2uri({});\n\n\t\t\t// the cache which used in load function,\n\t\t\t// some key may be delete, so we clone here\n\t\t\tloadCache = extend.call({}, me[CACHE]);\n\n\t\t\tif(requests.prefix){\n\t\t\t\tallRequests = requests;\n\t\t\t\tloadCache = {};\n\t\t\t}\n\t\t\telse{\n\t\t\t\tallRequests = extend.call(uri2data(me[ROUTE]), requests);\n\t\t\t\tObject.keys(allRequests).forEach(function(key){\n\t\t\t\t\tif(key in requests){\n\t\t\t\t\t\tdelete loadCache[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// do not merge when requesting a prefix, keep the allRequests data in a stable\n\t\t\treturn me.publish(\"load/requests\", allRequests)\n\t\t\t\t.spread(function (allRequests) {\n\t\t\t\t\treturn me.publish(\"load/launcher\", extend.call({}, allRequests))\n\t\t\t\t\t\t.then(function (){\n\t\t\t\t\t\t\t//just send the query requests not in cache\n\t\t\t\t\t\t\treturn load.call(me, allRequests, loadCache)\n\t\t\t\t\t\t\t\t.then(function (results) {\n\t\t\t\t\t\t\t\t\tvar updates = {};\n\t\t\t\t\t\t\t\t\tvar cache = me[CACHE];\n\t\t\t\t\t\t\t\t\tvar updated = Object.keys(results).reduce(function (update, key) {\n\t\t\t\t\t\t\t\t\t\tif ((key in results && !(key in cache))||\n\t\t\t\t\t\t\t\t\t\t\tcache[key] !== results[key]) {\n\t\t\t\t\t\t\t\t\t\t\tupdates[key] = results[key];\n\t\t\t\t\t\t\t\t\t\t\tupdate = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcache[key] = results[key];\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}, false);\n\n\t\t\t\t\t\t\t\t\tme[ROUTE] = data2uri(cache);\n\n\t\t\t\t\t\t\t\t\treturn updated\n\t\t\t\t\t\t\t\t\t\t? me.publish(\"load/results\", results)\n\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\treturn me.publish(\"load/updates\", updates)\n\t\t\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn me.publish(\"route/set\", me[ROUTE])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(updates).map(function (key) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.publish(\"load/\" + key, updates[key]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.yield(updates)\n\t\t\t\t\t\t\t\t\t\t: me.publish(\"load/results\", results)\n\t\t\t\t\t\t\t\t\t\t.yield(updates)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/service/load',[\n\t\"troopjs-ef/component/service\",\n\t\"troopjs-browser/route/uri\",\n\t\"troopjs-utils/merge\",\n\t\"when/keys\",\n\t\"when\",\n\t\"poly\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-shared/utils/typeid-parser\"\n], function LoadModule(Service, URI, merge, when_keys, when, poly, studyplanMode, Parser) {\n\tvar UNDEFINED;\n\tvar ROUTE = \"_route\";\n\tvar CONTEXT = \"_context\";\n\tvar CACHE = \"_cache\";\n\tvar RE_TYPE = /^[^!]+!/;\n\tvar PREFIX_TEMP_UNIT = \"template_unit;\";\n\tvar PREFIX_TEMP_LESSON = \"template_lesson;\";\n\tvar ARRAY_SLICE = Array.prototype.slice;\n\tvar OBJECT_TOSTRING = Object.prototype.toString;\n\n\tfunction extend() {\n\t\tvar me = this;\n\t\tARRAY_SLICE.call(arguments).forEach(function (arg) {\n\t\t\tObject.keys(arg).forEach(function (key) {\n\t\t\t\tme[key] = arg[key];\n\t\t\t});\n\t\t});\n\n\t\treturn me;\n\t}\n\n\tfunction all() {\n\t\tvar args = ARRAY_SLICE.call(arguments);\n\t\tvar count = args.length;\n\n\t\twhile (args[--count] !== UNDEFINED);\n\n\t\treturn count === -1;\n\t}\n\n\tfunction trim(array) {\n\t\treturn array.slice(0, array.reduce(function (reduced, value, index) {\n\t\t\treturn value !== UNDEFINED\n\t\t\t\t? index + 1\n\t\t\t\t: reduced;\n\t\t}, 0));\n\t}\n\n\tfunction first_value(array) {\n\t\treturn array[0];\n\t}\n\n\tfunction strip_type(entity) {\n\t\treturn entity && entity.id\n\t\t\t? entity.id.replace(RE_TYPE, \"\")\n\t\t\t: entity;\n\t}\n\n\tfunction uri2data(uri) {\n\t\tvar data;\n\n\t\tvar path = uri.path;\n\t\tvar query = uri.query;\n\n\t\tswitch (path ? path[0] : UNDEFINED) {\n\t\t\tcase \"config\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"unit\": query.unit_id\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"study\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"studyplan\": path[1],\n\t\t\t\t\t\"studyplan_item\": path[2]\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase \"school\" :\n\t\t\t\tdata = {\n\t\t\t\t\t\"prefix\": path[0],\n\t\t\t\t\t\"enrollment\": path[1],\n\t\t\t\t\t\"course\": path[2],\n\t\t\t\t\t\"level\": path[3],\n\t\t\t\t\t\"unit\": path[4],\n\t\t\t\t\t\"lesson\": path[5],\n\t\t\t\t\t\"step\": path[6],\n\t\t\t\t\t\"activity\": path[7]\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tdefault :\n\t\t\t\tdata = {};\n\t\t}\n\n\t\tmerge.call(data, {\n\t\t\t\"command\" : (query && query.command) ? query.command.split(\"|\") : UNDEFINED\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tfunction data2uri(data) {\n\t\tvar uri = URI();\n\n\t\t//fixed new uri object don't need uri.path prop\n\t\tdelete uri.path;\n\n\t\tswitch (data[\"prefix\"]) {\n\t\t\tcase \"config\" :\n\t\t\t\turi.path = URI.Path(trim([ data[\"prefix\"] ]));\n\t\t\t\turi.query = URI.Query({\n\t\t\t\t\t\"unit_id\" : PREFIX_TEMP_UNIT + strip_type(data[\"unit\"].templateUnitId)\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"study\" :\n\t\t\t\turi.path = URI.Path(trim([\n\t\t\t\t\tdata[\"prefix\"],\n\t\t\t\t\tstrip_type(data[\"studyplan\"]),\n\t\t\t\t\tstrip_type(data[\"studyplan_item\"])\n\t\t\t\t]));\n\t\t\t\tbreak;\n\n\t\t\tcase \"school\" :\n\t\t\t\turi.path = URI.Path(trim([\n\t\t\t\t\tdata[\"prefix\"],\n\t\t\t\t\tstrip_type(data[\"enrollment\"]),\n\t\t\t\t\tstrip_type(data[\"course\"]),\n\t\t\t\t\tstrip_type(data[\"level\"]),\n\t\t\t\t\tstrip_type(data[\"unit\"]),\n\t\t\t\t\tstrip_type(data[\"lesson\"]),\n\t\t\t\t\tstrip_type(data[\"step\"]),\n\t\t\t\t\tstrip_type(data[\"activity\"])\n\t\t\t\t]));\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif(data.command) {\n\t\t\tmerge.call(uri.query ? uri.query : uri.query = {}, URI.Query({\n\t\t\t\t\"command\" : data[\"command\"].join(\"|\")\n\t\t\t}));\n\t\t}\n\n\t\treturn uri;\n\t}\n\tfunction load(requests, cache, results) {\n\t\tvar me = this;\n\t\tvar allRequests;\n\t\t//the requests need to load in next tick\n\t\tvar deepRequests = [];\n\n\t\t//if there is a match cache data, use it.\n\t\t//return a array just because we use spread to get value after the promise resolved.\n\t\tfunction checkCache(key, value){\n\t\t\treturn cache[key] && strip_type(cache[key]) == value && [cache[key]];\n\t\t}\n\n\t\tif(!requests) {\n\t\t\treturn;\n\t\t}\n\n\t\tcache = cache || {};\n\t\tresults = results || {};\n\n\t\tObject.keys(requests).forEach(function (key) {\n\n\t\t\tvar value = requests[key];\n\n\t\t\tswitch (OBJECT_TOSTRING.call(value)) {\n\t\t\t\tcase \"[object Object]\":\n\t\t\t\t\tif(!value) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value.load === false) {\n\t\t\t\t\t\trequests[key] = value.value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = value.value;\n\n\t\t\t\tcase \"[object String]\":\n\t\t\t\tcase \"[object Number]\":\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase \"prefix\":\n\t\t\t\t\t\t\trequests[key] = value;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"studyplan\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"campus_student_\" + key + \"!\" + value + \".items\")\n\t\t\t\t\t\t\t\t).spread(function (studyplan) {\n\t\t\t\t\t\t\t\t\tif(studyplan){\n\t\t\t\t\t\t\t\t\t\tdeepRequests.push({\n\t\t\t\t\t\t\t\t\t\t\t\"unit\" : PREFIX_TEMP_UNIT + studyplan.properties.templateUnitId,\n\t\t\t\t\t\t\t\t\t\t\t\"unit_studyplan\": studyplan.properties.templateUnitId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn studyplan;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"studyplan_item\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"campus_student_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t\t).spread(function (studyplan_item) {\n\n\t\t\t\t\t\t\t\t\tif(studyplan_item){\n\t\t\t\t\t\t\t\t\t\tswitch (studyplan_item.typeCode) {\n\t\t\t\t\t\t\t\t\t\t\tcase UNDEFINED:\n\t\t\t\t\t\t\t\t\t\t\t\t//if there is not typeCode in studyplan_item, return undefiend\n\t\t\t\t\t\t\t\t\t\t\t\treturn UNDEFINED;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tcase \"lesson\":\n\t\t\t\t\t\t\t\t\t\t\t\treturn me.query(\"pc_student_lesson_map!\" + studyplan_item.properties.templateLessonId).spread(function(lessonMap){\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeepRequests.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"lesson\": Parser.parseId(lessonMap.lesson.id)\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn studyplan_item;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\t\treturn studyplan_item;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"unit_studyplan\":\n\t\t\t\t\t\t\tvar queryString = \"campus_student_\" + key + \"!\" + value + \".studyPlan\";\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(queryString + \".items\")\n\t\t\t\t\t\t\t).spread(function(unitStudyplan){\n\t\t\t\t\t\t\t\tif(unitStudyplan.mode === studyplanMode.Study){\n\t\t\t\t\t\t\t\t\treturn me.query(queryString + \".progress\").then(first_value);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn unitStudyplan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"unit\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".parent.parent\")\n\t\t\t\t\t\t\t\t).spread(function (unit) {\n\t\t\t\t\t\t\t\t\tif(unit){\n\t\t\t\t\t\t\t\t\t\tdeepRequests.push({\n\t\t\t\t\t\t\t\t\t\t\t\"enrollment\": Parser.parseId(unit.parent.parent.studentCourseId),\n\t\t\t\t\t\t\t\t\t\t\t\"course\": Parser.parseId(unit.parent.parent.id),\n\t\t\t\t\t\t\t\t\t\t\t\"level\": Parser.parseId(unit.parent.id),\n\t\t\t\t\t\t\t\t\t\t\t\"unit_studyplan\": unit.templateUnitId\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn unit;\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"level\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".levelName,.children\")\n\t\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"lesson\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".lessonImage\")\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"activity\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value + \".activityContent\")\n\t\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"enrollment\":\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_course_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\trequests[key] = when(\n\t\t\t\t\t\t\t\tcheckCache(key, value) ||\n\t\t\t\t\t\t\t\tme.query(\"student_\" + key + \"!\" + value)\n\t\t\t\t\t\t\t).then(first_value);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault :\n\t\t\t\t\trequests[key] = value;\n\t\t\t}\n\t\t});\n\n\t\tme.publish(\"school/spinner\", allRequests = when_keys.all(requests));\n\n\t\treturn allRequests\n\t\t\t.then(function (values) {\n\t\t\t\tObject.keys(values).forEach(function (key) {\n\t\t\t\t\tresults[key] = values[key];\n\t\t\t\t\tcache[key] = results[key];\n\t\t\t\t});\n\t\t\t\tif(deepRequests.length){\n\t\t\t\t\treturn load.call(me, extend.apply({}, deepRequests), cache, results);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.yield(results);\n\t}\n\n\treturn Service.extend({\n\t\t\"displayName\" : \"school-ui-studyplan/service/load\",\n\n\t\t\"hub:memory/route\" : function onRoute(uri) {\n\t\t\tvar me = this;\n\n\t\t\tif (!(me[ROUTE] && uri && me[ROUTE].toString() === uri.toString())) {\n\t\t\t\tme.publish(\"load\", uri2data(uri));\n\t\t\t}\n\t\t},\n\n\t\t\"hub/load\" : function onLoad(requests) {\n\t\t\tvar me = this;\n\t\t\tvar loadCache;\n\t\t\tvar allRequests;\n\n\t\t\tif(!requests) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[CACHE] = me[CACHE] || {};\n\t\t\tme[ROUTE] = me[ROUTE] || data2uri({});\n\n\t\t\t// the cache which used in load function,\n\t\t\t// some key may be delete, so we clone here\n\t\t\tloadCache = extend.call({}, me[CACHE]);\n\n\t\t\tif(requests.prefix){\n\t\t\t\tallRequests = requests;\n\t\t\t\tloadCache = {};\n\t\t\t}\n\t\t\telse{\n\t\t\t\tallRequests = extend.call(uri2data(me[ROUTE]), requests);\n\t\t\t\tObject.keys(allRequests).forEach(function(key){\n\t\t\t\t\tif(key in requests){\n\t\t\t\t\t\tdelete loadCache[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// do not merge when requesting a prefix, keep the allRequests data in a stable\n\t\t\treturn me.publish(\"load/requests\", allRequests)\n\t\t\t\t.spread(function (allRequests) {\n\t\t\t\t\treturn me.publish(\"load/launcher\", extend.call({}, allRequests))\n\t\t\t\t\t\t.then(function (){\n\t\t\t\t\t\t\t//just send the query requests not in cache\n\t\t\t\t\t\t\treturn load.call(me, allRequests, loadCache)\n\t\t\t\t\t\t\t\t.then(function (results) {\n\t\t\t\t\t\t\t\t\tvar updates = {};\n\t\t\t\t\t\t\t\t\tvar cache = me[CACHE];\n\t\t\t\t\t\t\t\t\tvar updated = Object.keys(results).reduce(function (update, key) {\n\t\t\t\t\t\t\t\t\t\tif ((key in results && !(key in cache))||\n\t\t\t\t\t\t\t\t\t\t\tcache[key] !== results[key]) {\n\t\t\t\t\t\t\t\t\t\t\tupdates[key] = results[key];\n\t\t\t\t\t\t\t\t\t\t\tupdate = true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcache[key] = results[key];\n\t\t\t\t\t\t\t\t\t\treturn update;\n\t\t\t\t\t\t\t\t\t}, false);\n\n\t\t\t\t\t\t\t\t\tme[ROUTE] = data2uri(cache);\n\n\t\t\t\t\t\t\t\t\treturn updated\n\t\t\t\t\t\t\t\t\t\t? me.publish(\"load/results\", results)\n\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\treturn me.publish(\"load/updates\", updates)\n\t\t\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn me.publish(\"route/set\", me[ROUTE])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tObject.keys(updates).map(function (key) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.publish(\"load/\" + key, updates[key]);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t.yield(updates)\n\t\t\t\t\t\t\t\t\t\t: me.publish(\"load/results\", results)\n\t\t\t\t\t\t\t\t\t\t.yield(updates)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/service/republish',[\n\t\"jquery\",\n\t\"troopjs-ef/component/service\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"poly\"\n], function studyplanRepublish($, Service, Parser, poly) {\n\t\"use strict\";\n\n\treturn Service.extend({\n\t\t// hack for summary page of activity container\n\t\t\"hub/load/requests\": function (requests) {\n\t\t\tvar _requests = {};\n\n\t\t\tif(!requests) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tObject.keys(requests).forEach(function (key) {\n\t\t\t\tvar value = requests[key];\n\t\t\t\t_requests[key] = (key === \"activity\" && value === \"summary\")\n\t\t\t\t\t? {\n\t\t\t\t\t\"value\": value,\n\t\t\t\t\t\"load\": false\n\t\t\t\t}\n\t\t\t\t\t: value;\n\t\t\t});\n\n\t\t\treturn [ _requests ];\n\t\t},\n\n\t\t// re-publish to start/load\n\t\t\"hub/load/results\": function(results){\n\t\t\tif(results.activity && results.activity.templateActivityId) {\n\t\t\t\tthis.publish(\"start/load/activity\", {id: results.activity.templateActivityId});\n\t\t\t}\n\t\t},\n\n\t\t// re-publish to load step summary\n\t\t\"hub:memory/load/activity\": function(activity){\n\t\t\tif(activity == \"summary\") {\n\t\t\t\tthis.publish(\"load/step/summary\");\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-config/pace-config.html',[],function() { return function template(data) { var o = \"\";\n\tvar blurbIds = data.blurbIds;\no += \"\\n\\n\"; if(data.status.key === 'Completed'){o += \"\\n\\t<div class=\\\"cp-pace-complete\\\">\\n\\t\\t\"; if(data.status.code === 'level_complete'){o += \"\\n\\t\\t\\t<div class=\\\"complete-left\\\">\\n\\t\\t\\t\\t<div class=\\\"cp-certificate\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"cp-certificate-content\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"cp-certificate-text\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695071\\\">You've already passed this level test</span>\\n\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-checkmark\\\"></i>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\\\"cp-certificate-action\\\">\\n\\t\\t\\t\\t\\t\\t<a data-url=\\\"\" +data.certUrl+ \"\\\" class=\\\"cp-certificate-action-text\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695072\\\">view certificate</a>\\n\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-cp-arrow-right\\\"></i>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"cp-retake\\\">\\n\\t\\t\\t\\t\\t<a href=\\\"\" +data.levelTestPath+ \"?testid=\" +data.levelTestId+ \"\\\" class=\\\"btn cp-complete-next\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695073\\\">\\n\\t\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\\t<span class=\\\"ets-icon-cp-arrow-right\\\"></span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\"; } o += \"\\n\\t\\t<div class=\\\"complete-right\\\">\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<img src=\\\"/_imgs/school/changecourse/pepper/ge/13.jpg\\\"/>\\n\\t\\t\\t</div>\\n\\t\\t\\t\"; if(data.status.code === 'unit_complete'){o += \"\\n\\t\\t\\t\\t<a class=\\\"btn cp-complete-next cp-next-unit\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +blurbIds.cpNextUnit+ \"\\\">\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\"; } else if(data.status.code === 'course_change'){ o += \"\\n\\t\\t\\t\\t<a class=\\\"btn cp-complete-next cp-course-change\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +blurbIds.cpCourseChange+ \"\\\">\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\"; } else if(data.status.code === 'level_complete'){ o += \"\\n\\t\\t\\t\\t\"; if(data.isLastLevel){o += \"\\n\\t\\t\\t\\t<a class=\\\"btn cp-complete-next cp-course-change\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +blurbIds.cpCourseChange+ \"\\\">\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\";}else{o += \"\\n\\t\\t\\t\\t<a class=\\\"btn cp-complete-next cp-next-level\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695074\\\">\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t\";}o += \"\\n\\t\\t\\t\";} else {o += \"\\n\\t\\t\\t\\t<a href=\\\"\" +data.levelTestPath+ \"?testid=\" +data.levelTestId+ \"\\\" class=\\\"btn cp-complete-next\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695076\\\">\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\"; } o += \"\\n\\t\\t</div>\\n\\t</div>\\n\"; }  return o; }; });\n",
    "define('school-ui-studyplan/utils/widget-creator',[\n\t'jquery',\n\t'lodash'\n], function(\n\t$,\n\t_\n){\n\t'use strict';\n\n\tfunction bindData($element, value, key){\n\t\tvar paramName;\n\t\tif(_.isEmpty(value)) {\n\t\t\treturn key;\n\t\t} else {\n\t\t\tparamName = 'data' + _.size($element.data());\n\t\t\t$element.data(paramName, value);\n\t\t\treturn key + '(' + paramName + ')';\n\t\t}\n\t}\n\n\treturn function(options){\n\t\tvar $element = $('<div>');\n\t\tvar widgets = _.mapKeys(options, _.partial(bindData, $element));\n\t\treturn $element.attr('data-weave', _.keys(widgets).join(' '));\n\t};\n});\n",
    "define('school-ui-studyplan/shared/cp-pace-config/main',[\n\t\"school-ui-studyplan/module\",\n\t\"jquery\",\n\t\"when\",\n\t\"moment\",\n\t\"poly\",\n\t\"lodash\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/enum/moment-language\",\n\t\"template!./pace-config.html\",\n\t\"school-ui-studyplan/utils/widget-creator\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-shared/enum/course-type\"\n], function(module, $, when, Moment, Poly, _, Widget, momentLang, tPaceConfig, widgetCreator, typeidParser, CourseType){\n\t\"use strict\";\n\n\t/**\n\t * Private variables declaration\n\t */\n\tvar UNDEF;\n\n\tvar MODULE_CONFIG = _.merge({\n\t\tchangeCourseUrl: \"/school/changecourse\",\n\t\tcertUrl: \"/school/course/CertificateBoard.aspx?key=\",\n\t\tlevelTestPath: \"/school/content/leveltest.aspx\",\n\t\tblurbIds: {\n\t\t\tcpNextUnit: \"695095\",\n\t\t\tcpCourseChange: \"656560\",\n\t\t}\n\t}, module.config() || {});\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar CULTURE_CODE = \"_culture_code\",\n\t\tSTATUS = \"_status\";\n\n\tvar MSS_LEVEL_TEST_VERSION = \"member_site_setting!'school;student.leveltest.version'\";\n\n\tfunction convertToLegacyItem(certItem) {\n\t\treturn {\n\t\t\t\"date\": Moment(certItem.certificateDate).lang(\"en\").format(\"MMM DD, YYYY\"),\n\t\t\t\"course\": certItem.courseName || \"\",\n\t\t\t\"level\": certItem.levelName,\n\t\t\t\"Key\": certItem.key,\n\t\t\t\"levelCertificate\": certItem.certificateName,\n\t\t\t\"coursetype\": 2,\n\t\t\t\"name\": certItem.studentName\n\t\t};\n\t}\n\n\tfunction initCertificateData(certItems, archiveCertItems) {\n\t\tvar me = this;\n\t\tvar certDataGE = [];\n\t\tvar certDataSPIN = [];\n\n\t\t[certItems, archiveCertItems].forEach(function (items) {\n\t\t\titems.forEach(function (item) {\n\t\t\t\tvar legacyItem = convertToLegacyItem(item);\n\t\t\t\tif (CourseType.isGECourse(item.courseTypeCode)) {\n\t\t\t\t\tcertDataGE.push(legacyItem)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcertDataSPIN.push(legacyItem);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\twindow.generalCertificates = certDataGE;\n\t\twindow.spinCertificates = certDataSPIN;\n\t}\n\n\tfunction render(){\n\t\tvar me = this;\n\n\t\treturn when.all([\n\t\t\tme.dfdResults.promise,\n\t\t\tme.levelTestVersionPromise,\n\t\t\tme.certPromise,\n\t\t]).spread(function (results, levelTestVersion, certficate) {\n\t\t\tvar studentCert = certficate[0];\n\t\t\tvar studentArchiveCert = certficate[1];\n\t\t\tvar certItems = $.extend(true, [], studentCert.items);\n\t\t\tvar archiveCertItems = $.extend(true, [], studentArchiveCert.items);\n\t\t\tvar levelTestId = levelTestVersion === 1 ? results.level.legacyLevelId : results.level.templateLevelId;\n\t\t\tinitCertificateData.call(me, certItems, archiveCertItems);\n\n\t\t\treturn me.html(tPaceConfig, {\n\t\t\t\tisLastLevel: isLastLevel(results),\n\t\t\t\tstatus: me[STATUS],\n\t\t\t\tlevelTestPath: MODULE_CONFIG.levelTestPath,\n\t\t\t\tlevelTestId: levelTestId,\n\t\t\t\tcertUrl: MODULE_CONFIG.certUrl + results.course.courseTypeCode + '_' + results.level.levelCode,\n\t\t\t\tblurbIds: MODULE_CONFIG.blurbIds\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction isLastLevel(data){\n\t\tvar isGE = CourseType.isGECourse((data.course || {}).courseTypeCode);\n\t\tvar level = data.level;\n\t\tvar levels = data.course.children;\n\t\tvar levelLen = data.course.children.length;\n\t\tvar isLastLevel = false;\n\t\tif(isGE) {\n\t\t\tif(level.templateLevelId === levels[levelLen-1].templateLevelId) {\n\t\t\t\tisLastLevel = true;\n\t\t\t}\n\t\t} else {\n\t\t\t// For SPIN course, alway let student select course\n\t\t\tisLastLevel = true;\n\t\t}\n\n\t\treturn\tisLastLevel;\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\n\t\tme[STATUS] = me[$ELEMENT].data(\"status\");\n\t\tme.dfdResults = when.defer();\n\n\t\tme.levelTestVersionPromise = me.query(MSS_LEVEL_TEST_VERSION).spread(function (mssLevelTestVersion) {\n\t\t\treturn parseInt(mssLevelTestVersion && mssLevelTestVersion.value || 1);\n\t\t});\n\n\t\tme.certPromise = me.query([\n\t\t\t\"student_certificate!*\",\n\t\t\t\"student_archive_certificate!*\"\n\t\t]);\n\t},{\n\n\t\t\"hub:memory/common_context\" : function(common_context){\n\t\t\tvar me = this;\n\t\t\tcommon_context && render.call(me, me[CULTURE_CODE] = common_context.values.culturecode.value);\n\t\t},\n\n\t\t\"hub:memory/load/results\": function(data) {\n\t\t\tthis.dfdResults.resolve(data);\n\t\t},\n\n\t\t\"dom: .cp-next-unit/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme.publish('ef/next/unit');\n\t\t},\n\n\t\t\"dom: .cp-next-level/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme.publish(\"enroll/next/level\")\n\t\t},\n\n\t\t\"dom: .cp-course-change/click\": function(){\n\t\t\twindow.location.href = MODULE_CONFIG.changeCourseUrl;\n\t\t},\n\n\t\t\"dom: .cp-certificate-action/click\": function(){\n\t\t\tvar me = this;\n\t\t\tvar resultURL = me.$element.find('.cp-certificate-action-text').data('url');\n\t\t\twindow.open(resultURL);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/shared/cp-pace-select/pace-select.html',[],function() { return function template(data) { var o = \"\"; for (var i = 0; i < data.paces.length; i++) { o += \"\\n\\t\";\n\t\tvar selectedClass = data.paces[i].selected ? 'pace-item-selected' : '';\n\t\tvar ownPace = data.paces[i].paceDays === 0 ? 'cp-goal-own-pace' : '';\n\t\tvar paceValue = data.paces[i].paceDays === 0 ?\n\t\t'no-pace' : 'pace-value';\n\to += \"\\n\\t<div class=\\\"pace-item-edit \" +selectedClass+ \" \" +ownPace+ \"\\\" data-pacedays = \\\"\" +data.paces[i].paceDays+ \"\\\">\\n\\t\\t<div class=\\\"ets-sp-cfg-item cp-pace-item cp-pace-left\\\">\\n\\t\\t\\t<div class=\\\"cp-pace-left-body\\\">\\n\\t\\t\\t\\t<span class=\\\"pace-item-icon\\\"></span> \\n\\t\\t\\t\\t<span class=\\\"\" +paceValue+ \"\\\">\" +data.paces[i].text+ \"</span>\\n\\t\\t\\t\\t<span class=\\\"pace-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"694970\\\"\\n\\t\\t\\t\\t>Hours Weekly</span>\\n\\t\\t\\t</div>\\n\\t\\t</div><!--\\n\\t\\t--><div class=\\\"ets-sp-cfg-item cp-pace-item cp-pace-right\\\">\\n\\t\\t\\t<p class=\\\"goal-date\\\">\" +data.paces[i].targetDate+ \"</p>\\n\\t\\t\\t<p class=\\\"goal-timezone\\\"></p>\\n\\t\\t</div>\\n\\t</div>\\n\"; }  return o; }; });\n",
    "define('school-ui-studyplan/shared/cp-pace-select/main',[\n\t\"jquery\",\n\t\"lodash\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./pace-select.html\"\n], function($, _, Widget, tPaceSelect){\n\t\"use strict\";\n\n\t/**\n\t * Private variables declaration\n\t */\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar PACES = \"_paces\";\n\n\tvar EVT_MOUSEDOWN = \"mousedown.pace\";\n\n\tvar SEL_CONFIG_CONTAINER = \".ets-studyplan\",\n\t\tSEL_PACE = \".ets-sp-cfg-pace\",\n\t\tSEL_PACELIST = \".ets-sp-cfg-paceList\",\n\t\tSEL_PACEBUTTON = \".ets-sp-cfg-pace-button\",\n\t\tSEL_PACELIST_WRAPPER = \".ets-sp-cfg-paceList-wrapper\";\n\n\tvar CLS_PACESELECT_VIEW = \"ets-cfg-paceSelect-view\";\n\n\tvar HUB_PACESELECT = \"config/pace-select\";\n\n\tfunction open(){\n\t\tvar me = this;\n\t\tvar height = me[$ELEMENT].find(SEL_PACELIST).outerHeight();\n\t\tme[$ELEMENT].find(SEL_PACELIST_WRAPPER).height(height);\n\t\tme[$ELEMENT].attr(\"data-status\", \"open\");\n\t}\n\n\tfunction close(){\n\t\tvar me = this;\n\t\tme[$ELEMENT].find(SEL_PACELIST_WRAPPER).height(0);\n\t\tme[$ELEMENT].attr(\"data-status\", \"close\");\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[PACES] = me[$ELEMENT].data(\"paces\");\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\n\t\t\t$(SEL_CONFIG_CONTAINER).off(EVT_MOUSEDOWN).on(EVT_MOUSEDOWN, function(event){\n\t\t\t\tif ($(event.target).parents(SEL_PACE).length == 0){\n\t\t\t\t\tclose.call(me);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn me.html(tPaceSelect, {\n\t\t\t\tpaces: me[PACES]\n\t\t\t});\n\t\t},\n\n\t\t\"sig/stop\": function onStop() {\n\t\t\t$(SEL_CONFIG_CONTAINER).off(EVT_MOUSEDOWN);\n\t\t},\n\n\t\t\"hub/config/pace-select/toggle\": function(status){\n\t\t\tvar me = this;\n\t\t\tif(status === \"open\") {\n\t\t\t\topen.call(me);\n\t\t\t}\n\t\t\telse if(status === \"close\") {\n\t\t\t\tclose.call(me);\n\t\t\t}\n\t\t},\n\n\t\t\"dom:.ets-sp-cfg-pace-button/click\": function(evt){\n\t\t\tvar me = this;\n\n\t\t\tif(!me[$ELEMENT].hasClass(CLS_PACESELECT_VIEW)){\n\t\t\t\topen.call(me);\n\t\t\t}\n\t\t},\n\n\t\t\"dom:ul li .ets-sp-cfg-pace-item/click\": function(evt){\n\t\t\tvar me = this;\n\t\t\tvar $currentTarget = $(evt.currentTarget);\n\t\t\tvar days = parseInt($currentTarget.attr(\"data-days\"));\n\n\t\t\tme.publish(HUB_PACESELECT, days);\n\n\t\t\tme[$ELEMENT].find(SEL_PACEBUTTON).find(\"div\").html($currentTarget.html());\n\n\t\t\tclose.call(me);\n\t\t},\n\n\t\t\"dom:.pace-item-edit/click\" : function(e){\n\t\t\tvar me = this;\n\t\t\tvar $element = $(e.currentTarget);\n\t\t\t$element\n\t\t\t\t.addClass('pace-item-selected')\n\t\t\t\t.siblings()\n\t\t\t\t.removeClass('pace-item-selected');\n\n\t\t\tme.publish(HUB_PACESELECT, $element.data('pacedays'));\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/shared/pace-config/pace-config.html',[],function() { return function template(data) { var o = \"\";\n\tvar paces = data.paces;\n\tvar targetDate = data.targetDate;\n\tvar paceDays = data.paceDays;\n\tvar leftDays = data.leftDays;\n\tvar mode = data.paceSelectMode;\no += \"\\n<div class=\\\"ets-sp-cfg-item\\\">\\n\\t<div class=\\\"ets-sp-cfg-item-title\\\">\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656056\\\" data-text-en=\\\"My pace\\\"></span>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-item-detail\\\">\\n\\t\\t<div class=\\\"ets-cfg-paceSelect \" + (mode === 'view'? 'ets-cfg-paceSelect-view' : '')+ \"\\\" data-weave=\\\"school-ui-studyplan/shared/pace-select/main\\\" data-paces='\" + JSON.stringify(paces).replace(/\\'/g, \"&#39;\")+ \"'></div>\\n\\t</div>\\n</div>\\n<div class=\\\"ets-sp-cfg-item\\\">\\n\\t<div class=\\\"ets-sp-cfg-item-title\\\">\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569851\\\" data-text-en=\\\"Target date\\\"></span>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-item-detail ets-sp-cfg-item-targetDate\\\">\\n\\t\\t<h2>\" + (targetDate ? targetDate : \"&mdash;&mdash;\" ) + \"</h2>\\n\\t</div>\\n</div>\\n<div class=\\\"ets-sp-cfg-item\\\">\\n\\t<div class=\\\"ets-sp-cfg-item-title\\\">\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656057\\\" data-text-en=\\\"Remaining days\\\"></span>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-item-detail ets-sp-cfg-item-days\\\">\\n\\t\\t<h2>\" + (leftDays === undefined ? (paceDays ? paceDays : \"&mdash;&mdash;\") : leftDays) + \"</h2>\\n\\t\\t<span class=\\\"\" + (paceDays ? '' : 'ets-none') + \"\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656058\\\" data-text-en=\\\"Days\\\">Days</span>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/shared/pace-config/main',[\n\t\"jquery\",\n\t\"when\",\n\t\"moment\",\n\t\"poly\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/enum/moment-language\",\n\t\"template!./pace-config.html\"\n], function($, when, Moment, Poly, Widget, momentLang, tPaceConfig){\n\t\"use strict\";\n\n\t/**\n\t * Private variables declaration\n\t */\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar CULTURE_CODE = \"_culture_code\",\n\t\tPACES = \"_paces\",\n\t\tCONFIG = \"_config\",\n\t\tMODE = \"_mode\",\n\t\tCONFIG_ORIG = \"_config_original\";\n\n\tvar LONG_DASH = \"&mdash;&mdash;\";\n\n\tvar SEL_ITEM_TARGETDATE = \".ets-sp-cfg-item-targetDate\",\n\t\tSEL_ITEM_DAYS = \".ets-sp-cfg-item-days\",\n\t\tSEL_PACESELECT = \".ets-cfg-paceSelect\";\n\n\tvar CLS_NONE = \"ets-none\",\n\t\tCLS_PACESELECT_VIEW = \"ets-cfg-paceSelect-view\";\n\n\tvar DOWNLIST_DURATION = 200;\n\n\tvar MODE_VIEW = \"view\",\n\t\tMODE_EDIT = \"edit\";\n\n\tvar HUB_PACESELECT_TOGGLE = \"config/pace-select/toggle\",\n\t\tHUB_PACECHANGE = \"config/pace-change\";\n\n\tfunction render(culturecode, pace_config){\n\t\tvar me = this;\n\t\tvar paceDays;\n\t\tvar config = pace_config ? pace_config : me[CONFIG];\n\t\tvar noSelectedInConfig;\n\n\t\tif(config.paceDays) {\n\t\t\tpaceDays = parseInt(config.paceDays, 10);\n\t\t}\n\t\telse {\n\t\t\tnoSelectedInConfig = config.paces.every(function(e, i){\n\t\t\t\tif(e.selected) {\n\t\t\t\t\tpaceDays = e.paceDays;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// if there is not a selected pace, selecte the first one by default\n\t\t\tif(noSelectedInConfig){\n\t\t\t\tconfig.paces[0].selected = true;\n\t\t\t\tpaceDays = config.paces[0].paceDays;\n\t\t\t}\n\n\t\t}\n\n\t\treturn when(config.endDate ?\n\t\t\tlocalLang(culturecode, config.endDate).format(\"ll\") :\n\t\t\tgetTargetDate.call(me, culturecode, paceDays)).then(function(targetDate) {\n\n\t\t\t\treturn me.html(tPaceConfig, {\n\t\t\t\t\tpaces: config.paces,\n\t\t\t\t\ttargetDate: paceDays ? targetDate : UNDEF,\n\t\t\t\t\tpaceDays: paceDays,\n\t\t\t\t\tleftDays: config.leftDays,\n\t\t\t\t\tpaceSelectMode: me[MODE]\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\t// if there is not a selected pace, enter edit mode to open the pace list\n\t\t\t\t\tnoSelectedInConfig && me.publish(\"config/pace-config/mode\", MODE_EDIT);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tfunction getTargetDate(culturecode, paceDays){\n\t\tvar me = this;\n\t\treturn me.publish(\"studyplan/get/serverTime\").then(function(now){\n\t\t\treturn localLang(culturecode, now).add(\"days\", paceDays).format(\"ll\");\n\t\t});\n\t}\n\n\tfunction localLang(culturecode, date) {\n\t\tvar moment = Moment(date);\n\t\tmoment.lang(momentLang[culturecode.toLowerCase()]);\n\t\treturn moment;\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tvar config = me[$ELEMENT].data(\"config\");\n\n\t\tme[CONFIG] = config;\n\t\tme[CONFIG_ORIG] = $.extend(true, {}, config);\n\t\tme[PACES] = me[CONFIG].paces;\n\t\tme[MODE] = me[$ELEMENT].data(\"mode\");\n\t},{\n\n\t\t\"hub:memory/common_context\" : function(common_context){\n\t\t\tvar me = this;\n\t\t\tcommon_context && render.call(me, me[CULTURE_CODE] = common_context.values.culturecode.value);\n\t\t},\n\n\t\t\"hub/config/pace-select\": function(days){\n\t\t\tvar me = this;\n\t\t\tvar $targetDate = me[$ELEMENT].find(SEL_ITEM_TARGETDATE).find(\"h2\");\n\t\t\tvar $days = me[$ELEMENT].find(SEL_ITEM_DAYS).find(\"h2\");\n\n\t\t\tgetTargetDate.call(me, me[CULTURE_CODE], days).then(function(targetDate){\n\t\t\t\tif(days) {\n\t\t\t\t\t$targetDate.html(targetDate);\n\t\t\t\t\t$days.html(days);\n\t\t\t\t\t$days.siblings(\"span\").removeClass(CLS_NONE);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$targetDate.html(LONG_DASH);\n\t\t\t\t\t$days.html(LONG_DASH);\n\t\t\t\t\t$days.siblings(\"span\").addClass(CLS_NONE);\n\t\t\t\t}\n\n\t\t\t\tme[PACES].forEach(function(e, i){\n\t\t\t\t\te.selected && delete e.selected;\n\n\t\t\t\t\tif(e.paceDays == days) {\n\t\t\t\t\t\te.selected = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tme.publish(HUB_PACECHANGE, me[PACES]);\n\t\t\t});\n\t\t},\n\n\t\t\"hub/config/pace-config/mode\": function(mode) {\n\t\t\tvar me = this;\n\t\t\tvar $PACESELECT = me[$ELEMENT].find(SEL_PACESELECT);\n\t\t\tme[MODE] = mode;\n\t\t\tme[$ELEMENT].attr(\"data-mode\", mode);\n\n\t\t\tswitch (mode) {\n\t\t\t\tcase MODE_EDIT:\n\t\t\t\t\tme.publish(HUB_PACESELECT_TOGGLE, \"open\");\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t$PACESELECT.removeClass(CLS_PACESELECT_VIEW);\n\t\t\t\t\t}, DOWNLIST_DURATION);\n\n\t\t\t\t\t//set default value, this hub means start change pace\n\t\t\t\t\tme.publish(HUB_PACECHANGE, me[PACES]);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MODE_VIEW:\n\t\t\t\t\tme.publish(HUB_PACESELECT_TOGGLE, \"close\");\n\n\t\t\t\t\t$PACESELECT.addClass(CLS_PACESELECT_VIEW);\n\t\t\t\t\trender.call(me, me[CULTURE_CODE], me[CONFIG_ORIG]);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/shared/pace-select/pace-select.html',[],function() { return function template(data) { var o = \"\";\n\tvar paces = data;\no += \"\\n<div class=\\\"ets-sp-cfg-pace\\\">\\n\\n\\t\";\n\t\tfor (var i = 0; i < paces.length; i++) {\n\t\t\tfindSelect(paces[i], i);\n\t\t}\n\to += \"\\n\\t<div class=\\\"ets-sp-cfg-paceList-wrapper\\\">\\n\\t\\t<ul class=\\\"ets-sp-cfg-paceList\\\">\\n\\t\\t\\t\";\n\t\t\t\tfor (var i = 0; i < paces.length; i++) {\n\t\t\t\t\trender(paces[i], i);\n\t\t\t\t}\n\t\t\to += \"\\n\\t\\t</ul>\\n\\t</div>\\n</div>\\n\\n\"; function findSelect(pace) { o += \"\\n\\t\"; if(pace.selected){ o += \"\\n\\t\\t<div class=\\\"ets-sp-cfg-pace-item ets-sp-cfg-pace-button\\\">\\n\\t\\t\\t<div>\\n\\t\\t\\t\"; if(pace.paceDays){ o += \"\\n\\t\\t\\t\\t<h2>\" + pace.text + \"</h2><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569848\\\" data-text-en=\\\"hours weekly\\\"></span>\\n\\t\\t\\t\"; } else { o += \"\\n\\t\\t\\t\\t\" + pace.text + \"\\n\\t\\t\\t\"; } o += \"\\n\\t\\t\\t</div> <i class=\\\"glyphicon icon-caret-down\\\"></i>\\n\\t\\t</div>\\n\\t\"; } o += \"\\n\"; } o += \"\\n\\n\"; function render(pace) { o += \"\\n\\t<li>\\n\\t\\t<div class=\\\"ets-sp-cfg-pace-item\\\" data-days=\\\"\" + pace.paceDays + \"\\\" data-points=\\\"\" + pace.pacePoints + \"\\\" data-text=\\\"\" + pace.text + \"\\\">\\n\\t\\t\\t\"; if(pace.paceDays){ o += \"\\n\\t\\t\\t\\t<h2>\" + pace.text + \"</h2><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569848\\\" data-text-en=\\\"hours weekly\\\"></span>\\n\\t\\t\\t\"; } else {o += \"\\n\\t\\t\\t\\t\" + pace.text + \"\\n\\t\\t\\t\"; } o += \"\\n\\t\\t</div>\\n\\t</li>\\n\"; }  return o; }; });\n",
    "define('school-ui-studyplan/shared/pace-select/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./pace-select.html\"\n], function($, Widget, tPaceSelect){\n\t\"use strict\";\n\n\t/**\n\t * Private variables declaration\n\t */\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar PACES = \"_paces\";\n\n\tvar EVT_MOUSEDOWN = \"mousedown.pace\";\n\n\tvar SEL_CONFIG_CONTAINER = \".ets-studyplan\",\n\t\tSEL_PACE = \".ets-sp-cfg-pace\",\n\t\tSEL_PACELIST = \".ets-sp-cfg-paceList\",\n\t\tSEL_PACEBUTTON = \".ets-sp-cfg-pace-button\",\n\t\tSEL_PACELIST_WRAPPER = \".ets-sp-cfg-paceList-wrapper\";\n\n\tvar CLS_PACESELECT_VIEW = \"ets-cfg-paceSelect-view\";\n\n\tvar HUB_PACESELECT = \"config/pace-select\";\n\n\tfunction open(){\n\t\tvar me = this;\n\t\tvar height = me[$ELEMENT].find(SEL_PACELIST).outerHeight();\n\t\tme[$ELEMENT].find(SEL_PACELIST_WRAPPER).height(height);\n\t\tme[$ELEMENT].attr(\"data-status\", \"open\");\n\t}\n\n\tfunction close(){\n\t\tvar me = this;\n\t\tme[$ELEMENT].find(SEL_PACELIST_WRAPPER).height(0);\n\t\tme[$ELEMENT].attr(\"data-status\", \"close\");\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[PACES] = me[$ELEMENT].data(\"paces\");\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\n\t\t\t$(SEL_CONFIG_CONTAINER).off(EVT_MOUSEDOWN).on(EVT_MOUSEDOWN, function(event){\n\t\t\t\tif ($(event.target).parents(SEL_PACE).length == 0){\n\t\t\t\t\tclose.call(me);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn me.html(tPaceSelect, me[PACES]);\n\t\t},\n\n\t\t\"sig/stop\": function onStop() {\n\t\t\t$(SEL_CONFIG_CONTAINER).off(EVT_MOUSEDOWN);\n\t\t},\n\n\t\t\"hub/config/pace-select/toggle\": function(status){\n\t\t\tvar me = this;\n\t\t\tif(status === \"open\") {\n\t\t\t\topen.call(me);\n\t\t\t}\n\t\t\telse if(status === \"close\") {\n\t\t\t\tclose.call(me);\n\t\t\t}\n\t\t},\n\n\t\t\"dom:.ets-sp-cfg-pace-button/click\": function(evt){\n\t\t\tvar me = this;\n\n\t\t\tif(!me[$ELEMENT].hasClass(CLS_PACESELECT_VIEW)){\n\t\t\t\topen.call(me);\n\t\t\t}\n\t\t},\n\n\t\t\"dom:ul li .ets-sp-cfg-pace-item/click\": function(evt){\n\t\t\tvar me = this;\n\t\t\tvar $currentTarget = $(evt.currentTarget);\n\t\t\tvar days = parseInt($currentTarget.attr(\"data-days\"));\n\n\t\t\tme.publish(HUB_PACESELECT, days);\n\n\t\t\tme[$ELEMENT].find(SEL_PACEBUTTON).find(\"div\").html($currentTarget.html());\n\n\t\t\tclose.call(me);\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/shared/tooltip/main.html',[],function() { return function template(data) { var o = \"<div class=\\\"campus-tooltip \" + data.customClass+ \"\\\">\\n\\t<div class=\\\"tooltip-title\\\">\\n\\t\\t<span class=\\\"title-text\\\"></span>\\n\\t\\t<div class=\\\"title-icon\\\">\\n\\t\\t\\t<span class=\\\"ets-icon-mob-tip\\\"></span>\\n\\t\\t\\t<span class=\\\"ets-icon-cp-arrow-up \" +data.expand+ \"\\\"></span>\\n\\t\\t</div>\\n\\t</div>\\n\\t<div class=\\\"tooltip-body \" +data.expand+ \"\\\">\\n\\t\\t<p class=\\\"tooltip-content\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" + data.content+ \"\\\"></p>\\n\\t\\t<span class=\\\"ets-icon-cp-close\\\"></span>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/shared/tooltip/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./main.html\"\n], function($, Widget, template){\n\t\"use strict\";\n\treturn Widget.extend(function($element, displayName, options){\n\t\tvar me = this;\n\t\tme.options = options;\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\treturn me.html(template, {\n\t\t\t\tcontent: me.options.content,\n\t\t\t\tcustomClass: me.options.customClass,\n\t\t\t\texpand: me.options.expand ? '' : 'ets-none'\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.campus-tooltip/click\": function(e){\n\t\t\te.stopPropagation();\n\t\t},\n\n\t\t\"dom: .title-icon/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme.$element.find('.ets-icon-cp-arrow-up').toggleClass('ets-none');\n\t\t\tme.$element.find('.tooltip-body').toggleClass('ets-none');\n\t\t},\n\n\t\t\"dom:.ets-icon-cp-close/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme.$element.find('.ets-icon-cp-arrow-up').addClass('ets-none');\n\t\t\tme.$element.find('.tooltip-body').addClass('ets-none');\n\t\t\tme.$element.trigger(\"tooltip/close\");\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/utils/animation-helper',[\n\t\"when\",\n\t\"poly/array\",\n\t\"poly/object\",\n\t\"troopjs-ef/component/gadget\"\n], function (when, polyArray, polyObject, Gadget) {\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar READY = \"ready\";\n\tvar WAIT = \"wait\";\n\tvar FINISHED = \"finished\";\n\n\tvar CB = \"cb\";\n\tvar STATE = \"state\";\n\n\tvar DEPS = \"deps\";\n\tvar SYNC = \"sync\";\n\n\tvar ANIMATION_CB = {};\n\n\tvar ALL_SYNC_CB = {};\n\n\tvar DURATION_ZERO = 0;\n\n\t/**\n\t * config animation in here\n\t * \"deps\" means this animation need to depend on another one\n\t * \"sync\" means this animation need to start with another one at the same time\n\t */\n\tvar CONFIG = {\n\t\t\"unitNav_seqCon\": {\n\t\t\t\"deps\": [],\n\t\t\t\"sync\": [\"unitNav_seqNav\"]\n\t\t},\n\t\t\"unitNav_seqNav\": {\n\t\t\t\"deps\": [],\n\t\t\t\"sync\": [\"unitNav_seqCon\"]\n\t\t},\n\t\t\"itemChange_seqCon\": {\n\t\t\t\"deps\": [],\n\t\t\t\"sync\": []\n\t\t},\n\t\t\"goalEnter\": {\n\t\t\t\"deps\": [\"itemChange_seqCon\", \"unitNav_seqNav\", \"unitNav_seqCon\"],\n\t\t\t\"sync\": []\n\t\t}\n\t};\n\n\tfunction checkDeps(){\n\t\tvar deps = [];\n\t\tObject.keys(CONFIG).forEach(function (e, i) {\n\t\t\tif (CONFIG[e][DEPS].length > 0) {\n\t\t\t\t/**\n\t\t\t\t * Figure out dependence form config object\n\t\t\t\t *\n\t\t\t\t * check animation self callback is existing or not?\n\t\t\t\t * if self is existing, it means animation did't run yet, we need to continue to confirm dependent item.\n\t\t\t\t *\n\t\t\t\t * if dependent item is existing, we need to check item state is \"finished\" or not\n\t\t\t\t * if dependent item isn't existing, it means animation didn't initialize.\n\t\t\t\t * if animation state isn't \"wait\"\n\t\t\t\t *\n\t\t\t\t * both these three cases, we will return true and we will run this animation.\n\t\t\t\t */\n\t\t\t\tvar isReady = CONFIG[e][DEPS].reduce(function (prev, current) {\n\t\t\t\t\tif ((ANIMATION_CB[e] && ANIMATION_CB[e][CB]) &&\n\t\t\t\t\t\t(ANIMATION_CB[e][STATE] != WAIT) &&\n\t\t\t\t\t\t((ANIMATION_CB[current] && ANIMATION_CB[current][STATE] === FINISHED) ||\n\t\t\t\t\t\tANIMATION_CB[current] === UNDEF)) {\n\t\t\t\t\t\treturn prev && true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn prev && false;\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\n\t\t\t\tif(isReady) {\n\t\t\t\t\tif(CONFIG[e][SYNC].length > 0) {\n\t\t\t\t\t\tcheckSync(e);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdeps.push(e) && (ANIMATION_CB[e][STATE] = WAIT);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Because we have a case like two animation depand on the same one.\n\t\t * We need to collect these animation and after all of that is finished, then we can clean their callback to avoid second running.\n\t\t * Otherwise, if we run these separately, after fisrt one finished and we clean the callback, the second one will be failed.\n\t\t */\n\t\tif(deps.length > 0){\n\t\t\t/**\n\t\t\t * Sometimes, Firefox can't run the animation because browser process.\n\t\t\t * We can use ZERO timeout and move callback function into a new queue to fixed that.\n\t\t\t */\n\t\t\tsetTimeout(function(){\n\t\t\t\twhen.map(deps, function(e, i){\n\t\t\t\t\treturn ANIMATION_CB[e][CB]();\n\t\t\t\t}).then(function(){\n\t\t\t\t\tdeps.forEach(function(e, i){\n\t\t\t\t\t\tANIMATION_CB[e][\"state\"] = FINISHED;\n\t\t\t\t\t\tcheckSync(e);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, DURATION_ZERO);\n\t\t}\n\t}\n\n\tfunction checkSync(name){\n\t\tvar syncName = [name];\n\n\t\t/**\n\t\t * collect all sync item name\n\t\t */\n\t\tCONFIG[name][SYNC].forEach(function(e, i) {\n\t\t\tsyncName.push(e);\n\t\t});\n\n\t\t/**\n\t\t * if we have two sync animation A and B, we will combin these two into one property like A^B\n\t\t */\n\t\tvar syncNameCombin = syncName.sort().join(\"^\");\n\t\tif(!ALL_SYNC_CB[syncNameCombin]) {\n\t\t\tALL_SYNC_CB[syncNameCombin] = [];\n\t\t}\n\t\tALL_SYNC_CB[syncNameCombin].push(name);\n\n\t\t/**\n\t\t * check all sync items already initialize\n\t\t */\n\t\tif(Object.keys(ALL_SYNC_CB[syncNameCombin]).length === syncName.length) {\n\t\t\t/**\n\t\t\t * Check all sync running items are \"ready\"\n\t\t\t */\n\t\t\tvar isReady = Object.keys(syncName).reduce(function (prev, current) {\n\t\t\t\treturn prev && (ANIMATION_CB[syncName[current]][STATE] === READY);\n\t\t\t}, true);\n\n\t\t\tif(isReady){\n\t\t\t\tsyncName.forEach(function(e, i){\n\t\t\t\t\trun(e);\n\t\t\t\t});\n\n\t\t\t\tdelete ALL_SYNC_CB[syncNameCombin];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction run(name){\n\t\t/**\n\t\t * Sometimes, Firefox can't run the animation because browser process.\n\t\t * We can use ZERO timeout and move callback function into a new queue to fixed that.\n\t\t */\n\t\tsetTimeout(function(){\n\t\t\tANIMATION_CB[name][CB] && ANIMATION_CB[name][CB]().then(function(){\n\t\t\t\tANIMATION_CB[name][\"state\"] = FINISHED;\n\t\t\t\tcheckDeps();\n\t\t\t});\n\t\t}, DURATION_ZERO);\n\t}\n\n\t/**\n\t * initialize animation object into share object\n\t * @param name\n\t * @param cb\n\t */\n\tfunction init(name, cb) {\n\t\tANIMATION_CB[name] = {\n\t\t\t\"cb\": cb,\n\t\t\t\"state\": READY\n\t\t};\n\t}\n\n\treturn Gadget.create({\n\t\t/**\n\t\t * request support animation of config object\n\t\t * @param name\n\t\t * @param cb\n\t\t */\n\t\trequest: function (name, cb) {\n\t\t\tif(!cb) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinit(name, cb);\n\n\t\t\tif(CONFIG[name]) {\n\t\t\t\tif(CONFIG[name][DEPS] && CONFIG[name][DEPS].length === 0) {\n\t\t\t\t\tif(CONFIG[name][SYNC] && CONFIG[name][SYNC].length === 0) {\n\t\t\t\t\t\t//animation_A : {deps:[/], sync:[/]}\n\t\t\t\t\t\trun(name);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t//animation_A : {deps:[/], sync:[*]}\n\t\t\t\t\t\tcheckSync(name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//animation_A : {deps:[*], sync:[* || /]}\n\t\t\t\t\tcheckDeps();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/utils/client-storage',[\"school-ui-studyplan/enum/client-storage-pair\", \"poly\"], function (pair, poly) {\n\t\tvar localStorage = window.localStorage;\n\t\tvar sessionStorage = window.sessionStorage;\n\n\t\treturn {\n\t\t\tsetLocalStorage: function (pairKey, pairValue) {\n\t\t\t\tif (pair[pairKey] && (!pair[pairKey][\"keyValue\"] || pair[pairKey][\"keyValue\"].indexOf(pairValue) > -1)) {\n\t\t\t\t\tlocalStorage && localStorage.setItem(pair[pairKey][\"keyName\"], JSON.stringify(pairValue));\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetLocalStorage: function (pairKey) {\n\t\t\t\tvar storageData = \tlocalStorage && pair[pairKey] &&\n\t\t\t\t\t\t\t\t\tlocalStorage.getItem(pair[pairKey][\"keyName\"]);\n\t\t\t\treturn storageData && JSON.parse(storageData);\n\t\t\t},\n\t\t\tsetSessionStorage: function (pairKey, pairValue) {\n\t\t\t\tif (pair[pairKey] && (!pair[pairKey][\"keyValue\"] || pair[pairKey][\"keyValue\"].indexOf(pairValue) > -1)) {\n\t\t\t\t\tsessionStorage && sessionStorage.setItem(pair[pairKey][\"keyName\"], JSON.stringify(pairValue));\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetSessionStorage: function (pairKey) {\n\t\t\t\tvar storageData = \tsessionStorage && pair[pairKey] &&\n\t\t\t\t\t\t\t\t\tsessionStorage.getItem(pair[pairKey][\"keyName\"]);\n\t\t\t\treturn storageData && JSON.parse(storageData);\n\t\t\t}\n\t\t};\n\t}\n);\n\n",
    "define('school-ui-studyplan/utils/server-time',[\n    \"when\",\n    \"troopjs-ef/component/gadget\"\n], function (when, Gadget) {\n    \"use strict\";\n\n    var DEFER_CONTEXT = \"_defer_context\";\n    var CLIENT_START_TIME = \"_client_start_time\";\n\n\n    var serverTimeService = Gadget.create(function(){\n        this[DEFER_CONTEXT] = when.defer();\n    },{\n        \"hub/studyplan/get/serverTime\": function() {\n            var me = this;\n            return when(me[DEFER_CONTEXT].promise).then(function(context){\n                return context.serverTime + new Date().getTime() - me[CLIENT_START_TIME];\n            });\n        },\n\n        \"hub:memory/context\": function onContext(context) {\n            var me = this;\n            if(context){\n                me[CLIENT_START_TIME] = new Date().getTime();\n                me[DEFER_CONTEXT].resolve(context);                \n            }\n        }\n    });\n\n    serverTimeService.start();\n\n    return serverTimeService;\n});\n\n",
    "define('school-ui-studyplan/utils/state-parser',[],function(){\n    return {\n        parseFlag : function(stateObj, stateCode){\n            var parsed = {};\n            if(stateObj){\n                for (stateName in stateObj){\n                    if(stateObj.hasOwnProperty(stateName)){\n                        parsed[stateName] = (stateObj[stateName] & stateCode) === stateObj[stateName];\n                    }\n                }\n            }\n            return parsed;\n        },\n        map : function(stateObj, stateCode){\n            if(stateObj){\n                for (stateName in stateObj){\n                    if(stateObj.hasOwnProperty(stateName) && stateObj[stateName] === stateCode){\n                        return stateName;\n                    }\n                }\n            }\n        } \n    };\n});\n",
    "define('school-ui-studyplan/utils/studyplan-update-helper',[\n\t\"school-ui-shared/utils/update-command\"\n], function UpdateHelperUtilModule(UpdateCommand) {\n\t\"use strict\";\n\n\tvar API_STUDYPLAN_CTEATE = \"campusstudyplan/campus_student_unit_studyplan/CreateStudyPlan\";\n\tvar API_STUDYPLAN_RESTART = \"campusstudyplan/campus_student_unit_studyplan/RestartCurrentStudyPlan\";\n\n\treturn {\n\t\tcreateStudyplan: function onCreateStudyplan(data) {\n\t\t\treturn UpdateCommand.update(API_STUDYPLAN_CTEATE, data);\n\t\t},\n\t\trestartStudyplan: function onCancelStudyplan(data) {\n\t\t\treturn UpdateCommand.update(API_STUDYPLAN_RESTART, data);\n\t\t}\n\t};\n});\n\n",
    "define('school-ui-studyplan/utils/time-parser',[\n\t\"troopjs-ef/component/gadget\",\n\t\"moment\"\n], function(\n\tGagdet,\n\tmoment\n){\n\t\"use strict\";\n\n\tvar timeParser = Gagdet.create({\n\t\ttoLocalTime: function(time, offset){\n\t\t\tvar me = this;\n\t\t\tvar momentTime;\n\n\t\t\t// use local timezone if there is no timezone information\n\t\t\tif(offset === undefined){\n\t\t\t\tmomentTime = moment(time);\n\t\t\t} else {\n\t\t\t\tmomentTime = moment.utc(time).zone(0 - offset);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t\"dayOfWeek\": momentTime.day(),\n\t\t\t\t\"year\": momentTime.year(),\n\t\t\t\t\"month\": momentTime.month() + 1,\n\t\t\t\t\"day\": momentTime.date(),\n\t\t\t\t\"hour\": momentTime.hour(),\n\t\t\t\t\"minute\": momentTime.minute(),\n\t\t\t\t\"second\": momentTime.second(),\n\t\t\t\t\"timezone\": momentTime.format('Z')\n\t\t\t};\n\t\t}\n\t});\n\n\ttimeParser.start();\n\n\treturn timeParser;\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/announcement/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"sp-evc-announcement-container\\\">\\n    \" + data + \"\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .sp-evc-announcement-container{\\n        width: 680px;\\n        margin: 0 auto;\\n        padding: 15px 0;\\n    }\\n    .sp-evc-announcement-main{\\n        padding: 20px 50px;\\n    }\\n    .sp-evc-announcement-container p{\\n        margin: 10px 0 0 0;\\n    }\\n    .sp-evc-announcement-container .sp-evc-announcement-toggle\\n    {\\n        cursor: pointer;\\n        margin-left: 5px;\\n        color: #4a4a4a;\\n        top: -1px;\\n    }\\n    .sp-evc-announcement-container .sp-evc-announcement-toggle:hover\\n    {\\n        text-decoration: none;\\n        color: #4a4a4a;\\n    }\\n    .sp-evc-announcement-container .sp-evc-announcement-content\\n    {\\n        margin-top: 10px;\\n    }\\n    .sp-evc-announcement-content > p:last-child\\n    {\\n        margin-bottom: 0;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/announcement/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    'use strict';\n\n    var htmlToggleOn = \"<small><a data-action=\\\"toggle\\\" class=\\\"glyphicon icon-chevron-sign-down sp-evc-announcement-toggle\\\" style=\\\"display: none;\\\"></a></small>\";\n    var htmlToggleOff = \"<small><a data-action=\\\"toggle\\\" class=\\\"glyphicon icon-chevron-sign-up sp-evc-announcement-toggle\\\"></a></small>\";\n    var SELECTOR_TITLE = \".sp-evc-announcement-title\";\n    var SELECTOR_CONTENT = \".sp-evc-announcement-content\";\n\n    return Widget.extend({\n        \"render\": function(data) {\n            var me = this;\n            var $me = me.$element;\n            if (!data) {\n                return;\n            }\n            // Templating\n            me.html(template, data).then(function(){\n                var $title = $me.find(SELECTOR_TITLE);\n                if($title.length <= 0){\n                    return;\n                }\n                $title.append(htmlToggleOn).append(htmlToggleOff);\n            });\n        },\n        \"dom:[data-action=toggle]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            var $me = me.$element;\n            var $e = $(e.currentTarget);\n            var $content = $me.find(SELECTOR_CONTENT);\n            if ($content.length <= 0) {\n                return;\n            }\n            $content.toggle(\"slow\");\n            $me.find(\"[data-action=toggle]\").toggle();\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/credit/service',[\"troopjs-core/component/gadget\",\n    \"jquery\",\n    \"when\"\n], function(Gadget, $, when) {\n    'use strict';\n\n    return Gadget.extend(function() {}, {\n        \"get\": function(feature) {\n            var me = this;\n            var deferred = when.defer();\n            if (!feature) {\n                deferred.reject();\n            }\n            // Get credit data by eTroop\n            me.publish(\"query\", [\"evcmember!current\"]).spread(function(data) {\n                if (!data || !data.features || !data.courseInfo) {\n                    deferred.reject();\n                }\n                // Generate a new object to resolve\n                var courseInfo = data.courseInfo;\n                var features = data.features;\n                var memberInfo = {};\n                var credit = {};\n\n                // Read & find GL credit\n                $.each(features, function(i, e) {\n                    if (e.featureType.toUpperCase() === feature.toUpperCase()) {\n                        credit.buyUrl = e.buyUrl;\n                        credit.canAccess = e.canAccess;\n                        credit.canBuyMore = e.canBuyMore;\n                        credit.couponLeft = e.couponLeft;\n                        credit.isUnlimitedAccess = e.isUnlimitedAccess;\n                        return false;\n                    }\n                });\n\n                memberInfo.courseInfo = courseInfo;\n                memberInfo.credit = credit;\n\n                // Resolve generated credit\n                deferred.resolve(memberInfo);\n            });\n            // Return a promise\n            return deferred.promise;\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/announcement/cp20',[\"./main\",\n    \"jquery\",\n    \"../credit/service\"\n], function(AnnouncementBase, $, Credit) {\n    'use strict';\n\n    var CMS_ANNOUNCEMENT = \"cms!School#EVC#studyPlanAnnouncement#PL_\";\n\n    return AnnouncementBase.extend({\n        \"sig/start\": function() {\n            // Check Announcement\n            var me = this;\n            new Credit().get(\"PL\").then(function(dataCredit) {\n                if (!dataCredit) {\n                    return;\n                }\n                var courseInfo = dataCredit.courseInfo;\n                var level = courseInfo.academicLevel;\n                me.publish(\"query\", [CMS_ANNOUNCEMENT + level]).spread(function(data) {\n                    if (data.content) {\n                        me.render(data.content);\n                    } else {\n                        me.publish(\"studyplan/evc/cp20/announcement/disable\");\n                    }\n                });\n            });\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/announcement/gl',[\"./main\",\n    \"jquery\",\n    \"../credit/service\"\n], function(AnnouncementBase, $, Credit) {\n    'use strict';\n\n    var CMS_ANNOUNCEMENT = \"cms!School#EVC#studyPlanAnnouncement#GL_\";\n\n    return AnnouncementBase.extend({\n        \"sig/start\": function() {\n            // Check Announcement\n            var me = this;\n            new Credit().get(\"GL\").then(function(dataCredit) {\n                if (!dataCredit) {\n                    return;\n                }\n                var courseInfo = dataCredit.courseInfo;\n                var level = courseInfo.academicLevel;\n                me.publish(\"query\", [CMS_ANNOUNCEMENT + level]).spread(function(data) {\n                    if (data.content) {\n                        me.render(data.content);\n                    } else {\n                        me.publish(\"studyplan/evc/gl/announcement/disable\");\n                    }\n                });\n            });\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/announcement/pl',[\"./main\",\n    \"jquery\",\n    \"../credit/service\"\n], function(AnnouncementBase, $, Credit) {\n    'use strict';\n\n    var CMS_ANNOUNCEMENT = \"cms!School#EVC#studyPlanAnnouncement#PL_\";\n\n    return AnnouncementBase.extend({\n        \"sig/start\": function() {\n            // Check Announcement\n            var me = this;\n            new Credit().get(\"PL\").then(function(dataCredit) {\n                if (!dataCredit) {\n                    return;\n                }\n                var courseInfo = dataCredit.courseInfo;\n                var level = courseInfo.academicLevel;\n                me.publish(\"query\", [CMS_ANNOUNCEMENT + level]).spread(function(data) {\n                    if (data.content) {\n                        me.render(data.content);\n                    } else {\n                        me.publish(\"studyplan/evc/pl/announcement/disable\");\n                    }\n                });\n            });\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-cp20/index.html',[],function() { return function template(data) { var o = \"\";\n\tvar bookUrl = data.bookUrl;\no += \"\\n<div class=\\\"evc-studyplan-btn-book\\\">\\n\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639505\\\" data-text-en=\\\"Welcome to your private lesson\\\"></h2>\\n\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639506\\\" data-text-en=\\\"Review what youve learned in this unit in your private lesson. This live session with a teacher takes 20 minutes and is included with your subscription.\\\"></p>\\n\\t<div class=\\\"evc-studyplan-btn-warp\\\">\\n\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639507\\\" data-text-en=\\\"Your private lesson must be booked 24 hours in advance.\\\"></p>\\n\\t\\t<button class=\\\"btn btn-default\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639508\\\" data-text-en=\\\"Skip your private lesson\\\"></button>\\n\\t\\t<a href=\\\"\" + bookUrl + \"\\\" class=\\\"btn btn-primary\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639509\\\" data-text-en=\\\"Book your private lesson\\\"><i class=\\\"glyphicon icon-caret-right\\\"></i></a>\\n\\t</div>\\n</div>\\n<p class=\\\"text-muted\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639510\\\" data-text-en=\\\"You can skip your private lesson, but we strongly recommend you book it.\\\"></p>\\n<style type=\\\"text/css\\\">\\n\\t.evc-studyplan-activity-container .evc-studyplan-gap-2x {\\n\\t\\tpadding: 0;\\n\\t\\tmargin: 0;\\n\\t\\twidth: 660px;\\n\\t}\\n\\t.evc-studyplan-btn-book{\\n\\t\\tpadding: 30px 20px;\\n\\t\\tcolor: #555555;\\n\\t\\tbackground-color: #f0f0f0;\\n\\t}\\n\\t.evc-studyplan-btn-book h2 {\\n\\t\\tmargin-bottom: 10px;\\n\\t}\\n\\t.evc-studyplan-btn-book .btn{\\n\\t\\tdisplay: inline-block;\\n\\t\\tmargin: 10px 8px;\\n\\t}\\n\\t.evc-studyplan-btn-book p {\\n\\t\\tfont-size: 1.3em;\\n\\t}\\n\\t.evc-studyplan-btn-warp {\\n\\t\\tmargin-top: 20px;\\n\\t}\\n\\tp.text-muted{\\n\\t\\tmargin-top: 8px;\\n\\t}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/book-cp20/main',[\"troopjs-ef/component/widget\",\n\t\"jquery\",\n\t\"template!./index.html\"\n], function(Widget, $, template) {\n\t\"use strict\";\n\n\tvar CP20_BOOK_URL = \"/school/evc/pl/cp20/\";\n\n\treturn Widget.extend(function($element, widgetName, unitId) {\n\t\tvar me = this;\n\t\t// get parameters\n\t\tme.unitId = unitId;\n\t}, {\n\t\t\"hub:memory/studyplan/evc/cp20/enter-token\": function(token) {\n\t\t\tvar me = this;\n\t\t\tvar tempData = {};\n\n\t\t\tif (!me.unitId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tme.query(\"evc_url_resource!current\").spread(function(data){\n\t\t\t\ttempData.bookUrl = data.studyPlanUrls.CP20Booking.replace(\"{unitId}\", me.unitId)\n\t\t\t\t\t.replace(\"{source}\", window.encodeURIComponent(window.location.href))\n\t\t\t\t\t.replace(\"{token}\", (token ? token : \"\"));\n\n\t\t\t\tme.html(template, tempData);\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.btn-default/click\": function skipCp(){\n\t\t\tvar me = this;\n\t\t\tme.publish(\"studyplan/sequence/navigate/goal\");\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/book-pl/index.html',[],function() { return function template(data) { var o = \"\";\n    var bookUrl = data.bookUrl;\n    var credit = data.credit;\no += \"\\n<div class=\\\"evc-studyplan-btn-book\\\">\\n    \"; if(credit.couponLeft <= 0){ o += \"\\n        <a class=\\\"btn btn-default disabled\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568596\\\"></a>\\n    \"; }else{ o += \"\\n        <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568597\\\"></p>\\n        <a href=\\\"\" + bookUrl + \"\\\" class=\\\"btn btn-primary\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568596\\\"></a>\\n    \"; } o += \"\\n</div>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-btn-book{\\n    }\\n    .evc-studyplan-btn-book > a{\\n        display: inline-block;\\n    }\\n    .evc-studyplan-btn-book > p{\\n        font-size: 1.3em;\\n        font-weight: bold;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/book-pl/main',[\"troopjs-ef/component/widget\",\n    \"jquery\",\n    \"../credit/service\",\n    \"school-ui-studyplan/enum/studyplan-item-typecode\",\n    \"template!./index.html\"\n], function(Widget, $, Credit, spItemTypeCode, template) {\n    \"use strict\";\n\n    var PL_BOOK_URL = \"/school/evc/pl/unitaligned\";\n    var KEY = \"SP\";\n\n    return Widget.extend(function($element, widgetName, unitId, spTypeCode) {\n        var me = this;\n        // get parameters\n        me.unitId = unitId;\n        me.spTypeCode = spTypeCode;\n    }, {\n        \"sig/start\": function() {\n            var me = this;\n\n            if (!me.unitId) {\n                return;\n            }\n\n            me.query(\"evc_url_resource!current\").spread(function(data){\n                var isPL20 = Boolean(me.spTypeCode === spItemTypeCode.pl20);\n\n                var tempData = {};\n                tempData.bookUrl =\n                    (isPL20 ? data.studyPlanUrls.SPPL20Booking : data.studyPlanUrls.SPPL40Booking)\n                    .replace(\"{unitid}\", me.unitId)\n                    .replace(\"{source}\", window.encodeURIComponent(window.location.href));\n\n                new Credit().get(isPL20 ? \"PL20\" : \"PL\").then(function(dataCredit) {\n                    if (!dataCredit) {\n                        return;\n                    }\n                    tempData.credit = dataCredit.credit;\n                    me.html(template, tempData);\n                });\n            });\n\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupbox/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"popupbox-cover\\\" style=\\\"\\n    z-index: \" + (data.zIndex || 1) + \";\\n    background-color: \" + (data.bgColor || \"#000\") + \";\\n    opacity: \" + (data.opacity || 0.8) + \";\\n    filter: alpha(opacity=\" + (data.opacity || 0.8) * 100 + \");\\n    margin-top: \" + (data.top || 0) + \"px;\\n\\\">\\n    \"; if (data.keySupport) { o += \"\\n        <style>\\n            input.popupbox-keysupport\\n            {\\n                width: 1px;\\n                height: 1px;\\n                border-width: 0;\\n                overflow: hidden;\\n                float: right;\\n                background-color: transparent;\\n                outline: none;\\n                position: absolute;\\n                top: -1px;\\n            }\\n        </style>\\n        <input class=\\\"popupbox-keysupport\\\" type=\\\"text\\\" />\\n    \"; } o += \"\\n</div>\\n<div class=\\\"popupbox\\\" style=\\\"\\n    z-index: \" + (data.zIndex || 1) + \";\\n    margin-top: \" + (data.top || 0) + \"px;\\n\\\">\\n    <div class=\\\"popupbox-main\\\" style=\\\"\\n        height: 100%;\\n        \"; if(!data.fullSize) { o += \"\\n            text-align: center;\\n        \"; } o += \"\\n    \\\">\\n        \"; if(!data.isInnerClose) { closeButton(data.hasCloseButton); } o += \"\\n        <div class=\\\"popupbox-content popupbox-out\\\" style=\\\"\\n            \"; if(!data.fullSize) { o += \"\\n                text-align: left;\\n                display: inline-block;\\n                *display: inline;\\n                *zoom: 1;\\n            \"; } o += \"\\n        \\\">\\n            \"; if(data.isInnerClose) { closeButton(data.hasCloseButton); } o += \"\\n        </div>\\n    </div>\\n</div>\\n\\n\"; function closeButton(exist) { o += \"\\n    \"; if (exist) { o += \"\\n        <style>\\n            .popupbox a.popupbox-close\\n            {\\n                width: 34px;\\n                height: 35px;\\n                overflow: hidden;\\n                background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAABICAYAAAB86kzAAAAIr0lEQVRo3s1Ye0zVdRSXx8UJjmxRJqQUjtu8XFils41YZsMs70TBVpmi4iuZlDpzqOQqkpmFky0DX6MmSpbT1cz8yzZHtdncaD4XJbNF8iydDxTMTuf8Ot9f5/7e9/qo73bg3t/vfM/3c7/n8f2ez4ABLmPBggVKHkGpQDmIchTlT5aj/KyCdeScAV4HALgrocFilFYU8Cit8+fPn4VTY1huHgwaLUD5KQIQRvkZQU0RoGKiAoOGXjcaX7FiBTQ2NsKJEyfg7NmzcOPGDU3oMz2jd6RjnDdv3rxyNBnnBsgSDBrYJo0tX74cDh8+rC3sNkiHdGmOAVA9mo5HibUDZAKDE1dLIzU1NXDt2jWIdNAcmittlZSUvIlL+OwAhYHBCSE5effu3XCzg2xImzNnzizCpRKsABnB6BmzadMmT27x4jaypexiQJ/FpRKtdkgHQ6koA7W3txdu1SBbMrBnzJjxCi45iGNID2odDCr9opQpAI2jubkZcnJyYO7cuXDlypWwd/SdntN70rMaZFPsThsumYwyUGTZP2BQIU8plpeXm9xz7Ngx8Pv9MGzYMCgrK4MtW7boQU3/S0tLwefzQWFhIVRWVsKpU6cs3UW21TqoG8L1k4S7dDBvK6W9e/eaDLW1tcGUKVNg6dKlsHbtWk02b94MHR0dsHjxYoiPj4eCggLt+Y4dO+DChQuWu0O2hauqcf0hvDta7Cgwh5TS6dOnLQ2dO3cOqqurdTAkS5YsgcGDB8PkyZO17w0NDXDx4kXb2Dl58qQOZs6cOU0I4F7enXgJpk0pnT9/3tZYZ2cnbNiwIQwQ7Qz9p+p7+fJlx0Am26IIdiKAVI6dBAmmTyldv37d0WBLS4vmewmotrYWenp6XLOKbIua048A0lHuVq6KCExfX5+2E0OHDoVly5bpYKqqqrR4oPcRghmJksJpHuvZTVevXoWFCxdCXFycFiOUNRs3btQB0XcqbqTnxU1YCroQgB/lPi6CcQrM104BTHUEa4OWNZRVKkYoy+rr68NcRoCMdcgqgIuLi79HAA+jDOUg/gcMLlTplNo0qI5MnTrVFKzd3d2mLLMbMrWLioq2W4LBLXtSKa1atcr2TKKFdu7cCZcuXQp73t7eDuvXr3cEQjbJtlonNzd3kaWbKHhQ4Ten40ANuzpCdchpyOMArxI9uObjlgFMH1ChRB6U0dxhnO428qDMz89/H9d8zDK1+aBKoONdXiFu1ZBXCKy8VOyeQsmyLHoMJh7Pixdu9+UqLy/vHVxrLLvIfBwwGDqsBs6ePbtSTqZfFe21U+4IyaRJkxpxjXEoQZQHLA9KHrF8nCfhVjYYu4KmpibPF3LSNXYJ06ZNO4S2J3CsZHDgmq8QPGL4okNIk9Fl69xaFTXcWhXckU/Q5kR2D6Xz/baXKwEmhv1HqTYEL0AleLr+Gm0ThzvchfXkXd6RsVzk0tg99tdOAUi5K5HTLg1BrcTC2BYJiPHjx9fi3BDHyGO8I2ls0/lCbgEogScN4W19CH/l81jG67DdOIKB3iLOmTPTp09vDoVCu4LB4BJ2yTjeDQrWh9jGELbp3qrY7NAg9m8KZwClZADlUV4sF+UJllx+9ijrjOQ5KWxjkOcmzgZQPAcaRf5dXBuoWI3gxTLZBX7+PJLfpbLuXTx3YMTtrQUglWU+ASqZfX8PH3RS7uF3yQKEL+rG3waQ3KkEXmQQx0ASSyI/G8g6cieip0SsmCsLYLH8i6XERgLABIb+/F/k/wfGaezJyZHyCEoFykGUoyh/shzlZxWso8+JaLiBofdotBilFQU8Suun2dkRk4yOYNBoAcpPEYAIk89ycn5GUJ5JRlswaOx1o/Ev8/Ohed06aP/mG/gDW4+/8MpAQp/pGb0jHeO8T7KzPZGMlmDQwDZpbP/TT8OZPXu0hd0G6ZAuzZE2dmdnu5KMJjA4cbU00lRaCtdtGjPHdhbn0Fxpa2cw6EgyhoHBCSE5+Qfsh252kA1pc3sgYEsyGsHoGfPta695cosXt5EtEdS2JKMOhlJRBmq/oXO8mUG2ZGBvHTXKkmTUwaDSL0qZAvBWk4xkU9nHH25JMqqilqcUD0ycaHKPIhkfSEyEiqws+OiNN0wkY0JsLMx88EHYGArBabygW7mLbKt11mdmmkhGBeZtpXS8psaSZCyaMAHeCgahdswYTerXrPmXZIyJgZfS07Xnn+NV9GJnp+XukG3hKhPJqMAcUkqdR45YGmrH5r521iwdDEn5s89Css8HL44YoX3/YtEiuNzVZRs7Hd99p4NpCAZNJKMC06aUem1+lUYy4k7UYWxIQKsDAe3//rIy6P39d2e2HG2LImgiGRWYPqV0o7/fmWT88UeoRJdJQLsKC+G8aOxsO060LVLcRDJGBEaRjKlJSWHxUzd2LByoqoJ+F5LRAkwYR+PZTYpkpGClGNk0ejR89MwzOiD6vnXlSkeSUbqpMTvbRDJqYBDl104BrEhGH6bvy5w1FCMdx4/Dp5jW0mXbysttSUYZwPWBgIlkVGAqnVKbBtWRGVhHjMHag9nzoSGo7YZM7fcyM7dbgsEte1IpffXcc7Znkpa+uBNXurtNaf8Bp73TGUW21Trz0tIWWbqJggd35zen40ANuzrS7kIyyuMAm3JLklEHg3eNEnlQRnOHcbrbyINyeXq6JcmowGgkIx3v8gpxq4a8QmDltSUZJZj4bYHAC7f7crUwLc2WZJRgNJLx46ysSjmZflW01065IyRrMjIcSUZ509NJxh3BYIOxK2jdt8/zhZx0jV1Ctd/vSjJKMGEkIx7x69xaFTXcWhXcEU8koxFMGMmIF6AS7Hl+jbaJwx3umpua6plkNLYqliQjglqJhbEtEhCvDh8eMclo1cTZkoz4K59/3++vw3bjCAZ6izhnztSNGtX8ZkbGrkkpKVGTjHbt7X9CMjo1/necZHSjRO4oyeiF2LtjJGNEzNXtJhn/BkNB/ubmupeRAAAAAElFTkSuQmCC) left top no-repeat;\\n                *background-image: url(/_imgs/evc/block/high/btn_close.png);\\n                position: absolute;\\n                right: -15px;\\n                top: -10px;\\n                cursor: pointer;\\n                text-indent: -5000px;\\n            }\\n        </style>\\n        <a class=\\\"popupbox-close\\\" title=\\\"Close\\\">Close</a>\\n    \"; } o += \"\\n\"; } o += \"\\n<style>\\n    style\\n    {\\n        display: none;\\n    }\\n    /*\\n    * Animation for pop effect\\n    */\\n    /* No animation */\\n    .popupbox-in\\n    {\\n        visibility: visible;\\n    }\\n    .popupbox-out\\n    {\\n        visibility: hidden;\\n    }\\n    /* With animation */\\n    .popupbox-pop {\\n        -webkit-transform-origin: 50% 50%;\\n        -moz-transform-origin: 50% 50%;\\n    }\\n    .popupbox-pop.popupbox-in {\\n        visibility: visible;\\n        opacity: 1;\\n        -webkit-transform: scale(1);\\n\\n        -webkit-animation-name: popin;\\n        -moz-animation-name: popin;\\n        -webkit-animation-duration: 200ms;\\n        -moz-animation-duration: 200ms;\\n        -webkit-animation-timing-function: ease-out;\\n        -moz-animation-timing-function: ease-out;\\n    }\\n    .popupbox-pop.popupbox-out {\\n        visibility: visible;\\n        opacity: 0;\\n        -webkit-transform: scale(.8);\\n\\n        -webkit-animation-name: popout;\\n        -moz-animation-name: popout;\\n        -webkit-animation-duration: 100ms;\\n        -moz-animation-duration: 100ms;\\n        -webkit-animation-timing-function: ease-in;\\n        -moz-animation-timing-function: ease-in;\\n    }\\n    @-webkit-keyframes popin {\\n        from {\\n            -webkit-transform: scale(.8);\\n            opacity: 0;\\n        }\\n        to {\\n            -webkit-transform: scale(1);\\n            opacity: 1;\\n        }\\n    }\\n    @-webkit-keyframes popout {\\n        from {\\n            -webkit-transform: scale(1);\\n            opacity: 1;\\n        }\\n        to {\\n            -webkit-transform: scale(.8);\\n            opacity: 0;\\n        }\\n    }\\n    /* evc style */\\n    .popupbox-cover,\\n    .popupbox\\n    {\\n        position: \" + (data.position || \"fixed\") + \";\\n        left: 0;\\n        top: 0;\\n        width: 100%;\\n        height: 100%;\\n        overflow: hidden;\\n    }\\n    .popupbox-main,\\n    .popupbox-content\\n    {\\n        position: relative;\\n    }\\n    .popupbox-main\\n    {\\n        overflow-y: auto;\\n        overflow-x: hidden;\\n    }\\n    .popupbox-content\\n    {\\n        -webkit-transition: margin-top .3s ease-out;\\n        -moz-transition: margin-top .3s ease-out;\\n        -o-transition: margin-top .3s ease-out;\\n        transition: margin-top .3s ease-out;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/popupbox/main',[\"module\", \"jquery\", \"template!./index.html\"], function(module, $, template) {\n    'use strict';\n\n    function keySupport() {\n        var ua = navigator.userAgent;\n        return ua.indexOf(\"Windows NT\") >= 0 || ua.indexOf(\"Macintosh\") >= 0;\n    }\n\n    function cssAnimate($el, noAnimation) {\n        if (!$el || $el.length <= 0) {\n            return {\n                \"popIn\": $.noop,\n                \"popOut\": $.noop\n            };\n        }\n        // Add animate CSS?\n        if (noAnimation) {\n            $el.removeClass(\"popupbox-pop\");\n        } else {\n            $el.addClass(\"popupbox-pop\");\n        }\n        return {\n            \"popIn\": function() {\n                $el.removeClass(\"popupbox-out\").addClass(\"popupbox-in\");\n            },\n            \"popOut\": function() {\n                $el.removeClass(\"popupbox-in\").addClass(\"popupbox-out\");\n            }\n        };\n    }\n\n    var Popupbox = function(args) {\n        this.el = args.el || \"body\";\n        this.body = this.el === \"body\" ? true : false;\n        this.msg = args.msg || \"\";\n        // overLap: \"cancel\"/\"replace\"/\"overlap\"\n        this.overLap = args.overLap || \"replace\";\n        // stick at top of the popup\n        this.stick = args.stick || false;\n        // In stick mode, keep a gap to top\n        this.stickTop = args.stickTop || 0;\n        // Gap between object element & popup box(e.g. Show Header while popup)\n        this.top = args.top || 0;\n        // Support animation?\n        this.noAnimation = args.noAnimation || false;\n        // styling\n        this.bgColor = args.bgColor || \"#000\";\n        this.opacity = args.opacity || 0.6;\n        this.zIndex = args.zIndex || 1;\n        this.fullSize = args.fullSize || false;\n        // button options\n        this.closeble = args.closeble || false;\n        this.closeButtonHide = args.closeButtonHide || false;\n        this.closeButtonList = args.closeButtonList || [];\n        this.closeInner = args.closeInner || false;\n        this.closeCallback = args.closeCallback || $.noop;\n    };\n\n    Popupbox.prototype = {\n        \"open\": function() {\n            var me = this;\n            var deferred = $.Deferred();\n            var $container = $(me.el);\n\n            function evClose() {\n                // Attach close buttons events\n                if (me.closeButtonList.length > 0) {\n                    // Read all the buttons\n                    $.each(me.closeButtonList, function(i, el) {\n                        // Events\n                        me.$popupBox.on(\"click\", el, function(e) {\n                            e.preventDefault();\n                            me.close();\n                        });\n                    });\n                }\n            }\n\n            function escClose() {\n                var $keySupportInput = me.$popupBoxCover.find(\"input.popupbox-keysupport\");\n                if ($keySupportInput.length > 0) {\n                    $keySupportInput.focus().keydown(function(e) {\n                        if (e.which == 27) {\n                            me.close();\n                        }\n                        e.preventDefault();\n                    });\n                }\n            }\n\n            function resize() {\n                $(window).resize(function(e) {\n                    me.centralize();\n                });\n            }\n\n            // If the container doesn't exist, use body instead.\n            if ($container.length <= 0) {\n                $container = $(\"body\");\n            }\n            // overlap\n            var $existPopupBox = $container.find(\" > div.popupbox, > div.popupbox-cover\");\n            if ($existPopupBox.length > 0) {\n                if (me.overLap === \"cancel\") {\n                    deferred.reject();\n                    return deferred.promise();\n                } else if (me.overLap === \"replace\") {\n                    $existPopupBox.remove();\n                }\n            }\n            // Generate the html\n            me.$popupBoxWrapper = $(template({\n                \"position\": me.body ? \"fixed\" : \"absolute\",\n                \"bgColor\": me.bgColor,\n                \"opacity\": me.opacity,\n                \"zIndex\": me.zIndex,\n                \"top\": me.top,\n                \"fullSize\": me.fullSize,\n                \"keySupport\": keySupport(),\n                \"hasCloseButton\": (me.closeble && !me.closeButtonHide),\n                \"isInnerClose\": me.closeInner\n            }));\n            me.$popupBoxCover = me.$popupBoxWrapper.filter(\".popupbox-cover\");\n            me.$popupBox = me.$popupBoxWrapper.filter(\".popupbox\");\n            me.$popupBoxMain = me.$popupBox.find(\".popupbox-main\");\n            me.$popupBoxContent = me.$popupBox.find(\".popupbox-content\");\n\n            // Register window resize event\n            if (!me.stick) {\n                resize();\n            }\n            // Append Content, use 'prepend' to make 'close button' render at the end.\n            me.$popupBoxContent.prepend(me.msg);\n            // Append to DOM\n            me.$popupBoxWrapper.appendTo($container);\n            // Append close button\n            if (me.closeble) {\n                me.closeButtonList.push(\"a.popupbox-close\");\n                // Attach close events\n                evClose();\n                // Attach ESC key event\n                escClose();\n            }\n            // +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ //\n            // Centralize the content\n            me.centralize();\n            // Show popup box\n            if (me.noAnimation) {\n                // Show Cover\n                me.$popupBoxCover.show();\n                // Show Content\n                cssAnimate(me.$popupBoxContent, true).popIn();\n                // Resolve\n                deferred.resolve(me.$popupBoxContent);\n            } else {\n                // Show Cover\n                me.$popupBoxCover.fadeIn(400, function() {\n                    // Show Content after Cover showed\n                    cssAnimate(me.$popupBoxContent).popIn();\n                    // Resolve\n                    deferred.resolve(me.$popupBoxContent);\n                });\n            }\n            return deferred.promise();\n        },\n        \"close\": function(noCallback) {\n            var me = this;\n            var deferred = $.Deferred();\n\n            function callback() {\n                if (!noCallback) {\n                    me.closeCallback();\n                }\n            }\n            if (me.noAnimation) {\n                // Hide Content\n                cssAnimate(me.$popupBoxContent, true).popOut();\n                // Hide Cover\n                me.$popupBoxCover.hide();\n                // Run close callback\n                callback();\n                // Remove popup elements\n                me.$popupBoxWrapper.remove();\n                // Resolve\n                deferred.resolve($);\n            } else {\n                // Hide Content\n                cssAnimate(me.$popupBoxContent).popOut();\n                window.setTimeout(function() {\n                    // Hide Cover after Content hid\n                    me.$popupBoxCover.fadeOut(200, function() {\n                        // Run close callback after cover hid\n                        callback();\n                        // Remove popup elements\n                        me.$popupBoxWrapper.remove();\n                        // Resolve\n                        deferred.resolve($);\n                    });\n                }, 100);\n            }\n            return deferred.promise();\n        },\n        \"centralize\": function() {\n            var me = this;\n            // $out: Cover\n            var $out = me.$popupBox;\n            // $in: Content\n            var $in = me.$popupBoxContent;\n            // Get height of both container & content\n            var hOut = $out.height();\n            var hIn = $in.outerHeight();\n            // calculate: keep top while stick, otherwise centralize the content in vertical\n            var mTop = me.stick ? me.stickTop : Math.floor((hOut - hIn) / 2);\n            // Never hide or be cut\n            mTop = mTop < 0 ? 0 : mTop;\n            // Apply to dom\n            $in.css(\"margin-top\", mTop);\n            return me;\n        }\n    };\n    return Popupbox;\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-cp20/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"studyplan-cancel-action clearfix\\\">\\n    <button class=\\\"evc-studyplan-cancel-btn\\\" role=\\\"button\\\" data-action=\\\"cancelBooking\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568585\\\" data-toggle=\\\"tooltip\\\" data-placement=\\\"bottom\\\" title=\\\"Cancel Class\\\"></button>\\n</div>\\n<div class=\\\"gud studyplan-cancel-confirm clearfix\\\">\\n    <div class=\\\"gud studyplan-cancel-confirm-content\\\">\\n        <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"18748\\\"></p>\\n        <button class=\\\"btn btn-default btn-sm\\\" role=\\\"button\\\" data-action=\\\"confirmCancel\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568588\\\"></button>\\n        <button class=\\\"btn btn-secondary btn-sm\\\" role=\\\"button\\\" data-action=\\\"keepBooking\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568589\\\"></button>\\n    </div>\\n</div>\\n<style type=\\\"text/css\\\">\\n.studyplan-cancel-action .tooltip-arrow{\\n    border-bottom-color:#000;\\n    border-bottom-color: rgba(0, 0, 0, 0.9);\\n}\\n.studyplan-cancel-action .tooltip-inner{\\n    padding: 10px;\\n    max-width: 260px;\\n    background: #000;\\n    background: rgba(0, 0, 0, 0.9);\\n}\\n.studyplan-cancel-confirm {\\n    display: none;\\n}\\n.studyplan-cancel-confirm-content {\\n    display: inline-block;\\n    border: 1px solid #4a4a4a;\\n    padding: 30px 40px;\\n    background-color: #fff;\\n    background-color: rgba(255, 255, 255, 0.8);\\n    text-align: center;\\n}\\n.studyplan-cancel-confirm-content button {\\n    margin: 0 10px;\\n}\\n.studyplan-cancel-confirm-content p {\\n    font-size: 1.4em;\\n    font-weight: bold;\\n    text-align: center;\\n}\\n.evc-studyplan-cancel-btn{\\n    border:none;\\n    border-bottom: 1px solid #000;\\n    background: none;\\n    padding: 0;\\n}\\n.evc-studyplan-cancel-btn:hover{\\n    color:#333;\\n    border-bottom: 1px solid #333;\\n}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/cancel-cp20/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"troopjs-ef/command/service\",\n    \"troopjs-data/cache/component\",\n    \"school-ui-studyplan/widget/gl-pl/popupbox/main\",\n    \"template!./index.html\"\n], function(Widget, $, CommandService, Cache, Popupbox, template) {\n    \"use strict\";\n\n    var STATUS_START_STARTED = \"started\";\n\n    var CSS_CLASS_POPUP_CONTAINER = \".ets-sp-init\";\n    var COMMAND;\n\n    var DAYOFWEEK_ARR = [\n        [\"Sunday\", \"78946\"],\n        [\"Monday\", \"78940\"],\n        [\"Tuesday\", \"78941\"],\n        [\"Wednesday\", \"78942\"],\n        [\"Thusday\", \"78943\"],\n        [\"Friday\", \"78944\"],\n        [\"Saterday\", \"78945\"]\n    ];\n    var MONTH_ARR = [\n        [\"January\", \"77396\"],\n        [\"February\", \"77397\"],\n        [\"March\", \"77398\"],\n        [\"April\", \"77399\"],\n        [\"May\", \"77400\"],\n        [\"June\", \"77401\"],\n        [\"July\", \"77402\"],\n        [\"August\", \"77403\"],\n        [\"September\", \"77404\"],\n        [\"October\", \"77405\"],\n        [\"November\", \"77406\"],\n        [\"December\", \"77407\"]\n    ];\n\n    function eventsHandling($el, eType, callback) {\n        var hooked = false;\n        return {\n            'unhook': function() {\n                $el.unbind(eType);\n                hooked = false;\n            },\n            'hook': function() {\n                if (hooked) {\n                    return;\n                }\n                $el.bind(eType, callback);\n                hooked = true;\n            }\n        };\n    }\n\n    return Widget.extend(function() {\n        \n    }, {\n        \"hub:memory/studyplan/evc/cp20/status\": function(dataLesson) {\n            var me = this;\n\n            if (!dataLesson || !dataLesson.bookedClass || !dataLesson.bookedClass.classId) {\n                return;\n            }\n\n            me.classId = dataLesson.bookedClass.classId;\n\n            // Return while class already open.\n            if(dataLesson.countdown.timeIn <= 0){\n                return;\n            }\n            // Render\n            me.html(template);\n            me.showNotice(dataLesson);\n        },\n        \"showNotice\": function(dataLesson) {\n            var me = this;\n            var $me = me.$element;\n            var $cancel = $me.find(\".evc-studyplan-cancel-btn\");\n\n            var cancelTime = dataLesson.suggestedCancelTime;\n            var timezone = \"UTC \" + cancelTime.timezone;\n\n            var strTime;\n\n            if (cancelTime.minute > 9) {\n                strTime = cancelTime.hour + \":\" + cancelTime.minute;\n            } else {\n                strTime = cancelTime.hour + \":0\" + cancelTime.minute;\n            }\n\n            me.publish(\"query\", [\n                \"blurb!\" + DAYOFWEEK_ARR[cancelTime.dayOfWeek][1],\n                \"blurb!\" + MONTH_ARR[(cancelTime.month - 1)][1],\n                \"blurb!\" + \"639584\"\n            ]).spread(function(cancelWeek, cancelMonth, cancelContext) {\n\n                var _cancelWeek = cancelWeek.translation;\n                var _cancelMonth = cancelMonth.translation;\n                var notice = cancelContext.translation;\n\n                // show the cancel notice (start time > 1 day)\n                var canceltime = strTime + \", \" + _cancelWeek + \" \" + _cancelMonth + \" \" + cancelTime.day;\n                notice = notice.replace(\"%%Canceltime%%\", canceltime).replace(\"%%timezone%%\", timezone);\n\n                // init tooltips\n                $cancel.attr(\"title\", notice);\n                $cancel.tooltip();\n\n            });\n        },\n        \"hub:memory/studyplan/evc/cp20/start-status\": function(status) {\n            var me = this;\n            var $me = me.$element;\n            status === STATUS_START_STARTED && $me.remove();\n        },\n        \"dom:[data-action=cancelBooking]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            var $me = me.$element;\n            var msg = $me.find(\".studyplan-cancel-confirm\").html();\n\n            // Popup form init\n            me.popupbox = new Popupbox({\n                el: CSS_CLASS_POPUP_CONTAINER,\n                zIndex: 160,\n                msg: msg,\n                bgColor: \"#fff\",\n                closeble: true,\n                closeButtonHide: true\n            });\n            me.popupbox.open().then(function($popup) {\n                // Event Handling\n                var $keepBooking = $popup.find(\"button[data-action='keepBooking']\");\n                eventsHandling($keepBooking, 'click', function(e) {\n                    e.preventDefault();\n                    me.popupbox.close();\n                }).hook();\n\n                var $confirmCancel = $popup.find(\"button[data-action='confirmCancel']\");\n                eventsHandling($confirmCancel, 'click', function(e) {\n                    e.preventDefault();\n                    me.popupbox.close();\n                    var args = {\n                        \"classId\": me.classId\n                    };\n                    me.publish(\"/commands/classes/cancel\", args).then(function() {\n                        // Publish cancel status to school\n                        me.publish(\"studyplan/sequence/update\");\n                        // Reload current studyplan content\n                        me.publish(\"studyplan/sequence-container/reload\");\n                    });\n                }).hook();\n            });\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/cancel-pl/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"studyplan-cancel-action clearfix\\\">\\n    <button class=\\\"evc-studyplan-cancel-btn\\\" role=\\\"button\\\" data-action=\\\"cancelBooking\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568585\\\" data-toggle=\\\"tooltip\\\" data-placement=\\\"bottom\\\" title=\\\"Cancel Class\\\"></button>\\n</div>\\n<div class=\\\"gud studyplan-cancel-confirm clearfix\\\">\\n    <div class=\\\"gud studyplan-cancel-confirm-content\\\">\\n        <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"18748\\\"></p>\\n        <button class=\\\"btn btn-default btn-sm\\\" role=\\\"button\\\" data-action=\\\"confirmCancel\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568588\\\"></button>\\n        <button class=\\\"btn btn-secondary btn-sm\\\" role=\\\"button\\\" data-action=\\\"keepBooking\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568589\\\"></button>\\n    </div>\\n</div>\\n<style type=\\\"text/css\\\">\\n.studyplan-cancel-action .tooltip-arrow{\\n    border-bottom-color:#000;\\n    border-bottom-color: rgba(0, 0, 0, 0.9);\\n}\\n.studyplan-cancel-action .tooltip-inner{\\n    padding: 10px;\\n    max-width: 260px;\\n    background: #000;\\n    background: rgba(0, 0, 0, 0.9);\\n}\\n.studyplan-cancel-confirm {\\n    display: none;\\n}\\n.studyplan-cancel-confirm-content {\\n    display: inline-block;\\n    border: 1px solid #4a4a4a;\\n    padding: 30px 40px;\\n    background-color: #fff;\\n    background-color: rgba(255, 255, 255, 0.8);\\n    text-align: center;\\n}\\n.studyplan-cancel-confirm-content button {\\n    margin: 0 10px;\\n}\\n.studyplan-cancel-confirm-content p {\\n    font-size: 1.4em;\\n    font-weight: bold;\\n    text-align: center;\\n}\\n.evc-studyplan-cancel-btn{\\n    border:none;\\n    border-bottom: 1px solid #000;\\n    background: none;\\n    padding: 0;\\n}\\n.evc-studyplan-cancel-btn:hover{\\n    color:#333;\\n    border-bottom: 1px solid #333;\\n}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/cancel-pl/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"troopjs-ef/command/service\",\n    \"troopjs-data/cache/component\",\n    \"school-ui-studyplan/widget/gl-pl/popupbox/main\",\n    \"template!./index.html\"\n], function(Widget, $, CommandService, Cache, Popupbox, template) {\n    \"use strict\";\n\n    var STATUS_START_STARTED = \"started\";\n\n    var CSS_CLASS_POPUP_CONTAINER = \".ets-sp-init\";\n    var COMMAND;\n\n    var DAYOFWEEK_ARR = [\n        [\"Sunday\", \"78946\"],\n        [\"Monday\", \"78940\"],\n        [\"Tuesday\", \"78941\"],\n        [\"Wednesday\", \"78942\"],\n        [\"Thusday\", \"78943\"],\n        [\"Friday\", \"78944\"],\n        [\"Saterday\", \"78945\"]\n    ];\n    var MONTH_ARR = [\n        [\"January\", \"77396\"],\n        [\"February\", \"77397\"],\n        [\"March\", \"77398\"],\n        [\"April\", \"77399\"],\n        [\"May\", \"77400\"],\n        [\"June\", \"77401\"],\n        [\"July\", \"77402\"],\n        [\"August\", \"77403\"],\n        [\"September\", \"77404\"],\n        [\"October\", \"77405\"],\n        [\"November\", \"77406\"],\n        [\"December\", \"77407\"]\n    ];\n\n    function eventsHandling($el, eType, callback) {\n        var hooked = false;\n        return {\n            'unhook': function() {\n                $el.unbind(eType);\n                hooked = false;\n            },\n            'hook': function() {\n                if (hooked) {\n                    return;\n                }\n                $el.bind(eType, callback);\n                hooked = true;\n            }\n        };\n    }\n\n    return Widget.extend(function() {\n    }, {\n        \"hub:memory/studyplan/evc/pl/status\": function(dataLesson) {\n            var me = this;\n\n            if (!dataLesson || !dataLesson.bookedClass || !dataLesson.bookedClass.classId) {\n                return;\n            }\n\n            me.classId = dataLesson.bookedClass.classId;\n\n            // Return while class already open.\n            if(dataLesson.countdown.timeIn <= 0){\n                return;\n            }\n            // Render\n            me.html(template);\n            me.showNotice(dataLesson);\n        },\n        \"showNotice\": function(dataLesson) {\n            var me = this;\n            var $me = me.$element;\n            var $cancel = $me.find(\".evc-studyplan-cancel-btn\");\n\n            var cancelTime = dataLesson.suggestedCancelTime;\n            var timezone = \"UTC \" + cancelTime.timezone;\n\n            var strTime;\n\n            if (cancelTime.minute > 9) {\n                strTime = cancelTime.hour + \":\" + cancelTime.minute;\n            } else {\n                strTime = cancelTime.hour + \":0\" + cancelTime.minute;\n            }\n\n            me.publish(\"query\", [\n                \"blurb!\" + DAYOFWEEK_ARR[cancelTime.dayOfWeek][1],\n                \"blurb!\" + MONTH_ARR[(cancelTime.month - 1)][1],\n                \"blurb!\" + \"568586\"\n            ]).spread(function(cancelWeek, cancelMonth, cancelContext) {\n\n                var _cancelWeek = cancelWeek.translation;\n                var _cancelMonth = cancelMonth.translation;\n                var notice = cancelContext.translation;\n\n                // show the cancel notice (start time > 1 day)\n                var canceltime = strTime + \", \" + _cancelWeek + \" \" + _cancelMonth + \" \" + cancelTime.day;\n                notice = notice.replace(\"%%Canceltime%%\", canceltime).replace(\"%%timezone%%\", timezone);\n\n                // init tooltips\n                $cancel.attr(\"title\", notice);\n                $cancel.tooltip();\n\n            });\n        },\n        \"hub:memory/studyplan/evc/pl/start-status\": function(status) {\n            var me = this;\n            var $me = me.$element;\n            status === STATUS_START_STARTED && $me.remove();\n        },\n        \"dom:[data-action=cancelBooking]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            var $me = me.$element;\n            var msg = $me.find(\".studyplan-cancel-confirm\").html();\n\n            // Popup form init\n            me.popupbox = new Popupbox({\n                el: CSS_CLASS_POPUP_CONTAINER,\n                zIndex: 160,\n                msg: msg,\n                bgColor: \"#fff\",\n                closeble: true,\n                closeButtonHide: true\n            });\n            me.popupbox.open().then(function($popup) {\n                // Event Handling\n                var $keepBooking = $popup.find(\"button[data-action='keepBooking']\");\n                eventsHandling($keepBooking, 'click', function(e) {\n                    e.preventDefault();\n                    me.popupbox.close();\n                }).hook();\n\n                var $confirmCancel = $popup.find(\"button[data-action='confirmCancel']\");\n                eventsHandling($confirmCancel, 'click', function(e) {\n                    e.preventDefault();\n                    me.popupbox.close();\n                    var args = {\n                        \"classId\": me.classId\n                    };\n                    me.publish(\"/commands/classes/cancel\", args).then(function() {\n                        // Publish cancel status to school\n                        me.publish(\"studyplan/sequence/update\");\n                        // Reload current studyplan content\n                        me.publish(\"studyplan/sequence-container/reload\");\n                    });\n                }).hook();\n            });\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/checkpoint20/index.html',[],function() { return function template(data) { var o = \"\";\nvar statusCode = data.statusCode;\nvar unitId = data.unitId;\n\nvar STATUS_WELCOME = \"welcome\";\nvar STATUS_NEVERTAKE = \"nevertake\";\nvar STATUS_BOOKED = \"booked\";\nvar STATUS_DROPOUT = \"dropout\";\nvar STATUS_PENDING = \"pending\";\nvar STATUS_ATTENDED = \"attended\";\no += \"\\n<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/announcement/cp20\\\"></div>\\n<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/statusbar/cp20\\\"></div>\\n<div class=\\\"evc-studyplan-wrapper\\\">\\n\\t\"; if(statusCode === STATUS_WELCOME) { o += \"\\n\\t\\t<div class=\\\"evc-studyplan-column-single evc-studyplan-welcome\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/welcome-cp20/main\\\"></div>\\n\\t\"; } else { o += \"\\n\\t\\t<div class=\\\"evc-studyplan-column-full\\\"></div>\\n\\t\\t\"; if(statusCode !== STATUS_NEVERTAKE && statusCode !== STATUS_DROPOUT) {o += \"\\n\\t\\t\\t<div class=\\\"evc-studyplan-column-single\\\">\\n\\t\\t\\t\\t<div class=\\\"evc-studyplan-gap-2x\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/lesson/cp20\\\"></div>\\n\\t\\t\\t\\t\"; if(statusCode !== STATUS_PENDING && statusCode !== STATUS_ATTENDED){ o += \"\\n\\t\\t\\t\\t\\t<div class=\\\"evc-studyplan-gap-1x evc-studyplan-class-info\\\"></div>\\n\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t</div>\\n\\t\\t\"; } o += \"\\n\\t\\t<div class=\\\"evc-studyplan-activity-container\\\">\\n\\t\\t</div>\\n\\t\"; } o += \"\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n\\t.evc-studyplan-wrapper{\\n\\t\\ttext-align: center;\\n\\t\\tpadding: 30px 0 50px;\\n\\t\\tcolor: #4a4a4a;\\n\\t}\\n\\t.evc-studyplan-column-full{\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\t.evc-studyplan-column-single{\\n\\t\\tdisplay: inline-block;\\n\\t\\twidth: 980px;\\n\\t}\\n\\t.evc-studyplan-column-single hr{\\n\\t\\tmargin-bottom: 0;\\n\\t}\\n\\t.evc-studyplan-gap-2x{\\n\\t\\ttext-align: left;\\n\\t\\twidth: 620px;\\n\\t\\tpadding-left: 35px;\\n\\t\\tpadding-right: 35px;\\n\\t\\tvertical-align: top;\\n\\t\\tdisplay: inline-block;\\n\\t\\tmargin: 20px auto;\\n\\t}\\n\\t.evc-studyplan-gap-1x{\\n\\t\\ttext-align: left;\\n\\t\\twidth: 330px;\\n\\t\\tvertical-align: top;\\n\\t\\tmargin: auto;\\n\\t\\tpadding-left: 30px;\\n\\t\\tdisplay: inline-block;\\n\\t\\tborder-left:1px #eee solid;\\n\\t}\\n\\t.evc-studyplan-gap-1x .evc-studyplan-gap-block{\\n\\t\\tmargin-bottom: 15px;\\n\\t}\\n\\t.st-evc-status{\\n\\t\\tcolor: #4a4a4a;\\n\\t\\tbackground-color: #e6e6e6;\\n\\t}\\n\\t.evc-studyplan-gray{\\n\\t\\tcolor:#999999;\\n\\t}\\n\\t.evc-studyplan-green{\\n\\t\\tcolor:#87c600;\\n\\t}\\n\\t.evc-studyplan-blue{\\n\\t\\tcolor: #00bee3;\\n\\t}\\n\\t.evc-none{\\n\\t\\tdisplay: none;\\n\\t}\\n\\t.evc-studyplan-activity-container {\\n\\t\\twidth:880px;\\n\\t\\tmargin:0 auto;\\n\\t}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/checkpoint20/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"troopjs-browser/component/widget\",\n\t\"school-ui-studyplan/module\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"school-ui-studyplan/utils/time-parser\",\n\t\"template!./index.html\"\n], function (when, $, Widget, module, clientStorage, timeParser, template) {\n\t\"use strict\";\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t\tuseLegacyUnitId: true\n\t}, module.config() || {});\n\n\tvar $ELEMENT = \"$element\";\n\tvar ITEM = \"_item\";\n\n\tvar STATUS_NEVERTAKE = \"nevertake\";\n\tvar STATUS_BOOKED = \"booked\";\n\tvar STATUS_DROPOUT = \"dropout\";\n\tvar STATUS_PENDING = \"pending\";\n\tvar STATUS_ATTENDED = \"attended\";\n\n\tvar STATUS_WELCOME = \"welcome\";\n\t//use the same code as PL\n\tvar STATUS_OPTIONAL_MSG_CP20 = \"optional_msg_pl\";\n\n\tvar STATUS_START_NOT_YET = \"notyet\";\n\tvar STATUS_START_IN_COUNTDOWN = \"incountdown\";\n\tvar STATUS_START_STARTED = \"started\";\n\n\tvar WIDGET_COUNTDOWN = \"school-ui-studyplan/widget/gl-pl/countdown/cp20\",\n\t\tWIDGET_CLASS_STATUS = \"school-ui-studyplan/widget/gl-pl/class-status/cp20\",\n\t\tWIDGET_FEEDBACK = \"school-ui-studyplan/widget/gl-pl/feedback/cp20\",\n\t\tWIDGET_FEEDBACK_PENDING = \"school-ui-studyplan/widget/gl-pl/feedback-pending/main\",\n\t\tWIDGET_ENTER_CLASS = \"school-ui-studyplan/widget/gl-pl/enter-class/cp20\",\n\t\tWIDGET_BOOKED = \"school-ui-studyplan/widget/gl-pl/book-cp20/main\",\n\t\tWIDGET_DROPOUT = \"school-ui-studyplan/widget/gl-pl/dropout-cp20/main\",\n\t\tWIDGET_CANCEL = \"school-ui-studyplan/widget/gl-pl/cancel-cp20/main\";\n\n\tvar SEL_ACTIVITY_CONTAINER = \".evc-studyplan-activity-container\",\n\t\tSEL_INFO_CONTAINER = \".evc-studyplan-class-info\",\n\t\tSEL_ENTER_CLASS = \".ets-sp-glpl-enter-class\";\n\n\tvar CLS_GAP_2X = \"evc-studyplan-gap-2x text-center\",\n\t\tCLS_GAP = \"evc-studyplan-gap-block\",\n\t\tCLS_ENTER_CLASS = \"ets-sp-glpl-enter-class\",\n\t\tCLS_NONE = \"ets-none\";\n\n\tvar UNIT_ID = \"_unit_id\";\n\tvar CLASS_ID = \"_class_id\";\n\n\tvar UNIT_ID_KEY = MODULE_CONFIG.useLegacyUnitId ? \"legacyUnitId\" : \"templateUnitId\"\n\n\tvar TOPIC_PIC_PATH = MODULE_CONFIG.cacheServer + \"/_imgs/evc/pl/topic/100x100/\";\n\tvar PL_DEFAULT_PIC = MODULE_CONFIG.cacheServer + \"/_imgs/evc/pl/pl_default_100x100.png\";\n\n\tvar DURATION_WAITING = 3000;\n\n\tvar TIMER_WAITING = \"_timer_waiting\";\n\n\tfunction createWidget(widgetName, appendToContainer, classNames) {\n\t\tvar me = this;\n\t\tvar $widgetElement = $(\"<div>\");\n\n\t\tif (widgetName === WIDGET_ENTER_CLASS) {\n\t\t\t$widgetElement.attr(\"data-weave\", widgetName + \"(unitId, classId)\")\n\t\t\t\t.data(\"classId\", me[CLASS_ID]);\n\t\t} else {\n\t\t\t$widgetElement.attr(\"data-weave\", widgetName + \"(unitId)\");\n\t\t}\n\t\treturn $widgetElement\n\t\t\t.addClass(classNames || \"\")\n\t\t\t.data(\"unitId\", me[UNIT_ID])\n\t\t\t.appendTo(me.$element.find(appendToContainer))\n\t\t\t.weave();\n\t}\n\n\treturn Widget.extend(function ($element, name, item) {\n\t\tvar me = this;\n\n\t\tif (!item && !item.properties) {\n\t\t\treturn;\n\t\t}\n\n\t\tme[ITEM] = item;\n\n\t\t// Show Optional Msg\n\t\tme.closeOptionalTips = clientStorage.getLocalStorage(\"cp20_tips\") === \"closed\";\n\t\t// A defer for pl status, for hide skip link\n\t\tme.cpStatusDeferred = when.defer();\n\t}, {\n\t\t\"hub:memory/load/unit\": function (unit) {\n\t\t\tvar me = this;\n\t\t\tif (!unit || !unit[UNIT_ID_KEY]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme.unitId = unit[UNIT_ID_KEY];\n\n\t\t\tme.publish(\"query\", [\"member_site_setting!evc;FirstTimeStudyPlanCP20\"]).spread(function (data) {\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (data.value.toString() === \"true\") {\n\t\t\t\t\tme.publish(\"studyplan/evc/cp20/load\");\n\t\t\t\t} else {\n\t\t\t\t\tme.html(template, {\n\t\t\t\t\t\t\"unitId\": me.unitId,\n\t\t\t\t\t\t\"statusCode\": STATUS_WELCOME\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/cp20/start-status\": function (status) {\n\t\t\tvar me = this;\n\t\t\tswitch (status) {\n\t\t\t\tcase STATUS_START_NOT_YET:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_IN_COUNTDOWN:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_STARTED:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).removeClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/evc/cp20/load\": function () {\n\t\t\tvar me = this;\n\t\t\tme[UNIT_ID] = me.unitId;\n\n\t\t\twhen.all([\n\t\t\t\tme.publish(\"query\", [\"checkpointstate!cp20;\" + me.unitId]),\n\t\t\t\tme.publish(\"query\", [me[ITEM].id + \".progress\"])\n\t\t\t]).spread(function success(cpStateData, itemData) {\n\n\t\t\t\tvar cpState = cpStateData[0];\n\t\t\t\tvar item = itemData[0];\n\n\t\t\t\tif (!cpState || !cpState.topic || !cpState.statusCode) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar content = {};\n\t\t\t\tvar topic = cpState.topic;\n\t\t\t\tvar statusCode = cpState.statusCode.toLowerCase();\n\t\t\t\t// Resolve pl status\n\t\t\t\tme.cpStatusDeferred.resolver.notify(statusCode);\n\n\t\t\t\t// Copy & package own/customize PL class Info\n\t\t\t\tcontent.status = {\n\t\t\t\t\t\"statusCode\": statusCode\n\t\t\t\t};\n\n\t\t\t\tcontent.lessonInfo = {\n\t\t\t\t\t\"topic\": topic.topicBlurbId,\n\t\t\t\t\t\"description\": topic.descBlurbId,\n\t\t\t\t\t\"image\": topic.imageUrl ? (TOPIC_PIC_PATH + topic.imageUrl) : PL_DEFAULT_PIC\n\t\t\t\t};\n\t\t\t\tif (statusCode === STATUS_BOOKED ||\n\t\t\t\t\tstatusCode === STATUS_ATTENDED ||\n\t\t\t\t\tstatusCode === STATUS_PENDING ||\n\t\t\t\t\tstatusCode === STATUS_NEVERTAKE ||\n\t\t\t\t\tstatusCode === STATUS_DROPOUT) {\n\n\n\t\t\t\t\tvar bookedClass = cpState.bookedClass || cpState.pastClass;\n\t\t\t\t\tif (bookedClass && bookedClass.easternStartTime) {\n\t\t\t\t\t\tme[CLASS_ID] = bookedClass.classId;\n\t\t\t\t\t\t// Copy cpState\n\t\t\t\t\t\tcontent.timezoneId = bookedClass.timezoneId;\n\t\t\t\t\t\tcontent.bookedClass = {\n\t\t\t\t\t\t\t\"classId\": bookedClass.classId,\n\t\t\t\t\t\t\t\"teacherId\": bookedClass.teacherId\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontent.customizedStartTime = timeParser.toLocalTime(\n\t\t\t\t\t\t\tbookedClass.easternStartTime,\n\t\t\t\t\t\t\tbookedClass.timeZoneOffset\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (statusCode === STATUS_BOOKED) {\n\t\t\t\t\t\tif (!bookedClass || !bookedClass.easternSuggestedCancelTime || !cpState.countdown) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar countdown = cpState.countdown;\n\n\t\t\t\t\t\tcontent.countdown = {\n\t\t\t\t\t\t\t\"timeIn\": countdown.secondsLeftForStart,\n\t\t\t\t\t\t\t\"timeOut\": countdown.secondsLeftForEnter\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontent.suggestedCancelTime = timeParser.toLocalTime(\n\t\t\t\t\t\t\tbookedClass.easternSuggestedCancelTime,\n\t\t\t\t\t\t\tbookedClass.timeZoneOffset\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (statusCode === STATUS_PENDING) {\n\t\t\t\t\t\tif (!cpState.feedback) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontent.feedback = {\n\t\t\t\t\t\t\t\"teacherId\": cpState.feedback.teacherId\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse if (statusCode === STATUS_ATTENDED) {\n\t\t\t\t\t\tif (!cpState.feedback) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar feedback = cpState.feedback;\n\t\t\t\t\t\tcontent.feedback = {\n\t\t\t\t\t\t\t\"feedbackId\": feedback.feedbackId,\n\t\t\t\t\t\t\t\"teacherId\": feedback.teacherId\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tvar evcServerCode = bookedClass && bookedClass.evcServerCode || '';\n\t\t\t\t\t// Adobe classroom: \"cn1\" or \"us1\", otherwise \"EvcCN1\" or \"EvcUS1\"\n\t\t\t\t\tvar isAdobeClassroom = evcServerCode.toLowerCase().indexOf('evc') < 0;\n\t\t\t\t\tif (!isAdobeClassroom) {\n\t\t\t\t\t\t// simulate techcheck passed\n\t\t\t\t\t\tclientStorage.setSessionStorage(\"techcheck_state\", \"passed\");\n\t\t\t\t\t}\n\n\t\t\t\t\t// Render\n\t\t\t\t\tme.html(template, {\n\t\t\t\t\t\t\"unitId\": me.unitId,\n\t\t\t\t\t\t\"statusCode\": statusCode\n\t\t\t\t\t}).then(function () {\n\t\t\t\t\t\tme[$ELEMENT].find(SEL_INFO_CONTAINER).empty();\n\t\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_CONTAINER).empty();\n\n\t\t\t\t\t// Publish status\n\t\t\t\t\tme.publish(\"studyplan/evc/cp20/status\", content);\n\t\t\t\t\t// clear the class status as not yet\n\t\t\t\t\tme.publish(\"studyplan/evc/cp20/start-status\", STATUS_START_NOT_YET);\n\t\t\t\t\t// publish token\n\t\t\t\t\tme.publish(\"studyplan/evc/cp20/enter-token\", item.progress.properties.token);\n\n\t\t\t\t\t\t// Publish status to show optional msg\n\t\t\t\t\t\tif (!me.closeOptionalTips) {\n\t\t\t\t\t\t\tme.publish(\"studyplan/evc/cp20/notification\", {\n\t\t\t\t\t\t\t\t\"statusCode\": STATUS_OPTIONAL_MSG_CP20\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tswitch (statusCode.toLowerCase()) {\n\t\t\t\t\t\t\tcase STATUS_NEVERTAKE:\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_BOOKED, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase STATUS_DROPOUT:\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_DROPOUT, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase STATUS_BOOKED:\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_COUNTDOWN, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CLASS_STATUS, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_ENTER_CLASS, SEL_INFO_CONTAINER, CLS_GAP + \" \" + CLS_ENTER_CLASS + \" \" + CLS_NONE);\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CANCEL, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase STATUS_ATTENDED:\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase STATUS_PENDING:\n\t\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK_PENDING, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/class-status/class-status.html',[],function() { return function template(data) { var o = \"<div class=\\\"evc-studyplan-class-tips \" + (data.classname ? data.classname : \"\") + \"\\\">\\n    <i class=\\\"\" + (data.icon ? data.icon : \"glyphicon icon-comment\") + \"\\\"></i>\\n    <span   data-weave=\\\"troopjs-ef/blurb/widget\\\" \\n            data-text-en=\\\"\" +data.en+ \"\\\" \\n            data-blurb-id=\\\"\" +data.blurbId+ \"\\\" >\\n    </span>\\n</div>\\n<style>\\n    .evc-studyplan-class-tips{\\n        font-family: \\\"roboto_condensedbold\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n        text-transform: uppercase;\\n        font-size: 18px;\\n    }\\n    .evc-studyplan-class-tips .glyphicon {\\n\\t    margin-right: 10px;\\n    }\\n    .evc-studyplan-class-tips *{\\n        vertical-align: middle;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/class-status/cp20',[\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./class-status.html\"\n\t], function(Widget, clientStorage, tClassStatus){\n\n\tvar UNITID = \"_unitId\";\n\tvar STATUS = \"_statusCode\";\n    var STATUS_BOOKED = \"booked\";\n    var STATUS_START_IN_COUNTDOWN = \"incountdown\";\n    var STATUS_START_STARTED = \"started\";\n\n\tvar CASE = {\n\t\ttckNoPass: {\n\t\t\t\"BOOKED\" : {blurbId : \"568587\", en : \"Class booked\", classname : \"evc-studyplan-green\"},\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"656134\", en : \"Classroom is open but you cannot enter\", classname : \"evc-studyplan-blue\"}\n\t\t},\n\t\ttckPassed: {\n\t\t\t\"BOOKED\" : {blurbId : \"568587\", en : \"Class booked\", classname : \"evc-studyplan-green\"},\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"568579\", en : \"Classroom is open\", classname : \"evc-studyplan-blue\"}\n\t\t}\n\t};\n\n\n\treturn Widget.extend(function(element, path, unitId){\n\t\tvar me = this;\n\t\tme[UNITID] = unitId;\n\t},{\n\t\t\"sig/initialize\" : function(){\n\t\t\tvar me = this;\n\t\t\treturn me.query(\"checkpointstate!cp20;\" + me[UNITID]).spread(function(data){\n\t\t\t\tme[STATUS] = data.statusCode.toLowerCase();\n\t\t\t\tif(me[STATUS] === STATUS_BOOKED){\n\t\t\t\t\treturn me.render(\"BOOKED\");\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/cp20/start-status\" : function(status){\n\t\t\tvar me = this;\n\t\t\tif(me[STATUS] === STATUS_BOOKED){\n\t\t\t\tif(status === STATUS_START_STARTED){\n\t\t\t\t\tme.render(\"OPEN\");\n\t\t\t\t}\n\t\t\t\telse if(status === STATUS_START_IN_COUNTDOWN){\n\t\t\t\t\tme.render(\"CLOSED\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"render\" : function(type){\n\t\t\tvar subCase = clientStorage.getSessionStorage(\"techcheck_state\") === \"passed\" ? CASE.tckPassed : CASE.tckNoPass;\n\t\t\tif(subCase[type]){\n\t\t\t\treturn this.html(tClassStatus, subCase[type]);\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/class-status/gl',[\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./class-status.html\"\n], function (Widget, clientStorage, tClassStatus) {\n\n\tvar CASE = {\n\t\ttckNoPass: {\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"656134\", en : \"Classroom is open but you cannot enter\", classname : \"evc-studyplan-blue\"}\n\t\t},\n\t\ttckPassed: {\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"568579\", en : \"Classroom is open\", classname : \"evc-studyplan-blue\"}\n\t\t}\n\t};\n\n\tvar STATUS_START_STARTED = \"started\";\n\n\treturn Widget.extend({\n\t\t\"hub:memory/studyplan/evc/gl/start-status\": function (status) {\n\t\t\tvar me = this;\n\t\t\tvar subCase = clientStorage.getSessionStorage(\"techcheck_state\") === \"passed\" ? CASE.tckPassed : CASE.tckNoPass;\n\t\t\tif (status === STATUS_START_STARTED) {\n\t\t\t\tme.html(tClassStatus, subCase.OPEN);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tme.html(tClassStatus, subCase.CLOSED);\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/class-status/pl',[\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./class-status.html\"\n\t], function(Widget, clientStorage, tClassStatus){\n\n\tvar UNITID = \"_unitId\";\n\tvar STATUS = \"_statusCode\";\n\n    var STATUS_BOOKED = \"booked\";\n    var STATUS_START_IN_COUNTDOWN = \"incountdown\";\n    var STATUS_START_STARTED = \"started\";\n\n\tvar CASE = {\n\t\ttckNoPass: {\n\t\t\t\"BOOKED\" : {blurbId : \"568587\", en : \"Class booked\", classname : \"evc-studyplan-green\"},\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"656134\", en : \"Classroom is open but you cannot enter\", classname : \"evc-studyplan-blue\"}\n\t\t},\n\t\ttckPassed: {\n\t\t\t\"BOOKED\" : {blurbId : \"568587\", en : \"Class booked\", classname : \"evc-studyplan-green\"},\n\t\t\t\"CLOSED\" : {blurbId : \"656133\", en : \"Classroom not open\", classname : \"evc-studyplan-gray\"},\n\t\t\t\"OPEN\" : {blurbId : \"568579\", en : \"Classroom is open\", classname : \"evc-studyplan-blue\"}\n\t\t}\n\t};\n\n\n\treturn Widget.extend(function(element, path, unitId){\n\t\tvar me = this;\n\t\tme[UNITID] = unitId;\n\t},{\n\t\t\"sig/initialize\" : function(){\n\t\t\tvar me = this;\n\t\t\treturn me.query(\"plclass!\" + me[UNITID]).spread(function(data){\n\t\t\t\tme[STATUS] = data.statusCode.toLowerCase();\n\t\t\t\tif(me[STATUS] === STATUS_BOOKED){\n\t\t\t\t\treturn me.render(\"BOOKED\");\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/pl/start-status\" : function(status){\n\t\t\tvar me = this;\n\t\t\tif(me[STATUS] === STATUS_BOOKED){\n\t\t\t\tif(status === STATUS_START_STARTED){\n\t\t\t\t\tme.render(\"OPEN\");\n\t\t\t\t}\n\t\t\t\telse if(status === STATUS_START_IN_COUNTDOWN){\n\t\t\t\t\tme.render(\"CLOSED\");\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"render\" : function(type){\n\t\t\tvar subCase = clientStorage.getSessionStorage(\"techcheck_state\") === \"passed\" ? CASE.tckPassed : CASE.tckNoPass;\n\t\t\tif(subCase[type]){\n\t\t\t\treturn this.html(tClassStatus, subCase[type]);\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown-scoreboard/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"countdown-scoreboard text-center clearfix\\\">\\n    <div class=\\\"countdown-scoreboard-boards pull-left\\\">\\n        <ol class=\\\"boards-container\\\">\\n            <li class=\\\"countdown-scoreboard-board hh\\\">\\n                <div class=\\\"top\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"top-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <span class=\\\"hh\\\">HOUR</span>\\n            </li>\\n            <li class=\\\"board-separator\\\"></li>\\n            <li class=\\\"countdown-scoreboard-board mm\\\">\\n                <div class=\\\"top\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"top-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <span class=\\\"mm\\\">MIN</span>\\n            </li>\\n            <li class=\\\"board-separator\\\"></li>\\n            <li class=\\\"countdown-scoreboard-board ss\\\">\\n                <div class=\\\"top\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"top-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <div class=\\\"bottom-animation\\\">\\n                    <span class=\\\"tens disabled\\\">0</span>\\n                    <span class=\\\"ones disabled\\\">0</span>\\n                </div>\\n                <span class=\\\"ss\\\">SEC</span>\\n            </li>\\n        </ol>\\n    </div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n.countdown-scoreboard, .countdown-scoreboard .countdown-scoreboard-boards li, .countdown-scoreboard .countdown-scoreboard-labels li {\\n    display: inline-block;\\n    *display: inline;\\n    *zoom: 1;\\n}\\n.countdown-scoreboard {\\n    position: relative;\\n    font-family: Arial;\\n    text-align: center;\\n}\\n.countdown-scoreboard .countdown-scoreboard-boards {\\n    position: relative;\\n}\\n.countdown-scoreboard ol, .countdown-scoreboard ul {\\n    margin: 0;\\n    list-style: none;\\n}\\n.countdown-scoreboard .boards-container {\\n    border-radius: 4px;\\n    position: relative;\\n}\\n.countdown-scoreboard .countdown-scoreboard-boards li {\\n    font-size: 0px;\\n    text-align: center;\\n    vertical-align: middle;\\n}\\n.countdown-scoreboard .countdown-scoreboard-board,\\n.countdown-scoreboard .countdown-scoreboard-board div,\\n.countdown-scoreboard .countdown-scoreboard-board span {\\n    width: 38px;\\n    height: 31px;\\n    line-height: 29px;\\n    margin-bottom: 10px;\\n}\\n.countdown-scoreboard .countdown-scoreboard-board {\\n    position:relative;\\n    -webkit-perspective: 5em;\\n    -moz-perspective: 5em;\\n    -ms-perspective: 5em;\\n    -o-perspective: 5em;\\n    perspective: 5em;\\n    text-align:center;\\n}\\n.countdown-scoreboard .countdown-scoreboard-board div {\\n    height: 50%;\\n    overflow: hidden;\\n    position:absolute;\\n    left:0;\\n}\\n.countdown-scoreboard .countdown-scoreboard-board span {\\n    width: auto;\\n    color: #000;\\n    font-size : 18px;\\n    font-family: \\\"roboto_condensedbold\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n    font-weight: bold;\\n}\\n.countdown-scoreboard .board-separator {\\n    width: 0px;\\n    border-right: 1px solid #828275;\\n    height: 32px;\\n    vertical-align: middle;\\n}\\n.countdown-scoreboard .top,\\n.countdown-scoreboard .top-animation {\\n    border-top-left-radius: 4px;\\n    border-top-right-radius: 4px;\\n    top: 0;\\n}\\n.countdown-scoreboard .bottom,\\n.countdown-scoreboard .bottom-animation {\\n    border-bottom-left-radius: 4px;\\n    border-bottom-right-radius: 4px;\\n    top: 50%;\\n}\\n.countdown-scoreboard .top span,\\n.countdown-scoreboard .top-animation span,\\n.countdown-scoreboard .bottom span,\\n.countdown-scoreboard .bottom-animation span {\\n    height: 200%;\\n    position: relative;\\n}\\n.countdown-scoreboard .bottom span,\\n.countdown-scoreboard .bottom-animation span {\\n    top: -100%;\\n}\\n.countdown-scoreboard .top-animation,\\n.countdown-scoreboard .bottom-animation {\\n    visibility: hidden;\\n}\\n.countdown-scoreboard .top-animation.animation,\\n.countdown-scoreboard .bottom-animation.animation {\\n    visibility: visible;\\n}\\n@keyframes countdownScoreboardBottom {\\n    from {\\n        transform: rotateX(0);\\n    }\\n    to {\\n        transform: rotateX(90deg);\\n    }\\n}\\n@-webkit-keyframes countdownScoreboardBottom {\\n    from {\\n        -webkit-transform: rotateX(0);\\n    }\\n    to {\\n        -webkit-transform: rotateX(90deg);\\n    }\\n}\\n@-moz-keyframes countdownScoreboardBottom {\\n    from {\\n        -moz-transform: rotateX(0);\\n    }\\n    to {\\n        -moz-transform: rotateX(90deg);\\n    }\\n}\\n@-ms-keyframes countdownScoreboardBottom {\\n    from {\\n        -ms-transform: rotateX(0);\\n    }\\n    to {\\n        -ms-transform: rotateX(90deg);\\n    }\\n}\\n@-o-keyframes countdownScoreboardBottom {\\n    from {\\n        -o-transform: rotateX(0);\\n    }\\n    to {\\n        -o-transform: rotateX(90deg);\\n    }\\n}\\n@keyframes countdownScoreboardTop {\\n    from {\\n        transform: rotateX(-90deg);\\n    }\\n    to {\\n        transform: rotateX(0);\\n    }\\n}\\n@-webkit-keyframes countdownScoreboardTop {\\n    from {\\n        -webkit-transform: rotateX(-90deg);\\n    }\\n    to {\\n        -webkit-transform: rotateX(0);\\n    }\\n}\\n@-ms-keyframes countdownScoreboardTop {\\n    from {\\n        -ms-transform: rotateX(-90deg);\\n    }\\n    to {\\n        -ms-transform: rotateX(0);\\n    }\\n}\\n@-o-keyframes countdownScoreboardTop {\\n    from {\\n        -o-transform: rotateX(-90deg);\\n    }\\n    to {\\n        -o-transform: rotateX(0);\\n    }\\n}\\n.countdown-scoreboard .bottom-animation.animation {\\n    -webkit-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\\n    -moz-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\\n    -ms-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\\n    -o-animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\\n    animation: countdownScoreboardBottom 0.2s linear 0s forwards 1;\\n    -webkit-transform-origin: 0 top;\\n    -moz-transform-origin: 0 top;\\n    -ms-transform-origin: 0 top;\\n    -o-transform-origin: 0 top;\\n    transform-origin: 0 top;\\n}\\n.countdown-scoreboard .top-animation {\\n    -webkit-transform: rotateX(-90deg);\\n    -moz-transform: rotateX(-90deg);\\n    -ms-transform: rotateX(-90deg);\\n    -o-transform: rotateX(-90deg);\\n    transform: rotateX(-90deg);\\n}\\n.countdown-scoreboard .top-animation.animation {\\n    -webkit-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\\n    -moz-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\\n    -ms-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\\n    -o-animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\\n    animation: countdownScoreboardTop 0.3s ease-out 0.2s forwards 1;\\n    -webkit-transform-origin: 0 bottom;\\n    -moz-transform-origin: 0 bottom;\\n    -mstransform-origin: 0 bottom;\\n    -o-transform-origin: 0 bottom;\\n    transform-origin: 0 bottom;\\n}\\n.countdown-scoreboard .boards-axis {\\n    width: 149px;\\n    height: 1px;\\n    position: absolute;\\n    left: 3px;\\n    top: 17px;\\n    background: #eee;\\n    opacity: 0.5;\\n}\\n.countdown-scoreboard .countdown-scoreboard-labels li {\\n    font-size: 9px;\\n}\\n.countdown-scoreboard .countdown-scoreboard-board .hh,\\n.countdown-scoreboard .countdown-scoreboard-board .ss,\\n.countdown-scoreboard .countdown-scoreboard-board .mm {\\n    font-size : 10px;\\n    width: 38px;\\n    position: relative;\\n    bottom:-18px;\\n    margin-bottom: 0;\\n}\\n/*.countdown-scoreboard .button,*/\\n.countdown-scoreboard div.countdown-scoreboard-action {\\n    position: relative;\\n}\\n.countdown-scoreboard div.countdown-scoreboard-action button.countdown-scoreboard-tips {\\n    display: none;\\n    color: #56c2d5;\\n    background-color: #fff;\\n    cursor: default;\\n}\\n.countdown-scoreboard .countdown-scoreboard-tips-icon {\\n    transform: scaleX(-1);\\n    -o-transform: scaleX(-1);\\n    -moz-transform: scaleX(-1);\\n    -webkit-transform: scaleX(-1);\\n}\\n.countdown-scoreboard .countdown-scoreboard-tips-txt {\\n    white-space: nowrap;\\n    text-transform: uppercase;\\n}\\n.countdown-scoreboard div.countdown-scoreboard-action button.countdown-scoreboard-enter {\\n    display: none;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main',['jquery',\n    'template!./index.html'\n], function($, template) {\n    'use strict';\n\n    var UNDEF;\n\n    var DAY_MAX_SECONDS = 24 * 60 * 60;\n    var timeProcessor = {\n        convertToObject: function(seconds) {\n            return {\n                hh: this.extractDigits((seconds / 3600) >>> 0),\n                mm: this.extractDigits(((seconds % 3600) / 60) >>> 0),\n                ss: this.extractDigits(seconds % 60)\n            };\n        },\n        extractDigits: function(number) {\n            if (number < 10) {\n                return {\n                    ones: number,\n                    tens: 0\n                };\n            }\n            var digits = ('' + number).split('');\n            return {\n                ones: digits[1] >>> 0,\n                tens: digits[0] >>> 0\n            };\n        },\n        updateDigits: function(seconds) {\n\n        }\n    };\n\n    function animationSupport($el) {\n        var animation = false,\n            animationstring = 'animation',\n            keyframeprefix = '',\n            domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),\n            pfx = '';\n        var elm = $el[0];\n\n        if (elm.style.animationName) {\n            animation = true;\n        }\n\n        if (animation === false) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n                    pfx = domPrefixes[i];\n                    animationstring = pfx + 'Animation';\n                    keyframeprefix = '-' + pfx.toLowerCase() + '-';\n                    animation = true;\n                    break;\n                }\n            }\n        }\n        return animation;\n    }\n\n    function scoreboard(options) {\n        options = $.extend({\n            finished: false,\n            paused: false\n        }, options);\n\n        // fix width and position for different languages\n        var $el = options.$el;\n        var removeNeeded = false;\n        if (!$.contains(document.body, $el[0])) {\n            removeNeeded = true;\n            $el.appendTo('body');\n        }\n\n        var $boards = $el.find('.countdown-scoreboard-boards');\n        var $enter = $el.find('.countdown-scoreboard-enter');\n        var $waitting = $el.find('.countdown-scoreboard-waitting');\n        $enter.css('left', 0);\n\n        if (removeNeeded) {\n            $el.remove();\n        }\n\n        // ATEAM-873 - study plan bar shaking when count down is counting\n        var animationSupported = false; //animationSupport($el);\n        if (animationSupported) {\n            $el.on('animationend webkitAnimationEnd msAnimationend oAnimationEnd', '.animation', function() {\n                var $this = $(this).removeClass('animation');\n                if ($this.is('.bottom-animation')) {\n                    $this.siblings('.top-animation').html($this.siblings('.bottom').html());\n                }\n                if ($this.is('.top-animation')) {\n                    $this.siblings('.top').html($this.html());\n                }\n            });\n        } else {\n            $el.find('.top-animation, .bottom-animation').remove();\n        }\n\n        return {\n            $el: $el,\n            disabled: false,\n\n            checkPoints: {\n                afterEnd: {},\n                beforeEnd: {}\n            },\n            secondTimer : UNDEF,\n            afterEndTimer : [],\n            timeoutTimer : UNDEF,\n            timeIn: options.timeIn,\n            enterClickHandler: $.noop,\n            secondsLeft: options.timeIn,\n            timeOut: options.timeOut,\n            timeOutHandler: $.noop,\n            startHandler : $.noop,\n\n            afterEnd: function(seconds, f) {\n                var me = this;\n                me.checkPoints.afterEnd[seconds] = f;\n                return me;\n            },\n            beforeEnd: function(seconds, f) {\n                var me = this;\n                me.checkPoints.beforeEnd[seconds] = f;\n                return me;\n            },\n            disableEnter: function() {\n                var me = this;\n                me.disabled = true;\n                me.$el.find('.countdown-scoreboard-enter')\n                    .addClass('disabled');\n                return me;\n            },\n            onDurationEnd: function() {\n                var me = this;\n                me.finished = true;\n                var $el = me.$el;\n\n                if (me.timeOut) {\n                    me.timeoutTimer && clearTimeout(timeoutTimer);\n                    me.timeoutTimer = setTimeout(me.timeOutHandler, 1000 * (me.timeOut - me.timeIn));\n                }\n                $.each(me.checkPoints.afterEnd, function(seconds, f) {\n                    me.afterEndTimer.push(\n                        setTimeout(function() {\n                            f.apply(me);\n                        }, 1000 * seconds)\n                    );\n                });\n                return me;\n            },\n            onEnterClick: function(f) {\n                var me = this;\n                me.enterClickHandler = f;\n                return me;\n            },\n            onTimeout: function(f) {\n                var me = this;\n                me.timeOutHandler = f;\n                return me;\n            },\n            onStart : function(f){\n                var me = this;\n                me.startHandler = f;\n                return me;\n            },\n            pause: function() {\n                var me = this;\n                me.paused = true;\n                return me;\n            },\n            start: function() {\n                var me = this;\n                var $el = me.$el;\n\n                if(me.secondsLeft){\n                    // resotre the state of html and css\n                    // Initialize scoreboard UI\n                    me.updateBoards(0, me.secondsLeft);\n                    // Flip loop\n                    (function flipScoreboard() {\n                        if (me.finished || me.paused) {\n                            return;\n                        }\n                        if (me.secondsLeft === 0) {\n                            me.onDurationEnd();\n                            return;\n                        }\n\n                        var oldTime = me.secondsLeft;\n                        var newTime = --me.secondsLeft;\n                        me.updateBoards(oldTime, newTime);\n                        if (me.checkPoints.beforeEnd[me.secondsLeft]) {\n                            me.checkPoints.beforeEnd[me.secondsLeft]();\n                        }\n                        me.secondTimer = setTimeout(flipScoreboard, 1000);\n                    })();     \n                    me.startHandler();               \n                }\n                else{\n                    me.checkPoints.beforeEnd[0] && me.checkPoints.beforeEnd[0]();\n                    me.onDurationEnd();\n                }\n\n\n                return me;\n            },\n            updateBoard: function(boardName, digits) {\n                var me = this;\n                var $board = me.$el.find('.' + boardName);\n                var oldDigits = digits.oldDigits;\n                var newDigits = digits.newDigits;\n\n                $board\n                    .find('.tens').text(newDigits.tens)\n                    .end()\n                    .find('.ones').text(newDigits.ones);\n                if (animationSupported) {\n                    $board\n                        .find('.top .tens, .top-animation .tens, .bottom-animation .tens').text(oldDigits.tens)\n                        .end()\n                        .find('.top .ones, .top-animation .ones, .bottom-animation .ones').text(oldDigits.ones)\n                        .end()\n                        .find('.bottom-animation, .top-animation').addClass('animation');\n                }\n                return me;\n            },\n            updateBoards: function(oldTime, newTime) {\n                var me = this;\n                var boards = ['hh', 'mm', 'ss'];\n                var digitsStateCheckNeeded = true;\n                oldTime = timeProcessor.convertToObject(oldTime);\n                newTime = timeProcessor.convertToObject(newTime);\n                for (var i = 0; i < boards.length; i++) {\n                    var board = boards[i];\n                    var oldDigits = oldTime[board];\n                    var newDigits = newTime[board];\n                    if (newDigits.tens !== oldDigits.tens || newDigits.ones !== oldDigits.ones) {\n                        me.updateBoard(boards[i], {\n                            oldDigits: oldDigits,\n                            newDigits: newDigits\n                        });\n                    }\n\n                    // TODO: improve performance\n                    // disabled preceding zeros\n                    var digits = ['tens', 'ones'];\n                    var $digit;\n                    for (var j = 0; j < digits.length; j++) {\n                        $digit = me.$el.find('.' + board + ' .' + digits[j]);\n                        if (digitsStateCheckNeeded) {\n                            if (!newDigits[digits[j]]) {\n                                $digit.removeClass('enabled').addClass('disabled');\n                            } else {\n                                $digit.removeClass('disabled').addClass('enabled');\n                                digitsStateCheckNeeded = false;\n                            }\n                        } else {\n                            $digit.removeClass('disabled').addClass('enabled');\n                        }\n                    }\n                }\n                return me;\n            }\n        };\n    }\n\n    var w = function() {\n        var $template = $(template());\n\n        var o = {};\n        o.$el = $template.appendTo('body').remove();\n        o.init = function(options) {\n            var me = this;\n\n            if (!options) {\n                options = {};\n                throw (\"Init should have an input object.\");\n            }\n\n            var timeIn = options.timeIn;\n            var timeOut = options.timeOut;\n            if (isNaN(timeIn)) {\n                options.timeIn = DAY_MAX_SECONDS - 1;\n                throw (\"timeIn should be a number.\");\n            } else if (timeIn >= DAY_MAX_SECONDS) {\n                options.timeIn = DAY_MAX_SECONDS - 1;\n                throw (\"timeIn should little than 24 * 60 * 60.\");\n            } else if (timeIn < 0) {\n                options.timeIn = 0;\n                //throw (\"timeIn can't be a minus.\");\n            } else if (typeof timeOut === \"number\" && timeOut <= timeIn) {\n                // timeOut should greater than timeIn,\n                // or timeOut === 0\n                options.timeOut = 0;\n            }\n            // Reset timeIn to 1s\n            // Slow render Enter, waiting for blurbs\n            // if (options.timeIn === 0) {\n            //     options.timeIn = 1;\n            // }\n\n            var countdown = scoreboard($.extend(options, {\n                $el: me.$el\n            }));\n\n            //wait a single tick for onTimeout/onStart execute\n            setTimeout(function(){\n                countdown.start();\n            }, 0);\n\n            return {\n                afterEnd: function(seconds, f) {\n                    var me = this;\n                    if (seconds >= 0) {\n                        countdown.afterEnd(seconds, f);\n                    }\n                    return me;\n                },\n                beforeEnd: function(seconds, f) {\n                    var me = this;\n                    if (0 <= seconds) {\n                        if(seconds <= countdown.secondsLeft){\n                            countdown.beforeEnd(seconds, f);\n                        }\n                        else{\n                            f && f();\n                        }\n                    }\n                    return me;\n                },\n                disableEnter: function() {\n                    var me = this;\n                    countdown.disableEnter();\n                    return me;\n                },\n                onEnd: function(f) {\n                    var me = this;\n                    this.afterEnd(0, f);\n                    return me;\n                },\n                onEnterClick: function(f) {\n                    var me = this;\n                    countdown.onEnterClick(f);\n                    return me;\n                },\n                onTimeout: function(f) {\n                    var me = this;\n                    countdown.onTimeout(f);\n                    return me;\n                },\n                onStart: function(f) {\n                    var me = this;\n                    countdown.onStart(f);\n                    return me;\n                },\n                // TODO: to be continued\n                restart: function() {\n                    countdown.start();\n                },\n                //stop all the timeout\n                stop : function(){\n                    countdown.secondTimer && clearTimeout(countdown.secondTimer);\n                    countdown.timeoutTimer && clearTimeout(countdown.timeoutTimer);\n                    countdown.afterEndTimer.forEach(function(timer){\n                        clearTimeout(timer);\n                    });\n                    return this;\n                }\n            };\n        };\n        return o;\n    };\n    return w;\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/countdown/index.html',[],function() { return function template(data) { var o = \"\";\n    var time = data.time;\n    var day = data.day;\n    var timezone = data.timezone;\no += \"\\n<div class=\\\"evc-studyplan-countdown\\\">\\n    <div class=\\\"evc-studyplan-countdown-block\\\">\\n        <strong><span>\" + time + \"</span></strong><span>,</span>&nbsp;<span>\" + day + \"</span>&nbsp;<span>UTC&nbsp;\" + timezone + \"</span>\\n    </div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-countdown{\\n        font-size: 14px;\\n        display: inline-block;\\n\\t    background:#eee;\\n    }\\n    .evc-studyplan-countdown-block{\\n        display: inline-block;\\n        padding: 10px 18px;\\n    }\\n    .evc-studyplan-countdown-status{\\n        color: #fff;\\n        background-color: #bbb;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/countdown/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    \"use strict\";\n\n    var DAYOFWEEK_ARR = [\n        [\"Sunday\", \"78946\"],\n        [\"Monday\", \"78940\"],\n        [\"Tuesday\", \"78941\"],\n        [\"Wednesday\", \"78942\"],\n        [\"Thusday\", \"78943\"],\n        [\"Friday\", \"78944\"],\n        [\"Saterday\", \"78945\"]\n    ];\n    var MONTH_ARR = [\n        [\"January\", \"77396\"],\n        [\"February\", \"77397\"],\n        [\"March\", \"77398\"],\n        [\"April\", \"77399\"],\n        [\"May\", \"77400\"],\n        [\"June\", \"77401\"],\n        [\"July\", \"77402\"],\n        [\"August\", \"77403\"],\n        [\"September\", \"77404\"],\n        [\"October\", \"77405\"],\n        [\"November\", \"77406\"],\n        [\"December\", \"77407\"]\n    ];\n\n    return Widget.extend({\n        \"disableEnter\": function() {\n            var me = this;\n            if (me.countdownScoreboard) {\n                me.countdownScoreboard.disableEnter();\n            }\n        },\n        \"renderDate\": function(startTime, isDay) {\n            var me = this;\n            if (!startTime) {\n                return;\n            }\n\n            var strTime;\n            var strDay;\n\n            if (startTime.minute > 9) {\n                strTime = startTime.hour + \":\" + startTime.minute;\n            } else {\n                strTime = startTime.hour + \":0\" + startTime.minute;\n            }\n\n            if(isDay){\n                // Display full date\n                me.publish(\"query\", [\n                    \"blurb!\" + DAYOFWEEK_ARR[startTime.dayOfWeek][1],\n                    \"blurb!\" + MONTH_ARR[(startTime.month - 1)][1]\n                ]).spread(function(startWeek, startMonth) {\n                    var _startWeek = startWeek.translation;\n                    var _startMonth = startMonth.translation;\n                    strDay = _startWeek + \" \" + _startMonth + \" \" + startTime.day;\n                    // Render Template\n                    me.html(template, {\n                        time: strTime,\n                        day: strDay,\n                        timezone: startTime.timezone\n                    });\n                });\n            }\n            else{\n                me.publish(\"query\", [\"blurb!103048\"]).spread(function(day) {\n                    // Render\n                    strDay = day.translation || \"Today\";\n                    me.html(template, {\n                        time: strTime,\n                        day: strDay,\n                        timezone: startTime.timezone\n                    });\n                });\n            }\n\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/countdown/cp20',[\"jquery\",\n    \"./main\",\n    \"school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main\"\n], function($, CountdownBase, CountdownScoreboard) {\n    \"use strict\";\n\n    var HOUR_SECONDES = 1 * 60 * 60; // 1hr\n\n    var STATUS_START_NOT_YET = \"notyet\";\n    var STATUS_START_IN_COUNTDOWN = \"incountdown\";\n    var STATUS_START_STARTED = \"started\";\n\n    return CountdownBase.extend({\n        \"sig/stop\" : function(){\n            var me = this;\n            me.countdownScoreboard && me.countdownScoreboard.stop();\n        },\n        \"render\": function(data) {\n            var me = this;\n            if (!data) {\n                return;\n            }\n            var countdownScoreboard = new CountdownScoreboard();\n            me.html(countdownScoreboard.$el);\n\n            var timeIn = data.countdown.timeIn;\n            var timeOut = data.countdown.timeOut;\n\n            me.publish(\"studyplan/evc/cp20/start-status\", STATUS_START_IN_COUNTDOWN);\n\n            //detect need to show or not\n            me.$element.toggleClass(\"evc-none\", timeIn === 0);\n\n            // Init countdown\n            me.countdownScoreboard = countdownScoreboard.init({\n                \"timeIn\": timeIn,\n                \"timeOut\": timeOut\n            }).onTimeout(function() {\n                me.publish(\"studyplan/evc/cp20/load\");\n            }).onEnd(function() {\n                me.$element.addClass(\"evc-none\");\n                // Publish class started.\n                me.publish(\"studyplan/evc/cp20/start-status\", STATUS_START_STARTED);\n            });\n\n        },\n        \"hub:memory/studyplan/evc/cp20/status\": function(dataLesson) {\n            var me = this;\n            if (!dataLesson || !dataLesson.customizedStartTime || !dataLesson.suggestedCancelTime) {\n                return;\n            }\n            // Properties\n            me.lesson = dataLesson;\n            me.customizedStartTime = dataLesson.customizedStartTime;\n            me.suggestedCancelTime = dataLesson.suggestedCancelTime;\n            me.timezoneId = dataLesson.timezoneId;\n            me.lessonMinutesOfDay = me.customizedStartTime.hour * 60 + me.customizedStartTime.minute;\n            me.lessonSecondsOfDay = me.lessonMinutesOfDay * 60;\n            // Is Today?\n            // All time caculation in PL in seconds\n            if (dataLesson.countdown.timeIn > me.lessonSecondsOfDay) {\n                me.onemoreDayLesson();\n            } else if (dataLesson.countdown.timeIn > HOUR_SECONDES) {\n                me.onemoreHourLesson();\n            } else {\n                me.render(dataLesson);\n            }\n        },\n        \"onemoreDayLesson\": function() {\n            var me = this;\n            // Render in full-date view\n            me.renderDate(me.customizedStartTime, true);\n        },\n        \"onemoreHourLesson\": function(seconds) {\n            var me = this;\n            seconds = seconds || me.lesson.countdown.timeIn - HOUR_SECONDES;\n\n            // Reset timein & render as \"Countdown-Scoreboard\"...\n            window.setTimeout(function() {\n                me.render($.extend(true, me.lesson, {\n                    countdown: {\n                        timeIn: HOUR_SECONDES\n                    }\n                }));\n            }, seconds * 1000);\n\n            // Render as \"Today xxx\"\n            me.renderDate(me.customizedStartTime);\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/grouplesson/service',[\"troopjs-core/component/gadget\",\n    \"jquery\",\n    \"when\",\n    \"moment\",\n    \"school-ui-studyplan/module\"\n], function(Gadget, $, when, Moment, module) {\n    'use strict';\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t}, module.config() || {});\n\n    // TODO: Cache Server\n    var TOPIC_PIC_PATH = MODULE_CONFIG.cacheServer + \"/_imgs/evc/gl/topic/100x100/\"\n\n    return Gadget.extend(function(unitId) {\n        var me = this;\n        me.unitId = unitId;\n    }, {\n        \"get\": function() {\n            var me = this;\n            var deferred = when.defer();\n            // Get lesson data by eTroop\n            me.publish(\"query\", [\"glclass!\" + me.unitId]).spread(function(data) {\n                if (!data) {\n                    deferred.reject();\n                }\n                var topic = data.topic;\n                var countDown = data.countDown;\n                var room = data.room;\n\n                // Generate a new object to resolve\n                var lesson = {};\n                // Read & find GL lesson\n                lesson.lessonInfo = {\n                    \"topic\": topic.topicBlurb,\n                    \"description\": topic.descriptionBlurb,\n                    \"image\": TOPIC_PIC_PATH + topic.topicImageUrl\n                };\n                lesson.countdown = {\n                    \"timeIn\": countDown.secondsLeftForStart,\n                    \"timeOut\": countDown.secondsLeftForEnter,\n                    \"startTime\": Moment(countDown.classStartTime).valueOf(),\n                    \"hasClassScheduled\": countDown.hasClassScheduled\n                };\n                // TODO:\n                lesson.classroom = {\n                    \"global\": room.global,\n                    \"local\": room.local\n                };\n\n\t\t\t\tlesson.topicId = data.topic.topicId;\n\n                // Resolve generated lesson\n                deferred.resolve(lesson);\n            });\n            // Return a promise\n            return deferred.promise;\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/countdown/gl',[\"jquery\",\n    \"when\",\n    \"./main\",\n    \"../grouplesson/service\",\n    \"school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main\",\n    \"template!./index.html\"\n], function($, when, CountdownBase, LessonService, CountdownScoreboard, template) {\n    \"use strict\";\n\n    var STATUS_START_NOT_YET = \"notyet\";\n    var STATUS_START_IN_COUNTDOWN = \"incountdown\";\n    var STATUS_START_STARTED = \"started\";\n\n    return CountdownBase.extend(function($element, name, unitId) {\n        var me = this;\n        me.unitId = unitId;\n        me.creditDeferred = when.defer();\n    }, {\n        \"sig/start\": function() {\n            var me = this;\n            new LessonService(me.unitId).get().then(function(dataLesson) {\n                if (!dataLesson) {\n                    return;\n                }\n                me.render(dataLesson);\n            });\n        },\n        \"sig/stop\" : function(){\n            var me = this;\n            me.countdownScoreboard && me.countdownScoreboard.stop();\n        },\n        \"render\": function(data) {\n            var me = this;\n            if (!data) {\n                return;\n            }\n            var countdownScoreboard = new CountdownScoreboard();\n            var timeIn = data.countdown.timeIn;\n            var timeOut = data.countdown.timeOut;\n            var startTime = data.countdown.startTime;\n\n            me.publish(\"studyplan/evc/gl/start-time\", startTime);\n            me.publish(\"studyplan/evc/gl/start-status\", STATUS_START_IN_COUNTDOWN);\n\n            // NO: Do not show countdown\n            if (data.countdown.hasClassScheduled) {\n                //detect need to show or not\n                me.$element.toggleClass(\"evc-none\", timeIn === 0);\n\n                me.html(countdownScoreboard.$el);\n                me.countdownScoreboard = countdownScoreboard.init({\n                    \"timeIn\": timeIn,\n                    \"timeOut\": timeOut\n                }).onTimeout(function() {\n                    me.publish(\"studyplan/evc/gl/load\");\n                }).onEnd(function() {\n                    me.$element.addClass(\"evc-none\");\n                    me.publish(\"studyplan/evc/gl/start-status\", STATUS_START_STARTED);\n                });\n\n            }\n\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/countdown/pl',[\"jquery\",\n    \"./main\",\n    \"school-ui-studyplan/widget/gl-pl/countdown-scoreboard/main\"\n], function($, CountdownBase, CountdownScoreboard) {\n    \"use strict\";\n\n    var HOUR_SECONDES = 1 * 60 * 60; // 1hr\n\n    var STATUS_START_NOT_YET = \"notyet\";\n    var STATUS_START_IN_COUNTDOWN = \"incountdown\";\n    var STATUS_START_STARTED = \"started\";\n\n    return CountdownBase.extend({\n        \"sig/stop\" : function(){\n            var me = this;\n            me.countdownScoreboard && me.countdownScoreboard.stop();\n        },\n        \"render\": function(data) {\n            var me = this;\n            if (!data) {\n                return;\n            }\n            var countdownScoreboard = new CountdownScoreboard();\n            me.html(countdownScoreboard.$el);\n\n            var timeIn = data.countdown.timeIn;\n            var timeOut = data.countdown.timeOut;\n\n            me.publish(\"studyplan/evc/pl/start-status\", STATUS_START_IN_COUNTDOWN);\n\n            //detect need to show or not\n            me.$element.toggleClass(\"evc-none\", timeIn === 0);\n\n            // Init countdown\n            me.countdownScoreboard = countdownScoreboard.init({\n                \"timeIn\": timeIn,\n                \"timeOut\": timeOut\n            }).onTimeout(function() {\n                me.publish(\"studyplan/evc/pl/load\");\n            }).onEnd(function() {\n                me.$element.addClass(\"evc-none\");\n                // Publish class started.\n                me.publish(\"studyplan/evc/pl/start-status\", STATUS_START_STARTED);\n            });\n\n        },\n        \"hub:memory/studyplan/evc/pl/status\": function(dataLesson) {\n            var me = this;\n            if (!dataLesson || !dataLesson.customizedStartTime || !dataLesson.suggestedCancelTime) {\n                return;\n            }\n            // Properties\n            me.lesson = dataLesson;\n            me.customizedStartTime = dataLesson.customizedStartTime;\n            me.suggestedCancelTime = dataLesson.suggestedCancelTime;\n            me.timezoneId = dataLesson.timezoneId;\n            me.lessonMinutesOfDay = me.customizedStartTime.hour * 60 + me.customizedStartTime.minute;\n            me.lessonSecondsOfDay = me.lessonMinutesOfDay * 60;\n            // Is Today?\n            // All time caculation in PL in seconds\n            if (dataLesson.countdown.timeIn > me.lessonSecondsOfDay) {\n                me.onemoreDayLesson();\n            } else if (dataLesson.countdown.timeIn > HOUR_SECONDES) {\n                me.onemoreHourLesson();\n            } else {\n                me.render(dataLesson);\n            }\n        },\n        \"onemoreDayLesson\": function() {\n            var me = this;\n            // Render in full-date view\n            me.renderDate(me.customizedStartTime, true);\n        },\n        \"onemoreHourLesson\": function(seconds) {\n            var me = this;\n            seconds = seconds || me.lesson.countdown.timeIn - HOUR_SECONDES;\n\n            // Reset timein & render as \"Countdown-Scoreboard\"...\n            window.setTimeout(function() {\n                me.render($.extend(true, me.lesson, {\n                    countdown: {\n                        timeIn: HOUR_SECONDES\n                    }\n                }));\n            }, seconds * 1000);\n\n            // Render as \"Today xxx\"\n            me.renderDate(me.customizedStartTime);\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/credit/index.html',[],function() { return function template(data) { var o = \"<p class=\\\"evc-studyplan-coupon\\\">\\n    <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568613\\\"></span>&nbsp;<span>\" + data.couponLeft + \"</span>\\n    \"; if(data.canBuyMore) { o += \"\\n        <a class=\\\"evc-studyplan-coupon-buymore\\\" href=\\\"\" + data.buyUrl + \"\\\">\\n            <span class=\\\"evc-studyplan-coupon-plus\\\">+</span>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"176459\\\"></span>\\n        </a>\\n    \"; } o += \"\\n</p>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-gap-block .evc-studyplan-coupon{\\n        margin: 20px 0 0 0;\\n    }\\n    .evc-studyplan-gap-block:first-child .evc-studyplan-coupon{\\n        margin: 20px 0 20px 0;\\n    }\\n    .evc-studyplan-coupon{\\n        font-weight: bold;\\n        margin-bottom: 0;\\n        line-height: 24px;\\n\\t    text-align: left;\\n    }\\n    a.evc-studyplan-coupon-buymore, /*add \\\"a\\\" tag to increase css priority*/\\n    a.evc-studyplan-coupon-buymore:hover {\\n        text-decoration: none;\\n        color: #333;\\n        margin-left: 10px;\\n    }\\n    .evc-studyplan-coupon-plus {\\n        width: 18px;\\n        height: 18px;\\n        line-height: 18px;\\n        vertical-align: baseline;\\n        text-align: center;\\n        color: #fff;\\n        font-weight: bold;\\n        font-family: arial;\\n        font-size: 14px;\\n        display: inline-block;\\n        background-color: #81ba1a;\\n        margin-right: 5px;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/credit/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    \"use strict\";\n\n    function updateURLSearch(url, key, val) {\n        if(!url){\n            return;\n        }\n        var urlNew = \"\";\n        // Get url path with query string\n        if (url.indexOf(\"#\") !== -1) {\n            url = url.substr(0, url.indexOf(\"#\"));\n        }\n        // Update query string\n        if (url.indexOf(\"?\") !== -1) {\n            var str = url.substr(1),\n                strs = str.split(\"&\");\n            for (var i = 0, l = strs.length; i < l; i++) {\n                if (strs[i].split(\"=\")[0] === key) {\n                    urlNew = url.replace(strs[i].split(\"=\")[1], val);\n                }\n            }\n            if (!urlNew) {\n                urlNew = url + \"&\" + key + \"=\" + val;\n            }\n        }\n        if (!urlNew) {\n            urlNew = url + \"?\" + key + \"=\" + val;\n        }\n        return urlNew;\n    }\n\n    return Widget.extend({\n        \"render\": function onRender(dataCredit) {\n            var me = this;\n            if (!dataCredit) {\n                return;\n            }\n            // update upsell url with current path\n            var currentPath = location.pathname + location.search + location.hash;\n            dataCredit.buyUrl = updateURLSearch(dataCredit.buyUrl, \"upurl\", encodeURIComponent(currentPath));\n            me.html(template, dataCredit);\n        },\n        \"generateBuyMoreUrl\": function (dataCredit){\n            if(!dataCredit.buyUrl){\n                return;\n            }\n            var currentPath = location.pathname + location.search + location.hash;\n            var url = updateURLSearch(dataCredit.buyUrl, \"upurl\", encodeURIComponent(currentPath));\n            return url;\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/credit/gl',[\"jquery\",\n    \"./main\",\n    \"./service\"\n], function($, CreditBase, Credit) {\n    \"use strict\";\n\n    var STATUS_NO_COUPON_GL = \"no_coupon_gl\";\n\n    return CreditBase.extend({\n        \"sig/start\": function() {\n            var me = this;\n            new Credit().get(\"GL\").then(function(dataCredit) {\n                var credit = dataCredit.credit;\n                if (credit) {\n                    if(!credit.isUnlimitedAccess){\n                        var hasCredit = credit.couponLeft > 0 ? true : false;\n                        var link;\n                        if (!hasCredit) {\n                            // Show notice to student on the status bar\n                            if(credit.canBuyMore && credit.buyUrl){\n                                link = me.generateBuyMoreUrl(credit);\n                            }\n                            me.publish(\"studyplan/evc/gl/notification\", {\n                                \"statusCode\": STATUS_NO_COUPON_GL,\n                                \"link\": link\n                            });\n                        }\n                        me.publish(\"studyplan/evc/gl/credit\", hasCredit);\n\n                        me.render(credit);\n                    }\n                    else{\n                        me.publish(\"studyplan/evc/gl/credit\", true);\n                    }\n                }\n            });\n\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/credit/pl',[\"jquery\",\n    \"./main\",\n    \"./service\"\n], function($, CreditBase, Credit) {\n    \"use strict\";\n\n    var STATUS_NO_COUPON_PL = \"no_coupon_pl\";\n\n    return CreditBase.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            new Credit().get(\"PL\").then(function(dataCredit) {\n                if (!dataCredit) {\n                    return;\n                }\n                var credit = dataCredit.credit;\n                var link;\n                if(credit.couponLeft <= 0){\n                    if(credit.canBuyMore && credit.buyUrl){\n                        link = me.generateBuyMoreUrl(credit);\n                    }\n                    me.publish(\"studyplan/evc/pl/notification\", {\n                        \"statusCode\": STATUS_NO_COUPON_PL,\n                        \"link\": link\n                    });\n                }\n                me.render(credit);\n            });\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/credit/sppl20',[\"jquery\",\n    \"./main\",\n    \"./service\"\n], function($, CreditBase, Credit) {\n    \"use strict\";\n\n    var STATUS_NO_COUPON_PL = \"no_coupon_pl\";\n\n    return CreditBase.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            new Credit().get(\"PL20\").then(function(dataCredit) {\n                if (!dataCredit) {\n                    return;\n                }\n                var credit = dataCredit.credit;\n                var link;\n                if(credit.couponLeft <= 0){\n                    if(credit.canBuyMore && credit.buyUrl){\n                        link = me.generateBuyMoreUrl(credit);\n                    }\n                    me.publish(\"studyplan/evc/pl/notification\", {\n                        \"statusCode\": STATUS_NO_COUPON_PL,\n                        \"link\": link\n                    });\n                }\n                me.render(credit);\n            });\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/dropout-cp20/index.html',[],function() { return function template(data) { var o = \"\";\n\tvar bookUrl = data.bookUrl;\no += \"\\n<div class=\\\"evc-studyplan-btn-book\\\">\\n\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639519\\\" data-text-en=\\\"You missed your private lesson\\\"></h2>\\n\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639583\\\" data-text-en=\\\"Either you didn't show up or you canceled your Private Class too late.\\\"></p>\\n\\t<div class=\\\"evc-studyplan-btn-warp\\\">\\n\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639513\\\" data-text-en=\\\"Unfortunately, you cannot book a private lesson again. If you believe this was a mistake, please get in touch with us.\\\"></p>\\n\\t\\t<button class=\\\"btn btn-default\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"639514\\\" data-text-en=\\\"Continue\\\"></button>\\n\\t</div>\\n</div>\\n<style type=\\\"text/css\\\">\\n\\t.evc-studyplan-activity-container .evc-studyplan-gap-2x {\\n\\t\\tpadding: 0;\\n\\t\\tmargin: 0;\\n\\t\\twidth: 660px;\\n\\t}\\n\\t.evc-studyplan-btn-book{\\n\\t\\tpadding: 30px 20px;\\n\\t\\tcolor: #555555;\\n\\t\\tbackground-color: #f0f0f0;\\n\\t}\\n\\t.evc-studyplan-btn-book h2 {\\n\\t\\tmargin-bottom: 10px;\\n\\t}\\n\\t.evc-studyplan-btn-book .btn{\\n\\t\\tdisplay: inline-block;\\n\\t\\tmargin: 10px 8px;\\n\\t}\\n\\t.evc-studyplan-btn-book p {\\n\\t\\tfont-size: 1.3em;\\n\\t}\\n\\t.evc-studyplan-btn-warp {\\n\\t\\tmargin-top: 20px;\\n\\t}\\n\\tp.text-muted {\\n\\t\\tmargin-top: 8px;\\n\\t}\\n\\t.text-muted a {\\n\\t\\tcolor: #999;\\n\\t\\ttext-decoration: underline;\\n\\t}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/dropout-cp20/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./index.html\"\n], function($, Widget, template) {\n\t\"use strict\";\n\n\tvar PL_BOOK_URL = \"/school/evc/pl/unitaligned\";\n\tvar KEY = \"SP\";\n\treturn Widget.extend(function($element, widgetName, unitId) {\n\t\tvar me = this;\n\t\t// get parameters\n\t\tme.unitId = unitId;\n\t}, {\n\t\t\"sig/start\": function() {\n\t\t\tvar me = this;\n\n\t\t\tif (!me.unitId) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar tempData = {};\n\t\t\ttempData.bookUrl = PL_BOOK_URL +\n\t\t\t\t\"/\" + me.unitId +\n\t\t\t\t\"?source=\" + encodeURIComponent(location.href) +\n\t\t\t\t\"&key=\" + KEY +\n\t\t\t\t\"#booking\";\n\n\t\t\tme.html(template, tempData);\n\t\t},\n\t\t\"dom:.btn-default/click\": function skipCp(){\n\t\t\tvar me = this;\n\t\t\tme.publish(\"studyplan/sequence/navigate/goal\");\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/enter-class/enter-class.html',[],function() { return function template(data) { var o = \"\";\n  var data = data || {};\no += \"\\n<div class=\\\"evc-studyplan-enter\\\">\\n\\t<button class=\\\"btn btn-primary countdown-scoreboard-enter\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"78907\\\">Enter class</button>\\n</div>\\n\";if (data.hasRecord) { o += \"\\n<label class=\\\"evc-studyplan-record \" +(data.recordDisabled ? 'evc-studyplan-record-disabled' : '')+ \"\\\">\\n\\t<input type=\\\"checkbox\\\" class=\\\"evc-studyplan-record-check\\\" \" +(data.recordChecked ? 'checked=\"checked\"' : '')+ \" \" +(data.recordDisabled ? 'disabled=\"disabled\"' : '')+ \"/>\\n\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"708472\\\" data-text-en=\\\"Send me class video\\\"></span>\\n\\t<span class=\\\"glyphicon glyphicon-exclamation-sign\\\" data-toggle=\\\"popover\\\" data-trigger=\\\"hover\\\" data-placement=\\\"bottom\\\" data-content=\\\"\" +data.recordHint+ \"\\\"></span>\\n</label>\\n\"; } o += \"\\n<style>\\n\\t.evc-studyplan-enter{\\n\\t\\tmargin:20px 0;\\n\\t}\\n\\t.evc-studyplan-enter .btn {\\n\\t\\tfont-family: \\\"roboto_condensedbold\\\", \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\\t\\ttext-transform: uppercase;\\n\\t\\tpadding:10px 30px;\\n\\t}\\n\\tlabel.evc-studyplan-record {\\n\\t\\tfont-weight: normal;\\n\\t}\\n\\tlabel.evc-studyplan-record-disabled {\\n\\t\\tcolor: #ccc;\\n\\t}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/enter-class/cp20',[\n\t\"troopjs-ef/component/widget\",\n\t\"template!./enter-class.html\"\n], function(Widget, tEnterClass){\n\n\tvar UNIT_ID = \"_unitId\",\n\t\tCLASS_ID = \"_classId\",\n\t\tMODE = \"_mode\";\n\n\tvar CP20_ENTER_URL = \"_cp20_enter_url\";\n\n\tvar STATUS_START_STARTED = \"started\";\n\n\tfunction getCP20Action(unitId, classId) {\n\t\tvar me = this;\n\t\treturn me[CP20_ENTER_URL]\n\t\t\t.replace('?', '?showcontentonly=y&') // add search key 'showcontentonly' to skip new PL booking page redirect logic\n\t\t\t.replace(\"{unitId}\", unitId)\n\t\t\t.replace(\"{source}\", window.encodeURIComponent(window.location.href))\n\t\t\t.replace(\"{classId}\", classId);\n\t}\n\n\treturn Widget.extend(function(element, path, unitId, classId){\n\t\tvar me = this;\n\t\tme[UNIT_ID] = unitId;\n\t\tme[CLASS_ID] = classId;\n\t}, {\n\t\t\"sig/start\": function(){\n\t\t\tvar me = this;\n\t\t\treturn me.query(\"evc_url_resource!current\").spread(function(data){\n\t\t\t\tme[CP20_ENTER_URL] = data.studyPlanUrls.CP20Entering;\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/cp20/start-status\": function(status){\n\t\t\tvar me = this;\n\t\t\tif(status === STATUS_START_STARTED){\n\t\t\t\tme.html(tEnterClass);\n\t\t\t}\n\t\t},\n\n\t\t\"dom:.countdown-scoreboard-enter/click\": function enterClass() {\n\t\t\tvar me = this;\n\t\t\twindow.open(getCP20Action.call(me, me[UNIT_ID], me[CLASS_ID]), '_self');\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/enter-class/gl',[\n\t\"jquery.gudstrap\",\n\t\"troopjs-ef/component/widget\",\n\t\"client-tracking\",\n\t\"template!./enter-class.html\"\n], function($GUD, Widget, ct, tEnterClass){\n\n\tvar UNIT_ID = \"_unitId\",\n\t\tMODE = \"_mode\",\n\t\tGL_CREDIT = \"_gl_credit\";\n\n\tvar STARTED = \"_started\";\n\tvar TOPICID = \"_topicID\";\n\tvar START_TIME = \"_class_start_time\";\n\tvar MEMBER_ID = \"_member_id\";\n\tvar GL_HAS_RECORD = \"_has_gl_record\";\n\tvar GL_RECORD_CHECKED = \"_user_gl_record\";\n\tvar GL_ENTER_URL = \"_gl_enter_url\";\n\tvar RECORD_HINT = \"_record_hint\";\n\n\tvar STATUS_START_STARTED = \"started\";\n\n\tfunction getGLAction(unitId) {\n\t\tvar me = this;\n\n\t\tvar enterUrl = me[GL_ENTER_URL]\n\t\t\t.replace(\"{unitId}\", unitId)\n\t\t\t.replace(\"{source}\", window.encodeURIComponent(window.location.href));\n\n\t\tif (me[GL_HAS_RECORD]) {\n\t\t\tenterUrl += ';glRecordChecked=' + me[GL_RECORD_CHECKED];\n\t\t}\n\n\t\treturn enterUrl;\n\t}\n\n\tfunction getRecordFlagKey() {\n\t\treturn 'gl_record_checked_' + this[MEMBER_ID];\n\t}\n\n\tfunction getRecordFlag() {\n\t\tvar flag;\n\t\ttry {\n\t\t\tflag = localStorage.getItem(getRecordFlagKey.call(this));\n\t\t}\n\t\tcatch (ex) {\n\t\t\tflag = null;\n\t\t}\n\n\t\treturn flag;\n\t}\n\n\tfunction setRecordFlag(flag) {\n\t\ttry {\n\t\t\tlocalStorage.setItem(getRecordFlagKey.call(this), flag);\n\t\t}\n\t\tcatch (ex) {\n\t\t\t//noop\n\t\t}\n\t}\n\n\treturn Widget.extend(function(element, path, unitId){\n\t\tvar me = this;\n\t\tme[UNIT_ID] = unitId;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\treturn me.query([\n\t\t\t\t\"user!current\",\n\t\t\t\t\"evc_url_resource!current\",\n\t\t\t\t\"evcmember!current\",\n\t\t\t\t\"blurb!708473\"\n\t\t\t]).spread(function (user, evcUrlResource, evcMember, blurbRecordHint) {\n\t\t\t\tme[MEMBER_ID] = user.member_id;\n\t\t\t\tme[GL_ENTER_URL] = evcUrlResource.studyPlanUrls.SPGL;\n\t\t\t\tme[GL_HAS_RECORD] = evcMember.enableGLRecord;   //feature\n\t\t\t\tme[GL_RECORD_CHECKED] = evcMember.defaultGLRecordOption; //user checked\n\t\t\t\tme[RECORD_HINT] = blurbRecordHint && blurbRecordHint.translation || '';\n\n\t\t\t\tme.render();\n\t\t\t});\n\t\t},\n\t\t\"render\" : function(type){\n\t\t\tvar me = this;\n\t\t\tif (!me[STARTED] || !me[GL_CREDIT] || !me[START_TIME] || !me[MEMBER_ID]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar recordFlag = getRecordFlag.call(me);\n\t\t\tvar recordFlagPrefix = me[START_TIME] + '_';\n\n\t\t\tvar recordDisabled = (recordFlag !== null && recordFlag.substr(0, recordFlagPrefix.length) === recordFlagPrefix);\n\n\t\t\treturn me.html(tEnterClass, {\n\t\t\t\thasRecord: me[GL_HAS_RECORD],\n\t\t\t\trecordChecked: me[GL_RECORD_CHECKED],\n\t\t\t\trecordDisabled: recordDisabled,\n\t\t\t\trecordHint: me[RECORD_HINT]\n\t\t\t}).then(function () {\n\t\t\t\tvar $iconHint = me.$element.find('.glyphicon-exclamation-sign');\n\t\t\t\t$iconHint.popover();\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/gl/credit\" : function(credit){\n\t\t\tvar me = this;\n\t\t\tme[GL_CREDIT] = credit;\n\t\t\tme.render();\n\t\t},\n\t\t\"hub:memory/studyplan/evc/gl/start-time\": function (startTime) {\n\t\t\tvar me = this;\n\t\t\tme[START_TIME] = startTime;\n\t\t\tme.render();\n\t\t},\n\t\t\"hub:memory/studyplan/evc/gl/start-status\": function(status){\n\t\t\tvar me = this;\n\t\t\tme[STARTED] = (status === STATUS_START_STARTED);\n\t\t\tme.render();\n\t\t},\n\n\t\t\"hub:memory/studyplan/evc/gl/topicId\": function(topicId){\n\t\t\tvar me = this;\n\t\t\tme[TOPICID] = topicId;\n\t\t},\n\n\t\t\"dom:.countdown-scoreboard-enter/click\": function enterClass() {\n\t\t\tvar me = this;\n\t\t\tct.useraction({\n\t\t\t\t\"action.joinGL\": me[TOPICID]\n\t\t\t});\n\n\t\t\tsetRecordFlag.call(me, me[START_TIME] + '_' + me[GL_RECORD_CHECKED]);\n\n\t\t\twindow.open(getGLAction.call(me, me[UNIT_ID]), '_self');\n\t\t},\n\n\t\t\"dom:.evc-studyplan-record-check/change\":function(evt){\n\t\t\tthis[GL_RECORD_CHECKED] = evt.currentTarget.checked;\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/enter-class/pl',[\n\t\"troopjs-ef/component/widget\",\n\t\"client-tracking\",\n\t\"school-ui-studyplan/enum/studyplan-item-typecode\",\n\t\"template!./enter-class.html\"\n], function (Widget, ct, spItemTypeCode, tEnterClass) {\n\n\tvar UNIT_ID = \"_unitId\",\n\t\tCLASS_ID = \"_classId\",\n\t\tSP_TYPECODE = \"_spTypeCode\";\n\n\tvar PL_ENTER_URL = \"_pl_enter_url\";\n\tvar KEY = \"SP\";\n\tvar TOPICID = \"_topicId\";\n\n\tvar STATUS_START_STARTED = \"started\";\n\n\tfunction getPLAction(classId) {\n\t\tvar me = this;\n\t\treturn me[PL_ENTER_URL]\n\t\t\t.replace('?', '?showcontentonly=y&') // add search key 'showcontentonly' to skip new PL booking page redirect logic\n\t\t\t.replace(\"{source}\", window.encodeURIComponent(window.location.href))\n\t\t\t.replace(\"{classId}\", classId);\n\t}\n\n\treturn Widget.extend(function(element, path, unitId, classId, spTypeCode){\n\t\tvar me = this;\n\t\tme[UNIT_ID] = unitId;\n\t\tme[CLASS_ID] = classId;\n\t\tme[SP_TYPECODE] = spTypeCode;\n\t}, {\n\t\t\"sig/start\": function(){\n\t\t\tvar me = this;\n\t\t\treturn me.query(\"evc_url_resource!current\").spread(function(data){\n\t\t\t\tme[PL_ENTER_URL] = me[SP_TYPECODE] === spItemTypeCode.pl20 ?\n\t\t\t\t\tdata.studyPlanUrls.SPPL20Entering :\n\t\t\t\t\tdata.studyPlanUrls.SPPL40Entering;\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/studyplan/evc/pl/start-status\": function(status){\n\t\t\tvar me = this;\n\t\t\tif(status === STATUS_START_STARTED){\n\t\t\t\tme.html(tEnterClass);\n\t\t\t}\n\t\t},\n\n\t\t\"hub:memory/studyplan/evc/pl/status\": function(data){\n\t\t\tvar me = this;\n\t\t\tme[TOPICID] = data.topicId;\n\t\t},\n\n\t\t\"dom:.countdown-scoreboard-enter/click\": function enterClass() {\n\t\t\tvar me = this;\n\t\t\tct.useraction({\n\t\t\t\t\"action.joinPL\": me[TOPICID]\n\t\t\t});\n\t\t\twindow.open(getPLAction.call(me, me[CLASS_ID]), '_self');\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback-pending/index.html',[],function() { return function template(data) { var o = \"\";\n    var topic = data;\no += \"\\n<div class=\\\"text-center\\\">\\n    <p class=\\\"evc-studyplan-pedding-status\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568580\\\"></p>\\n    <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568582\\\"></p>\\n    <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568606\\\"></p>\\n</div>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-pedding-status{\\n        font-size: 1.3em;\\n        font-weight: bold;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/feedback-pending/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    \"use strict\";\n\n    return Widget.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            me.html(template);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/feedback/index.html',[],function() { return function template(data) { var o = \"\";\n    var feedbackUrl = data.url;\n    var date = data.date;\no += \"\\n<div class=\\\"evc-studyplan-btn-feedback text-center\\\">\\n    <p class=\\\"evc-studyplan-feedback-status\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568590\\\"></p>\\n    <p>\\n        <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568591\\\"></span>\\n        <span>\" + date+ \"</span>\\n    </p>\\n    <a href=\\\"\" + feedbackUrl + \"\\\" class=\\\"btn btn-primary\\\" role=\\\"button\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568592\\\"></a>\\n</div>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-btn-feedback{\\n        margin-top: 20px;\\n    }\\n    .evc-studyplan-btn-feedback > a{\\n        display: inline-block;\\n    }\\n    .evc-studyplan-feedback-status{\\n        font-size: 1.3em;\\n        font-weight: bold;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/feedback/main',[\n    \"when\",\n    \"jquery\",\n    \"moment\",\n    \"school-ui-shared/enum/moment-language\",\n    \"troopjs-ef/component/widget\",\n    \"template!./index.html\"\n], function (when, $, Moment, momentLang, Widget, template) {\n    \"use strict\";\n\n    var CONTEXT_DEFER = \"_context_promise\";\n\n    return Widget.extend({\n        \"sig/start\": function () {\n            this[CONTEXT_DEFER] = when.defer();\n        },\n        \"hub:memory/context\": function (context) {\n            context && this[CONTEXT_DEFER].resolve([context]);\n        },\n        \"render\": function onRender(data) {\n            var me = this;\n            if (!data) {\n                return;\n            }\n\n            me[CONTEXT_DEFER].promise.spread(function (context) {\n                var moment = Moment(new Date(data.year, data.month - 1, data.day));\n                moment.lang(momentLang[context.cultureCode.toLowerCase()]);\n                me.html(template, {\n                    url: data.url,\n                    date: moment.format(\"LL\")\n                });\n            });\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/feedback/cp20',[\"jquery\",\n    \"./main\",\n    \"school-ui-studyplan/module\"\n], function($, FeedbackBase, module) {\n    \"use strict\";\n\n    // Use () because it doesn't need URI encoding\n    var FEEDBACK_ID_PLACEHOLDER = '(FEEDBACK_ID)';\n\n    var CP20 = 'detail/cp20';\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tprogressReportUrl: \"/school/progressreport\",\n\t\tteacherFeedbackHash: \"#teacher-feedback?fb_id=EVC_\" + FEEDBACK_ID_PLACEHOLDER,\n\t}, module.config() || {});\n\n    return FeedbackBase.extend({\n        \"hub:memory/studyplan/evc/cp20/status\": function(lesson) {\n            var me = this;\n\n            if (!lesson || !lesson.feedback || !lesson.customizedStartTime) {\n                return;\n            }\n\n            var feedback = lesson.feedback;\n            var customizedStartTime = lesson.customizedStartTime;\n            var year = customizedStartTime.year;\n            var month = customizedStartTime.month;\n            var day = customizedStartTime.day;\n\n            var url = MODULE_CONFIG.progressGoals + CP20;\n            // Render\n            me.render({\n                url: url,\n                year: year,\n                month: month,\n                day: day\n            });\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/feedback/gl',[\"jquery\",\n    \"./main\",\n    \"school-ui-studyplan/module\"\n], function($, FeedbackBase, module) {\n    \"use strict\";\n\n\t// Use () because it doesn't need URI encoding\n\tvar FEEDBACK_ID_PLACEHOLDER = '(FEEDBACK_ID)';\n    var GL = 'detail/gl';\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tprogressReportUrl: \"/school/progressreport\",\n\t\tteacherFeedbackHash: \"#teacher-feedback?fb_id=EVC_\" + FEEDBACK_ID_PLACEHOLDER,\n\t}, module.config() || {});\n\n\treturn FeedbackBase.extend({\n        \"hub:memory/studyplan/evc/gl/status\": function(status) {\n            var me = this;\n\n            if(!status || !status.feedback){\n                return;\n            }\n            var feedback = status.feedback;\n            var customizedEntryDate = feedback.customizedEntryDate;\n\n\t        var url = MODULE_CONFIG.progressGoals + GL;\n            var year = customizedEntryDate.year;\n            var month = customizedEntryDate.month;\n            var day = customizedEntryDate.day;\n\n            // Render\n            me.render({\n                url: url,\n                year: year,\n                month: month,\n                day: day\n            });\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/feedback/pl',[\"jquery\",\n    \"./main\",\n    \"school-ui-studyplan/module\"\n], function($, FeedbackBase, module) {\n    \"use strict\";\n\n\t// Use () because it doesn't need URI encoding\n\tvar FEEDBACK_ID_PLACEHOLDER = '(FEEDBACK_ID)';\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tprogressReportUrl: \"/school/progressreport\",\n\t\tteacherFeedbackHash: \"#teacher-feedback?fb_id=EVC_\" + FEEDBACK_ID_PLACEHOLDER,\n\t}, module.config() || {});\n\n\treturn FeedbackBase.extend({\n        \"hub:memory/studyplan/evc/pl/status\": function(lesson) {\n            var me = this;\n\n            if (!lesson || !lesson.feedback || !lesson.customizedStartTime) {\n                return;\n            }\n\n            var feedback = lesson.feedback;\n            var customizedStartTime = lesson.customizedStartTime;\n            var year = customizedStartTime.year;\n            var month = customizedStartTime.month;\n            var day = customizedStartTime.day;\n\n\t        var url = MODULE_CONFIG.progressReportUrl +\n\t\t        MODULE_CONFIG.teacherFeedbackHash.replace(FEEDBACK_ID_PLACEHOLDER, feedback.feedbackId);\n            // Render\n            me.render({\n                url: url,\n                year: year,\n                month: month,\n                day: day\n            });\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/grouplesson/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/announcement/gl\\\"></div>\\n<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/statusbar/gl\\\"></div>\\n<div class=\\\"evc-studyplan-wrapper\\\">\\n    \"; if( data.statusCode === \"welcome\"){ o += \"\\n        <div class=\\\"evc-studyplan-column-single evc-studyplan-welcome\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/welcome-gl/main\\\"></div>\\n    \"; }else{ o += \"\\n        <div class=\\\"evc-studyplan-column-single\\\">\\n            <div class=\\\"evc-studyplan-gap-2x\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/lesson/gl\\\"></div>\\n            <div class=\\\"evc-studyplan-gap-1x evc-studyplan-class-info\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"evc-studyplan-activity-container\\\">\\n        </div>\\n    \"; } o += \"\\n</div>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-wrapper{\\n        text-align: center;\\n        padding: 30px 0 50px;\\n        color: #4a4a4a;\\n    }\\n    .evc-studyplan-column-full{\\n        display: inline-block;\\n    }\\n    .evc-studyplan-column-single{\\n        display: inline-block;\\n        width: 980px;\\n    }\\n    .evc-studyplan-column-single hr{\\n        margin-bottom: 0;\\n    }\\n    .evc-studyplan-welcome{\\n        width: 900px;\\n        padding-top: 50px;\\n    }\\n    .evc-studyplan-gap-2x{\\n        text-align: left;\\n        width: 620px;\\n        padding-left: 35px;\\n        padding-right: 35px;\\n        vertical-align: top;\\n        display: inline-block;\\n        margin: 20px auto;\\n    }\\n    .evc-studyplan-gap-1x{\\n        text-align: left;\\n        width: 330px;\\n        vertical-align: top;\\n        margin: auto;\\n        padding-left: 30px;\\n        display: inline-block;\\n        border-left:1px #eee solid;\\n    }\\n    .evc-studyplan-gap-1x .evc-studyplan-gap-block{\\n        margin-bottom: 15px;\\n    }\\n    .st-evc-status{\\n        color: #4a4a4a;\\n        background-color: #e6e6e6;\\n    }\\n    .evc-studyplan-gray{\\n        color:#999999;\\n    }\\n    .evc-studyplan-green{\\n        color:#87c600;\\n    }\\n    .evc-studyplan-blue{\\n        color: #00bee3;\\n    }\\n    .evc-none{\\n        display: none;\\n    }\\n    .evc-studyplan-activity-container {\\n        width:880px;\\n        margin:0 auto;\\n    }\\n    .evc-studyplan-activity-tc {\\n        text-align: left;\\n        padding-right: 330px;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/grouplesson/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"moment\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/enum/moment-language\",\n\t\"school-ui-studyplan/module\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./index.html\"\n], function (when, $, Moment, Widget, momentLang, module, clientStorage, template) {\n\t\"use strict\";\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t\tuseLegacyUnitId: true\n\t}, module.config() || {});\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar STATUS_DROPOUT = \"dropout\";\n\tvar STATUS_NEVERTAKE = \"nevertake\";\n\tvar STATUS_PENDING = \"pending\";\n\tvar STATUS_ATTENDED = \"attended\";\n\n\tvar STATUS_WELCOME = \"welcome\";\n\tvar STATUS_OPTIONAL_MSG_GL = \"optional_msg_gl\";\n\n\tvar STATUS_LEFT_EARLY = \"leftearly\";\n\n\tvar STATUS_START_NOT_YET = \"notyet\";\n\tvar STATUS_START_IN_COUNTDOWN = \"incountdown\";\n\tvar STATUS_START_STARTED = \"started\";\n\n\tvar TOPIC_PIC_PATH = MODULE_CONFIG.cacheServer + \"/_imgs/evc/gl/topic/100x100/\";\n\tvar GL_DEFAULT_PIC = MODULE_CONFIG.cacheServer + \"/_imgs/evc/gl/gl_default_100x100.jpg\";\n\n\tvar CONTEXT_DEFER = \"_context_promise\";\n\n\tvar WIDGET_COUNTDOWN = \"school-ui-studyplan/widget/gl-pl/countdown/gl\",\n\t\tWIDGET_CLASS_STATUS = \"school-ui-studyplan/widget/gl-pl/class-status/gl\",\n\t\tWIDGET_CREDIT = \"school-ui-studyplan/widget/gl-pl/credit/gl\",\n\t\tWIDGET_FEEDBACK_GL = \"school-ui-studyplan/widget/gl-pl/feedback/gl\",\n\t\tWIDGET_FEEDBACK_PENDING = \"school-ui-studyplan/widget/gl-pl/feedback-pending/main\",\n\t\tWIDGET_ENTER_CLASS = \"school-ui-studyplan/widget/gl-pl/enter-class/gl\",\n\t\tWIDGET_TERMS_CONDITIONS = \"school-ui-studyplan/widget/gl-pl/terms-and-conditions/main\";\n\n\tvar SEL_ACTIVITY_CONTAINER = \".evc-studyplan-activity-container\",\n\t\tSEL_INFO_CONTAINER = \".evc-studyplan-class-info\",\n\t\tSEL_ENTER_CLASS = \".ets-sp-glpl-enter-class\";\n\n\tvar CLS_GAP_2X = \"evc-studyplan-gap-2x text-center\",\n\t\tCLS_GAP = \"evc-studyplan-gap-block\",\n\t\tCLS_ENTER_CLASS = \"ets-sp-glpl-enter-class\",\n\t\tCLS_NONE = \"ets-none\",\n\t\tCLS_TC = \"evc-studyplan-activity-tc\";\n\n\tvar UNIT_ID = \"_unit_id\";\n\n\tvar UNIT_ID_KEY = MODULE_CONFIG.useLegacyUnitId ? \"legacyUnitId\" : \"templateUnitId\"\n\n\tfunction createWidget(widgetName, appendToContainer, classNames) {\n\t\tvar me = this;\n\t\treturn $(\"<div>\").attr(\"data-weave\", widgetName + \"(unitId)\")\n\t\t\t.addClass(classNames || \"\")\n\t\t\t.data(\"unitId\", me[UNIT_ID])\n\t\t\t.appendTo(me[$ELEMENT].find(appendToContainer))\n\t\t\t.weave();\n\t}\n\n\treturn Widget.extend(function ($element, name, item) {\n\t\tif (!item && !item.properties) {\n\t\t\treturn;\n\t\t}\n\t\tvar me = this;\n\t\tme.closeOptionalTips = clientStorage.getLocalStorage(\"gl_tips\") === \"closed\";\n\t\tme[CONTEXT_DEFER] = when.defer();\n\t}, {\n\t\t\"hub:memory/load/unit\": function (unit) {\n\t\t\tvar me = this;\n\t\t\tif (!unit || !unit[UNIT_ID_KEY]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme.unitId = unit[UNIT_ID_KEY];\n\n\t\t\t// Check the student whether is first come or not\n\t\t\tme.publish(\"query\", [\"member_site_setting!evc;FirstTimeStudyPlanGL\"]).spread(function (data) {\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (data.value.toString() === \"true\") {\n\t\t\t\t\tme.publish(\"studyplan/evc/gl/load\");\n\t\t\t\t} else {\n\t\t\t\t\tme.html(template, { statusCode: STATUS_WELCOME });\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\t\"hub:memory/studyplan/evc/gl/start-status\": function (status) {\n\t\t\tvar me = this;\n\t\t\tswitch (status) {\n\t\t\t\tcase STATUS_START_NOT_YET:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_IN_COUNTDOWN:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_STARTED:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).removeClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/evc/gl/load\": function () {\n\t\t\tvar me = this;\n\t\t\tme[UNIT_ID] = me.unitId;\n\t\t\tme.publish(\"query\", [\"glstatus!\" + me.unitId, \"glclass!\" + me.unitId]).spread(function success(statusData, glClass) {\n\t\t\t\tif (!statusData) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar statusCode = statusData.statusCode.toLowerCase();\n\t\t\t\tvar feedback = statusData.feedback;\n\t\t\t\t// nevertake\n\t\t\t\t// dropout\n\t\t\t\t// pending\n\t\t\t\t// attended\n\t\t\t\tvar status = {\n\t\t\t\t\t\"unitId\": me.unitId,\n\t\t\t\t\t\"statusCode\": statusCode,\n\t\t\t\t\t\"teacherId\": feedback.teacherId || \"\",\n\t\t\t\t\t\"feedbackId\": feedback.feedbackId || \"\",\n\t\t\t\t\t\"topic\": {},\n\t\t\t\t\t\"feedback\": feedback || {}\n\t\t\t\t};\n\n\t\t\t\tif (statusCode === STATUS_PENDING || statusCode === STATUS_ATTENDED) {\n\t\t\t\t\tvar topic = feedback.topic;\n\t\t\t\t\tif (topic) {\n\t\t\t\t\t\tstatus.topic = {\n\t\t\t\t\t\t\t\"topic\": topic.topicBlurb,\n\t\t\t\t\t\t\t\"description\": topic.descriptionBlurb,\n\t\t\t\t\t\t\t\"image\": (TOPIC_PIC_PATH + topic.topicImageUrl) || GL_DEFAULT_PIC\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar evcServerCode = glClass && glClass.evcServerCode || '';\n\t\t\t\t// Adobe classroom: \"cn1\" or \"us1\", otherwise \"EvcCN1\" or \"EvcUS1\"\n\t\t\t\tvar isAdobeClassroom = evcServerCode.toLowerCase().indexOf('evc') < 0;\n\t\t\t\tif (!isAdobeClassroom) {\n\t\t\t\t\t// simulate techcheck passed\n\t\t\t\t\tclientStorage.setSessionStorage(\"techcheck_state\", \"passed\");\n\t\t\t\t}\n\n\t\t\t\t// Render\n\t\t\t\tvar renderData = statusData;\n\t\t\t\t$.extend(true, renderData, { unitId: me.unitId });\n\t\t\t\tme.html(template, renderData).then(function () {\n\n\t\t\t\t\tme[$ELEMENT].find(SEL_INFO_CONTAINER).empty();\n\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_CONTAINER).empty();\n\n\t\t\t\t\t//start time\n\t\t\t\t\tme.publish(\"studyplan/evc/gl/start-time\", new Date(glClass.countDown.classStartTime || 0).getTime());\n\n\t\t\t\t\t// Publish status\n\t\t\t\t\tme.publish(\"studyplan/evc/gl/status\", status);\n\n\t\t\t\t\t//clear the class status as not yet\n\t\t\t\t\tme.publish(\"studyplan/evc/gl/start-status\", STATUS_START_NOT_YET);\n\n\t\t\t\t\t// Publish status to show optional msg\n\t\t\t\t\tif (!me.closeOptionalTips) {\n\t\t\t\t\t\tme.publish(\"studyplan/evc/gl/notification\", {\n\t\t\t\t\t\t\t\"statusCode\": STATUS_OPTIONAL_MSG_GL\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Publish status to show msg in the status bar\n\t\t\t\t\tif (statusCode === STATUS_DROPOUT) {\n\t\t\t\t\t\tif (!feedback.entryDate) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\twhen.all([\n\t\t\t\t\t\t\tme[CONTEXT_DEFER].promise,\n\t\t\t\t\t\t\tme.query(\"blurb!568599\")\n\t\t\t\t\t\t]).spread(function (contextResults, queryResults) {\n\t\t\t\t\t\t\tvar context = contextResults[0];\n\t\t\t\t\t\t\tvar moment = Moment(feedback.entryDate);\n\t\t\t\t\t\t\tmoment.lang(momentLang[context.cultureCode.toLowerCase()]);\n\n\t\t\t\t\t\t\tvar blurbDropout = queryResults[0];\n\t\t\t\t\t\t\tvar msg = blurbDropout.translation;\n\t\t\t\t\t\t\tmsg = msg.replace(\"%%date%%\", moment.format(\"YYYY-MM-DD\")).replace(\"%%time%%\", moment.format(\"HH:mm\"));\n\n\t\t\t\t\t\t\tme.publish(\"studyplan/evc/gl/notification\", {\n\t\t\t\t\t\t\t\t\"statusCode\": STATUS_LEFT_EARLY,\n\t\t\t\t\t\t\t\t\"link\": \"http://www.ef.com\",\n\t\t\t\t\t\t\t\t\"msg\": msg\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (statusCode.toLowerCase()) {\n\t\t\t\t\t\tcase STATUS_NEVERTAKE:\n\t\t\t\t\t\tcase STATUS_DROPOUT:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_COUNTDOWN, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CLASS_STATUS, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_ENTER_CLASS, SEL_INFO_CONTAINER, CLS_GAP + \" \" + CLS_ENTER_CLASS + \" \" + CLS_NONE);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CREDIT, SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_TERMS_CONDITIONS, SEL_ACTIVITY_CONTAINER, CLS_TC);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase STATUS_PENDING:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK_PENDING, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CREDIT, SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase STATUS_ATTENDED:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK_GL, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CREDIT, SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t});\n\t\t},\n\t\t\"hub:memory/context\": function (context) {\n\t\t\tcontext && this[CONTEXT_DEFER].resolve([context]);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/lesson/index.html',[],function() { return function template(data) { var o = \"\";\n    var lessonInfo = data.lessonInfo;\n    var profile = data.profile;\no += \"\\n<div class=\\\"clearfix \"; if(profile) { o += \"evc-studyplan-withteacher\"; } o += \"\\\" >\\n    <div class=\\\"pull-left evc-studyplan-topic-pic\\\">\\n        <img src=\\\"\" + lessonInfo.image + \"\\\" width=\\\"100\\\" height=\\\"100\\\" alt=\\\"\\\" />\\n        \"; if(profile) { o += \"\\n            <div class=\\\"evc-studyplan-teacher\\\">\\n                \"; if (profile.link) {o += \"\\n                    <a href=\\\"\" + profile.link + \"\\\" target=\\\"_blank\\\">\\n                        <img class=\\\"img-circle\\\" src=\\\"\" + profile.imageUrl + \"\\\" width=\\\"42\\\" height=\\\"42\\\" alt=\\\"\" + profile.nickname + \"\\\">\\n                    </a>\\n                \"; } else { o += \"\\n                    <img class=\\\"img-circle\\\" src=\\\"\" + profile.imageUrl + \"\\\" width=\\\"42\\\" height=\\\"42\\\" alt=\\\"\" + profile.nickname + \"\\\">\\n                \"; } o += \"\\n            </div>\\n        \"; } o += \"\\n    </div>\\n    <div class=\\\"pull-left evc-studyplan-topic\\\">\\n        \"; if(data.changeTopicTitle) { o += \"\\n            <h5 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"490207\\\"></h5>\\n        \"; }else{ o += \"\\n            <h5 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"80310\\\"></h5>\\n        \"; } o += \"\\n        <h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" + lessonInfo.topic+ \"\\\"></h2>\\n        \"; if(profile) { o += \"\\n            <p><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"78910\\\"></span>&nbsp;<span>\" + profile.nickname + \"</span></p>\\n        \"; } o += \"\\n    </div>\\n</div>\\n<div class=\\\"evc-studyplan-description\\\">\\n    <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" + lessonInfo.description+ \"\\\"></p>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-withteacher {\\n        padding-bottom: 14px;\\n    }\\n    .evc-studyplan-topic-pic {\\n        position: relative;\\n        width: 100px;\\n        height: 100px;\\n        margin-right: 20px;\\n    }\\n    .evc-studyplan-teacher {\\n        position: absolute;\\n        left: 72px;\\n        top: 72px;\\n        white-space: nowrap;\\n    }\\n    .evc-studyplan-teacher a {\\n        display: inline-block;\\n        text-decoration: none;\\n    }\\n    .evc-studyplan-teacher a:hover {\\n        text-decoration: none;\\n    }\\n    .evc-studyplan-topic {\\n        width: 420px;\\n    }\\n    .evc-studyplan-topic h5 {\\n        margin-bottom: 5px;\\n    }\\n    .evc-studyplan-topic h2 {\\n        margin-top: 0;\\n        line-height: 1em;\\n    }\\n    .evc-studyplan-topic p {\\n        font-size: 112%;\\n        font-weight: bold;\\n        vertical-align: middle;\\n        margin-bottom: 0;\\n        margin-top: 6px;\\n    }\\n    .evc-studyplan-description {\\n        margin-top: 10px;\\n        clear: both;\\n        line-height: 1.55em;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/lesson/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    \"use strict\";\n\n    var DEFAULT_TEACHER_IMAGE = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkEzNzkzNzJDRDQ1MTFFNEJCQTBDRTQ3OUEzNjM5OEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkEzNzkzNzNDRDQ1MTFFNEJCQTBDRTQ3OUEzNjM5OEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTM3OTM3MENENDUxMUU0QkJBMENFNDc5QTM2Mzk4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTM3OTM3MUNENDUxMUU0QkJBMENFNDc5QTM2Mzk4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjsNI60AAA0mSURBVHja7F13UBXdFT82sDcQRVBQ1LGh2AKxgY4ysYx+xjJGU4wmlomS2AI6g04yo/LpKH5YJrH9gX3sjkOinyYSO9bRUexYsKBYERvqzflddnfe46O899i3u5Qz85sH7+3e3fvbu+eec+6591YQQpCFpAqjHSOY0YYRyAhgeCnwZNRifGJkM14zspS/7zPuMVIZVxhXGTlWqVgFk4muxPgZ4xeMCEY3RjWdyv7AOMs4yvg3I4XxtSwRXYHRm/ErxnCGt0HXzWTsYmxjJDNEaSW6LuOPjEmMIJPf5NuMNYy1ivopFUQ3ZEQz/qDoVysJ9Ps6xmLG05JKdE3GXMafGdXJ2vKekcBYwHhXUoiGDv4NI47hSyVLnjBiGBv11uF6Ex2o6L7+VLLlR8ZExVy0HNG/Zqxi1KbSIW8Zf2JssgrRcCJWKp1daRR0llMVJ8k0ohsx9jJCqXTLGcZ3xbFMikN0a0YSoxmVDUljDGRcN5LoTopb60NlS54p4YKLRhAdrLiw9ahsymslhHDFnUQ3YZxk+FPZlnRGD8YDR0+o6EThDRj/MYrkN2/eUMuWLalnz56Unp5uNaLBwRGFE8cELdoBeDBOCQPlwIEDQvHORN26dcXSpUtFdna2sJicUrgpkkNHW/T3jDAjm8yjR4/kZ0REhPycOXMmBQQE0IwZMyglJYUsMmARpgSkdGnR3zG+Gd1UFi1aJFvzzp07xfPnz8X06dNF/fr1tVbeuHFjMWnSJLFr1y6RmZlpZqv+pnBUKI9FkRzIeGnG3UdFRUlCT5w4oX338eNHsXnzZjF8+HBRp04djfSKFSuKrl27ijlz5oiLFy+acbsvFa5cIhoWyY9G3/GrV6/EvHnzRM2aNUXlypVla85PcnJyxLFjx0RsbKzo1q2bJFslntWNOHv2rNG3fkjhzGmif2f0nUINNGrUSOsAExISHD4XD2TTpk2CrRStlaOFf/361cgqjHOW6NqMJ0bdHciYPXu2JKhKlSoiOjpatmxXZf/+/cLPz0+WN3LkSPHlyxejqvJE4c5hor83shlMmTJFktKsWTNx4cIFfWr85IkICQmR5bLFYmR14hwluiHDMIM1MTFRkhEcHCwyMjJ0LfvZs2eiefPmokKFCuL48eNGVSlb4bBIouONuqP379+LBg0aiGrVqolr16655RrJycnyQfbu3dvIVh1fFNF1GVlG3c3atWslCbCRC5Lbt2+L1atXS7vaVV3br18/eZ3Lly8bVbUshcsCiZ5l5GMfNWqUJCA/vXz9+nUxePBg+drjGHzevHnTpevgQaGMuLg4I6s3uyCiYQPeMvJOOnXqJCpVqmRngn369EkSAnWi2sXFJQktGWWMGTPGyOrdsrWrbYmOMNpuhpUBx0Q18eBut23bVpICzy8+Pl46LejQimMPw0VHmVAhBkuEym9lm7DHaKMjMuyUUFpaGm3ZsoXmz59PrI/l98OGDaMVK1bQu3fviPU3denSRX5/6NAh4odB7PUROyjk4eFBDRs2pBYtWlC7du2oTZs2xA4PsS0uy2LPUZYRGpo7pMlvj9FVBKdHbYNKleBcGf248Srbxiugs8+dO6f9/vjxY/kbEyg6duyoHYtW7uPjYxfvcARjx441uorPFW61Fo1wn7fRj3vAgAGyNUOOHj1KvXr1svvd19eXWrVqRampqcSdIQ0dOpTYuZHHVa+em2XGOp3YNJTHcAcqW3pOTg75+/tT9+7diVUTDRkyhF68eEHcJxhdRXD6c8ZxtUX/zZT44rdvIjIyUra2rVu35nsMPwgRFhYm+EG4dI1t27bJlo835s6dO2ZU8++2nWGyWcHciRMnSqLx6Q6Bo4Lyw8PDzapisko0hmLem3EHCHOCBFYP4unTp265BjxOLy8v4enpKdLT082oJrj1gI5uS/pNZ3Au/efMGfkZExMjrQdVsrOzadasWVKv2goGaqOiorT/Y2Nj6caNG3bHNG3alBYvXkysKuT/sETGjx9PS5YsoUuXLpGfn5/R1QS3bSsreRqmCDslWodmK/fv36c1a9YQ63C770GUSvTnz58pISGB3r59a3dM1apVae7cuVS/fn3tO7UcmH0mSTAeexuzrt6kSRP5effuXbvv2WmRg7MgFrZycHAwcUdGbPppx+B72OBo0Xhg7PzIYx4+fGhHMgTfQ2DBmCRtoaO3mtVLIGaMGAaGogoSJrLI8CmsCdjc+QlcegzqAgaPttjKVhB9QpgobOvKDtFV860oWbVqlVutGgflBIi+YeYdsFstWzXGCE+fPq1r2bChMTTGzo24deuWmdW8QWa43j8Z+4mLk61u2rRpupbLnqcsd9++fWZXMRNEvzX7LtjKkITAS9Q7OlijRg0zdbM2EEDCIuLv7y9DpkiS0UPYkpEPr0+fPpaoH8y7z1ZIYkOACSHNpKQkXcrbvn27/Bw4cKA18k+hP6zwxGF14HZGjBihS3kYVUcgie1xK1RPqo40K9wJInkBAQGCHZECbWJH5dSpU/Kh9e/f3yqaMROqI8sKbxbizWzrStd62bJlxSorPj5efk6dOtUqiesvTA2R5hWkgaFDRPzY1ZQw2MsYgcHYI94Si8hxtOj7VnnsGENEq8a0CkTvvnz54tT5Hz58kK0Y50VHR8u3xCJyFy16jrCQIH6sjvFBx7586Vh6NuImGInBedDziHFYSOaA6BFWuiM28ewGVIOCgorMm9uxY4fw9vbWzsHfFpPhILq9le7o6tWrkiy4z6wGtBHyyZMnyygd8qBTUlLEvXv3xMmTJ7WhKsQ0FixYoJl1r1+/tlK12ps6lJVfSBOEgjhE3SCYnQWzzzYtIW8aAVSGmlY2Y8YM+d3ChQvlrAALiBzKUid0JiuzQQ0VdF5Hjhyhw4cPE6sHunLlijTvfHx8ZFBfTSlgt5wSExNl8gxGVDp06CAHC5AQg/QDpCGoHR9GZzB8hbIx2oJBhB49elB4eLj0EtVRHQPlf4xwU9INmFiZzIKAj23LROoX0njRajFNwhXBfER11hYGfW3fAFxv9OjRYu/evUbOArBLN+hhxBUPHjwoQkNDtYpj1AMB+d27d0urAYKYdK1ateTvEyZMEGzqOVQ2dDemUaidoZqiy2+ASEpKkioF0Tzbh7p+/XojIns9bYl2a0oYOi5E0dT020GDBsl5Jqwm8j0eU9jat2+vPQx1WlteUvA/dDPmvGDgQE0fS01NLdDNR2I6WjWcGhzfuXNnd06Z01LCbLNJ/+GOK2FeoJojh2lp58+fd+g8hEsxta127dpaK0RLh1WB4S/W01rLV3/D8ZhF4KgHOWTIEM1iWblypTuq/09hRNqumgAOtxqvqSsuMVTHhg0bZFQPrz5IUa2PwMBAObkTZbtqzq1bt07rK5YvX643BX2EEYnomIKGhHK9pzTAqdHbGwXZvr6+ehZrl4huO+keT3WNnnZNZmYmccckTSw9hUnRtTwsV1GvXj3it0LPYteSzdp5lfP5cR7lrsJYbIHdumfPHurbty9xZygTYUJCQmSyi5qyZYbAVr958yaxF0rcEUpbHmuCjBkzRq9LvMvbaPNbgQbB3L/ocbWMjAxik0tm3udNBUMrCgoKkktDsK6VTgrAdrR8CwBkIzkryNtDjjSujTcKAIlwgODk4BPZTGyx2MXCIyMjaePGjfL6OsgPeTnMj2gssYYcKt3WE1XTuZDihVaEhHE2+WTCeGHClgR5enoSWx7yf7zetoKcPbYyZG4dQqvwBuFFFiZsARHb0NS6dWvq2LGj9DLxliHpXSfBOqdYTfhpUUSrC6H81Z2vL0h+8OCBhrytEEA2KcjMysrSyMw7KoMYtvqJNwV5d3gbbN8OkAh1BYK9vLzcrZmwUEr0T0aQCiAaTeiG0rrLxQltiVxKyl1u004K6pFw4Jxy3pyWmPxILqxFy98Yhxj9yvlzSA4zIqmA5ZCLWvcukHJXLaxbzmOh8orRmQpZBrkoYxYn/p4M3nighAm4GU9FrDXtiNeA1XRXlPNZoKxQOCpUHF0y00MZhQkr59VOTsvREwfyF51ZmxQuU4qit8sld13Sroznjhzs7CKwiA4dJWfW5CydAnIjGNccPcGVZY1DGP8tw5YIQnx9yck1pIuzUPfBMtiyMxVb2ZCFulXB/ESsit60DOlkrIae6srJxd1MoTFjD+Xu4FaaBbvIYTOFx64WUNzo+2PFvFlfikneQLnJRY+LU4ieG978VjHeS9OGN9MYiXoUpvcWTtgqZJ3SK5dkwRL72MAnTa8C9R64w40h2jeOcrfSKIn28TilDml6FuzObfZgZ2ObPUwkqWZxgrFtKrahWkhu2kjSiI0jMUoTo7yKNSxGcLai6rAlYIndODKvYGQVW6Fi+zqzt0LF4LO6FeorIy5o1ua+iBNgc99fUu421EYI1g3azdhKufGaUru5b36iblc9QCG/K+m7XfU5hdR/URncrrowKWgDdm+l5eMhqPkm7xUyXygxCEtvwP5/AQYA45MVlK+fMKMAAAAASUVORK5CYII=\";\n\n    return Widget.extend({\n        \"render\": function onRender(data) {\n            var me = this;\n            if(!data){\n                return;\n            }\n            // teacherProfile imageUrl cannot yet be migrated to HTTPS, use fake image instead. (from Progress Report)\n            if (window.location.protocol === 'https:') {\n                if (data.profile && data.profile.imageUrl\n                    && data.profile.imageUrl.indexOf('http://') === 0) {\n                    data.profile.imageUrl = DEFAULT_TEACHER_IMAGE;\n                }\n            }\n            me.html(template, data);\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/lesson/cp20',[\"jquery\",\n    \"./main\",\n    \"template!./index.html\"\n], function($, LessonBase, template) {\n    \"use strict\";\n\n    var STATUS_NEVERTAKE = \"nevertake\";\n    var STATUS_BOOKED = \"booked\";\n    var STATUS_DROPOUT = \"dropout\";\n    var STATUS_PENDING = \"pending\";\n    var STATUS_ATTENDED = \"attended\";\n\n    return LessonBase.extend({\n        \"hub/studyplan/evc/cp20/status\": function(lesson) {\n            var me = this;\n\n            if (!lesson) {\n                return;\n            }\n\n            var status = lesson.status;\n            var statusCode = status.statusCode;\n            var teacherId = \"\";\n            var renderData = {};\n\n            renderData.lessonInfo = lesson.lessonInfo;\n            renderData.changeTopicTitle = false;\n\n            if (statusCode === STATUS_ATTENDED || statusCode === STATUS_PENDING) {\n                if (!lesson.feedback) {\n                    return;\n                }\n                teacherId = lesson.feedback.teacherId;\n                renderData.changeTopicTitle = true;\n\n            } else if (statusCode === STATUS_BOOKED) {\n                if (!lesson.bookedClass) {\n                    return;\n                }\n                teacherId = lesson.bookedClass.teacherId;\n            }\n\n            // Show the teacher profile when student booked the class\n            if (teacherId && teacherId > 0) {\n                // Load teacher profile\n                me.publish(\"query\", [\"teacherprofile!\" + teacherId]).spread(function(dataProfile) {\n                    if (!dataProfile) {\n                        return;\n                    }\n                    // Append to template data\n                    renderData.profile = {\n                        \"imageUrl\": dataProfile.imageUrl,\n                        \"link\": \"\",   //dataProfile.pageUrl not work for some partners, see SPC-5951\n                        \"nickname\": dataProfile.displayName\n                    };\n                    // Render\n                    me.render(renderData);\n                });\n            } else {\n                me.render(renderData);\n            }\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/lesson/gl',[\"jquery\",\n    \"./main\",\n    \"../grouplesson/service\"\n], function($, LessonBase, LessonService) {\n    \"use strict\";\n\n    var STATUS_NEVERTAKE = \"nevertake\";\n    var STATUS_DROPOUT = \"dropout\";\n    var STATUS_PENDING = \"pending\";\n    var STATUS_ATTENDED = \"attended\";\n\n    return LessonBase.extend({\n        \"hub/studyplan/evc/gl/status\": function(status) {\n            var me = this;\n            if (!status || !status.statusCode || !status.unitId) {\n                return;\n            }\n            var statusCode = status.statusCode;\n            var unitId = status.unitId;\n            var renderData = {};\n            var lessonInfo;\n            var teacherId;\n\n            // Set Default value\n            renderData.changeTopicTitle = false;\n\n            // The student entered into the GL\n            if (statusCode === STATUS_PENDING || statusCode === STATUS_ATTENDED) {\n                if (!status.topic) {\n                    return;\n                }\n\n                lessonInfo = status.topic;\n                teacherId = status.teacherId;\n\n                renderData.lessonInfo = lessonInfo;\n\n                // Change topic title from \"Next Class\" to \"Class Topic\"\n                renderData.changeTopicTitle = true;\n\n                if(teacherId){\n                    // Load teacher profile\n                    me.publish(\"query\", [\"teacherprofile!\" + teacherId]).spread(function(dataProfile) {\n                        if (!dataProfile) {\n                            return;\n                        }\n                        renderData.profile = {\n                            \"imageUrl\": dataProfile.imageUrl,\n                            \"link\": dataProfile.pageUrl,\n                            \"nickname\": dataProfile.displayName\n                        };\n                        // Render\n                        me.render(renderData);\n                    });\n                }\n                else{\n                    // Render\n                    me.render(renderData);\n                }\n\n            } else {\n                // Load Current GL\n                new LessonService(unitId).get().then(function(dataLesson) {\n                    if (!dataLesson || !dataLesson.lessonInfo) {\n                        return;\n                    }\n                    renderData.lessonInfo = dataLesson.lessonInfo;\n                    // Render\n                    me.render(renderData);\n\n\t\t\t\t\t// Publish topic ID for omniture enter class tracking\n\t\t\t\t\tme.publish(\"studyplan/evc/gl/topicId\", dataLesson.topicId);\n                });\n            }\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/lesson/pl',[\"jquery\",\n    \"./main\",\n    \"template!./index.html\"\n], function($, LessonBase, template) {\n    \"use strict\";\n\n    var STATUS_NEVERTAKE = \"nevertake\";\n    var STATUS_BOOKED = \"booked\";\n    var STATUS_DROPOUT = \"dropout\";\n    var STATUS_PENDING = \"pending\";\n    var STATUS_ATTENDED = \"attended\";\n\n    return LessonBase.extend({\n        \"hub/studyplan/evc/pl/status\": function(lesson) {\n            var me = this;\n\n            if (!lesson) {\n                return;\n            }\n\n            var status = lesson.status;\n            var statusCode = status.statusCode;\n            var teacherId = \"\";\n            var renderData = {};\n\n            renderData.lessonInfo = lesson.lessonInfo;\n            renderData.changeTopicTitle = false;\n\n            if (statusCode === STATUS_ATTENDED || statusCode === STATUS_PENDING) {\n                if (!lesson.feedback) {\n                    return;\n                }\n                teacherId = lesson.feedback.teacherId;\n                renderData.changeTopicTitle = true;\n\n            } else if (statusCode === STATUS_BOOKED) {\n                if (!lesson.bookedClass) {\n                    return;\n                }\n                teacherId = lesson.bookedClass.teacherId;\n            }\n\n            // Show the teacher profile when student booked the class\n            if (teacherId && teacherId > 0) {\n                // Load teacher profile\n                me.publish(\"query\", [\"teacherprofile!\" + teacherId]).spread(function(dataProfile) {\n                    if (!dataProfile) {\n                        return;\n                    }\n                    // Append to template data\n                    renderData.profile = {\n                        \"imageUrl\": dataProfile.imageUrl,\n                        \"link\": dataProfile.pageUrl,\n                        \"nickname\": dataProfile.displayName\n                    };\n                    // Render\n                    me.render(renderData);\n                });\n            } else {\n                me.render(renderData);\n            }\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/mark/booked.html',[],function() { return function template(data) { var o = \"<span class=\\\"badge evc-studyplan-mark evc-studyplan-mark-booked\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Booked\\\" data-blurb-id=\\\"78918\\\"></span>\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-mark-booked,\\n    .gud .evc-studyplan-mark-booked\\n    {\\n        background-color: #232c33;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/mark/cp20',[\n    \"troopjs-ef/component/widget\",\n    \"when\",\n    \"jquery\",\n    \"school-ui-studyplan/module\",\n    \"school-ui-shared/utils/console\",\n    \"template!./booked.html\"\n], function(Widget, when, $, module, Console, template) {\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tuseLegacyUnitId: true\n\t}, module.config() || {});\n\n    var STATUS_BOOKED = \"booked\";\n\n    var UNIT_ID_KEY = MODULE_CONFIG.useLegacyUnitId ? \"legacyUnitId\" : \"templateUnitId\"\n\n    return Widget.extend(function($element, name, item) {\n        var me = this;\n        me.getUnit = when.defer();\n\n        function unitFn(unit) {\n            if (!unit || !unit[UNIT_ID_KEY]) {\n                return;\n            }\n            // Resolve unit\n            me.getUnit.resolver.resolve(unit[UNIT_ID_KEY]);\n            me.unsubscribe(\"load/unit\", unitFn);\n        }\n        me.subscribe(\"load/unit\", unitFn);\n        me.republish(\"load/unit\", false, unitFn);\n    }, {\n        \"sig/start\": function() {\n            var me = this;\n\n            return me.getUnit.promise.then(function(unitId) {\n                return me.publish(\"query\", [\"checkpointstate!cp20;\" + unitId]).spread(function success(data) {\n                    if (!data || !data.statusCode) {\n                        return when.reject(\"skip CP20 mark, CP20 status query failed.\");\n                    }\n                    var statusCode = data.statusCode.toLowerCase();\n\n                    if (statusCode === STATUS_BOOKED) {\n                        me.html(template);\n                    } else {\n                        return when.reject(\"skip CP20 mark, CP20 not booked.\");\n                    }\n                });\n            });\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/mark/pl',[\n    \"troopjs-ef/component/widget\",\n    \"when\",\n    \"jquery\",\n    \"school-ui-studyplan/module\",\n    \"school-ui-shared/utils/console\",\n    \"template!./booked.html\"\n], function(Widget, when, $, module, Console, template) {\n\n    var MODULE_CONFIG = $.extend({\n\t\tuseLegacyUnitId: true\n    }, module.config() || {});\n\n    var STATUS_BOOKED = \"booked\";\n\n    var UNIT_ID_KEY = MODULE_CONFIG.useLegacyUnitId ? \"legacyUnitId\" : \"templateUnitId\"\n\n    return Widget.extend(function($element, name, item) {\n        var me = this;\n        me.getUnit = when.defer();\n\n        function unitFn(unit) {\n            if (!unit || !unit[UNIT_ID_KEY]) {\n                return;\n            }\n            // Resolve unit\n            me.getUnit.resolver.resolve(unit[UNIT_ID_KEY]);\n            me.unsubscribe(\"load/unit\", unitFn);\n        }\n        me.subscribe(\"load/unit\", unitFn);\n        me.republish(\"load/unit\", false, unitFn);\n    }, {\n        \"sig/start\": function() {\n            var me = this;\n\n            return me.getUnit.promise.then(function(unitId) {\n                return me.publish(\"query\", [\"plclass!\" + unitId]).spread(function success(data) {\n                    if (!data || !data.statusCode) {\n                        return when.reject(\"skip PL mark, PL status query failed.\");\n                    }\n                    var statusCode = data.statusCode.toLowerCase();\n\n                    if (statusCode === STATUS_BOOKED) {\n                        me.html(template);\n                    } else {\n                        return when.reject(\"skip PL mark, PL not booked.\");\n                    }\n                });\n            });\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/popupvideo/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"evc-studyplan-popup-video modal\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t</div>\\n\\t\\t<div class=\\\"close\\\" data-dismiss=\\\"modal\\\"></div>\\n\\t</div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n\\t.evc-studyplan-popup-video .modal-dialog {\\n\\t\\tpadding:0;\\n\\t\\twidth:640px;\\n\\t\\theight: 400px;\\n\\t}\\n\\t.evc-studyplan-popup-video .close {\\n\\t\\tposition: absolute;\\n\\t\\ttop: -14px;\\n\\t\\tright: -24px;\\n\\t\\twidth:35px;\\n\\t\\theight:35px;\\n\\t\\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAABICAYAAAB86kzAAAAIr0lEQVRo3s1Ye0zVdRSXx8UJjmxRJqQUjtu8XFils41YZsMs70TBVpmi4iuZlDpzqOQqkpmFky0DX6MmSpbT1cz8yzZHtdncaD4XJbNF8iydDxTMTuf8Ot9f5/7e9/qo73bg3t/vfM/3c7/n8f2ez4ABLmPBggVKHkGpQDmIchTlT5aj/KyCdeScAV4HALgrocFilFYU8Cit8+fPn4VTY1huHgwaLUD5KQIQRvkZQU0RoGKiAoOGXjcaX7FiBTQ2NsKJEyfg7NmzcOPGDU3oMz2jd6RjnDdv3rxyNBnnBsgSDBrYJo0tX74cDh8+rC3sNkiHdGmOAVA9mo5HibUDZAKDE1dLIzU1NXDt2jWIdNAcmittlZSUvIlL+OwAhYHBCSE5effu3XCzg2xImzNnzizCpRKsABnB6BmzadMmT27x4jaypexiQJ/FpRKtdkgHQ6koA7W3txdu1SBbMrBnzJjxCi45iGNID2odDCr9opQpAI2jubkZcnJyYO7cuXDlypWwd/SdntN70rMaZFPsThsumYwyUGTZP2BQIU8plpeXm9xz7Ngx8Pv9MGzYMCgrK4MtW7boQU3/S0tLwefzQWFhIVRWVsKpU6cs3UW21TqoG8L1k4S7dDBvK6W9e/eaDLW1tcGUKVNg6dKlsHbtWk02b94MHR0dsHjxYoiPj4eCggLt+Y4dO+DChQuWu0O2hauqcf0hvDta7Cgwh5TS6dOnLQ2dO3cOqqurdTAkS5YsgcGDB8PkyZO17w0NDXDx4kXb2Dl58qQOZs6cOU0I4F7enXgJpk0pnT9/3tZYZ2cnbNiwIQwQ7Qz9p+p7+fJlx0Am26IIdiKAVI6dBAmmTyldv37d0WBLS4vmewmotrYWenp6XLOKbIua048A0lHuVq6KCExfX5+2E0OHDoVly5bpYKqqqrR4oPcRghmJksJpHuvZTVevXoWFCxdCXFycFiOUNRs3btQB0XcqbqTnxU1YCroQgB/lPi6CcQrM104BTHUEa4OWNZRVKkYoy+rr68NcRoCMdcgqgIuLi79HAA+jDOUg/gcMLlTplNo0qI5MnTrVFKzd3d2mLLMbMrWLioq2W4LBLXtSKa1atcr2TKKFdu7cCZcuXQp73t7eDuvXr3cEQjbJtlonNzd3kaWbKHhQ4Ten40ANuzpCdchpyOMArxI9uObjlgFMH1ChRB6U0dxhnO428qDMz89/H9d8zDK1+aBKoONdXiFu1ZBXCKy8VOyeQsmyLHoMJh7Pixdu9+UqLy/vHVxrLLvIfBwwGDqsBs6ePbtSTqZfFe21U+4IyaRJkxpxjXEoQZQHLA9KHrF8nCfhVjYYu4KmpibPF3LSNXYJ06ZNO4S2J3CsZHDgmq8QPGL4okNIk9Fl69xaFTXcWhXckU/Q5kR2D6Xz/baXKwEmhv1HqTYEL0AleLr+Gm0ThzvchfXkXd6RsVzk0tg99tdOAUi5K5HTLg1BrcTC2BYJiPHjx9fi3BDHyGO8I2ls0/lCbgEogScN4W19CH/l81jG67DdOIKB3iLOmTPTp09vDoVCu4LB4BJ2yTjeDQrWh9jGELbp3qrY7NAg9m8KZwClZADlUV4sF+UJllx+9ijrjOQ5KWxjkOcmzgZQPAcaRf5dXBuoWI3gxTLZBX7+PJLfpbLuXTx3YMTtrQUglWU+ASqZfX8PH3RS7uF3yQKEL+rG3waQ3KkEXmQQx0ASSyI/G8g6cieip0SsmCsLYLH8i6XERgLABIb+/F/k/wfGaezJyZHyCEoFykGUoyh/shzlZxWso8+JaLiBofdotBilFQU8Suun2dkRk4yOYNBoAcpPEYAIk89ycn5GUJ5JRlswaOx1o/Ev8/Ohed06aP/mG/gDW4+/8MpAQp/pGb0jHeO8T7KzPZGMlmDQwDZpbP/TT8OZPXu0hd0G6ZAuzZE2dmdnu5KMJjA4cbU00lRaCtdtGjPHdhbn0Fxpa2cw6EgyhoHBCSE5+Qfsh252kA1pc3sgYEsyGsHoGfPta695cosXt5EtEdS2JKMOhlJRBmq/oXO8mUG2ZGBvHTXKkmTUwaDSL0qZAvBWk4xkU9nHH25JMqqilqcUD0ycaHKPIhkfSEyEiqws+OiNN0wkY0JsLMx88EHYGArBabygW7mLbKt11mdmmkhGBeZtpXS8psaSZCyaMAHeCgahdswYTerXrPmXZIyJgZfS07Xnn+NV9GJnp+XukG3hKhPJqMAcUkqdR45YGmrH5r521iwdDEn5s89Css8HL44YoX3/YtEiuNzVZRs7Hd99p4NpCAZNJKMC06aUem1+lUYy4k7UYWxIQKsDAe3//rIy6P39d2e2HG2LImgiGRWYPqV0o7/fmWT88UeoRJdJQLsKC+G8aOxsO060LVLcRDJGBEaRjKlJSWHxUzd2LByoqoJ+F5LRAkwYR+PZTYpkpGClGNk0ejR89MwzOiD6vnXlSkeSUbqpMTvbRDJqYBDl104BrEhGH6bvy5w1FCMdx4/Dp5jW0mXbysttSUYZwPWBgIlkVGAqnVKbBtWRGVhHjMHag9nzoSGo7YZM7fcyM7dbgsEte1IpffXcc7Znkpa+uBNXurtNaf8Bp73TGUW21Trz0tIWWbqJggd35zen40ANuzrS7kIyyuMAm3JLklEHg3eNEnlQRnOHcbrbyINyeXq6JcmowGgkIx3v8gpxq4a8QmDltSUZJZj4bYHAC7f7crUwLc2WZJRgNJLx46ysSjmZflW01065IyRrMjIcSUZ509NJxh3BYIOxK2jdt8/zhZx0jV1Ctd/vSjJKMGEkIx7x69xaFTXcWhXcEU8koxFMGMmIF6AS7Hl+jbaJwx3umpua6plkNLYqliQjglqJhbEtEhCvDh8eMclo1cTZkoz4K59/3++vw3bjCAZ6izhnztSNGtX8ZkbGrkkpKVGTjHbt7X9CMjo1/necZHSjRO4oyeiF2LtjJGNEzNXtJhn/BkNB/ubmupeRAAAAAElFTkSuQmCC) center top no-repeat;\\n\\t\\t*background-image: url(/_imgs/evc/block/high/btn_close.png);\\n\\t\\tfilter:none;\\n\\t}\\n\\t.evc-studyplan-popup-video .close:hover {\\n\\t\\topacity: 1;\\n\\t\\tfilter:none;\\n\\t}\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/popupvideo/main',[\n\t\"jquery\",\n\t\"jquery.gudstrap\",\n\t\"jquery.mediaelement\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./index.html\"\n], function ($, GUD, mejs, Widget, template) {\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\tvar VIDEO_URL = \"_video_url\";\n\tvar MEDIA_ELEMENT = \"_media_element\";\n\tvar SEL_POPUP_VIDEO = \".evc-studyplan-popup-video\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tme[VIDEO_URL] = me[$ELEMENT].data(\"videoUrl\");\n\n\t\t\treturn me.html(template).then(function () {\n\t\t\t\tvar $modalContent = me[$ELEMENT].find(\".modal-content\");\n\n\t\t\t\t$(SEL_POPUP_VIDEO).on(\"shown.bs.modal\", function () {\n\t\t\t\t\tvar $video = $(\"<video/>\", {\n\t\t\t\t\t\t\"class\": \"ets-vp\",\n\t\t\t\t\t\t\"width\": \"100%\",\n\t\t\t\t\t\t\"height\": \"100%\",\n\t\t\t\t\t\t\"type\": \"video/mp4\",\n\t\t\t\t\t\t\"controls\": \"controls\",\n\t\t\t\t\t\t\"src\": me[VIDEO_URL]\n\t\t\t\t\t});\n\t\t\t\t\t$video.appendTo($modalContent.empty());\n\n\t\t\t\t\tmejs.MediaElementPlayer($video, {\n\t\t\t\t\t\tpauseOtherPlayers: true,\n\t\t\t\t\t\talwaysShowControls: true,\n\t\t\t\t\t\tstartVolume: 0.8,\n\t\t\t\t\t\tfeatures: [\"playpause\", \"progress\", \"current\", \"duration\", \"tracks\", \"volume\"],\n\t\t\t\t\t\tvideoWidth: 640,\n\t\t\t\t\t\tvideoHeight: 360,\n\t\t\t\t\t\tsuccess: function (mediaElement, domObject, player) {\n\t\t\t\t\t\t\tmediaElement.play();\n\t\t\t\t\t\t\tme[MEDIA_ELEMENT] = mediaElement;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t$(SEL_POPUP_VIDEO).on(\"hide.bs.modal\", function () {\n\t\t\t\t\tme[MEDIA_ELEMENT].pause();\n\t\t\t\t\t$modalContent.find(\"video\")[0].player.remove();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t\"hub/studyplan/evc/welcome-video/show\": function () {\n\t\t\tthis[$ELEMENT].find(SEL_POPUP_VIDEO).modal();\n\t\t},\n\t\t\"dom:.mejs-cover/click\": function () {\n\t\t\tvar me = this;\n\t\t\t!me[MEDIA_ELEMENT].paused && me[MEDIA_ELEMENT].pause();\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/privatelesson/index.html',[],function() { return function template(data) { var o = \"\";\n    var STATUS_WELCOME = \"welcome\";\n\n    var statusCode = data.statusCode;\n    var unitId = data.unitId;\no += \"\\n<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/announcement/pl\\\"></div>\\n<div class=\\\"st-evc-status\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/statusbar/pl\\\"></div>\\n<div class=\\\"evc-studyplan-wrapper\\\">\\n    \"; if( statusCode === STATUS_WELCOME){ o += \"\\n        <div class=\\\"evc-studyplan-column-single evc-studyplan-welcome\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/welcome-pl/main\\\"></div>\\n    \"; }else{ o += \"\\n        <div class=\\\"evc-studyplan-column-single\\\">\\n            <div class=\\\"evc-studyplan-gap-2x\\\" data-weave=\\\"school-ui-studyplan/widget/gl-pl/lesson/pl\\\"></div>\\n            <div class=\\\"evc-studyplan-gap-1x evc-studyplan-class-info\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"evc-studyplan-activity-container\\\">\\n        </div>\\n    \"; } o += \"\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n\\n    .evc-studyplan-wrapper{\\n        text-align: center;\\n        padding: 30px 0 50px;\\n        color: #4a4a4a;\\n    }\\n    .evc-studyplan-column-full{\\n        display: inline-block;\\n    }\\n    .evc-studyplan-column-single{\\n        display: inline-block;\\n        width: 980px;\\n    }\\n    .evc-studyplan-column-single hr{\\n        margin-bottom: 0;\\n    }\\n    .evc-studyplan-welcome{\\n        width: 900px;\\n        padding-top: 50px;\\n    }\\n    .evc-studyplan-gap-2x{\\n        text-align: left;\\n        width: 620px;\\n        padding-left: 35px;\\n        padding-right: 35px;\\n        vertical-align: top;\\n        display: inline-block;\\n\\t\\tmargin: 20px auto;\\n    }\\n    .evc-studyplan-gap-1x{\\n        text-align: left;\\n        width: 330px;\\n        vertical-align: top;\\n        margin: auto;\\n\\t    padding-left: 30px;\\n        display: inline-block;\\n\\t    border-left:1px #eee solid;\\n    }\\n    .evc-studyplan-gap-1x .evc-studyplan-gap-block{\\n\\t    margin-bottom: 15px;\\n    }\\n    .st-evc-status{\\n        color: #4a4a4a;\\n        background-color: #e6e6e6;\\n    }\\n    .evc-studyplan-gray{\\n        color:#999999;\\n    }\\n    .evc-studyplan-green{\\n        color:#87c600;\\n    }\\n    .evc-studyplan-blue{\\n        color: #00bee3;\\n    }\\n    .evc-none{\\n        display: none;\\n    }\\n    .evc-studyplan-activity-container {\\n\\t    width:880px;\\n\\t    margin:0 auto;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/privatelesson/main',[\"troopjs-browser/component/widget\",\n\t\"when\",\n\t\"jquery\",\n\t\"school-ui-studyplan/module\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"school-ui-studyplan/utils/time-parser\",\n\t\"school-ui-studyplan/enum/studyplan-item-typecode\",\n\t\"template!./index.html\"\n], function (Widget, when, $, module, clientStorage, timeParser, spItemTypeCode, template) {\n\t\"use strict\";\n\n    var MODULE_CONFIG = $.extend(true, {\n        cacheServer: \"\",\n        useLegacyUnitId: true\n    }, module.config() || {});\n\n    var $ELEMENT = \"$element\";\n\n\tvar STATUS_NEVERTAKE = \"nevertake\";\n\tvar STATUS_BOOKED = \"booked\";\n\tvar STATUS_DROPOUT = \"dropout\";\n\tvar STATUS_PENDING = \"pending\";\n\tvar STATUS_ATTENDED = \"attended\";\n\n\tvar STATUS_WELCOME = \"welcome\";\n\tvar STATUS_OPTIONAL_MSG_PL = \"optional_msg_pl\";\n\n\tvar STATUS_MISSING_CLASS = \"missingclass\";\n\n\tvar STATUS_START_NOT_YET = \"notyet\";\n\tvar STATUS_START_IN_COUNTDOWN = \"incountdown\";\n\tvar STATUS_START_STARTED = \"started\";\n\n\tvar WIDGET_COUNTDOWN = \"school-ui-studyplan/widget/gl-pl/countdown/pl\",\n\t\tWIDGET_CLASS_STATUS = \"school-ui-studyplan/widget/gl-pl/class-status/pl\",\n\t\tWIDGET_CREDIT_PL = \"school-ui-studyplan/widget/gl-pl/credit/pl\",\n\t\tWIDGET_CREDIT_SPPL20 = \"school-ui-studyplan/widget/gl-pl/credit/sppl20\",\n\t\tWIDGET_FEEDBACK_PL = \"school-ui-studyplan/widget/gl-pl/feedback/pl\",\n\t\tWIDGET_FEEDBACK_PENDING = \"school-ui-studyplan/widget/gl-pl/feedback-pending/main\",\n\t\tWIDGET_ENTER_CLASS = \"school-ui-studyplan/widget/gl-pl/enter-class/pl\",\n\t\tWIDGET_BOOKED = \"school-ui-studyplan/widget/gl-pl/book-pl/main\",\n\t\tWIDGET_CANCEL = \"school-ui-studyplan/widget/gl-pl/cancel-pl/main\";\n\n\tvar SEL_ACTIVITY_CONTAINER = \".evc-studyplan-activity-container\",\n\t\tSEL_INFO_CONTAINER = \".evc-studyplan-class-info\",\n\t\tSEL_ENTER_CLASS = \".ets-sp-glpl-enter-class\";\n\n\tvar CLS_GAP_2X = \"evc-studyplan-gap-2x text-center\",\n\t\tCLS_GAP = \"evc-studyplan-gap-block\",\n\t\tCLS_ENTER_CLASS = \"ets-sp-glpl-enter-class\",\n\t\tCLS_NONE = \"ets-none\";\n\n\tvar UNIT_ID = \"_unit_id\";\n\tvar CLASS_ID = \"_class_id\";\n\n\tvar UNIT_ID_KEY = MODULE_CONFIG.useLegacyUnitId ? \"legacyUnitId\" : \"templateUnitId\"\n\n\tvar TOPIC_PIC_PATH = MODULE_CONFIG.cacheServer + \"/_imgs/evc/pl/topic/100x100/\";\n\tvar PL_DEFAULT_PIC = MODULE_CONFIG.cacheServer + \"/_imgs/evc/pl/pl_default_100x100.png\";\n\n\tvar DURATION_WAITING = 3000;\n\n\tvar TIMER_WAITING = \"_timer_waiting\";\n\n\tvar TYPE_CODE= \"_type_code\";\n\tvar WIDGET_CREDIT = \"_widget_credit\";\n\n\tfunction createWidget(widgetName, appendToContainer, classNames) {\n\t\tvar me = this;\n\t\tvar $widgetElement = $(\"<div>\");\n\n\t\tif (widgetName === WIDGET_ENTER_CLASS) {\n\t\t\t$widgetElement.attr(\"data-weave\", widgetName + \"(unitId, classId, spTypeCode)\")\n\t\t\t\t.data(\"classId\", me[CLASS_ID]);\n\t\t} else {\n\t\t\t$widgetElement.attr(\"data-weave\", widgetName + \"(unitId, spTypeCode)\");\n\t\t}\n\t\treturn $widgetElement\n\t\t\t.addClass(classNames || \"\")\n\t\t\t.data(\"unitId\", me[UNIT_ID])\n\t\t\t.data('spTypeCode', me[TYPE_CODE])\n\t\t\t.appendTo(me.$element.find(appendToContainer))\n\t\t\t.weave();\n\t}\n\n\treturn Widget.extend(function ($element, name, item) {\n\t\tvar me = this;\n\n\t\tif (!item && !item.properties) {\n\t\t\treturn;\n\t\t}\n\n\t\tme[TYPE_CODE] = item.typeCode;\n\t\tme[WIDGET_CREDIT] = me[TYPE_CODE] === spItemTypeCode.pl20 ? WIDGET_CREDIT_SPPL20 : WIDGET_CREDIT_PL;\n\n\t\t// Show Optional Msg\n\t\tme.closeOptionalTips = clientStorage.getLocalStorage(\"pl_tips\") === \"closed\";\n\n\t}, {\n\t\t\"hub:memory/load/unit\": function (unit) {\n\t\t\tvar me = this;\n\t\t\tif (!unit || !unit[UNIT_ID_KEY]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme.unitId = unit[UNIT_ID_KEY];\n\n\t\t\t// Check the student whether is first come or not\n\t\t\tme.publish(\"query\", [\"member_site_setting!evc;FirstTimeStudyPlanPL\"]).spread(function (data) {\n\t\t\t\tif (!data) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (data.value.toString() === \"true\") {\n\t\t\t\t\tme.publish(\"studyplan/evc/pl/load\");\n\t\t\t\t} else {\n\t\t\t\t\tme.html(template, {\n\t\t\t\t\t\t\"unitId\": me.unitId,\n\t\t\t\t\t\t\"statusCode\": STATUS_WELCOME\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t},\n\t\t\"hub:memory/studyplan/evc/pl/start-status\": function (status) {\n\t\t\tvar me = this;\n\t\t\tswitch (status) {\n\t\t\t\tcase STATUS_START_NOT_YET:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_IN_COUNTDOWN:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).addClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t\tcase STATUS_START_STARTED:\n\t\t\t\t\tme.$element.find(SEL_ENTER_CLASS).removeClass(CLS_NONE);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/evc/pl/load\": function () {\n\t\t\tvar me = this;\n\t\t\tme[UNIT_ID] = me.unitId;\n\n\t\t\tme.publish(\"query\", [\"plclass!\" + me.unitId]).spread(function success(data) {\n\t\t\t\tif (!data || !data.topic || !data.statusCode) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar content = {};\n\t\t\t\tvar topic = data.topic;\n\t\t\t\tvar statusCode = data.statusCode.toLowerCase();\n\n\t\t\t\t// Copy & package own/customize PL class Info\n\t\t\t\tcontent.status = {\n\t\t\t\t\t\"statusCode\": statusCode\n\t\t\t\t};\n\n\t\t\t\tcontent.lessonInfo = {\n\t\t\t\t\t\"topic\": topic.topicBlurb,\n\t\t\t\t\t\"description\": topic.descriptionBlurb,\n\t\t\t\t\t\"image\": topic.topicImageUrl ? (TOPIC_PIC_PATH + topic.topicImageUrl) : PL_DEFAULT_PIC\n\t\t\t\t};\n\n\t\t\t\tcontent.topicId = data.topic.topicId;\n\n\t\t\t\tif (statusCode === STATUS_BOOKED || statusCode === STATUS_ATTENDED || statusCode === STATUS_PENDING) {\n\t\t\t\t\tif (!data.bookedClass || !data.bookedClass.easternStartTime) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Copy data\n\t\t\t\t\tvar bookedClass = data.bookedClass;\n\n\t\t\t\t\tme[CLASS_ID] = bookedClass.classId;\n\n\t\t\t\t\tcontent.timezoneId = bookedClass.timezoneId;\n\t\t\t\t\tcontent.bookedClass = {\n\t\t\t\t\t\t\"classId\": bookedClass.classId,\n\t\t\t\t\t\t\"teacherId\": bookedClass.teacherId\n\t\t\t\t\t};\n\t\t\t\t\tcontent.customizedStartTime = timeParser.toLocalTime(\n\t\t\t\t\t\tbookedClass.easternStartTime,\n\t\t\t\t\t\tbookedClass.timeZoneOffset\n\t\t\t\t\t);\n\n\t\t\t\t\tif (statusCode === STATUS_BOOKED) {\n\t\t\t\t\t\tif (!bookedClass.easternSuggestedCancelTime || !data.countDown) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar countDown = data.countDown;\n\n\t\t\t\t\t\tcontent.countdown = {\n\t\t\t\t\t\t\t\"timeIn\": countDown.secondsLeftForStart,\n\t\t\t\t\t\t\t\"timeOut\": countDown.secondsLeftForEnter\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontent.suggestedCancelTime = timeParser.toLocalTime(\n\t\t\t\t\t\t\tbookedClass.easternSuggestedCancelTime,\n\t\t\t\t\t\t\tbookedClass.timeZoneOffset\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (statusCode === STATUS_ATTENDED || statusCode === STATUS_PENDING) {\n\t\t\t\t\t\tif (!data.feedback) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar feedback = data.feedback;\n\t\t\t\t\t\tcontent.feedback = {\n\t\t\t\t\t\t\t\"feedbackId\": feedback.feedbackId,\n\t\t\t\t\t\t\t\"teacherId\": feedback.teacherId,\n\t\t\t\t\t\t\t\"entryDate\": feedback.entryDate\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Render\n\t\t\t\tme.html(template, {\n\t\t\t\t\t\"unitId\": me.unitId,\n\t\t\t\t\t\"statusCode\": statusCode\n\t\t\t\t}).then(function () {\n\t\t\t\t\tme[$ELEMENT].find(SEL_INFO_CONTAINER).empty();\n\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_CONTAINER).empty();\n\n                    // Publish status\n                    me.publish(\"studyplan/evc/pl/status\", content);\n                    // clear the class status as not yet\n                    me.publish(\"studyplan/evc/pl/start-status\", STATUS_START_NOT_YET);\n\n\t\t\t\t\t// Publish status to show optional msg\n\t\t\t\t\tif (!me.closeOptionalTips) {\n\t\t\t\t\t\tme.publish(\"studyplan/evc/pl/notification\", {\n\t\t\t\t\t\t\t\"statusCode\": STATUS_OPTIONAL_MSG_PL\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// Publish status to show status bar\n\t\t\t\t\tif (statusCode === STATUS_DROPOUT) {\n\t\t\t\t\t\tme.publish(\"studyplan/evc/pl/notification\", {\n\t\t\t\t\t\t\t\"statusCode\": STATUS_MISSING_CLASS\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tvar evcServerCode = data.bookedClass && data.bookedClass.evcServerCode || '';\n\t\t\t\t\t// Adobe classroom: \"cn1\" or \"us1\", otherwise \"EvcCN1\" or \"EvcUS1\"\n\t\t\t\t\tvar isAdobeClassroom = evcServerCode.toLowerCase().indexOf('evc') < 0;\n\t\t\t\t\tif (!isAdobeClassroom) {\n\t\t\t\t\t\t// simulate techcheck passed\n\t\t\t\t\t\tclientStorage.setSessionStorage(\"techcheck_state\", \"passed\");\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (statusCode.toLowerCase()) {\n\t\t\t\t\t\tcase STATUS_NEVERTAKE:\n\t\t\t\t\t\tcase STATUS_DROPOUT:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_BOOKED, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, me[WIDGET_CREDIT], SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase STATUS_BOOKED:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_COUNTDOWN, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CLASS_STATUS, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_ENTER_CLASS, SEL_INFO_CONTAINER, CLS_GAP + \" \" + CLS_ENTER_CLASS + \" \" + CLS_NONE);\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_CANCEL, SEL_INFO_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tcreateWidget.call(me, me[WIDGET_CREDIT], SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase STATUS_PENDING:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK_PENDING, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\tcreateWidget.call(me, me[WIDGET_CREDIT], SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase STATUS_ATTENDED:\n\t\t\t\t\t\t\tcreateWidget.call(me, WIDGET_FEEDBACK_PL, SEL_ACTIVITY_CONTAINER, CLS_GAP_2X);\n\t\t\t\t\t\t\tcreateWidget.call(me, me[WIDGET_CREDIT], SEL_ACTIVITY_CONTAINER, CLS_GAP);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/statusbar/index.html',[],function() { return function template(data) { var o = \"\";\n    var STATUS_LEFT_EARLY = \"leftearly\";\n    var STATUS_MISSING_CLASS = \"missingclass\";\n    var STATUS_NO_COUPON_PL = \"no_coupon_pl\";\n    var STATUS_NO_COUPON_GL = \"no_coupon_gl\";\n    var STATUS_OPTIONAL_MSG_GL = \"optional_msg_gl\";\n    var STATUS_OPTIONAL_MSG_PL = \"optional_msg_pl\";\n\n    var statusCode = data.statusCode;\n    var link = data.link || \"\";\no += \"\\n\"; if(statusCode === STATUS_OPTIONAL_MSG_GL){ o += \"\\n    <div class=\\\"evc-studyplan-status-container evc-studyplan-status-optional-gl-container clearfix\\\">\\n\"; }else if(statusCode === STATUS_OPTIONAL_MSG_PL){ o += \"\\n    <div class=\\\"evc-studyplan-status-container evc-studyplan-status-optional-pl-container clearfix\\\">\\n\"; }else{ o += \"\\n    <div class=\\\"evc-studyplan-status-container clearfix\\\">\\n\"; } o += \"\\n    <hr>\\n    <div class=\\\"evc-studyplan-status-tips\\\">\\n        \"; \n            switch(statusCode){ \n                case STATUS_LEFT_EARLY:\n                    showLeftEarly();\n                    break;\n                case STATUS_MISSING_CLASS:\n                    showMissingClass();\n                    break;\n                case STATUS_NO_COUPON_PL:\n                    showNoCouponPL();\n                    break;\n                case STATUS_NO_COUPON_GL:\n                    showNoCouponGL();\n                    break;\n                case STATUS_OPTIONAL_MSG_GL:\n                    showOptionalMsgGL();\n                    break;\n                case STATUS_OPTIONAL_MSG_PL:\n                    showOptionalMsgPL();\n                    break;\n                default:\n                    break;\n            }\n        o += \"\\n    </div>\\n</div>\\n\\n\"; function showLeftEarly() { o += \"\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568598\\\"></h4>\\n    <p class=\\\"evc-studyplan-status-subline\\\">\\n        <span>\" + data.msg + \"</span><br>\\n        <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568602\\\"></span>\\n    </p>\\n\"; } o += \"\\n\\n\"; function showMissingClass() {o += \"\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568621\\\"></h4>\\n    <p class=\\\"evc-studyplan-status-subline\\\">\\n        <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568622\\\"></span>\\n        <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568602\\\"></span>\\n    </p>\\n\"; } o += \"\\n\\n\"; function showNoCouponPL() { o += \"\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568594\\\"></h4>\\n    \"; if (link) { o += \"\\n        <p class=\\\"evc-studyplan-status-subline\\\">\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568593\\\"></span>\\n            <strong>\\n                <a href=\\\"\" + link + \"\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568595\\\"></a>\\n            </strong>\\n<!--             \"; if(data.showSkip) { o += \"\\n                <span data-blurb-id=\\\"101321\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\">or</span>\\n                <strong data-weave=\\\"school-ui-studyplan/widget/gl-pl/skip-pl/main\\\"></strong>\\n            \"; } o += \" -->\\n        </p>\\n    \"; } o += \"\\n\"; } o += \"\\n\\n\"; function showNoCouponGL() { o += \"\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"570577\\\"></h4>\\n    \"; if (link) { o += \"\\n        <p class=\\\"evc-studyplan-status-subline\\\">\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"570578\\\"></span>\\n            <strong>\\n                <a href=\\\"\" + link + \"\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568595\\\"></a>\\n            </strong>\\n        </p>\\n    \"; } o += \"\\n\"; } o += \"\\n\\n\"; function showOptionalMsgGL() { o += \"\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-hidden=\\\"true\\\" data-action=\\\"closeGLOptionalMsg\\\">&times;</button>\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"629827\\\"></h4>\\n    <p class=\\\"evc-studyplan-status-subline\\\">\\n        <span data-weave=\\\"school-ui-shared/widget/blurb\\\" data-blurb-ccl=\\\"school.courseware.blurb.629828\\\" data-blurb-id=\\\"629828\\\" data-text-en=\\\"The Group Class is a great opportunity to practice your English, meet other students and get answers to your questions from one of our experienced teachers.\\\"></span>\\n    </p>\\n\"; } o += \"\\n\\n\"; function showOptionalMsgPL() { o += \"\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-hidden=\\\"true\\\" data-action=\\\"closePLOptionalMsg\\\">&times;</button>\\n    <h4 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"629827\\\"></h4>\\n    <p class=\\\"evc-studyplan-status-subline\\\">\\n        <span data-weave=\\\"school-ui-shared/widget/blurb\\\" data-blurb-ccl=\\\"school.courseware.blurb.629829\\\" data-blurb-id=\\\"629829\\\" data-text-en=\\\"The Private Class is a great opportunity for you to practice and get feedback from one of our experienced teachers on what youve just learned.\\\"></span>\\n    </p>\\n\"; } o += \"\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-status-container{\\n        text-align: left;\\n        width: 680px;\\n        margin: 0 auto;\\n    }\\n    .evc-studyplan-status-container hr{\\n        border-top-color: #bdbdbd;\\n        margin: 0;\\n    }\\n    .evc-studyplan-status-tips{\\n        margin: 15px 0;\\n    }\\n    .evc-studyplan-status-tips .evc-studyplan-status-subline {\\n        font-size: 12px;\\n        margin-top: 6px;\\n    }\\n    .evc-studyplan-status-tips .evc-studyplan-status-subline strong {\\n        white-space: nowrap;\\n        font-style: italic;\\n    }\\n    .evc-studyplan-status-tips .evc-studyplan-status-subline strong a{\\n        cursor: pointer;\\n    }\\n    .evc-studyplan-status-tips button.close {\\n        float: right;\\n        padding: 0;\\n        cursor: pointer;\\n        background: transparent;\\n        border: 0;\\n        -webkit-appearance: none;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/statusbar/main',[\"troopjs-browser/component/widget\",\n    \"jquery\",\n    \"template!./index.html\"\n], function(Widget, $, template) {\n    'use strict';\n\n    return Widget.extend({\n        \"render\": function(data){\n            var me = this;\n            if (!data) {\n                return;\n            }\n            me.append(template, data);\n        },\n        \"hideSeparateLine\": function() {\n            var me = this;\n            var $me = me.$element;\n            var $hr = $me.find(\"hr\").eq(0);\n            if ($hr.length > 0) {\n                $hr.hide();\n            }\n        }\n    });\n});\n",
    "define('school-ui-studyplan/widget/gl-pl/statusbar/cp20',[\"./main\",\n\t\"jquery\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./index.html\"\n], function (StatusBarBase, $, clientStorage, template) {\n\t'use strict';\n\n\tvar SEL_CONTAINER = \".evc-studyplan-status-optional-pl-container\";\n\n\treturn StatusBarBase.extend({\n\t\t\"hub/studyplan/evc/cp20/notification\": function (data) {\n\t\t\tvar me = this;\n\t\t\tme.render(data);\n\t\t},\n\t\t\"hub/studyplan/evc/cp20/announcement/disable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.hideSeparateLine();\n\t\t},\n\t\t\"dom:[data-action = closePLOptionalMsg]/click\": function (e) {\n\t\t\tvar me = this;\n\t\t\tvar $el = me.$element;\n\n\t\t\tclientStorage.setLocalStorage(\"cp20_tips\", \"closed\");\n\t\t\t$el.find(SEL_CONTAINER).remove();\n\t\t\tme.hideSeparateLine();\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/statusbar/gl',[\"./main\",\n\t\"jquery\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./index.html\"\n], function (StatusBarBase, $, clientStorage, template) {\n\t'use strict';\n\n\tvar SEL_CONTAINER = \".evc-studyplan-status-optional-gl-container\";\n\n\treturn StatusBarBase.extend({\n\t\t\"hub/studyplan/evc/gl/notification\": function (data) {\n\t\t\tvar me = this;\n\t\t\tme.render(data);\n\t\t},\n\t\t\"hub/studyplan/evc/gl/announcement/disable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.hideSeparateLine();\n\t\t},\n\t\t\"dom:[data-action = closeGLOptionalMsg]/click\": function (e) {\n\t\t\tvar me = this;\n\t\t\tvar $el = me.$element;\n\n\t\t\tclientStorage.setLocalStorage(\"gl_tips\", \"closed\");\n\t\t\t$el.find(SEL_CONTAINER).remove();\n\t\t\tme.hideSeparateLine();\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/gl-pl/statusbar/pl',[\"./main\",\n\t\"jquery\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"template!./index.html\"\n], function (StatusBarBase, $, clientStorage, template) {\n\t'use strict';\n\n\tvar SEL_CONTAINER = \".evc-studyplan-status-optional-pl-container\";\n\n\treturn StatusBarBase.extend({\n\t\t\"hub/studyplan/evc/pl/notification\": function (data) {\n\t\t\tvar me = this;\n\t\t\tme.render(data);\n\t\t},\n\t\t\"hub/studyplan/evc/pl/announcement/disable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.hideSeparateLine();\n\t\t},\n\t\t\"dom:[data-action = closePLOptionalMsg]/click\": function (e) {\n\t\t\tvar me = this;\n\t\t\tvar $el = me.$element;\n\n\t\t\tclientStorage.setLocalStorage(\"pl_tips\", \"closed\");\n\t\t\t$el.find(SEL_CONTAINER).remove();\n\t\t\tme.hideSeparateLine();\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/terms-and-conditions/main.html',[],function() { return function template(data) { var o = \"<p data-blurb-id=\\\"708942\\\" data-text-en=\\\"\\\"\\n\\tdata-pattern=\\\"\\\\*{3}([^*]+)\\\\*{3}\\\"\\n\\tdata-weave=\\\"troopjs-ef/blurb/widget\\\">\\n\\t<a href=\\\"javascript:void(0);\\\" data-value-name=\\\"Terms and Conditions\\\"\\n\\t\\tdata-blurb-id=\\\"685505\\\"\\n\\t\\tdata-weave-delay=\\\"troopjs-ef/blurb/widget\\\"\\n\\t\\tdata-toggle=\\\"modal\\\" data-target=\\\"#teamsAndConditions\\\"></a>\\n</p>\\n<!-- Modal -->\\n<div class=\\\"ets-sp-modal-tc modal fade\\\" id=\\\"teamsAndConditions\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"teamsAndConditionsLabel\\\" aria-hidden=\\\"true\\\">\\n\\t<div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<div class=\\\"modal-header\\\">\\n\\t\\t\\t\\t<h5 class=\\\"modal-title\\\"\\n\\t\\t\\t\\t\\tid=\\\"teamsAndConditionsLabel\\\"\\n\\t\\t\\t\\t\\tdata-weave=\\\"troopjs-ef/blurb/widget\\\"\\n\\t\\t\\t\\t\\tdata-blurb-id=\\\"685505\\\"\\n\\t\\t\\t\\t\\tdata-value-name=\\\"Terms and Conditions\\\"\\n\\t\\t\\t\\t></h5>\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\">\\n\\t\\t\\t\\t\\t<span aria-hidden=\\\"true\\\">&times;</span>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t\\t<div class=\\\"modal-body\\\"\\n\\t\\t\\t\\tdata-blurb-id=\\\"708943\\\"\\n\\t\\t\\t\\tdata-weave=\\\"troopjs-ef/blurb/widget\\\">\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/terms-and-conditions/main',[\n    \"troopjs-ef/component/widget\",\n    \"template!./main.html\",\n\t\"jquery.gudstrap\"\n], function (Widget, template) {\n    return Widget.extend({\n\t\t\"sig/start\": function () {\n            this.html(template);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-cp20/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"clearfix row\\\">\\n    <div class=\\\"evc-studyplan-welcome-content\\\">\\n        <h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568614\\\"></h2>\\n        <p class=\\\"evc-studyplan-welcome-content-des\\\">\\n            <span data-weave=\\\"school-ui-shared/widget/blurb\\\" data-blurb-ccl=\\\"school.courseware.blurb.568615\\\" data-blurb-id=\\\"568615\\\" data-text-en=\\\"In the private class you learn English with your own private teacher.\\\"></span><br>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568616\\\"></span>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568617\\\"></span><br>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568618\\\"></span>\\n        </p>\\n        <p>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568611\\\" data-action=\\\"getStart\\\"></button>\\n        </p>\\n    </div>\\n    <div class=\\\"evc-studyplan-welcome-image\\\">\\n        \"; if (data.video) { o += \"\\n            <a href=\\\"\\\" data-action=\\\"showVideo\\\">\\n                <img src=\\\"\" + data.cacheServer+ \"/_imgs/evc/pl/studyplan/video.jpg\\\">\\n            </a>\\n            <p class=\\\"evc-studyplan-welcome-video-description\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569775\\\"></p>\\n            <div data-weave=\\\"school-ui-studyplan/widget/gl-pl/popupvideo/main\\\" data-video-url=\\\"\" + data.video+ \"\\\"></div>\\n        \"; } else if (data.image) { o += \"\\n            <img src=\\\"\" + data.image+ \"\\\">\\n        \"; } o += \"\\n    </div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-welcome-content{\\n        text-align: left;\\n        float: left;\\n        width: 510px;\\n        padding: 0 15px;\\n    }\\n    .evc-studyplan-welcome-content > p{\\n        margin-top: 30px;\\n    }\\n    .evc-studyplan-welcome-content-des{\\n        line-height: 1.7em;\\n    }\\n    .evc-studyplan-welcome-image{\\n        float: right;\\n        padding: 0 30px 0 15px;\\n        width: 375px;\\n    }\\n    .evc-studyplan-welcome-image > a{\\n        display: inline-block;\\n        margin-top: 7px;\\n        margin-bottom: 10px;\\n    }\\n    .evc-studyplan-welcome-video-description {\\n        font-style: italic;\\n        text-align: center;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/welcome-cp20/main',[\n    \"jquery\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-studyplan/module\",\n    \"template!./index.html\"\n], function ($, Widget, module, template) {\n    \"use strict\";\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t}, module.config() || {});\n\n    var CCL_MEDIA = \"ccl!'school.studyplan.cp20.intro.media'\";\n\n    return Widget.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            me.query(CCL_MEDIA).spread(function (cclMediaResult) {\n                me.query(cclMediaResult.value).spread(function (data) {\n                    var customizeImage = /\\.jpg$|\\.png$|\\.gif$/i.test(data.url);\n                    me.html(template, {\n                        cacheServer: MODULE_CONFIG.cacheServer,\n                        image: customizeImage && data.url,\n                        video: !customizeImage && data.url\n                    });\n                });\n            });\n        },\n        \"dom:[data-action = getStart]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            me.publish(\"school/member_site_setting/Save\", {\n                \"siteArea\": \"evc\",\n                \"keyCode\": \"FirstTimeStudyPlanCP20\",\n                \"keyValue\": \"true\"\n            }).spread(function() {\n                // reload\n                me.publish(\"studyplan/evc/cp20/load\");\n            });\n        },\n        \"dom:[data-action = showVideo]/click\": function(e) {\n            e.preventDefault();\n            this.publish(\"studyplan/evc/welcome-video/show\");\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-gl/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"clearfix row\\\">\\n    <div class=\\\"evc-studyplan-welcome-content\\\">\\n        <h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568607\\\"></h2>\\n        <p class=\\\"evc-studyplan-welcome-content-des\\\">\\n            <span data-weave=\\\"school-ui-shared/widget/blurb\\\" data-blurb-ccl=\\\"school.courseware.blurb.568608\\\" data-blurb-id=\\\"568608\\\" data-text-en=\\\"In the conversation class you practice your spoken English together with other students.\\\"></span><br>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568609\\\"></span>\\n        </p>\\n        <p>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568611\\\" data-action=\\\"getStart\\\"></button>\\n        </p>\\n    </div>\\n    <div class=\\\"evc-studyplan-welcome-image\\\">\\n        \"; if (data.video) { o += \"\\n            <a href=\\\"\\\" data-action=\\\"showVideo\\\">\\n                <img src=\\\"\" + data.cacheServer+ \"/_imgs/evc/gl/studyplan/video.jpg\\\">\\n            </a>\\n            <p class=\\\"evc-studyplan-welcome-video-description\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569776\\\"></p>\\n            <div data-weave=\\\"school-ui-studyplan/widget/gl-pl/popupvideo/main\\\" data-video-url=\\\"\" + data.video+ \"\\\"></div>\\n        \"; } else if (data.image) { o += \"\\n            <img src=\\\"\" + data.image+ \"\\\">\\n        \"; } o += \"\\n    </div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-welcome-content{\\n        text-align: left;\\n        float: left;\\n        width: 510px;\\n        padding: 0 15px;\\n    }\\n    .evc-studyplan-welcome-content > p{\\n        margin-top: 30px;\\n    }\\n    .evc-studyplan-welcome-content-des{\\n        line-height: 1.7em;\\n    }\\n    .evc-studyplan-welcome-image{\\n        float: right;\\n        padding: 0 30px 0 15px;\\n        width: 375px;\\n    }\\n    .evc-studyplan-welcome-image > a{\\n        display: inline-block;\\n        margin-top: 7px;\\n        margin-bottom: 10px;\\n    }\\n    .evc-studyplan-welcome-video-description {\\n        font-style: italic;\\n        text-align: center;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/welcome-gl/main',[\n    \"jquery\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-studyplan/module\",\n    \"template!./index.html\"\n], function ($, Widget, module, template) {\n    \"use strict\";\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t}, module.config() || {});\n\n    var CCL_MEDIA = \"ccl!'school.studyplan.gl.intro.media'\";\n\n    return Widget.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            me.query(CCL_MEDIA).spread(function (cclMediaResult) {\n                me.query(cclMediaResult.value).spread(function (data) {\n                    var customizeImage = /\\.jpg$|\\.png$|\\.gif$/i.test(data.url);\n                    me.html(template, {\n                        cacheServer: MODULE_CONFIG.cacheServer,\n                        image: customizeImage && data.url,\n                        video: !customizeImage && data.url\n                    });\n                });\n            });\n        },\n        \"dom:[data-action = getStart]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            me.publish(\"school/member_site_setting/Save\", {\n                \"siteArea\": \"evc\",\n                \"keyCode\": \"FirstTimeStudyPlanGL\",\n                \"keyValue\": \"true\"\n            }).spread(function() {\n                // reload\n                me.publish(\"studyplan/evc/gl/load\");\n            });\n        },\n        \"dom:[data-action = showVideo]/click\": function(e) {\n            e.preventDefault();\n            this.publish(\"studyplan/evc/welcome-video/show\");\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/gl-pl/welcome-pl/index.html',[],function() { return function template(data) { var o = \"<div class=\\\"clearfix row\\\">\\n    <div class=\\\"evc-studyplan-welcome-content\\\">\\n        <h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568614\\\"></h2>\\n        <p class=\\\"evc-studyplan-welcome-content-des\\\">\\n            <span data-weave=\\\"school-ui-shared/widget/blurb\\\" data-blurb-ccl=\\\"school.courseware.blurb.568615\\\" data-blurb-id=\\\"568615\\\" data-text-en=\\\"In the private class you learn English with your own private teacher.\\\"></span><br>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568616\\\"></span>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568617\\\"></span><br>\\n            <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568618\\\"></span>\\n        </p>\\n        <p>\\n            <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"568611\\\" data-action=\\\"getStart\\\"></button>\\n        </p>\\n    </div>\\n    <div class=\\\"evc-studyplan-welcome-image\\\">\\n        \"; if (data.video) { o += \"\\n            <a href=\\\"\\\" data-action=\\\"showVideo\\\">\\n                <img src=\\\"\" + data.cacheServer+ \"/_imgs/evc/pl/studyplan/video.jpg\\\">\\n            </a>\\n            <p class=\\\"evc-studyplan-welcome-video-description\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569775\\\"></p>\\n            <div data-weave=\\\"school-ui-studyplan/widget/gl-pl/popupvideo/main\\\" data-video-url=\\\"\" + data.video+ \"\\\"></div>\\n        \"; } else if (data.image) { o += \"\\n            <img src=\\\"\" + data.image+ \"\\\">\\n        \"; } o += \"\\n    </div>\\n</div>\\n\\n<style type=\\\"text/css\\\">\\n    .evc-studyplan-welcome-content{\\n        text-align: left;\\n        float: left;\\n        width: 510px;\\n        padding: 0 15px;\\n    }\\n    .evc-studyplan-welcome-content > p{\\n        margin-top: 30px;\\n    }\\n    .evc-studyplan-welcome-content-des{\\n        line-height: 1.7em;\\n    }\\n    .evc-studyplan-welcome-image{\\n        float: right;\\n        padding: 0 30px 0 15px;\\n        width: 375px;\\n    }\\n    .evc-studyplan-welcome-image > a{\\n        display: inline-block;\\n        margin-top: 7px;\\n        margin-bottom: 10px;\\n    }\\n    .evc-studyplan-welcome-video-description {\\n        font-style: italic;\\n        text-align: center;\\n    }\\n</style>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/gl-pl/welcome-pl/main',[\n    \"jquery\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-studyplan/module\",\n    \"template!./index.html\"\n], function ($, Widget, module, template) {\n    \"use strict\";\n\n\tvar MODULE_CONFIG = $.extend(true, {\n\t\tcacheServer: \"\",\n\t}, module.config() || {});\n\n    var CCL_MEDIA = \"ccl!'school.studyplan.pl.intro.media'\";\n\n    return Widget.extend({\n        \"sig/start\": function() {\n            var me = this;\n\n            me.query(CCL_MEDIA).spread(function (cclMediaResult) {\n                me.query(cclMediaResult.value).spread(function (data) {\n                    var customizeImage = /\\.jpg$|\\.png$|\\.gif$/i.test(data.url);\n                    me.html(template, {\n                        cacheServer: MODULE_CONFIG.cacheServer,\n                        image: customizeImage && data.url,\n                        video: !customizeImage && data.url\n                    });\n                });\n            });\n        },\n        \"dom:[data-action = getStart]/click\": function(e) {\n            e.preventDefault();\n            var me = this;\n            me.publish(\"school/member_site_setting/Save\", {\n                \"siteArea\": \"evc\",\n                \"keyCode\": \"FirstTimeStudyPlanPL\",\n                \"keyValue\": \"true\"\n            }).spread(function() {\n                // reload\n                me.publish(\"studyplan/evc/pl/load\");\n            });\n        },\n        \"dom:[data-action = showVideo]/click\": function(e) {\n            e.preventDefault();\n            this.publish(\"studyplan/evc/welcome-video/show\");\n        }\n    });\n});\n\n",
    "define('school-ui-studyplan/widget/initialization/hash-preview',[\n\t\"jquery\",\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"poly\"\n], function studyplanHashHandle($, when, Widget, poly) {\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\treturn Widget.extend({\n\t\t\"hub/school/interface/get/activity-container/closeHash\": function(){\n\t\t\tvar me = this;\n\n\t\t\treturn [{\n\t\t\t\t\"prefix\": \"preview\",\n\t\t\t\t\"studyplan\": 0,\n\t\t\t\t\"studyplan_item\": 0\n\t\t\t}]\n\t\t}\n\t});\n});\n",
    "define('school-ui-studyplan/widget/initialization/hash',[\n\t\"jquery\",\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"poly\"\n], function studyplanHashHandle($, when, Widget, Parser, stateParser, studyplanMode, velocityState, poly) {\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar UNIT_ID = \"unit_id\",\n\t\tTEMPLATE_UNIT_ID = \"template_unit_id\",\n\t\tLESSON_ID = \"lesson_id\",\n\t\tTEMPLATE_LESSON_ID = \"template_lesson_id\",\n\t\tSTEP_ID = \"step_id\",\n\t\tACTIVITY_ID = \"activity_id\",\n\t\tPREFIX = \"prefix\",\n\t\tSTUDYPLAN_ID = \"studyplan_id\",\n\t\tSTUDYPLAN_ITEM_ID = \"studyplan_item_id\",\n\t\tRESULTS = \"results\",\n\t\tPLATFORM_VERSION = \"platformVersion\";\n\n\tvar CONFIG = \"config\",\n\t\tSTUDY = \"study\",\n\t\tPREFIX_TEMP = \"template_unit;\";\n\n\tfunction activityContainerToStudyplanHash(){\n\t\tvar me = this;\n\n\t\tif(me[TEMPLATE_UNIT_ID] && me[TEMPLATE_LESSON_ID] && me[PREFIX] == \"school\") {\n\t\t\tme.query(\"campus_student_unit_studyplan!\" + me[TEMPLATE_UNIT_ID] + \".studyPlan.items,.studyPlan.progress\").spread(function(unitStudyplan){\n\n\t\t\t\tvar studyplan_id = unitStudyplan.studyPlan.id;\n\t\t\t\tvar studyplan = unitStudyplan.studyPlan;\n\t\t\t\tvar studyplanItem_id;\n\t\t\t\tvar expandLessonQ = [];\n\n\t\t\t\tif (unitStudyplan.mode === studyplanMode.Study) {\n\t\t\t\t\tstudyplan.items.forEach(function(e, i){\n\t\t\t\t\t\tif(e.typeCode == \"lesson\") {\n\t\t\t\t\t\t\texpandLessonQ.push(\"pc_student_lesson_map!\" + e.properties.templateLessonId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\texpandLessonQ.push(UNDEF);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tme.query(expandLessonQ).spread(function(){\n\t\t\t\t\t\tArray.prototype.forEach.call(arguments, function (result, index) {\n\t\t\t\t\t\t\tif(result && result.lesson && (result.lesson.templateLessonId === me[TEMPLATE_LESSON_ID])){\n\t\t\t\t\t\t\t\tstudyplanItem_id = studyplan.items[index].id;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(studyplanItem_id) {\n\t\t\t\t\t\t\tif(me[ACTIVITY_ID] || me[STEP_ID]) {\n\t\t\t\t\t\t\t\tme[STUDYPLAN_ID] = Parser.parseId(studyplan_id);\n\t\t\t\t\t\t\t\tme[STUDYPLAN_ITEM_ID] = Parser.parseId(studyplanItem_id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(me[TEMPLATE_LESSON_ID]) {\n\t\t\t\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\t\t\t\"prefix\": STUDY,\n\t\t\t\t\t\t\t\t\t\"studyplan\": Parser.parseId(studyplan_id),\n\t\t\t\t\t\t\t\t\t\"studyplan_item\": Parser.parseId(studyplanItem_id)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tloadConfig.call(me, PREFIX_TEMP + me[TEMPLATE_UNIT_ID]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\t// other states (close activity container and use config flow)\n\t\t\t\telse {\n\t\t\t\t\t// for auto test tools\n\t\t\t\t\tif(window.location.search.indexOf(\"unlock\") < 0) {\n\t\t\t\t\t\tloadConfig.call(me, PREFIX_TEMP + me[TEMPLATE_UNIT_ID]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction findStudyplanItem (unitId) {\n\t\tvar me = this;\n\t\tvar queryString = \"campus_student_unit_studyplan!\" + unitId + \".studyPlan\";\n\n\t\tme.query(queryString + \".items\").spread(function(data){\n\t\t\treturn data.mode === studyplanMode.Study ?\n\t\t\t\tme.query(queryString + \".progress\") : [data];\n\t\t}).spread(function(data){\n\t\t\tvar studyplan = data.studyPlan;\n\t\t\tvar studyplanID =  Parser.parseId(studyplan.id);\n\t\t\tswitch(data.mode) {\n\t\t\t\tcase studyplanMode.Create: //create\n\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\"prefix\": CONFIG,\n\t\t\t\t\t\t\"unit\": PREFIX_TEMP + studyplan.properties.templateUnitId\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase studyplanMode.Locked: //locked\n\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\"prefix\" : STUDY,\n\t\t\t\t\t\t\"studyplan\" : studyplanID,\n\t\t\t\t\t\t\"studyplan_item\" : UNDEF\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase studyplanMode.Study: //study\n\t\t\t\t\tvar suggestedItems = studyplan.items.filter(function (item) {\n\t\t\t\t\t\treturn studyplan.progress && item.itemIndex === studyplan.progress.properties.suggestedItemIndex;\n\t\t\t\t\t});\n\t\t\t\t\tvar suggestedItem = suggestedItems.length ? suggestedItems[0] : studyplan.items[0];\n\t\t\t\t\tvar studyplanItemID = Parser.parseId(suggestedItem.id);\n\n\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\"prefix\" : STUDY,\n\t\t\t\t\t\t\"studyplan\" : studyplanID,\n\t\t\t\t\t\t\"studyplan_item\" : studyplanItemID\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction loadConfig(unitID) {\n\t\tthis.publish(\"load\", {\n\t\t\t\"prefix\": CONFIG,\n\t\t\t\"unit\": unitID,\n\t\t\t\"step\": UNDEF // close activity\n\t\t});\n\t}\n\n\tfunction hashExceptionHandle(platformVersion, prefix, results) {\n\t\tvar me = this;\n\n\t\tif(prefix && results && platformVersion && platformVersion.version === \"2.0\") {\n\t\t\tswitch (prefix) {\n\t\t\t\tcase CONFIG:\n\t\t\t\t\tme.query(\"campus_student_unit_studyplan!\" + results.unit.templateUnitId + \".studyPlan.items,.studyPlan.progress\").spread(function(data){\n\t\t\t\t\t\tvar studyplan = data.studyPlan;\n\n\t\t\t\t\t\tif (data.mode !== studyplanMode.Create) {\n\t\t\t\t\t\t\tvar suggestedItems = studyplan.items.filter(function (item) {\n\t\t\t\t\t\t\t\treturn studyplan.progress && studyplan.progress.properties && item.itemIndex === studyplan.progress.properties.suggestedItemIndex;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tvar suggestedItem = suggestedItems.length ? suggestedItems[0] : studyplan.items[0];\n\n\t\t\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\t\t\"prefix\": \"study\",\n\t\t\t\t\t\t\t\t\"studyplan\": Parser.parseId(studyplan.id),\n\t\t\t\t\t\t\t\t\"studyplan_item\": data.mode === studyplanMode.Locked ?\n\t\t\t\t\t\t\t\t\tUNDEF :\n\t\t\t\t\t\t\t\t\tParser.parseId(suggestedItem.id)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase STUDY:\n\t\t\t\t\tif(!results.studyplan) {\n\t\t\t\t\t\tfindStudyplanItem.call(me, \"current\");\n\t\t\t\t\t}\n\t\t\t\t\telse if(results.studyplan && !results.studyplan_item){\n\t\t\t\t\t\tif(results.unit_studyplan.mode === studyplanMode.Study){\n\t\t\t\t\t\t\tfindStudyplanItem.call(me, results.studyplan.properties.templateUnitId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(results.studyplan && results.studyplan_item) {\n\t\t\t\t\t\tif(results.studyplan_item.typeCode !== \"goal\") {\n\t\t\t\t\t\t\tme.query(results.studyplan.id + \".progress\").spread(function(studyplan){\n\t\t\t\t\t\t\t\tif(velocityState.Crashed === studyplan.progress.properties.velocity){\n\t\t\t\t\t\t\t\t\tvar goalId;\n\t\t\t\t\t\t\t\t\tstudyplan.items.forEach(function(item){\n\t\t\t\t\t\t\t\t\t\tif(item.typeCode === \"goal\"){\n\t\t\t\t\t\t\t\t\t\t\tgoalId = Parser.parseId(item.id);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t//check the goal crashed to change hash to goal\n\t\t\t\t\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\t\t\t\t\"studyplan_item\": goalId\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(me[RESULTS] && me[RESULTS].studyplan && me[RESULTS].studyplan.id === results.studyplan.id){\n\t\t\t\t\t\t\t//when load goal item\n\t\t\t\t\t\t\t//update the sequence to catch the \"Crshed\" state and lock the sequence\n\t\t\t\t\t\t\tme.publish(\"studyplan/sequence/update\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tme[RESULTS] = results;\n\t}\n\n\treturn Widget.extend({\n\t\t\"hub:memory/context\": function(context, courseEnroll, platformVersion){\n\t\t\tvar me = this;\n\t\t\thashExceptionHandle.call(me, me[PLATFORM_VERSION] = platformVersion, me[PREFIX], me[RESULTS]);\n\t\t},\n\n\t\t\"hub:memory/load/prefix\": function(prefix) {\n\t\t\tvar me = this;\n\t\t\tme[PREFIX] = prefix;\n\t\t\tactivityContainerToStudyplanHash.call(me);\n\t\t},\n\n\t\t\"hub:memory/load/unit\": function(unit){\n\t\t\tvar me = this;\n\t\t\tif(!unit) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[UNIT_ID] = Parser.parseId(unit.id);\n\t\t\tme[TEMPLATE_UNIT_ID] = unit.templateUnitId;\n\t\t\tactivityContainerToStudyplanHash.call(me);\n\t\t},\n\n\t\t\"hub:memory/load/lesson\": function(lesson){\n\t\t\tvar me = this;\n\t\t\tif(!lesson) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[LESSON_ID] = Parser.parseId(lesson.id);\n\t\t\tme[TEMPLATE_LESSON_ID] = lesson.templateLessonId;\n\t\t\tactivityContainerToStudyplanHash.call(me);\n\t\t},\n\n\t\t\"hub:memory/load/step\": function(step){\n\t\t\tvar me = this;\n\t\t\tif(!step) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[STEP_ID] = Parser.parseId(step.id);\n\t\t},\n\n\t\t\"hub:memory/load/activity\": function(activity){\n\t\t\tvar me = this;\n\t\t\tif(!activity) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[ACTIVITY_ID] = Parser.parseId(activity.id);\n\t\t},\n\n\t\t\"hub:memory/load/studyplan\": function(studyplan){\n\t\t\tvar me = this;\n\t\t\tif(!studyplan){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[STUDYPLAN_ID] = Parser.parseId(studyplan.id);\n\t\t},\n\n\t\t\"hub:memory/load/studyplan_item\": function(studyplan_item){\n\t\t\tvar me = this;\n\t\t\tif(!studyplan_item){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme[STUDYPLAN_ITEM_ID] = Parser.parseId(studyplan_item.id);\n\t\t},\n\n\t\t\"hub:memory/route\": function(uri){\n\t\t\tvar me = this;\n\t\t\tvar _prefix = me[PREFIX];\n\n\t\t\tme[PREFIX] = uri.path ? uri.path[0] : STUDY;\n\t\t\tif(_prefix !== me[PREFIX]){\n\t\t\t\thashExceptionHandle.call(me, me[PLATFORM_VERSION], me[PREFIX], me[RESULTS]);\n\t\t\t}\n\t\t},\n\n\t\t\"hub/enrollment/update\": function() {\n\t\t\tvar me = this;\n\n\t\t\treturn me.publish(\"load\", {\n                \"studyplan\": UNDEF,\n                \"studyplan_item\": UNDEF,\n\t\t\t\t\"command\": UNDEF,\n\t\t\t\t\"prefix\" : UNDEF,\n\t\t\t\t\"unit\" : UNDEF\n            });\n\t\t},\n\n\t\t\"hub:memory/load/results\": function(results) {\n\t\t\tvar me = this;\n\n\t\t\tif (!results) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\thashExceptionHandle.call(me, me[PLATFORM_VERSION], me[PREFIX] = results.prefix, results);\n\t\t},\n\n\t\t\"hub:memory/load/config\" : function(unitID) {\n\t\t\tvar me = this;\n\t\t\tfindStudyplanItem.call(me, unitID);\n\t\t},\n\n\t\t\"hub/school/interface/get/activity-container/closeHash\": function(){\n\t\t\tvar me = this;\n\n\t\t\treturn [{\n\t\t\t\t\"prefix\": STUDY,\n\t\t\t\t\"studyplan\": me[STUDYPLAN_ID],\n\t\t\t\t\"studyplan_item\": me[STUDYPLAN_ITEM_ID]\n\t\t\t}]\n\t\t}\n\t});\n});\n\n",
    "/**\n * TroopJS requirejs/multiversion\n * @license MIT http://troopjs.mit-license.org/  Mikael Karon mailto:mikael@karon.se\n */\ndefine('troopjs-requirejs/multiversion',[],function MultiversionModule() {\n\t\"use strict\";\n\n\tvar RE = /(.+?)#(.+)$/;\n\tvar CONTEXTS = require.s.contexts;\n\n\treturn {\n\t\t\"load\" : function (name, parentRequire, onload) {\n\t\t\tvar context;\n\t\t\tvar matches;\n\n\t\t\t// if name matches RE\n\t\t\t// matches[0] : module name with context - \"module/name#context\"\n\t\t\t// matches[1] : module name - \"module/name\"\n\t\t\t// matches[2] : context name - \"context\"\n\t\t\tif ((matches = RE.exec(name)) !== null) {\n\t\t\t\tname = matches[1];\n\t\t\t\tcontext = matches[2];\n\n\t\t\t\tif (context in CONTEXTS) {\n\t\t\t\t\tparentRequire = CONTEXTS[context].require;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tparentRequire([ name ], function (module) {\n\t\t\t\tonload(module);\n\t\t\t}, onload.error);\n\t\t}\n\t};\n});\n",
    "\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/initialization/initialization.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-init-container\\\">\\n\\t<div class=\\\"ets-sp-study\\\" data-weave=\\\"school-ui-studyplan/widget/studyplan/main\\\"></div>\\n</div>\\n<div class=\\\"ets-sp-loading ets-none\\\">\\n\\t<div class=\\\"ets-inner\\\">\\n\\t\\t<div class=\\\"ets-inner-cell\\\">\\n\\t\\t\\t<div class=\\\"ets-icon\\\">\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\\t<div class=\\\"ets-backdrop\\\"></div>\\n</div>\\n<div data-weave=\\\"school-ui-shared/plugins/http-request-handling/main\\\"></div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/initialization/main',[\n\t\"when\",\n\t\"logger\",\n\t\"poly\",\n\t\"jquery\",\n\t\"client-tracking\",\n\t\"mv!jquery#troopjs-1.0\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"troopjs-browser/loom/weave\",\n\t\"school-ui-shared/enum/course-type\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/server-time\",\n\t\"school-ui-shared/plugins/techcheck/techcheck-render\",\n\t\"template!./initialization.html\"\n], function SchoolModule(\n\twhen,\n\tLogger,\n\tpolyArray,\n\t$,\n\tct,\n\tjqueryInTroop1,\n\tWidget,\n\tloom,\n\tweave,\n\tcourseType,\n\tParser,\n\tserverTime,\n\ttechcheckRender,\n\ttInit\n) {\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar SEL_HTML = \"html\";\n\n\tvar PAGE_CONTEXT_DATA = \"_page_context_data\";\n\tvar RENDERED = \"_rendered\";\n\n\n\treturn Widget.extend(function(){\n\t\t//tracking context data\n\t\tthis[PAGE_CONTEXT_DATA] = {};\n\t},{\n\t\t\"hub:memory/context\" : function (context, courseEnroll, platformVersion){\n\t\t\tvar me = this;\n\n\t\t\tif(platformVersion.version === \"2.0\") {\n\t\t\t\tif(!me[RENDERED]) {\n\t\t\t\t\tme.query(\"ccl!'school.activity.interaction.sampleRate'\").spread(function(data){\n\t\t\t\t\t\t//FOR ACT_INTERACTION TRACKING/////////////\n\t\t\t\t\t\tvar rate = parseFloat(data.value);\n\t\t\t\t\t\tme[\"_isSample\"] = (context.user.member_id % 100 < (rate * 100));\n\t\t\t\t\t\t////////////////////////////////////////////\n\t\t\t\t\t\tme.html(tInit).then(function(){\n\t\t\t\t\t\t\tme[RENDERED] = true;\n\t\t\t\t\t\t\tjqueryInTroop1(\"[data-weave-1]\").each(function(entryIndex, entry){\n\t\t\t\t\t\t\t\tvar $e = jqueryInTroop1(entry);\n\t\t\t\t\t\t\t\t$e.attr(\"data-weave\", $e.attr(\"data-weave-1\")).weave();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t//FOR ACT_INTERACTION TRACKING/////////////\n\t\t\"hub:memory/logger/troopjs1\": function (msg) {\n\t\t\tthis[\"_isSample\"] && Logger.log(msg);\n\t\t},\n\t\t////////////////////////////////////////////\n\n\t\t\"hub:memory/load/results\": function (results) {\n\t\t\tvar NULL = \"null\";\n\t\t\tvar me = this;\n\t\t\tvar updated;\n\t\t\tvar pageData = {\n\t\t\t\t\"unitID\" : NULL,\n\t\t\t\t\"levelID\" : NULL,\n\t\t\t\t\"lessonID\" : NULL\n\t\t\t};\n\n\t\t\t//set pageData for tracking\n\t\t\tObject.keys(results).forEach(function(name){\n\t\t\t\tvar data = results[name];\n\t\t\t\tif(data){\n\t\t\t\t\tswitch (name){\n\t\t\t\t\t\tcase \"level\":\n\t\t\t\t\t\t\tdata.templateLevelId && (pageData.levelID = data.templateLevelId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"unit\":\n\t\t\t\t\t\t\tdata.templateUnitId && (pageData.unitID = data.templateUnitId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"lesson\":\n\t\t\t\t\t\t\tdata.templateLessonId && (pageData.lessonID = data.templateLessonId);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tObject.keys(pageData).forEach(function(name){\n\t\t\t\tupdated = updated || pageData[name] !== me[PAGE_CONTEXT_DATA][\"page.\" + name];\n\t\t\t\tme[PAGE_CONTEXT_DATA][\"page.\" + name] = pageData[name];\n\t\t\t});\n\n\t\t\tupdated && ct.usercontext(me[PAGE_CONTEXT_DATA]);\n\t\t},\n\n\t\t\"hub/school/toggle/overflow\":function toggleOverflow(style){\n\t\t\t$(SEL_HTML).css('overflow',style);\n\t\t},\n\n\t\t\"hub:memory/school/spinner\": function showSpinner(promise){\n\t\t\tvar me = this;\n\n\t\t\tme.task(function (resolve, reject, progress) {\n\t\t\t\treturn promise\n\t\t\t\t\t.then(resolve, reject, progress);\n\t\t\t});\n\t\t},\n\n\t\t\"hub/tracking/useraction\" : function onTrackingUserAction(data){\n\t\t\tct.useraction(data);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/migration/main.html',[],function() { return function template(data) { var o = \"<div class=\\\"modal fade ets-sp-migration-progress-modal\\\" data-backdrop=\\\"static\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<div class=\\\"modal-body\\\">\\n\\t\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"660194\\\" data-text-en=\\\"We are upgrading your school to the latest version, this might take a few seconds. Please don't leave this page until the upgrade is complated.\\\"></p>\\n\\t\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"660195\\\" data-text-en=\\\"Thank you for your patience!\\\"></p>\\n\\t\\t\\t\\t<div class=\\\"progress progress-striped active\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"progress-bar\\\" role=\\\"progressbar\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal fade ets-sp-migration-fail-modal\\\" data-backdrop=\\\"static\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content\\\">\\n\\t\\t\\t<div class=\\\"modal-body\\\">\\n\\t\\t\\t\\t<p><span class=\\\"glyphicon glyphicon-remove\\\"></span></p>\\n\\t\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"660196\\\" data-text-en=\\\"Oops! Something went wrong during the upgrade of your school. We apologise for the inconvenience, please contact customer support.\\\"></p>\\n\\t\\t\\t\\t<p><a href=\\\"/customerservice/contactus/inschool\\\"><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"660199\\\" data-text-en=\\\"contact customer support\\\"></span></a></p>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal-backdrop fade in hidden\\\"></div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/migration/main',[\n\t\"jquery\",\n\t\"jquery.gudstrap\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/update-helper\",\n\t\"template!./main.html\"\n], function($, $GUD, Widget, UpdateHelper, tMain){\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar RETRY = \"_retry\";\n\n\tvar CHECK_STATUS_DURATION = 100;\n\n\tvar RETRY_TIMES = 3;\n\n\tvar URL_SCHOOL_HANDLE = \"/school/course/currentcourse/handler.aspx\";\n\n\tvar SEL_MODAL = \".modal\",\n\t\tSEL_PROGRESS_BAR = \".progress-bar\",\n\t\tSEL_MIGRATION_PROGRESS_MODAL = \".ets-sp-migration-progress-modal\",\n\t\tSEL_MIGRATION_FAIL_MODAL = \".ets-sp-migration-fail-modal\";\n\n\tfunction hideModal(){\n\t\tvar me = this;\n\t\tme[$ELEMENT].find(SEL_MODAL).modal('hide');\n\t}\n\n\tfunction showProgressModal(progress) {\n\t\tvar me = this;\n\t\tshowModal.call(me, SEL_MIGRATION_PROGRESS_MODAL)\n\t\t\t.find(SEL_PROGRESS_BAR).width(progress - 5 + \"%\").text(progress + \"%\");\n\n\t\t(progress === 100) && gotoSchoolHandle();\n\t}\n\n\tfunction showFailModal() {\n\t\tvar me = this;\n\t\tshowModal.call(me, SEL_MIGRATION_FAIL_MODAL);\n\t}\n\n\tfunction showModal(modal){\n\t\tvar me = this;\n\t\tvar $modal = me[$ELEMENT].find(modal);\n\n\t\t$modal.on('show.bs.modal', function($event) {\n\t\t\tme[$ELEMENT].find(\".modal-backdrop\").removeClass(\"hidden\");\n\t\t}).on('hidden.bs.modal', function($event) {\n\t\t\tme[$ELEMENT].find(\".modal-backdrop\").addClass(\"hidden\");\n\t\t});\n\n\t\tif(!$modal.hasClass(\"in\")) {\n\t\t\thideModal.call(me);\n\n\t\t\t$modal.modal({\n\t\t\t\tkeyboard: false\n\t\t\t});\n\t\t}\n\n\t\treturn $modal;\n\t}\n\n\tfunction gotoSchoolHandle(){\n\t\twindow.open(URL_SCHOOL_HANDLE, '_self');\n\t}\n\n\tfunction execMigrate(){\n\t\tvar me = this;\n\n\t\tif(me[RETRY] >= RETRY_TIMES) {\n\t\t\tshowFailModal.call(me)\n\t\t}\n\t\telse {\n\t\t\tUpdateHelper.platformMigrate().then(function(data){\n\t\t\t\tme[RETRY]++;\n\t\t\t\tswitch (data.response) {\n\t\t\t\t\tcase \"DONE\":\n\t\t\t\t\t\tgotoSchoolHandle();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"OK\":\n\t\t\t\t\t\tcheckStatus.call(me);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ERROR\":\n\t\t\t\t\t\tshowFailModal.call(me);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"RETRY\":\n\t\t\t\t\t\texecMigrate.call(me);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tshowFailModal.call(me);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction checkStatus(){\n\t\tvar me = this;\n\n\t\tvar checkAgain = function(){\n\t\t\twindow.setTimeout(function(){\n\t\t\t\tcheckStatus.call(me);\n\t\t\t}, CHECK_STATUS_DURATION);\n\t\t};\n\n\t\tme.query(\"platform_migration!current\").spread(function(mig_status){\n\t\t\tswitch (mig_status.status) {\n\t\t\t\tcase \"\":\n\t\t\t\t\texecMigrate.call(me);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"QUEUED\":\n\t\t\t\tcase \"STARTED\":\n\t\t\t\t\tshowProgressModal.call(me, mig_status.progress);\n\t\t\t\t\tcheckAgain();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"TIMEOUT\":\n\t\t\t\tcase \"CONFLICTED\":\n\t\t\t\tcase \"ERROR\":\n\t\t\t\t\tshowFailModal.call(me);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"DONE\":\n\t\t\t\t\t// Cause backend service have some unknown issue here\n\t\t\t\t\t// Sometime service will return \"DONE\" state but progress isn't 100\n\t\t\t\t\t// So we fake the progress is 100 to work around the issue.\n\t\t\t\t\tshowProgressModal.call(me, 100);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"CANCELLED\":\n\t\t\t\tcase \"RESET\":\n\t\t\t\t\texecMigrate.call(me);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tshowFailModal.call(me);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn Widget.extend({\n\t\t\"hub:memory/context\" : function(context, courseEnroll, platformVersion){\n\t\t\tvar me = this;\n\n\t\t\tif(platformVersion.version === \"1.0\") {\n\t\t\t\treturn me.html(tMain).then(function(){\n\t\t\t\t\tme[RETRY] = 0;\n\t\t\t\t\tcheckStatus.call(me);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/config/config.html',[],function() { return function template(data) { var o = \"\";\n\tvar unit = data.unit;\no += \"\\n<div class=\\\"ets-sp-cfg\\\">\\n\\t<div class=\\\"ets-sp-cfg-hd\\\">\\n\\t\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656054\\\" data-text-en=\\\"set up unit plan\\\"></h2>\\n\\t\\t<h5 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656055\\\" data-text-en=\\\"Estimated 6 hours to complete the unit\\\"></h5>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-bd\\\">\\n        <div data-weave=\\\"school-ui-studyplan/shared/pace-config/main\\\" data-mode=\\\"\" +data.mode+ \"\\\" data-config='\" + JSON.stringify(data.properties).replace(/\\'/g, \"&#39;\")+ \"'></div>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-ft\\\">\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-primary btn-m btn-block ets-sp-cfg-create\\\"><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656059\\\" data-text-en=\\\"Let's go\\\"></span> <i class=\\\"glyphicon icon-caret-right\\\"></i></button>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/config/main',[\n\t\"jquery\",\n\t\"poly\",\n\t\"json2\",\n\t\"moment\",\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/studyplan-update-helper\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-shared/enum/moment-language\",\n\t\"template!./config.html\"\n], function ($, Poly, JSON, Moment, when, Widget, Parser, UpdateHelper, studyplanMode, momentLang, tConfig) {\n\t\"use strict\";\n\n\tvar UNIT = \"_unit\";\n\tvar UNIT_STUDYPLAN = \"_unit_studyplan\";\n\tvar SP_TEMPLATE = \"_studyplan_template\";\n\tvar GOAL = \"_goal\";\n\tvar SELECTED = 'selected';\n\n\tfunction render(unit, unit_studyplan) {\n\t\tvar me = this;\n\t\tvar renderData = {};\n\n\t\tif (!unit || !unit_studyplan) {\n\t\t\treturn;\n\t\t}\n\n\t\trenderData.unit = unit;\n\n\t\tvar studyplan = me[SP_TEMPLATE] = $.extend(true, {}, unit_studyplan.studyPlan);\n\n\t\tif (unit_studyplan.mode === studyplanMode.Create) {\n\t\t\tstudyplan.items.forEach(function (e) {\n\t\t\t\tif (e.typeCode === \"goal\") {\n\t\t\t\t\tme[GOAL] = e;\n\t\t\t\t\trenderData.properties = e.properties;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn me.query('ccl!\"school.studyplan.pace.mode\"', 'member_site_setting!\"school;studyplan.newui.enabled\"').spread(function (\n\t\t\t\tccl,\n\t\t\t\tnewuiEnable\n\t\t\t) {\n\t\t\t\trenderData.mode = ccl.value;\n\t\t\t\tif (ccl.value === 'view') {\n\t\t\t\t\tsetViewModeForPaces(renderData.properties.paces);\n\t\t\t\t}\n\n\t\t\t\tif (newuiEnable.value === 'true') {\n\t\t\t\t\treturn UpdateHelper.createStudyplan({\n\t\t\t\t\t\t\"studentStudyPlanTemplate\": studyplan\n\t\t\t\t\t})\n\t\t\t\t\t\t.then(function (data) {\n\t\t\t\t\t\t\tvar studyplanId = data.id;\n\t\t\t\t\t\t\treturn me.publish(\"school/clearCache\", unit_studyplan.id) // SPC-7224\n\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\t\t\t\t\"prefix\": \"study\",\n\t\t\t\t\t\t\t\t\t\t\"studyplan\": Parser.parseId(studyplanId)\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn me.html(tConfig, renderData);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction setViewModeForPaces(paces) {\n\t\tfor (var i = 0, ii = paces.length; i < ii; i++) {\n\t\t\tvar pace = paces[i];\n\t\t\tif (SELECTED in pace) {\n\t\t\t\tpace[SELECTED] = false;\n\t\t\t}\n\t\t}\n\t\tpaces[ii - 1][SELECTED] = true;\n\t\treturn paces;\n\t}\n\n\treturn Widget.extend({\n\t\t\"hub:memory/load/unit\": function (unit) {\n\t\t\tvar me = this;\n\t\t\tif (!unit) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trender.call(me, me[UNIT] = unit, me[UNIT_STUDYPLAN]);\n\t\t},\n\n\t\t\"hub:memory/load/unit_studyplan\": function (unit_studyplan) {\n\t\t\tvar me = this;\n\t\t\tif (!unit_studyplan) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trender.call(me, me[UNIT], me[UNIT_STUDYPLAN] = unit_studyplan);\n\t\t},\n\n\t\t\"hub/config/pace-change\": function (paces) {\n\t\t\tvar me = this;\n\t\t\tme[GOAL].properties.paces = paces;\n\t\t},\n\n\t\t\"dom:.ets-sp-cfg-create/click\": function (evt) {\n\t\t\tvar me = this;\n\t\t\tvar noSelectedInConfig = me[GOAL].properties.paces.every(function (e) {\n\t\t\t\treturn !e.selected;\n\t\t\t});\n\n\t\t\t// if there is not any selected pace, for prevent unexpected result after creation.\n\t\t\t// we select the first pace by default. and send a front-end event log\n\t\t\tif (noSelectedInConfig) {\n\t\t\t\tme.log(\"Studyplan exception when creating, goal properties is : \" + JSON.stringify(me[GOAL].properties));\n\t\t\t\tme[GOAL].properties.paces[0].selected = true;\n\t\t\t}\n\n\t\t\t$(evt.currentTarget).prop(\"disabled\", true);\n\n\t\t\tvar unit_studyplan = me[UNIT_STUDYPLAN];\n\n\t\t\tUpdateHelper.createStudyplan({\n\t\t\t\t\"studentStudyPlanTemplate\": me[SP_TEMPLATE]\n\t\t\t}).then(function (data) {\n\n\t\t\t\tvar studyplanId = data.id;\n\n\t\t\t\t// make sure update context first and jump page\n\t\t\t\tme.publish(\"context/update/context\")\n\t\t\t\t\t.then(function () {\n\t\t\t\t\t\treturn me.publish(\"school/clearCache\", unit_studyplan.id); // SPC-7224\n\t\t\t\t\t})\n\t\t\t\t\t.then(function () {\n\t\t\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\t\t\"prefix\": \"study\",\n\t\t\t\t\t\t\t\"studyplan\": Parser.parseId(studyplanId)\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/goal.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-cfg cp-cfg \" +data.status+ \"\\\">\\n\\t<div class=\\\"ets-sp-cfg-hd\\\">\\n\\t\\t<!--\\n\\t\\tthe progress widget will render here\\n\\t\\t-->\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-bd cp-pace-bd\\\">\\n\\t\\t<!--\\n\\t\\tthe pace config widget will render here\\n\\t\\t-->\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-ft\\\">\\n\\t\\t<!--\\n\\t\\tthe restart & moveon widget will render here\\n\\t\\t-->\\n\\t</div>\\n\\t\"; if(!data.isUnitCompleted) { o += \"\\n\\t\\t<div class=\\\"ets-sp-goal-locked\\\">\\n\\t\\t\\t<h1><i class=\\\"ets-icon-lock\\\"></i></h1>\\n\\t\\t\\t<h1 data-text-en=\\\"THE GOAL IS LOCKED\\\" data-blurb-id=\\\"724606\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"></h1>\\n\\t\\t\\t<p class=\\\"ets-sp-goal-tips\\\" data-text-en=\\\"You must complete all lessons in this unit before continuing on.\\\" data-blurb-id=\\\"724607\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"></p>\\n\\t\\t</div>\\n\\t\"; } o += \"\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"json2\",\n\t\"lodash\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"troopjs-browser/loom/weave\",\n\t\"school-ui-shared/utils/progress-state\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/enum/studyplan-state\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"template!./goal.html\"\n], function (when, $, JSON, _, Widget, loom, weave, progressState, stateParser, studyplanState, itemState, velocityState, tGoal) {\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar WIDGET_PACE = \"school-ui-studyplan/shared/cp-pace-config/main\";\n\tvar WIDGET_PROGRESS = \"school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/main\";\n\tvar WIDGET_MOVEON = \"school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/main\";\n\n\tvar SEL_PROGRESS_HOLDER = \".ets-sp-cfg-hd\";\n\tvar SEL_ACTIVITY_HOLDER = \".ets-sp-cfg-ft\";\n\tvar SEL_PACE_HOLDER = \".ets-sp-cfg-bd\";\n\tvar SEL_CONTAINER = \".ets-sp-cfg\";\n\n\tvar DATA_GOAL = \"_data_goal\";\n\n\tvar CCL_ENABLE_LEVELTEST = 'ccl!\"school.courseware.enableleveltest\"';\n\tvar MSS_LEVEL_TEST_VERSION = \"member_site_setting!'school;student.leveltest.version'\";\n\n\tfunction hasState(state) {\n\t\treturn this & state;\n\t}\n\n\tfunction isLessonItem(item) {\n\t\treturn item.typeCode === 'lesson';\n\t}\n\n\tfunction completedItem(item) {\n\t\treturn hasState.call(item.progress.state, itemState.Completed);\n\t}\n\n\tfunction isUnitComplete(unitStudyPlan, studyplanState){\n\t\treturn unitStudyPlan.progress.state === studyplanState.Completed\n\t}\n\n\treturn Widget.extend(function ($element, path, itemData) {\n\t\tvar me = this;\n\t\tme[DATA_GOAL] = itemData;\n\t}, {\n\t\t\"hub:memory/load/results\": function (results) {\n\t\t\tvar studyplan = results.studyplan;\n\t\t\tif (studyplan) {\n\t\t\t\tvar me = this;\n\t\t\t\tvar isNopace;\n\t\t\t\tme[DATA_GOAL].properties.paces.forEach(function (e) {\n\t\t\t\t\tif (e.pacePoints === 0) {\n\t\t\t\t\t\tisNopace = e.selected;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn when.all([\n\t\t\t\t\tme.query(studyplan.id + \".progress,.items.progress\"),\n\t\t\t\t\tme.query('campus_student_unit_studyplan!current.studyPlan.progress,.studyPlan.items.progress,.studentUnit.children.progress.detail,.studentUnit.children.lessonImage,.studentUnit.parent.parent')\n\t\t\t\t]).spread(function (studyplanData, unit_studyplan) {\n\t\t\t\t\tvar statusPromise = me.getStatusKey(studyplan, isNopace, results, unit_studyplan[0]);\n\t\t\t\t\tvar isUnitCompleted = isUnitComplete(studyplan, studyplanState);\n\t\t\t\t\tstatusPromise.then(function (status) {\n\t\t\t\t\t\tme.html(tGoal, {\n\t\t\t\t\t\t\tstatus: \"cp-cfg-\" + status.key.toLowerCase(),\n\t\t\t\t\t\t\tisUnitCompleted: isUnitCompleted\n\t\t\t\t\t\t}).then(function () {\n\t\t\t\t\t\t\tvar $moveon;\n\t\t\t\t\t\t\tvar $progress;\n\t\t\t\t\t\t\tvar $pace;\n\n\t\t\t\t\t\t\tvar studyplan = studyplanData[0];\n\t\t\t\t\t\t\tvar goal;\n\t\t\t\t\t\t\tif(!isUnitCompleted){\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tstudyplan.items.forEach(function (item) {\n\t\t\t\t\t\t\t\tif (item.typeCode === \"goal\") {\n\t\t\t\t\t\t\t\t\tgoal = item;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t//weave progress widget\n\t\t\t\t\t\t\tme[$ELEMENT].find(SEL_PROGRESS_HOLDER).append(\n\t\t\t\t\t\t\t\t$progress = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_PROGRESS)\n\t\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t\t\t\t.data(\"status\", status)\n\t\t\t\t\t\t\t\t\t.data(\"config\", $.extend({}, goal && goal.properties, goal && goal.progress.properties))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$progress.weave();\n\n\t\t\t\t\t\t\t// pace and end status content\n\t\t\t\t\t\t\tme[$ELEMENT].find(SEL_PACE_HOLDER).append(\n\t\t\t\t\t\t\t\t$pace = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_PACE)\n\t\t\t\t\t\t\t\t\t.data(\"mode\", \"view\")\n\t\t\t\t\t\t\t\t\t.data(\"status\", status)\n\t\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t\t\t\t.data(\"config\", $.extend({}, goal && goal.properties, goal && goal.progress.properties))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$pace.weave();\n\n\t\t\t\t\t\t\t// action\n\t\t\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_HOLDER).append(\n\t\t\t\t\t\t\t\t$moveon = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_MOVEON)\n\t\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t\t\t\t.data(\"status\", status)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$moveon.weave();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t'hub/studyplan/goal/body/status/update': function (stauts) {\n\t\t\tvar me = this;\n\t\t\tif (stauts.action === 0) {\n\t\t\t\tme[$ELEMENT].find(SEL_CONTAINER).removeClass(stauts.class);\n\t\t\t} else {\n\t\t\t\tme[$ELEMENT].find(SEL_CONTAINER).addClass(stauts.class);\n\t\t\t}\n\t\t},\n\n\t\t\"getStatusKey\": function (studyplan, isNopace, results, unit_studyplan) {\n\t\t\tvar me = this;\n\n\t\t\treturn me.checkIfTestIsAvailable({\n\t\t\t\tstudyPlan: unit_studyplan.studyPlan,\n\t\t\t\tcourse: unit_studyplan.studentUnit.parent.parent,\n\t\t\t\tlevel: unit_studyplan.studentUnit.parent,\n\t\t\t\tunit: unit_studyplan.studentUnit\n\t\t\t}).then(function (testResult) {\n\n\t\t\t\tvar unit = results.unit;\n\t\t\t\tvar units = unit.parent.children;\n\t\t\t\tvar unitLen = units.length;\n\n\t\t\t\tvar completed = isUnitComplete(studyplan, studyplanState) ? 'Completed' : '';\n\t\t\t\tvar nopace = isNopace ? 'Nopace' : '';\n\t\t\t\tvar stateCollection = stateParser.parseFlag(velocityState, studyplan.progress.properties.velocity);\n\t\t\t\tvar velocity = '';\n\t\t\t\t_.find(stateCollection, function (value, key) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tvelocity = key;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar key = completed || nopace || velocity;\n\t\t\t\tvar code = key.toLowerCase();\n\n\t\t\t\tif (completed) {\n\t\t\t\t\tcode = \"unit_complete\";\n\n\t\t\t\t\tif (unit.templateUnitId === units[unitLen - 1].templateUnitId) {\n\t\t\t\t\t\tcode = \"all_unit_complete\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (unit.templateUnitId === units[unitLen - 1].templateUnitId &&\n\t\t\t\t\t\ttestResult.levelTestIsDone) {\n\t\t\t\t\t\tcode = \"level_complete\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// for spin course\n\t\t\t\t\tif (unit.templateUnitId === units[unitLen - 1].templateUnitId &&\n\t\t\t\t\t\tresults.course.courseTypeCode !== 'GE') {\n\t\t\t\t\t\tcode = \"course_change\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tkey: key,\n\t\t\t\t\tcode: code\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\n\t\tcheckLevelIsCompleted: _.memoize(function (data) {\n\t\t\tvar studyPlan = data.studyPlan;\n\t\t\tvar level = data.level;\n\t\t\tvar unit = data.unit;\n\n\t\t\tvar lessons = _.filter(studyPlan.items, isLessonItem);\n\t\t\tvar completedLessons = _.filter(lessons, completedItem);\n\t\t\tvar allLessonsAreCompleted = lessons.length === completedLessons.length;\n\t\t\tvar unitIsCompleted = studyPlan.progress && hasState.call(studyPlan.progress.state, studyplanState.Completed);\n\t\t\tvar isLastUnit = (level.children.length - 1) === _.indexOf(level.children, unit);\n\n\t\t\treturn isLastUnit && unitIsCompleted && allLessonsAreCompleted;\n\t\t}),\n\n\t\tcheckIfTestIsAvailable: function (data) {\n\t\t\tvar me = this;\n\t\t\tvar level = data.level;\n\t\t\tvar resultDefer = when.defer();\n\t\t\tvar result = {};\n\t\t\tif (me.checkLevelIsCompleted(data)) {\n\t\t\t\tme.query(CCL_ENABLE_LEVELTEST, MSS_LEVEL_TEST_VERSION).spread(function (cclEnableLevelTest, mssLevelTestVersion) {\n\t\t\t\t\tvar enableLevelTest = cclEnableLevelTest.value.toLowerCase() === 'true';\n\t\t\t\t\tvar levelTestVersion = parseInt(mssLevelTestVersion && mssLevelTestVersion.value || 1);\n\n\t\t\t\t\tresult.canDoLevelTest = enableLevelTest;\n\t\t\t\t\tif (enableLevelTest) {\n\t\t\t\t\t\treturn levelTestVersion === 1 ?\n\t\t\t\t\t\t\tme.query('leveltest_overview!' + level.levelCode).spread(function (leveltest) {\n\t\t\t\t\t\t\t\tresult.levelTestIsDone = leveltest.hasPassed;\n\t\t\t\t\t\t\t\tresultDefer.resolve(result);\n\t\t\t\t\t\t\t}) :\n\t\t\t\t\t\t\tme.query(level.id + '.levelTest.progress').spread(function (level) {\n\t\t\t\t\t\t\t\tresult.levelTestIsDone = Boolean(level.levelTest && progressState.hasPassed(level.levelTest.progress.state));\n\t\t\t\t\t\t\t\tresultDefer.resolve(result);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tresultDefer.resolve(result);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresultDefer.resolve({\n\t\t\t\t\tcanDoLevelTest: false,\n\t\t\t\t\tlevelTestIsDone: false\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn resultDefer.promise;\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/moveon.html',[],function() { return function template(data) { var o = \"\"; if(data.status.code === 'all_unit_complete'){o += \"\\n<div class=\\\"cp-studyplan-action\\\">\\n\\t<p class=\\\"cp-studyplan-or\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695094\\\"></p>\\n\\t<div class=\\\"cp-action-move\\\">\\n\\t\\t\"; if(data.isLastLevel) {o += \"\\n\\t\\t<span class=\\\"cp-select-course\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-link=\\\"\" +data.changeCourseLink+ \"\\\" data-blurb-id=\\\"\" +data.blurbIds.cpSelectCourse+ \"\\\" data-action=\\\"select/course\\\">\\n\\t\\t</span>\\n\\t\\t\";}else{o += \"\\n\\t\\t<span class=\\\"cp-next-level\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695074\\\" data-action=\\\"next/level\\\">\\n\\t\\t</span>\\n\\t\\t\";}o += \"\\n\\t\\t<span class=\\\"ets-icon-cp-arrow-right\\\"></span>\\n\\t</div>\\n</div>\\n\"; }  return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/moveon/main',[\n    \"school-ui-studyplan/module\",\n    \"jquery\",\n    \"when\",\n    \"poly\",\n    \"lodash\",\n    \"troopjs-ef/component/widget\",\n    \"client-tracking\",\n    \"school-ui-shared/enum/course-type\",\n    \"school-ui-shared/utils/typeid-parser\",\n    \"school-ui-shared/utils/progress-state\",\n    \"school-ui-shared/utils/update-helper\",\n    \"school-ui-studyplan/enum/studyplan-item-state\",\n    \"school-ui-studyplan/utils/state-parser\",\n    \"template!./moveon.html\"\n], function (module, $, when, poly, _, Widget, ct, CourseType, typeidParser, progressState, updateHelper, itemState, stateParser, tMoveon) {\n    \"use strict\";\n\n    var UNDEF;\n    var CCL_ENABLE_LEVELTEST = 'ccl!\"school.courseware.enableleveltest\"';\n    var CCL_ENABLE_GOTO_NEXT_LEVEL = 'ccl!\"school.courseware.enableSelectNextLevel\"';\n    var CCL_ENABLE_SELECT_COURSE = 'ccl!\"school.menu.changecourse.display\"';\n    var CCL_CHANGE_COURSE_LINK = \"ccl!'school.studyplan.changeCourse.link'\";\n    var Q_CURRENT_STUDYPLAN = \"campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress\";\n    var MSS_LEVEL_TEST_VERSION = \"member_site_setting!'school;student.leveltest.version'\";\n\n    var DATA_STUDYPLAN = \"_data_studyplan\";\n    var $ELEMENT = \"$element\";\n    var STATUS = \"_data_status\";\n\n    var HUB_SHOW_TIPS = \"studyplan/goal/moveon-tips/show\";\n\n    var MODULE_CONFIG = _.merge({\n        blurbIds: {\n            cpSelectCourse: \"656560\"\n        },\n\t    changeCourseUrl: undefined\n    }, module.config() || {});\n\n    function isDemoAndNeedToLimit (common_context, courseTypeCode) {\n        return common_context.partnercode.value.toLowerCase() === \"demo\" &&\n                (CourseType.isGECourse(courseTypeCode) || CourseType.isBECourse(courseTypeCode))\n    }\n\n    function filterData() {\n        var me = this;\n        var levels = me.course.children;\n        var level  = me.level;\n        var levelLen = levels.length;\n        var unit = me.unit;\n        var units = unit.parent.children;\n        var unitLen = units.length;\n        var config = {};\n\n        // INDB2B SPECIAL LOGIC\n        if(unit.templateUnitId === units[unitLen-1].templateUnitId) {\n            config.isLastUnit = true;\n\n            if(me.isGE) {\n                config.levelTestId = (me.levelTestVersion === 1 ? level.legacyLevelId : level.templateLevelId);\n                if(level.templateLevelId === levels[levelLen-1].templateLevelId) {\n                    config.isLastLevel = true;\n                }\n            } else {\n                // For SPIN course, alway let student select course\n                config.isLastLevel = true;\n            }\n        } else {\n            units.every(function(v, i) {\n                if(v.templateUnitId === unit.templateUnitId) {\n                    config.nextUnitIndex = i+2;\n                    me.nextUnitId = units[i+1].templateUnitId;\n                    return false;\n                }\n               return true;\n            });\n\n        }\n\n        //for demo, only show the select course button\n        if(isDemoAndNeedToLimit(me.common_context, me.course.courseTypeCode)){\n          config.isLastUnit = true;\n          config.isLastLevel = true;\n        }\n\n        return config;\n    }\n\n    function render() {\n        var me = this;\n        var studyplan = me[DATA_STUDYPLAN];\n        if(!me.course || !me.level || !me.unit || !me.common_context || !me.levelTestVersion) return;\n\n        me.query(\n            CCL_ENABLE_LEVELTEST,\n            CCL_ENABLE_GOTO_NEXT_LEVEL,\n            CCL_ENABLE_SELECT_COURSE,\n            CCL_CHANGE_COURSE_LINK,\n            Q_CURRENT_STUDYPLAN,\n            me.level.id + \".children\"\n        )\n        .spread(function(\n            enableLevelTest,\n            enableChangeLevel,\n            enableSelectCourse,\n            changeCourseLink,\n            currentStudyPlan,\n            navgationUnits\n            ) {\n            var goalItem;\n\n            var data = filterData.call(me);\n            data.isGE = me.isGE;\n            data.enableLevelTest = enableLevelTest && enableLevelTest.value.toLowerCase() === \"true\";\n            data.enableChangeLevel = enableChangeLevel && enableChangeLevel.value.toLowerCase() === \"true\";\n            data.enableSelectCourse = enableSelectCourse && enableSelectCourse.value.toLowerCase() === \"true\";\n            data.changeCourseLink = MODULE_CONFIG.changeCourseUrl || changeCourseLink.value;\n            data.status = me[STATUS];\n            data.blurbIds = MODULE_CONFIG.blurbIds;\n\n            data.optionalItems = [];\n\n            //check items status\n            studyplan.items.forEach(function(item){\n                var state;\n                if(item.typeCode !== \"goal\" && item.isOptional){\n                    state = stateParser.parseFlag(itemState, item.progress.state);\n                    if(!state.Completed){\n                        data.optionalItems.push({itemData:item, locked:state.Locked});\n                    }\n                }\n                else{\n                    goalItem = item;\n                }\n            });\n\n            if(stateParser.parseFlag(itemState, goalItem.progress.state).Completed){\n                if(data.isLastLevel && data.isLastUnit){\n                    //blurb en : You've completed the level.\n                    me.query(\"blurb!656580\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n                else if(data.isLastUnit){\n                    //blurb en : You've unlocked the next level\n                    me.query(\"blurb!656556\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n                else{\n                    //blurb en : You've unlocked the next unit\n                    me.query(\"blurb!656555\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n            }\n\n            data.hasActiveSPInCurrentLevel = navgationUnits.children.reduce(function(prev, curr){\n                return prev || (curr.templateUnitId === currentStudyPlan.studyPlan.properties.templateUnitId);\n            }, false);\n\n            me.html(tMoveon, data);\n\n        });\n    }\n\n    function route(unitId) {\n        return this.publish(\"load/config\", typeidParser.parseId(unitId));\n    }\n\n    function patchEnrollment() {    //SPC-7718 send additional update enrollment if backend auto moveon failed\n        var me = this;\n        return me.query('student_course_enrollment!current', me.unit.progress.id).spread(function (currentEnrollment, currentUnitProgress) {\n            if (me.nextUnitId && currentEnrollment.studentUnitId === me.unit.studentUnitId && progressState.hasPassed(currentUnitProgress.state)) {\n                return updateHelper.updateEnrollment({templateId: me.nextUnitId});\n            }\n        });\n    }\n\n    return Widget.extend(function(){\n        var me = this;\n        me[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n        me[STATUS] = me[$ELEMENT].data(\"status\");\n\n        me.query(MSS_LEVEL_TEST_VERSION).spread(function (mssLevelTestVersion) {\n            me.levelTestVersion = parseInt(mssLevelTestVersion && mssLevelTestVersion.value || 1);\n            render.call(me);\n        });\n    }, {\n        \"hub:memory/common_context\" : function(common_context){\n          var me = this;\n          if(common_context){\n            me.common_context = common_context.values;\n            render.call(me);\n          }\n        },\n        \"hub:memory/load/results\": function(data) {\n            var me = this;\n            if( data && (   me.course !== data.course ||\n                            me.level !== data.level ||\n                            me.unit !== data.unit )\n                ){\n                me.studyplan = data.studyplan;\n                me.isGE = CourseType.isGECourse((data.course || {}).courseTypeCode);\n                me.course = data.course;\n                me.level = data.level;\n                me.unit = data.unit;\n                render.call(me);\n            }\n        },\n        \"hub/ef/update/progress\":function(progress){\n            var me = this;\n            me.query(me.studyplan.id + \".items.progress\").spread(function(studyplan){\n                me[DATA_STUDYPLAN] = studyplan;\n                render.call(me);\n            });\n        },\n        \"hub/ef/next/unit\": function (progress) {\n            var me = this;\n            patchEnrollment.call(me).then(function () {\n                route.call(me, me.nextUnitId);\n            });\n        },\n        \"dom:[data-action='next/unit']/click\": function (event) {\n            var me = this;\n            patchEnrollment.call(me).then(function () {\n                route.call(me, me.nextUnitId);\n            });\n        },\n        //TODO: need to test this case\n        \"dom:[data-action='next/level']/click\": function(event) {\n            this.publish(\"enroll/next/level\");\n        },\n        //TODO: need to test this case\n        \"dom:[data-action='select/course']/click\": function (event) {\n            var changeCourseLink = $(event.currentTarget).data(\"link\");\n            if (changeCourseLink) {\n                window.location = changeCourseLink;\n            }\n            else {\n                this.publish(\"show/course/list\");\n            }\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/progress.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-goal-progress cp-goal-progress \" +data.customClass+ \"\\\">\\n\\t<p class=\\\"cp-progres-title\\\">\\n\\t\\t<span class=\\\"ets-icon-badge-goal-poly\\\"></span>\\n\\t</p>\\n\\t<p class=\\\"cp-progress-msg\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +data.progressMsg+ \"\\\">LEFT TO COMPLETE THIS UNIT</p>\\n\\t<p class=\\\"cp-progress-msg-goal-set\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695058\\\">Set a new study goal</p>\\n\\t<div class=\\\"cp-progress-sub-msg\\\">\\n\\t\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"\" +data.subMsg+ \"\\\"></h2>\\n\\t\\t\"; if(data.tooltipMsg){ o += \"\\n\\t\\t<div class=\\\"msg-tooltip\\\">\\n\\t\\t\\t<div data-weave=\\\"school-ui-studyplan/shared/tooltip/main(option)\\\" data-option='{\\\"content\\\": \" +data.tooltipMsg+ \", \\\"customClass\\\": \\\"message\\\"}'>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t\"; } o += \"\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/progress/main',[\n\t\"when\",\n\t\"lodash\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/animation-helper\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"school-ui-studyplan/enum/studyplan-state\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"school-ui-studyplan/enum/studyplan-status\",\n\t\"template!./progress.html\"\n], function(when, _, Widget, typeidParser, animationHelper, stateParser, velocityState, studyplanState, itemState, cpStatus, tProgress){\n\n\tvar UNDEF;\n\tvar $ELEMENT = \"$element\";\n\n\tvar DATA_STUDYPLAN = \"_data_studyplan\";\n\tvar CONFIG = \"_config\";\n\tvar STATUS = \"_status\";\n\n\tvar SEL_OPTIONAL_POPOVER = \".ets-sp-optional-popover\";\n\tvar SEL_POPOVER_HOLDER = \".ets-sp-optional-holder\";\n\tvar SEL_RATE_NUM = \".ets-sp-rate-num\";\n\tvar SEL_MANDATORY_FINISHED = \".ets-sp-mandatory .ets-sp-finished\";\n\tvar SEL_OPTIONAL_FINISHED = \".ets-sp-optional .ets-sp-finished\";\n\tvar SEL_MOVEON_TIPS = \".ets-sp-moveon-tips\";\n\n\tvar CLS_NONE = \"ets-none\";\n\n\tvar DURATION_RATE = 800;\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n\t\tme[CONFIG] = me[$ELEMENT].data(\"config\");\n\t\tme[STATUS] = me[$ELEMENT].data(\"status\");\n\t},{\n\t\t\"velocityState\" : velocityState,\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\tvar studyplan = me[DATA_STUDYPLAN];\n\n\t\t\tvar mandatoryCount = optionalCount = mandatoryFinished = optionalFinished = 0;\n\t\t\tvar goalItem;\n\t\t\tvar optionalItems = [];\n\t\t\tvar mandatoryRate;\n\t\t\tvar optionalRate;\n\t\t\tvar isNopace;\n\n\t\t\t//check items status\n\t\t\tstudyplan.items.forEach(function(item){\n\t\t\t\tvar state;\n\t\t\t\tif(item.typeCode !== \"goal\"){\n\t\t\t\t\tstate = stateParser.parseFlag(itemState, item.progress.state);\n\t\t\t\t\tif(item.isOptional){\n\t\t\t\t\t\toptionalCount++;\n\t\t\t\t\t\tstate.Completed && optionalFinished++;\n\t\t\t\t\t\toptionalItems.push({itemData:item, locked:state.Locked});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmandatoryCount++;\n\t\t\t\t\t\tstate.Completed && mandatoryFinished++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tgoalItem = item;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmandatoryRate = mandatoryCount ?\n\t\t\t\t(parseInt(mandatoryFinished / mandatoryCount * 100, 10) + \"%\") : UNDEF;\n\t\t\toptionalRate = optionalCount ?\n\t\t\t\t(parseInt(optionalFinished / optionalCount * 100, 10) + \"%\") : UNDEF;\n\n\t\t\tif(goalItem){\n\t\t\t\tgoalItem.properties.paces.forEach(function(e){\n\t\t\t\t\tif(e.pacePoints === 0){\n\t\t\t\t\t\tisNopace = e.selected;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar msgKey = me[STATUS].key;\n\t\t\treturn me.html(tProgress, {\n\t\t\t\tcompleted : studyplan.progress.state === studyplanState.Completed,\n\t\t\t\tgoal : goalItem,\n\t\t\t\tisNopace: isNopace,\n\t\t\t\tmandatoryRate : mandatoryRate,\n\t\t\t\toptionalRate : optionalRate,\n\t\t\t\toptionalItems : optionalItems,\n\t\t\t\tvelocity : studyplan.progress.properties.velocity,\n\t\t\t\tsubMsg: cpStatus[msgKey].subMsg,\n\t\t\t\tprogressMsg: cpStatus[msgKey].progressMsg,\n\t\t\t\ttooltipMsg: cpStatus[msgKey].tooltipMsg,\n\t\t\t\tcustomClass: cpStatus[msgKey].customClass\n\t\t\t}).then(function(){\n\t\t\t\tvar $optionalBar = me[$ELEMENT].find(SEL_OPTIONAL_POPOVER);\n\t\t\t\tvar $mandatoryProgress = me[$ELEMENT].find(SEL_MANDATORY_FINISHED);\n\t\t\t\tvar $optionalProgress = me[$ELEMENT].find(SEL_OPTIONAL_FINISHED);\n\n\n\t\t\t\t//init popover for optional items\n\t\t\t\t$optionalBar.data({\n\t\t\t\t\t\"content\": me[$ELEMENT].find(SEL_POPOVER_HOLDER).html(),\n\t\t\t\t\t\"trigger\" : \"hover\",\n\t\t\t\t\t\"placement\":\"bottom\",\n\t\t\t\t\t\"html\" : true\n\t\t\t\t});\n\t\t\t\t$optionalBar.popover();\n\n\n\t\t\t\t//start animation\n\t\t\t\t$mandatoryProgress.css(\"width\", 0);\n\t\t\t\t$optionalProgress.css(\"width\", 0);\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tanimationHelper.request(\"goalEnter\", function(){\n\t\t\t\t\t\treturn when.promise(function(resolve){\n\t\t\t\t\t\t\t$mandatoryProgress.css(\"width\", mandatoryRate);\n\t\t\t\t\t\t\t$optionalProgress.css(\"width\", optionalRate);\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, DURATION_RATE);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t},\n\t\t\"hub/studyplan/goal/moveon-tips/show\" : function(text){\n\t\t\ttext && this[$ELEMENT].find(SEL_MOVEON_TIPS).removeClass(CLS_NONE).text(text);\n\t\t},\n\n\t\t\"hub/studyplan/goal/progress/edit/show\" : function(isShow){\n\t\t\tvar $element = this[$ELEMENT].find('.cp-goal-progress');\n\t\t\tisShow ? $element.addClass('cp-progress-goal-edit') :\n\t\t\t\t$element.removeClass('cp-progress-goal-edit');\n\t\t},\n\n\t\t\"getStatusKey\" : function(studyplan, isNopace){\n\t\t\tvar completed = studyplan.progress.state === studyplanState.Completed ? 'Completed' : '';\n\t\t\tvar nopace = isNopace ? 'Nopace' : '';\n\t\t\tvar stateCollection = stateParser.parseFlag(velocityState, studyplan.progress.properties.velocity);\n\t\t\tvar velocity = '';\n\t\t\t_.find(stateCollection, function(value, key){\n\t\t\t\tif(value){\n\t\t\t\t\tvelocity = key;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn completed || nopace || velocity;\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/restart/restart.html',[],function() { return function template(data) { var o = \"\";\n\tvar mailHidden = data.emailEnable === 'true' ? '' : 'hidden';\no += \"\\n<div class=\\\"ets-sp-goal-restart cp-goal-restart\\\">\\n\\t<div class=\\\"goal-mail \" +mailHidden+ \"\\\">\\n\\t\\t\";if(data.isSubscribed){o += \"\\n\\t\\t<input type=\\\"checkbox\\\" name=\\\"motivation-mail\\\" checked>\\n\\t\\t\";}else{o += \"\\n\\t\\t<input type=\\\"checkbox\\\" name=\\\"motivation-mail\\\" >\\n\\t\\t\";}o += \"\\n\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"695969\\\">Send me motivation emails to help me reach my study goal</span>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-goal-restart-confirm-wrapper\\\">\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn  btn-m btn-block cp-goal-change\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"694971\\\">change your goal\\n\\t\\t</button>\\n\\t</div>\\n\\t<div class=\\\"ets-sp-goal-restart-confirm-wrapper\\\">\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn  btn-m btn-block cp-goal-set\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"694972\\\">Set new Goal\\n\\t\\t</button>\\n\\t</div>\\n\\t<p class=\\\"cp-goal-cancel\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"694973\\\">\\n\\t\\tCancel\\n\\t</p>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/cp-goal/restart/main',[\n\t\"jquery\",\n\t\"poly\",\n\t\"when\",\n\t\"troopjs-ef/command/service\",\n\t\"troopjs-data/cache/component\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/studyplan-update-helper\",\n    \"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"template!./restart.html\"\n],function($, Poly, when, CommandService, Cache, Widget, typeidParser, updateHelper, studyplanVelocity, tRestart){\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar DATA_STUDYPLAN = \"_data_studyplan\";\n\tvar $ELEMENT = \"$element\";\n\n\tvar PACE_POINTS = \"_pacePoints\";\n\n\tvar SEL_CONFIRM_WRAPPER = \".ets-sp-goal-restart-confirm-wrapper\",\n\t\tSEL_RESTART_LINK = \".ets-sp-goal-restart-link\";\n\n\tvar CLS_PRIMARY = \"btn-primary btn-m btn\";\n\tvar CLS_NONE = \"ets-none\";\n\n\tvar SUBSCRIBE_COMMAND = 'campus_student_studyplan_email_subscrib/SubscribStudyPlanEmail';\n\tvar UNSUBSCRIBE_COMMAND = \"campus_student_studyplan_email_subscrib/UnsubscribStudyPlanEmail\";\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\tvar subscriptionPromise = me.query('campus_student_studyplan_email_subscription!current','ccl!\"CoachingEmail.enabled\"');\n\t\t\treturn when(subscriptionPromise)\n\t\t\t\t.then(function(data){\n\t\t\t\t\treturn me.html(tRestart, {\n\t\t\t\t\t\tisSubscribed : data[0].isSubscribed,\n\t\t\t\t\t\temailEnable: data[1].value,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tif(me[DATA_STUDYPLAN] && me[DATA_STUDYPLAN].progress.properties.velocity === studyplanVelocity.Crashed){\n\t\t\t\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).addClass(CLS_PRIMARY);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t},\n\n\t\t\"hub/config/pace-change\": function(paces){\n\t\t\tvar me = this;\n\t\t\tvar t = paces.every(function(e, i){\n\t\t\t\tif (e.selected) {\n\t\t\t\t\tme[PACE_POINTS] = e.pacePoints;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-link/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).addClass(CLS_NONE);\n\t\t\tme[$ELEMENT].find(SEL_CONFIRM_WRAPPER).removeClass(CLS_NONE);\n\t\t\tme.publish(\"config/pace-config/mode\", \"edit\");\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-confirm/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tupdateHelper.restartStudyplan({\n\t\t\t\treason : \"\",\n\t\t\t\tpacePoints : me[PACE_POINTS]\n\t\t\t}).then(function(goalItem){\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\tstudyplan_item : typeidParser.parseId(goalItem.id)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-cancel/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tme.publish(\"config/pace-config/mode\", \"view\");\n\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).removeClass(CLS_NONE);\n\t\t\tme[$ELEMENT].find(SEL_CONFIRM_WRAPPER).addClass(CLS_NONE);\n\t\t},\n\n\t\t\"dom:.cp-goal-change/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find('.ets-sp-goal-restart').addClass('goal-changing');\n\t\t\tme.publish(\"config/pace-config/mode\", \"edit\");\n\t\t\tme.publish(\"studyplan/goal/progress/edit/show\" ,true);\n\t\t\tme.publish(\"studyplan/goal/body/status/update\" , {\n\t\t\t\taction: 1,\n\t\t\t\tclass: 'cp-cfg-edit'\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.cp-goal-set/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find('.ets-sp-goal-restart').removeClass('goal-changing');\n\t\t\tupdateHelper.restartStudyplan({\n\t\t\t\treason : \"\",\n\t\t\t\tpacePoints : me[PACE_POINTS]\n\t\t\t}).then(function(goalItem){\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\tstudyplan_item : typeidParser.parseId(goalItem.id)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.cp-goal-cancel/click\": function(){\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find('.ets-sp-goal-restart').removeClass('goal-changing');\n\t\t\tme.publish(\"config/pace-config/mode\", \"view\");\n\t\t\tme.publish(\"studyplan/goal/progress/edit/show\" ,false);\n\t\t\tme.publish(\"studyplan/goal/body/status/update\" ,  {\n\t\t\t\taction: 0,\n\t\t\t\tclass: 'cp-cfg-edit'\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.goal-mail input/click\": function(){\n\t\t\tvar me = this;\n\t\t\tvar $input = me[$ELEMENT].find('input');\n\t\t\tvar command = $input.is(':checked') ? SUBSCRIBE_COMMAND : UNSUBSCRIBE_COMMAND;\n\t\t\tme.publish(command);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/cp20/locked.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-cp20-locked\\\">\\n    <h1><i class=\\\"ets-icon-lock\\\"></i></h1>\\n    <h1 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"The private lesson Is Locked\\\" data-blurb-id=\\\"639500\\\"></h1>\\n    <p class=\\\"ets-sp-cp20-tips\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"You must complete the unit lessons before reviewing what youve learned with a teacher.\\\" data-blurb-id=\\\"639501\\\"></p>\\n    <p class=\\\"ets-sp-cp20-purpose\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"The purpose of the private lesson is to review what you've learned in this unit with a live teacher. This live session takes 20 minutes and is included with your subscription.\\\" data-blurb-id=\\\"639502\\\"></p>\\n    <p class=\\\"ets-sp-cp20-btn-tips\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"You must complete your lessons before booking the private lesson.\\\" data-blurb-id=\\\"639503\\\"></p>\\n    <div class=\\\"ets-sp-cp20-next\\\">\\n    \\t<button type=\\\"button\\\" data-action=\\\"takeNext\\\" class=\\\"btn btn-primary btn-ml ets-sp-btn-next-lesson\\\">\\n    \\t\\t<span data-blurb-id=\\\"639504\\\" data-text-en=\\\"Take your next lesson\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"></span>\\n    \\t\\t<i class=\\\"glyphicon icon-caret-right\\\"></i>\\n    \\t</button>\\n    </div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/cp20/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"template!./locked.html\"\n], function ($, Widget, stateParser, stduyplanItemState, tLocked) {\n\t\"use strict\";\n\tvar ITEM_DATA = \"_item_data\";\n\n\treturn Widget.extend(function ($element, path, itemData) {\n\t\tthis[ITEM_DATA] = itemData;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (!me[ITEM_DATA] && !me[ITEM_DATA].progress) return;\n\t\t\treturn me.query(me[ITEM_DATA].progress.id).spread(function (data) {\n\t\t\t\tvar state = stateParser.parseFlag(stduyplanItemState, data.state);\n\t\t\t\tif (state.Locked) {\n\t\t\t\t\treturn me.publish(\"school/interface/studyplan/cp20-locked-widget\").spread(function (widgetPath) {\n\t\t\t\t\t\tif (widgetPath) {\n\t\t\t\t\t\t\t$(\"<div></div>\", {\n\t\t\t\t\t\t\t\t\"data-weave\": widgetPath + \"(itemData)\",\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).appendTo(me.$element).weave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn me.html(tLocked, {\n\t\t\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\treturn me.publish(\"school/interface/studyplan/cp20-container-widget\",\n\t\t\t\t\t\t\"school-ui-studyplan/widget/gl-pl/checkpoint20/main\").spread(function (widgetPath) {\n\n\t\t\t\t\t\t$(\"<div></div>\", {\n\t\t\t\t\t\t\t\"data-weave\": widgetPath + \"(itemData)\",\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).appendTo(me.$element).weave();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\t\t},\n\t\t//next lesson on locked page\n\t\t\"dom:[data-action=takeNext]/click\": function () {\n\t\t\tthis.publish(\"studyplan/sequence/navigate/suggest-item\");\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/gl/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\"\n], function ($, Widget, tGl) {\n\t\"use strict\";\n\tvar ITEM_DATA = \"_item_data\";\n\n\treturn Widget.extend(function ($element, path, itemData) {\n\t\tthis[ITEM_DATA] = itemData;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\n\t\t\treturn me.publish(\"school/interface/studyplan/gl-container-widget\",\n\t\t\t\t\"school-ui-studyplan/widget/gl-pl/grouplesson/main\").spread(function (widgetPath) {\n\n\t\t\t\t$(\"<div></div>\", {\n\t\t\t\t\t\"data-weave\": widgetPath + \"(itemData)\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t}\n\t\t\t\t}).appendTo(me.$element).weave();\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/goal.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-cfg\\\">\\n\\t<div class=\\\"ets-sp-cfg-hd\\\">\\n\\t\\t<!--\\n\\t\\tthe progress widget will render here\\n\\t\\t-->\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-bd\\\">\\n\\t\\t<!--\\n\\t\\tthe pace config widget will render here\\n\\t\\t-->\\n\\t</div>\\n\\t<div class=\\\"ets-sp-cfg-ft\\\">\\n\\t\\t<!--\\n\\t\\tthe restart & moveon widget will render here\\n\\t\\t-->\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/goal/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"json2\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"troopjs-browser/loom/weave\",\n    \"school-ui-studyplan/utils/state-parser\",\n    \"school-ui-studyplan/enum/studyplan-state\",\n    \"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"template!./goal.html\"\n\t],function(when, $, JSON, Widget, loom, weave, stateParser, studyplanState, itemState, tGoal){\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar WIDGET_PACE = \"school-ui-studyplan/shared/pace-config/main\";\n\tvar WIDGET_PROGRESS = \"school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/main\";\n\tvar WIDGET_MOVEON = \"school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/main\";\n\tvar WIDGET_RESTART = \"school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/main\";\n\n\tvar SEL_PROGRESS_HOLDER = \".ets-sp-cfg-hd\";\n\tvar SEL_ACTIVITY_HOLDER = \".ets-sp-cfg-ft\";\n\tvar SEL_PACE_HOLDER = \".ets-sp-cfg-bd\";\n\tvar CLS_BLANK = \"ets-sp-blank\";\n\n\tvar DATA_GOAL = \"_data_goal\";\n\n\treturn Widget.extend(function($element, path, itemData){\n\t\tvar me = this;\n\t\tme[DATA_GOAL] = itemData;\n\t},{\n\t\t\"hub:memory/load/studyplan\" : function(studyplan){\n\t\t\tif(studyplan){\n\t\t\t\tvar me = this;\n\t\t\t\tvar isNopace;\n\n\t\t\t\tme[DATA_GOAL].properties.paces.forEach(function (e) {\n\t\t\t\t\tif(e.pacePoints === 0){\n\t\t\t\t\t\tisNopace = e.selected;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn when.all([\n\t\t\t\t\tme.html(tGoal),\n\t\t\t\t\tme.query(studyplan.id + \".progress,.items.progress\")\n\t\t\t\t]).spread(function (templateArray, studyplanData) {\n\t\t\t\t\tvar $moveon;\n\t\t\t\t\tvar $progress;\n\t\t\t\t\tvar $pace;\n\t\t\t\t\tvar $restart;\n\n\t\t\t\t\tvar studyplan = studyplanData[0];\n\t\t\t\t\tvar goal;\n\n\t\t\t\t\tstudyplan.items.forEach(function(item){\n\t\t\t\t\t\tif(item.typeCode === \"goal\"){\n\t\t\t\t\t\t\tgoal = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t//weave progress widget\n\t\t\t\t\tme[$ELEMENT].find(SEL_PROGRESS_HOLDER).append(\n\t\t\t\t\t\t\t$progress = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_PROGRESS)\n\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t);\n\t\t\t\t\t$progress.weave();\n\n\t\t\t\t\t//check state\n\t\t\t\t\tif(studyplan.progress.state === studyplanState.Completed){\n\n\t\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_HOLDER).append(\n\t\t\t\t\t\t\t$moveon = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_MOVEON)\n\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t);\n\t\t\t\t\t\t$moveon.weave();\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tme[$ELEMENT].find(SEL_PACE_HOLDER).append(\n\t\t\t\t\t\t\t$pace = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_PACE)\n\t\t\t\t\t\t\t\t.data(\"mode\", \"view\")\n\t\t\t\t\t\t\t\t.data(\"config\", $.extend({}, goal && goal.properties, goal && goal.progress.properties))\n\t\t\t\t\t\t);\n\t\t\t\t\t\t$pace.weave();\n\t\t\t\t\t\t// when studyplan is no-pace, there is 'no pace', and can not restart\n\t\t\t\t\t\tif(isNopace){\n\t\t\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_HOLDER).addClass(CLS_BLANK);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tme[$ELEMENT].find(SEL_ACTIVITY_HOLDER).append(\n\t\t\t\t\t\t\t\t$moveon = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t\t.attr(loom.weave, WIDGET_RESTART)\n\t\t\t\t\t\t\t\t\t.data(\"studyplan\", studyplan)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$moveon.weave();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/moveon.html',[],function() { return function template(data) { var o = \"\";\n\tfunction getBlurbHTML() {\n\t\tvar classPrimary = 'btn btn-m btn-primary';\n\t\tvar classDefault = 'btn btn-m btn-default';\n\t\tvar prefix = ' <button class=';\n\t\tvar suffix = ' <i class=\"glyphicon icon-caret-right\"></i></button>';\n\t\tvar result;\n\n\t\tif(data.isLastLevel) {\n\t\t\tif(data.isLastUnit) {\n                if(data.enableLevelTest && data.isGE) {\n                    prefix = '<a href=\"' + data.levelTestPath + '?testid='\n                    + data.levelTestId + '\" target=\"_blank\"><span class=\"' + classDefault + '\" data-weave=\"troopjs-ef/blurb/widget\" data-blurb-id=\"450035\" data-text-en=\"Take the level test\"></span></a>' + prefix;\n                }\n\n\t\t\t\tif(data.enableSelectCourse) {\n\t\t\t\t\tprefix += '\"' + classPrimary + '\" data-action=\"select/course\" data-link=\"' + data.changeCourseLink + '\">';\n\t\t\t\t\tresult = '<span data-blurb-id=\"' + data.blurbIds.cpSelectCourse + '\" data-text-en=\"Select the next course you want to do\" data-weave=\"troopjs-ef/blurb/widget\"></span>';\n\t\t\t\t}\n\t\t\t}\n\t\t} else if(data.isLastUnit) {\n\t\t\tprefix += '\"' + classPrimary + ' ' + (data.enableChangeLevel ? '' : 'hide') + '\" data-action=\"next/level\">';\n\n\t\t\tif(data.enableLevelTest && data.isGE) {\n\t\t\t\tprefix = '<a href=\"' + data.levelTestPath + '?testid='\n\t\t\t\t\t+ data.levelTestId + '\" target=\"_blank\"><span class=\"' + classDefault + '\" data-weave=\"troopjs-ef/blurb/widget\" data-blurb-id=\"450035\" data-text-en=\"Take the level test\"></span></a>' + prefix;\n\t\t\t}\n\n\t\t\tresult = '<span data-blurb-id=\"569912\" data-text-en=\"Move to the next level\" data-weave=\"troopjs-ef/blurb/widget\"></span> '\n\t\t} else {\n\t\t\tprefix += '\"' + classPrimary + '\" data-action=\"next/unit\">';\n\n\t\t\tresult = '<span data-blurb-id=\"569911\" data-text-en=\"Go to Unit ^number^\" data-weave=\"troopjs-ef/blurb/widget\" data-values=\\'{\"number\":' + data.nextUnitIndex + '}\\'></span>';\n\t\t}\n\n\t\treturn result ? (prefix + result + suffix) : \"\";\n\t}\no += \"\\n\\n<div class=\\\"ets-sp-goal-moveon\\\">\\n\\t\\t\";\n\t\tif(data.hasActiveSPInCurrentLevel){\n\t\to += \"\\n\\t\\t<!--\\n\\t\\tif not, we cann't render the move on button. because case SPC-4998\\n\\t\\t-->\\n\\t\\t\\t<div class=\\\"ets-sp-goal-moveon-main\\\">\\n\\t\\t\\t\\t\\t\" + getBlurbHTML()+ \"\\n\\t\\t\\t</div>\\n\\t\\t\";\n\t\t}\n\t\to += \"\\n\\n\\t\\t\";\n\t\tif(data.optionalItems.length){\n\t\to += \"\\n\\t\\t<div class=\\\"ets-sp-moveon-items\\\">\\n\\t\\t\\t<div class=\\\"ets-sp-optional-title\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656559\\\" data-text-en=\\\"We recommend you to take optional lessons before you move on\\\"></div>\\n\\t\\t\\t<div class=\\\"ets-sp-optional-items\\\">\\n\\t\\t\\t\";\n\t\t\tfor (var n=0; n<data.optionalItems.length; n++){\n\t\t\t\tswitch(data.optionalItems[n].itemData.typeCode){\n\t\t\t\t\tcase \"cp20\":\n\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-check-point\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"639494\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pl\":\n\t\t\t\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-private-lesson\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"569833\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"gl\":\n\t\t\t\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-group-lesson\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"638118\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\";\n\t\t\t\t}\n\t\t\t}\n\t\t\to += \"\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t\";\n\t\t}\n\t\to += \"\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/goal/moveon/main',[\n    \"school-ui-studyplan/module\",\n    \"jquery\",\n    \"when\",\n    \"poly\",\n    \"lodash\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-shared/enum/course-type\",\n    \"school-ui-shared/utils/typeid-parser\",\n    \"school-ui-shared/utils/progress-state\",\n    \"school-ui-shared/utils/update-helper\",\n    \"school-ui-studyplan/enum/studyplan-item-state\",\n    \"school-ui-studyplan/utils/state-parser\",\n    \"template!./moveon.html\"\n], function (module, $, when, poly, _, Widget, CourseType, typeidParser, progressState, updateHelper, itemState, stateParser, tMoveon) {\n    \"use strict\";\n\n    var UNDEF;\n    var CCL_ENABLE_LEVELTEST = 'ccl!\"school.courseware.enableleveltest\"';\n    var CCL_ENABLE_GOTO_NEXT_LEVEL = 'ccl!\"school.courseware.enableSelectNextLevel\"';\n    var CCL_ENABLE_SELECT_COURSE = 'ccl!\"school.menu.changecourse.display\"';\n    var CCL_CHANGE_COURSE_LINK = \"ccl!'school.studyplan.changeCourse.link'\";\n    var Q_CURRENT_STUDYPLAN = \"campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress\";\n    var MSS_LEVEL_TEST_VERSION = \"member_site_setting!'school;student.leveltest.version'\";\n\n    var DATA_STUDYPLAN = \"_data_studyplan\";\n    var $ELEMENT = \"$element\";\n\n    var HUB_SHOW_TIPS = \"studyplan/goal/moveon-tips/show\";\n\n    var MODULE_CONFIG = _.merge({\n        blurbIds: {\n            cpSelectCourse: \"656560\"\n        },\n\t    changeCourseUrl: undefined,\n\t    levelTestPath: \"/school/content/leveltest.aspx\"\n    }, module.config() || {});\n\n    function isDemoAndNeedToLimit (common_context, courseTypeCode) {\n        return common_context.partnercode.value.toLowerCase() === \"demo\" &&\n                (CourseType.isGECourse(courseTypeCode) || CourseType.isBECourse(courseTypeCode))\n    }\n\n    function filterData() {\n        var me = this;\n        var levels = me.course.children;\n        var level  = me.level;\n        var levelLen = levels.length;\n        var unit = me.unit;\n        var units = unit.parent.children;\n        var unitLen = units.length;\n        var config = {};\n\n        // INDB2B SPECIAL LOGIC\n        if(unit.templateUnitId === units[unitLen-1].templateUnitId || me.course.courseTypeCode === \"INDB2B\") {\n            config.isLastUnit = true;\n\n            if(me.isGE) {\n                config.levelTestId = (me.levelTestVersion === 1 ? level.legacyLevelId : level.templateLevelId);\n                if(level.templateLevelId === levels[levelLen-1].templateLevelId) {\n                    config.isLastLevel = true;\n                }\n            } else {\n                // For SPIN course, alway let student select course\n                config.isLastLevel = true;\n            }\n        } else {\n            units.every(function(v, i) {\n                if(v.templateUnitId === unit.templateUnitId) {\n                    config.nextUnitIndex = i+2;\n                    me.nextUnitId = units[i+1].templateUnitId;\n                    return false;\n                }\n               return true;\n            });\n\n        }\n\n        //for demo, only show the select course button\n        if(isDemoAndNeedToLimit(me.common_context, me.course.courseTypeCode)){\n          config.isLastUnit = true;\n          config.isLastLevel = true;\n        }\n\n        return config;\n    }\n\n    function render() {\n        var me = this;\n        var studyplan = me[DATA_STUDYPLAN];\n        if(!me.course || !me.level || !me.unit || !me.common_context || !me.levelTestVersion) return;\n\n        me.query(\n            CCL_ENABLE_LEVELTEST,\n            CCL_ENABLE_GOTO_NEXT_LEVEL,\n            CCL_ENABLE_SELECT_COURSE,\n            CCL_CHANGE_COURSE_LINK,\n            Q_CURRENT_STUDYPLAN,\n            me.level.id + \".children\"\n        )\n        .spread(function(\n            enableLevelTest,\n            enableChangeLevel,\n            enableSelectCourse,\n            changeCourseLink,\n            currentStudyPlan,\n            navgationUnits\n            ) {\n            var goalItem;\n\n            var data = filterData.call(me);\n            data.isGE = me.isGE;\n            data.enableLevelTest = enableLevelTest && enableLevelTest.value.toLowerCase() === \"true\";\n            data.enableChangeLevel = enableChangeLevel && enableChangeLevel.value.toLowerCase() === \"true\";\n            data.enableSelectCourse = enableSelectCourse && enableSelectCourse.value.toLowerCase() === \"true\";\n            data.changeCourseLink = MODULE_CONFIG.changeCourseUrl || changeCourseLink.value;\n            data.blurbIds = MODULE_CONFIG.blurbIds;\n\t        data.levelTestPath = MODULE_CONFIG.levelTestPath;\n\n            data.optionalItems = [];\n\n            //check items status\n            studyplan.items.forEach(function(item){\n                var state;\n                if(item.typeCode !== \"goal\" && item.isOptional){\n                    state = stateParser.parseFlag(itemState, item.progress.state);\n                    if(!state.Completed){\n                        data.optionalItems.push({itemData:item, locked:state.Locked});\n                    }\n                }\n                else{\n                    goalItem = item;\n                }\n            });\n\n            if(stateParser.parseFlag(itemState, goalItem.progress.state).Completed){\n                if(data.isLastLevel && data.isLastUnit){\n                    //blurb en : You've completed the level.\n                    me.query(\"blurb!656580\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n                else if(data.isLastUnit){\n                    //blurb en : You've unlocked the next level\n                    me.query(\"blurb!656556\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n                else{\n                    //blurb en : You've unlocked the next unit\n                    me.query(\"blurb!656555\").spread(function(blurb){\n                        blurb && me.publish(HUB_SHOW_TIPS, blurb.translation);\n                    });\n                }\n            }\n\n            data.hasActiveSPInCurrentLevel = navgationUnits.children.reduce(function(prev, curr){\n                return prev || (curr.templateUnitId === currentStudyPlan.studyPlan.properties.templateUnitId);\n            }, false);\n\n            me.html(tMoveon, data);\n\n        });\n    }\n\n    function route(unitId) {\n        return this.publish(\"load/config\", typeidParser.parseId(unitId));\n    }\n\n    function patchEnrollment() {    //SPC-7718 send additional update enrollment if backend auto moveon failed\n        var me = this;\n        return me.query('student_course_enrollment!current', me.unit.progress.id).spread(function (currentEnrollment, currentUnitProgress) {\n            if (me.nextUnitId && currentEnrollment.studentUnitId === me.unit.studentUnitId && progressState.hasPassed(currentUnitProgress.state)) {\n                return updateHelper.updateEnrollment({templateId: me.nextUnitId});\n            }\n        });\n    }\n\n    return Widget.extend(function(){\n        var me = this;\n        me[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n\n        me.query(MSS_LEVEL_TEST_VERSION).spread(function (mssLevelTestVersion) {\n            me.levelTestVersion = parseInt(mssLevelTestVersion && mssLevelTestVersion.value || 1);\n            render.call(me);\n        });\n    },{\n        \"hub:memory/common_context\" : function(common_context){\n          var me = this;\n          if(common_context){\n            me.common_context = common_context.values;\n            render.call(me);\n          }\n        },\n        \"hub:memory/load/results\": function(data) {\n            var me = this;\n            if( data && (   me.course !== data.course ||\n                            me.level !== data.level ||\n                            me.unit !== data.unit )\n                ){\n                me.studyplan = data.studyplan;\n                me.isGE = CourseType.isGECourse((data.course || {}).courseTypeCode);\n                me.course = data.course;\n                me.level = data.level;\n                me.unit = data.unit;\n                render.call(me);\n            }\n        },\n        \"hub/ef/update/progress\":function(progress){\n            var me = this;\n            me.query(me.studyplan.id + \".items.progress\").spread(function(studyplan){\n                me[DATA_STUDYPLAN] = studyplan;\n                render.call(me);\n            });\n        },\n        \"dom:[data-action='next/unit']/click\": function (event) {\n            var me = this;\n            patchEnrollment.call(me).then(function () {\n                route.call(me, me.nextUnitId);\n            });\n        },\n        //TODO: need to test this case\n        \"dom:[data-action='next/level']/click\": function(event) {\n            this.publish(\"enroll/next/level\");\n        },\n        //TODO: need to test this case\n        \"dom:[data-action='select/course']/click\": function (event) {\n            var changeCourseLink = $(event.currentTarget).data(\"link\");\n            if (changeCourseLink) {\n                window.open(changeCourseLink, '_self');\n            }\n            else {\n                this.publish(\"show/course/list\");\n            }\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/progress.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-goal-progress\\\">\\n\\t\"; \n\tif(data.completed){\n\t\to += \"\\n\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656554\\\" data-text-en=\\\"Congratulations!\\\"></h2>\\n\\t\\t\";\n\t}\n\telse if(data.isNopace){\n\t\to += \"\\n\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656581\\\" data-text-en=\\\"You are studying at your own pace.\\\"></h2>\\n\\t\\t\";\n\t}\n\telse{\n\t\tswitch (data.velocity){\n\t\t\tcase this.velocityState.Fast:\n\t\t\t\to += \"\\n\\t\\t\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656562\\\" data-text-en=\\\"Fantastic. You are running ahead.\\\"></h2>\\n\\t\\t\\t\\t\";\n\t\t\tbreak;\n\t\t\tcase this.velocityState.Normal:\n\t\t\t\to += \"\\n\\t\\t\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656561\\\" data-text-en=\\\"Thumbs up. You are right on track.\\\"></h2>\\n\\t\\t\\t\\t\";\n\t\t\tbreak;\n\t\t\tcase this.velocityState.Slow:\n\t\t\t\to += \"\\n\\t\\t\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656563\\\" data-text-en=\\\"You are falling behind. Lets get back on track.\\\"></h2>\\n\\t\\t\\t\\t\";\n\t\t\tbreak;\n\t\t\tcase this.velocityState.Crashing:\n\t\t\t\to += \"\\n\\t\\t\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656582\\\" data-text-en=\\\"Your unit plan will expire soon. Lets get back on track.\\\"></h2>\\n\\t\\t\\t\\t\";\n\t\t\tbreak;\n\t\t\tcase this.velocityState.Crashed:\n\t\t\t\to += \"\\n\\t\\t\\t\\t<h2 class=\\\"ets-sp-velocity\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656564\\\" data-text-en=\\\"Your study plan has expired. Set a new one.\\\"></h2>\\n\\t\\t\\t\\t\";\n\t\t\tbreak;\n\t\t}\n\t}\n\to += \"\\n\\t\\n\\t<div class=\\\"ets-sp-moveon-tips ets-none\\\"></div>\\n\\t<div class=\\\"ets-sp-bar\\\">\\n\\t\\t<span class=\\\"ets-sp-complete-rate\\\">\\n\\t\\t\\t<span class=\\\"ets-sp-rate-num\\\">\" + data.mandatoryRate+ \"</span>\\n\\t\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656557\\\" data-text-en=\\\"completed\\\"></span>\\n\\t\\t</span>\\n\\t\\t\\n\\t\\t<div class=\\\"ets-sp-mandatory\\\">\\n\\t\\t\\t<div class=\\\"ets-sp-progress-border\\\"></div>\\n\\t\\t\\t<span class=\\\"ets-sp-finished\\\"></span>\\n\\t\\t</div>\\t\\t\\n\\t\\t\";\n\t\tif(data.optionalItems.length){\n\t\to += \"\\n\\t\\t\\t<div class=\\\"ets-sp-optional-popover\\\">\\n\\t\\t\\t\\t<div class=\\\"ets-sp-optional\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"ets-sp-progress-border\\\"></div>\\n\\t\\t\\t\\t\\t<span class=\\\"ets-sp-finished\\\"></span>\\n\\t\\t\\t\\t\\t<span class=\\\"ets-sp-dots\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-dot\\\"></span>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-dot\\\"></span>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-dot\\\"></span>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t\";\n\t\t}\n\t\to += \"\\n\\n\\n\\t</div>\\n</div>\\n<!-- use in gubstrap popover plugin -->\\n<div class=\\\"ets-sp-optional-holder ets-none\\\">\\n\\t<div class=\\\"ets-sp-optional-lessons\\\">\\n\\t\\t<div class=\\\"ets-sp-optional-title\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"656558\\\" data-text-en=\\\"Optional lessons\\\"></div>\\n\\t\\t<div class=\\\"ets-sp-optional-items\\\">\\n\\t\\t\";\n\t\tif(data.optionalItems && data.optionalItems.length){\n\t\t\tfor (var n=0; n<data.optionalItems.length; n++){\n\t\t\t\tswitch(data.optionalItems[n].itemData.typeCode){\n\t\t\t\t\tcase \"cp20\":\n\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-check-point\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\";\n\t\t\t\t\t\t\t\t if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"639494\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\"; \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pl\":\n\t\t\t\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-private-lesson\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"569833\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\"; \n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"gl\":\n\t\t\t\t\t\to += \"\\n\\t\\t\\t\\t\\t\\t<div class=\\\"ets-sp-item-small\\\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-icon-badge ets-icon-badge-group-lesson\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; if (data.optionalItems[n].locked) { o += \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-locked\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\\t\\t</i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-sp-name\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Private Class\\\" data-blurb-id=\\\"638118\\\"></span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\to += \"\\n\\t\\t</div>\\t\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/goal/progress/main',[\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/animation-helper\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"school-ui-studyplan/enum/studyplan-state\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"template!./progress.html\"\n], function(when, Widget, typeidParser, animationHelper, stateParser, velocityState, studyplanState, itemState, tProgress){\n\n\tvar UNDEF;\n\tvar $ELEMENT = \"$element\";\n\n\tvar DATA_STUDYPLAN = \"_data_studyplan\";\n\n\tvar SEL_OPTIONAL_POPOVER = \".ets-sp-optional-popover\";\n\tvar SEL_POPOVER_HOLDER = \".ets-sp-optional-holder\";\n\tvar SEL_RATE_NUM = \".ets-sp-rate-num\";\n\tvar SEL_MANDATORY_FINISHED = \".ets-sp-mandatory .ets-sp-finished\";\n\tvar SEL_OPTIONAL_FINISHED = \".ets-sp-optional .ets-sp-finished\";\n\tvar SEL_MOVEON_TIPS = \".ets-sp-moveon-tips\";\n\n\tvar CLS_NONE = \"ets-none\";\n\n\tvar DURATION_RATE = 800;\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n\t},{\n\t\t\"velocityState\" : velocityState,\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\tvar studyplan = me[DATA_STUDYPLAN];\n\n\t\t\tvar mandatoryCount = optionalCount = mandatoryFinished = optionalFinished = 0;\n\t\t\tvar goalItem;\n\t\t\tvar optionalItems = [];\n\t\t\tvar mandatoryRate;\n\t\t\tvar optionalRate;\n\t\t\tvar isNopace;\n\n\n\t\t\t//check items status\n\t\t\tstudyplan.items.forEach(function(item){\n\t\t\t\tvar state;\n\t\t\t\tif(item.typeCode !== \"goal\"){\n\t\t\t\t\tstate = stateParser.parseFlag(itemState, item.progress.state);\n\t\t\t\t\tif(item.isOptional){\n\t\t\t\t\t\toptionalCount++;\n\t\t\t\t\t\tstate.Completed && optionalFinished++;\n\t\t\t\t\t\toptionalItems.push({itemData:item, locked:state.Locked});\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tmandatoryCount++;\n\t\t\t\t\t\tstate.Completed && mandatoryFinished++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tgoalItem = item;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmandatoryRate = mandatoryCount ?\n\t\t\t\t(parseInt(mandatoryFinished / mandatoryCount * 100, 10) + \"%\") : UNDEF;\n\t\t\toptionalRate = optionalCount ?\n\t\t\t\t(parseInt(optionalFinished / optionalCount * 100, 10) + \"%\") : UNDEF;\n\n\t\t\tif(goalItem){\n\t\t\t\tgoalItem.properties.paces.forEach(function(e){\n\t\t\t\t\tif(e.pacePoints === 0){\n\t\t\t\t\t\tisNopace = e.selected;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn me.html(tProgress, {\n\t\t\t\tcompleted : studyplan.progress.state === studyplanState.Completed,\n\t\t\t\tgoal : goalItem,\n\t\t\t\tisNopace: isNopace,\n\t\t\t\tmandatoryRate : mandatoryRate,\n\t\t\t\toptionalRate : optionalRate,\n\t\t\t\toptionalItems : optionalItems,\n\t\t\t\tvelocity : studyplan.progress.properties.velocity\n\t\t\t}).then(function(){\n\t\t\t\tvar $optionalBar = me[$ELEMENT].find(SEL_OPTIONAL_POPOVER);\n\t\t\t\tvar $mandatoryProgress = me[$ELEMENT].find(SEL_MANDATORY_FINISHED);\n\t\t\t\tvar $optionalProgress = me[$ELEMENT].find(SEL_OPTIONAL_FINISHED);\n\n\n\t\t\t\t//init popover for optional items\n\t\t\t\t$optionalBar.data({\n\t\t\t\t\t\"content\": me[$ELEMENT].find(SEL_POPOVER_HOLDER).html(),\n\t\t\t\t\t\"trigger\" : \"hover\",\n\t\t\t\t\t\"placement\":\"bottom\",\n\t\t\t\t\t\"html\" : true\n\t\t\t\t});\n\t\t\t\t$optionalBar.popover();\n\n\n\t\t\t\t//start animation\n\t\t\t\t$mandatoryProgress.css(\"width\", 0);\n\t\t\t\t$optionalProgress.css(\"width\", 0);\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tanimationHelper.request(\"goalEnter\", function(){\n\t\t\t\t\t\treturn when.promise(function(resolve){\n\t\t\t\t\t\t\t$mandatoryProgress.css(\"width\", mandatoryRate);\n\t\t\t\t\t\t\t$optionalProgress.css(\"width\", optionalRate);\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, DURATION_RATE);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}, 0);\n\t\t\t});\n\n\t\t},\n\t\t\"hub/studyplan/goal/moveon-tips/show\" : function(text){\n\t\t\ttext && this[$ELEMENT].find(SEL_MOVEON_TIPS).removeClass(CLS_NONE).text(text);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/restart.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-goal-restart\\\">\\n\\t<span class=\\\"ets-sp-goal-restart-link\\\" data-blurb-id=\\\"569840\\\" data-text-en=\\\"Restart\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"></span>\\n\\t<div class=\\\"ets-sp-goal-restart-confirm-wrapper ets-none\\\">\\n\\t\\t<button type=\\\"button\\\" class=\\\"btn btn-primary btn-m btn-block ets-sp-goal-restart-confirm\\\" data-blurb-id=\\\"450019\\\" data-text-en=\\\"Confirm\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"><span></span></button>\\n\\t\\t<span class=\\\"ets-sp-goal-restart-cancel\\\" data-blurb-id=\\\"450018\\\" data-text-en=\\\"Cancel\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\"></span>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/goal/restart/main',[\n\t\"jquery\",\n\t\"poly\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/studyplan-update-helper\",\n    \"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"template!./restart.html\"\n],function($, Poly, Widget, typeidParser, updateHelper, studyplanVelocity, tRestart){\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar DATA_STUDYPLAN = \"_data_studyplan\";\n\tvar $ELEMENT = \"$element\";\n\n\tvar PACE_POINTS = \"_pacePoints\";\n\n\tvar SEL_CONFIRM_WRAPPER = \".ets-sp-goal-restart-confirm-wrapper\",\n\t\tSEL_RESTART_LINK = \".ets-sp-goal-restart-link\";\n\n\tvar CLS_PRIMARY = \"btn-primary btn-m btn\";\n\tvar CLS_NONE = \"ets-none\";\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[DATA_STUDYPLAN] = me[$ELEMENT].data(\"studyplan\");\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\treturn me.html(tRestart).then(function(){\n\t\t\t\tif(me[DATA_STUDYPLAN] && me[DATA_STUDYPLAN].progress.properties.velocity === studyplanVelocity.Crashed){\n\t\t\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).addClass(CLS_PRIMARY);\n\t\t\t\t}\n\t\t\t});;\n\t\t},\n\n\t\t\"hub/config/pace-change\": function(paces){\n\t\t\tvar me = this;\n\n\t\t\tpaces.every(function(e, i){\n\t\t\t\tif (e.selected) {\n\t\t\t\t\tme[PACE_POINTS] = e.pacePoints;\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-link/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).addClass(CLS_NONE);\n\t\t\tme[$ELEMENT].find(SEL_CONFIRM_WRAPPER).removeClass(CLS_NONE);\n\t\t\tme.publish(\"config/pace-config/mode\", \"edit\");\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-confirm/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tupdateHelper.restartStudyplan({\n\t\t\t\treason : \"\",\n\t\t\t\tpacePoints : me[PACE_POINTS]\n\t\t\t}).then(function(goalItem){\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\tstudyplan_item : typeidParser.parseId(goalItem.id)\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t\"dom:.ets-sp-goal-restart-cancel/click\": function(){\n\t\t\tvar me = this;\n\n\t\t\tme.publish(\"config/pace-config/mode\", \"view\");\n\t\t\tme[$ELEMENT].find(SEL_RESTART_LINK).removeClass(CLS_NONE);\n\t\t\tme[$ELEMENT].find(SEL_CONFIRM_WRAPPER).addClass(CLS_NONE);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/lesson.html',[],function() { return function template(data) { var o = \"\";\n\tvar lesson = data.lesson;\n\tvar pcScore = data.pcScore;\n\tvar pcHasPassed = data.pcHasPassed;\n\tvar mobHasPassed = data.mobHasPassed;\n\tvar mobHasStarted = data.mobHasStarted;\n\tvar physicalLesson = data.physicalLesson;\no += \"\\n<div class=\\\"ets-sp-lsn\\\">\\n\\t<div class=\\\"ets-sp-lsn-main\\\">\\n\\t\\t<div class=\\\"ets-sp-lsn-hd clearfix\\\">\\n\\t\\t\\t<img src=\\\"\" + (lesson.lessonImage ? lesson.lessonImage.url : '') + \"\\\" width=\\\"260\\\" height=\\\"160\\\">\\n\\t\\t\\t<div class=\\\"ets-sp-lsn-info\\\">\\n\\t\\t\\t\\t<h4><span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"490238\\\" data-text-en=\\\"Lesson\\\"></span> \" + lesson.lessonNo + \"</h4>\\n\\t\\t\\t\\t<h1>\" + lesson.lessonName + \"</h1>\\n\\t\\t\\t\\t\";if (pcHasPassed) {o += \"\\n\\t\\t\\t\\t<div class=\\\"ets-sp-lsn-status ets-pass\\\">\\n\\t\\t\\t\\t\\t<h3>\\n\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-badge-checkmark\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"569854\\\" data-text-en=\\\"PASSED\\\"></span> / \" + pcScore + \"%\\n\\t\\t\\t\\t\\t</h3>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\"; } else { o += \"\\n\\t\\t\\t\\t\\t\"; if(mobHasStarted){ o += \"\\n\\t\\t\\t\\t\\t<div class=\\\"ets-sp-lsn-status ets-start\\\">\\n\\t\\t\\t\\t\\t\\t<h3>\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-mob-icon ets-icon-mob-started\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-mob-status\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661846\\\" data-text-en=\\\"Started on mobile\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-mob-tip ets-mob-tip-started\\\"></i>\\n\\t\\t\\t\\t\\t\\t</h3>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\\t\"; if(mobHasPassed){ o += \"\\n\\t\\t\\t\\t\\t<div class=\\\"ets-sp-lsn-status ets-pass\\\">\\n\\t\\t\\t\\t\\t\\t<h3>\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-mob-icon ets-icon-mob-passed\\\"></i>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"ets-mob-status\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661847\\\" data-text-en=\\\"Passed on mobile\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t<i class=\\\"ets-icon-mob-tip ets-mob-tip-passed\\\"></i>\\n\\t\\t\\t\\t\\t\\t</h3>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"ets-sp-lsn-bd\\\">\\n\\t\\t\\t<div data-weave=\\\"school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/main\\\" data-physical-lesson-id=\\\"\" + physicalLesson+ \"\\\"></div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal fade ets-mob-modal ets-mob-modal-started\\\" role=\\\"dialog\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content ets-mob-modal-tip\\\">\\n\\t\\t\\t<div class=\\\"ets-tip-icon\\\">\\n\\t\\t\\t\\t<i class=\\\"ets-icon-mob-started\\\"></i>\\n\\t\\t\\t</div>\\n\\t\\t\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661846\\\" data-text-en=\\\"Started on mobile\\\"></h2>\\n\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661848\\\" data-text-en=\\\"You have started this lesson on your mobile.\\\"></p>\\n\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"663229\\\" data-text-en=\\\"You can choose to study the lesson on the web as well, or continue on your mobile device.\\\"></p>\\n\\t\\t\\t<div class=\\\"ets-tip-button\\\">\\n\\t\\t\\t\\t<button class=\\\"btn btn-default ets-btn-modal-close\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661850\\\" data-text-en=\\\"Got it\\\"></button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n<div class=\\\"modal fade ets-mob-modal ets-mob-modal-passed\\\" role=\\\"dialog\\\">\\n\\t<div class=\\\"modal-dialog\\\">\\n\\t\\t<div class=\\\"modal-content ets-mob-modal-tip\\\">\\n\\t\\t\\t<div class=\\\"ets-tip-icon\\\">\\n\\t\\t\\t\\t<i class=\\\"ets-icon-mob-passed\\\"></i>\\n\\t\\t\\t</div>\\n\\t\\t\\t<h2 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661847\\\" data-text-en=\\\"Passed on mobile\\\"></h2>\\n\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"663228\\\" data-text-en=\\\"You have passed this lesson on your mobile.\\\"></p>\\n\\t\\t\\t<p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661849\\\" data-text-en=\\\"You might see more new content herebut don't worry, all good!\\\"></p>\\n\\t\\t\\t<div class=\\\"ets-tip-button\\\">\\n\\t\\t\\t\\t<button class=\\\"btn btn-default ets-btn-modal-close\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"661850\\\" data-text-en=\\\"Got it\\\"></button>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\"; return o; }; });\n",
    "/**\n * A widget that contains a lesson\n *\n * @class lesson\n */\ndefine('school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/progress-state\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"jquery.gudstrap\",\n\t\"poly\",\n\t\"template!./lesson.html\"\n], function LessonModule($, Widget, progressState, Parser, $GUD, poly, tLesson) {\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar STUDYPLAN_ITEM = \"_studyplan_item\";\n\tvar LESSON = \"_lesson\";\n\n\tvar SEL_MOB_MODAL_STARTED = \".ets-mob-modal-started\",\n\t\tSEL_MOB_MODAL_PASSED = \".ets-mob-modal-passed\",\n\t\tSEL_MOB_MODAL = \".ets-mob-modal\";\n\n\t/**\n\t * Render the widget UI\n\t *\n\t * @api private\n\t */\n\tfunction doRender(lesson) {\n\t\tvar me = this;\n\n\t\tif (!lesson) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar renderData = {\n\t\t\tlesson: lesson,\n\t\t\tphysicalLesson: me[STUDYPLAN_ITEM].properties.templateLessonId,\n\t\t\tpcScore: 0,\n\t\t\tpcHasPassed: false,\n\t\t\tmobHasStarted: false,\n\t\t\tmobHasPassed: false\n\t\t};\n\n\t\treturn me.query(\"student_lesson_progress!template_lesson;\" + me[STUDYPLAN_ITEM].properties.templateLessonId + \".detail\").spread(function (lessonDetail) {\n\t\t\tlessonDetail.detail.items.forEach(function (e, i) {\n\t\t\t\tswitch (e.sourceTypeCode) {\n\t\t\t\t\tcase \"PCLesson\":\n\t\t\t\t\t\trenderData.pcScore = e.score;\n\t\t\t\t\t\trenderData.pcHasPassed = progressState.hasPassed(e.state);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"MOBLesson\":\n\t\t\t\t\t\trenderData.mobHasStarted = progressState.hasStarted(e.state);\n\t\t\t\t\t\trenderData.mobHasPassed = progressState.hasPassed(e.state);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn me.html(tLesson, renderData);\n\t\t});\n\t}\n\n\treturn Widget.extend(function($element, path, itemData){\n\t\tvar me = this;\n\t\tme[STUDYPLAN_ITEM] = itemData;\n\t},{\n\t\t\"hub:memory/load/lesson\": function onLesson(lesson) {\n\t\t\tvar me = this;\n\n\t\t\tif(lesson) {\n\t\t\t\tme.query(\"pc_student_lesson_map!\" + me[STUDYPLAN_ITEM].properties.templateLessonId + \".lesson\").spread(function(lessonMap){\n\t\t\t\t\t// make sure the widget listen from just correct lessonId\n\t\t\t\t\tif(lessonMap.lesson.templateLessonId === lesson.templateLessonId) {\n\t\t\t\t\t\tdoRender.call(me, me[LESSON] = lesson);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\t\"hub/lesson/renderer\": function onLessonRerender(){\n\t\t\tvar me = this;\n\n\t\t\tdoRender.call(me, me[LESSON]);\n\t\t},\n\n\t\t\"hub/activity/update/progress\": function () {\n\t\t\tvar me = this;\n\n\t\t\tme.publish(\"lesson/renderer\");\n\t\t},\n\t\t\"dom:.ets-mob-tip-started/click\": function () {\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find(SEL_MOB_MODAL_STARTED).modal(\"show\");\n\t\t},\n\t\t\"dom:.ets-mob-tip-passed/click\": function () {\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find(SEL_MOB_MODAL_PASSED).modal(\"show\");\n\t\t},\n\t\t\"dom:.ets-btn-modal-close/click\": function () {\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].find(SEL_MOB_MODAL).modal(\"hide\");\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/step-list.html',[],function() { return function template(data) { var o = \"\";\n\tvar steps = data.steps;\no += \"\\n<div class=\\\"ets-sp-steps\\\">\\n\\t\";\n\t\tfor (var i = 0; i < steps.length; i++) {\n\t\t\tvar step = steps[i];\n\t\t\twriteStep(step);\n\t\t}\n\to += \"\\n</div>\\n\\n\"; function writeStep(step) { o += \"\\n\\t<!-- Step Start -->\\n\\t<div data-weave=\\\"school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/main\\\" data-id=\\\"\" + step.id + \"\\\" data-physical-lesson-id=\\\"\" + data.physicalLesson+ \"\\\" data-show-button=\\\"\" + (step._showButton ? true : false) + \"\\\" data-has-continue=\\\"\" + (step._hasContinue ? true : false) + \"\\\"></div>\\n\\t<!-- Step End -->\\n\"; }  return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step-list/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/progress-state\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"template!./step-list.html\",\n\t\"poly\"\n],function($, Widget, progressState, Parser, tStepList){\n\t\"use strict\";\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar HAS_PASSED = \"_hasPassed\",\n\t\tHAS_STARTED = \"_hasStarted\",\n\t\tSHOW_BUTTON = \"_showButton\",\n\t\tHAS_CONTINUE = \"_hasContinue\";\n\n\tfunction doRender(lesson){\n\t\tvar me = this;\n\n\t\tif(!lesson) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar lessonId = lesson.id;\n\n\t\treturn me.query(lessonId + \".children.progress\").spread(function(lesson) {\n\t\t\tvar steps = lesson.children;\n\n\t\t\tsteps.every(function(e, i) {\n\t\t\t\tif(!progressState.hasPassed(e.progress.state)) {\n\t\t\t\t\te[SHOW_BUTTON] = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsteps.forEach(function(e, i) {\n\t\t\t\tif(progressState.hasStarted(e.progress.state)) {\n\t\t\t\t\te[SHOW_BUTTON] = true;\n\t\t\t\t\te[HAS_CONTINUE] = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn me.html(tStepList, {\n\t\t\t\tsteps: steps,\n\t\t\t\tphysicalLesson: me[\"physicalLessonId\"]\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[\"physicalLessonId\"] = me[$ELEMENT].data(\"physical-lesson-id\");\n\t},{\n\t\t\"hub:memory/load/lesson\": function onLesson(lesson) {\n\t\t\tvar me = this;\n\n\t\t\tif(!lesson) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdoRender.call(me, me.lesson = lesson);\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/step.html',[],function() { return function template(data) { var o = \"\";\n\tvar step = data.step;\no += \"\\n<ul class=\\\"ets-sp-step \" + (data._hasPassed ? 'ets-pass' : '') + \" \" + (data._showButton ? 'ets-showButton' : '') + \"\\\" data-hash='\" + step._hash + \"'>\\n\\t<li class=\\\"ets-sp-step-no\\\">\" + step.stepNo + \"</li>\\n\\t<li class=\\\"ets-sp-step-type\\\">\" + step.stepTypeName + \"</li>\\n\\t<li class=\\\"ets-sp-step-title ets-overflow\\\" title=\\\"\" + step.stepName + \"\\\">\" + step.stepName + \"</li>\\n\\t<li class=\\\"ets-sp-step-action\\\">\\n\\t\\t\"; if (data._hasPassed) {o += \"\\n\\t\\t\\t\"; if (data._isPerfect) {o += \"\\n\\t\\t\\t\\t<span class=\\\"badge pull-right\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"462935\\\" data-text-en=\\\"Perfect\\\"><i class=\\\"glyphicon glyphicon-ok\\\"></i></span>\\n\\t\\t\\t\"; } else {o += \"\\n\\t\\t\\t\\t<i class=\\\"ets-icon-badge-checkmark\\\"></i>\\n\\t\\t\\t\"; } o += \"\\n\\t\\t\"; } else {o += \"\\n\\t\\t\\t<button class=\\\"btn btn-primary btn-block btn-sm ets-sp-step-start\\\">\\n\\t\\t\\t\\t\"; if (data._hasContinue) { o += \"\\n\\t\\t\\t\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"450010\\\" data-text-en=\\\"Continue\\\"></span>\\n\\t\\t\\t\\t\"; } else { o += \"\\n\\t\\t\\t\\t\\t<span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"450009\\\" data-text-en=\\\"Start\\\"></span>\\n\\t\\t\\t\\t\"; } o += \"\\n\\t\\t\\t</button>\\n\\t\\t\"; } o += \"\\n\\t</li>\\n</ul>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/lesson/step/main',[\n\t\"jquery\",\n\t\"poly\",\n\t\"json2\",\n\t\"troopjs-ef/component/widget\",\n\t\"school-ui-shared/utils/progress-state\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"template!./step.html\"\n],function($, Poly, JSON, Widget, progressState, Parser, tStep){\n\t\"use strict\";\n\n\t/**\n\t * Private variables declaration\n\t */\n\tvar $ELEMENT = \"$element\";\n\n\tfunction doRender(stepId){\n\t\tvar me = this;\n\n\t\tif(!stepId) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar stepQ = stepId + \".progress\";\n\t\tvar lessonQ = \"student_lesson!template_lessson;\" + me[\"physicalLessonId\"] + \".parent.parent.parent\";\n\n\t\treturn me.query(stepQ, lessonQ).spread(function(step, lesson){\n\n\t\t\tstep._hash = JSON.stringify({\n\t\t\t\t\"prefix\": \"school\",\n\t\t\t\t\"enrollment\": Parser.parseId(lesson.parent.parent.parent.studentCourseId),\n\t\t\t\t\"course\": Parser.parseId(lesson.parent.parent.parent.id),\n\t\t\t\t\"level\": Parser.parseId(lesson.parent.parent.id),\n\t\t\t\t\"unit\": Parser.parseId(lesson.parent.id),\n\t\t\t\t\"lesson\": Parser.parseId(step.parent.id),\n\t\t\t\t\"step\": Parser.parseId(step.id)\n\t\t\t});\n\n\t\t\treturn me.html(tStep, {\n\t\t\t\tstep: step,\n\t\t\t\t_showButton: !!(me[\"showButton\"] == true),\n\t\t\t\t_hasContinue: !!(me[\"hasContinue\"] == true),\n\t\t\t\t_isPerfect: !!(step.progress.score == 100),\n\t\t\t\t_hasPassed: progressState.hasPassed(step.progress.state)\n\t\t\t});\n\t\t});\n\t}\n\n\treturn Widget.extend(function(){\n\t\tvar me = this;\n\t\tme[\"stepId\"] = me[$ELEMENT].data(\"id\");\n\t\tme[\"showButton\"] = me[$ELEMENT].data(\"show-button\");\n\t\tme[\"hasContinue\"] = me[$ELEMENT].data(\"has-continue\");\n\t\tme[\"physicalLessonId\"] = me[$ELEMENT].data(\"physical-lesson-id\");\n\t},{\n\t\t\"sig/start\" : function(){\n\t\t\tvar me = this;\n\t\t\tdoRender.call(me, me.stepId);\n\t\t},\n\n\t\t\"dom:.ets-sp-step/click\": function routeStep(event) {\n\t\t\tvar me = this,\n\t\t\t\t$step = $(event.currentTarget);\n\n\t\t\tme.publish(\"load\", $.parseJSON($step.attr(\"data-hash\")));\n\n\t\t\treturn false;\n\t\t}\n\t});\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/lock/lock.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-unit-locked\\\">\\n    <h1><i class=\\\"ets-icon-lock\\\"></i></h1>\\n    <h1 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"UNIT ^currentunit^ IS LOCKED\\\" data-blurb-id=\\\"569834\\\" data-values='\" + JSON.stringify(data.blurbValues)+ \"'></h1>\\n    \"; if(data.blurbValues.previousunit){ o += \"\\n        <h5 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Complete Unit ^previousunit^ to unlock this unit\\\" data-blurb-id=\\\"569835\\\" data-values='\" + JSON.stringify(data.blurbValues)+ \"'></h5>\\n    \"; } o += \"\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/lock/main',[\n\t\"when\",\n\t\"poly\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./lock.html\"\n\t],function(when, poly, Widget, tLock){\n\t\"use strict\";\n\n\treturn Widget.extend({\n\t\t\"hub:memory/load/unit\" : function(unit){\n\t\t\tvar me = this;\n\t\t\tvar previousUnit;\n\t\t\tvar currentUnit = unit && unit.unitNo;\n\t\t\tif(unit) {\n\t\t\t\tunit.parent.children.every(function(e, i){\n\t\t\t\t\tif(unit.id === e.id) {\n\t\t\t\t\t\tpreviousUnit = (i == 0 ? undefined : unit.parent.children[i - 1].unitNo);\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tme.html(tLock, {\n\t\t\t\t\tblurbValues : {\n\t\t\t\t\t\tcurrentunit : currentUnit,\n\t\t\t\t\t\tpreviousunit : previousUnit\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/main',[\n\t\"jquery\",\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"troopjs-browser/loom/weave\",\n\t\"client-tracking\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"school-ui-studyplan/enum/page-name\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/animation-helper\",\n\t\"poly/array\"\n], function ($, when, Widget, loom, weave, ct, studyplanMode, studyplanItemState, pageName, typeidParser, animationHelper, polyArray) {\n\t\"use strict\";\n\n\tvar UNDEF;\n\n\tvar $ELEMENT = \"$element\";\n\n\tvar PREFIX_TEMP_UNIT = \"template_unit;\";\n\n\tvar PROP_STUDYPLAN_ID = \"_studyplan_id\";\n\tvar PROP_STUDYPLAN_ITEM_ID = \"_studyplan_item_id\";\n\tvar PROP_STUDYPLAN_ITEM_INDEX = \"_studyplan_item_index\";\n\tvar PROP_UNIT_ID = \"_unit_id\";\n\tvar PROP_UNIT_TEMPLATE_ID = \"_unit_template_id\";\n\tvar PROP_TYPE_CODE = \"_type_code\";\n\n\tvar ANIMATION_UNITCHANGE = \"unitNav_seqCon\";\n\tvar ANIMATION_ITEMCHANGE = \"itemChange_seqCon\";\n\n\tvar CLS_CONTAINER = \"ets-sp-sequence-container\";\n\tvar CLS_CONTAINER_ITEM = \"ets-sp-sequence-item\";\n\tvar CLS_ITEM_ANIMATION = \"ets-sp-item-animation\";\n\tvar CLS_CONTAINER_PREPEND_ITEM = \"ets-sp-prepend-item\";\n\tvar CLS_ITEM_ANIMATION_LT_INDEX = \"ets-sp-lt-index\";\n\tvar CLS_ITEM_ANIMATION_GT_INDEX = \"ets-sp-gt-index\";\n\n\tvar WIDGET_PATH = \"school-ui-studyplan/widget/studyplan/body/sequence-container/\";\n\tvar DURATION_ITEM_ANIMATION = 600;\n\n\tvar ANIMATION_DIR = {\n\t\tL : \"<--\",\n\t\tR : \"-->\"\n\t};\n\n\tvar CAMPUS_ENABLE = 'campus_enable';\n\n\tfunction doAnimation(typecode, studyplan_item, animationName, animationDir) {\n\t\tvar me = this;\n\n\t\t// for campus release, goal will point to cp-goal widget\n\t\tvar _typecode = me[CAMPUS_ENABLE] === 'true' && typecode === 'goal' ? 'cp-' + typecode : typecode;\n\t\tvar $newItem = $(\"<div></div>\")\n\t\t\t.addClass(CLS_CONTAINER_ITEM)\n\t\t\t.data(\"itemData\", studyplan_item)\n\t\t\t.attr(loom.weave, WIDGET_PATH + _typecode + \"/main(itemData)\");\n\t\tstudyplan_item && $newItem.attr(\"data-at-page-id\", \"sp-sequence-item-\" + typeidParser.parseId(studyplan_item.id));\n\n\t\tvar $wrapper = me[$ELEMENT];\n\t\tvar $container = $wrapper.find(\".\" + CLS_CONTAINER);\n\t\tvar $oldItem = $container.find(\".\" + CLS_CONTAINER_ITEM);\n\n\t\tif (animationDir && $oldItem.length) {\n\n\t\t\t$wrapper.addClass(CLS_ITEM_ANIMATION);\n\t\t\t$container.addClass(CLS_ITEM_ANIMATION);\n\n\t\t\tif (animationDir === ANIMATION_DIR.L) {\n\t\t\t\t$container.prepend($newItem);\n\t\t\t\t$container.addClass(CLS_CONTAINER_PREPEND_ITEM);\n\t\t\t} else {\n\t\t\t\t$container.append($newItem);\n\t\t\t}\n\t\t} else {\n\t\t\t$container = $(\"<div></div>\").addClass(CLS_CONTAINER).html($newItem);\n\t\t\t$wrapper.html($container);\n\t\t}\n\n\t\t//start weave after the queue executed.\n\t\t//because we render in load/results, but load/xxx may publish immediately\n\t\tsetTimeout(function () {\n\t\t\t$newItem.weave().then(function () {\n\t\t\t\tif(animationDir && $oldItem.length){\n\t\t\t\t\tanimationHelper.request(animationName, function () {\n\t\t\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\t\t\t$container.addClass(animationDir === ANIMATION_DIR.L ? CLS_ITEM_ANIMATION_LT_INDEX : CLS_ITEM_ANIMATION_GT_INDEX);\n\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t$container\n\t\t\t\t\t\t\t\t\t.removeClass([\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION,\n\t\t\t\t\t\t\t\t\t\tCLS_CONTAINER_PREPEND_ITEM,\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION_LT_INDEX,\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION_GT_INDEX\n\t\t\t\t\t\t\t\t\t].join(\" \"));\n\n\t\t\t\t\t\t\t\t$oldItem.remove();\n\t\t\t\t\t\t\t\t$wrapper.removeClass(CLS_ITEM_ANIMATION);\n\n\t\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t\t}, DURATION_ITEM_ANIMATION);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}, 0);\n\n\n\t}\n\n\tfunction doRender(unit_studyplan, studyplan, studyplan_item, animationName, animationDir) {\n\t\tvar me = this;\n\t\tvar typeCode;\n\n\t\tif (studyplan && unit_studyplan.mode !== UNDEF) {\n\t\t\tswitch(unit_studyplan.mode) {\n\t\t\t\tcase studyplanMode.Create: //create\n\t\t\t\t\ttypeCode = \"config\";\n\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_INDEX] = -1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase studyplanMode.Locked: //locked\n\t\t\t\t\ttypeCode = \"lock\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase studyplanMode.Study: //study\n\t\t\t\t\ttypeCode = studyplan_item && studyplan_item.typeCode;\n\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_INDEX] = studyplan_item && studyplan_item.itemIndex;\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (typeCode) {\n\t\t\t\tme[PROP_TYPE_CODE] = typeCode;\n\t\t\t\tme.query('member_site_setting!\"school;studyplan.newui.enabled\"').spread(function(campusEnable){\n\t\t\t\t\tme[CAMPUS_ENABLE] = campusEnable.value;\n\t\t\t\t\tdoAnimation.call(me, typeCode, studyplan_item, animationName, animationDir);\n\t\t\t\t});\n\t\t\t\t// for omniture track\n\t\t\t\tvar isItemInStudyplan;\n\t\t\t\tstudyplan.items.every(function (e, i) {\n\t\t\t\t\tif (studyplan_item && e.id === studyplan_item.id) {\n\t\t\t\t\t\tisItemInStudyplan = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tisItemInStudyplan && track.call(me, typeCode, studyplan_item);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * omniture track function\n\t * @param typecode\n\t * @param item\n\t */\n\tfunction track(typecode, item) {\n\t\tvar me = this;\n\n\t\tswitch (typecode) {\n\t\t\tcase \"lesson\":\n\t\t\t\tme.query(\"pc_student_lesson_map!\" + item.properties.templateLessonId).spread(function (lessonMap) {\n\t\t\t\t\tct.pagename(pageName[\"lesson\" + lessonMap.lesson.lessonNo]);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"gl\":\n\t\t\t\tct.pagename(pageName.gl);\n\t\t\t\tbreak;\n\t\t\tcase \"pl\":\n\t\t\t\tct.pagename(pageName.pl);\n\t\t\t\tbreak;\n\t\t\tcase \"goal\":\n\t\t\t\tct.pagename(pageName.goal);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn Widget.extend({\n\t\t\"hub/studyplan/sequence-container/reload\": function () {\n\t\t\tvar me = this;\n\t\t\tif(me[PROP_STUDYPLAN_ITEM_ID]){\n\t\t\t\twhen.all(\n\t\t\t\t\t[\n\t\t\t\t\t\tme.query(me[PROP_STUDYPLAN_ITEM_ID]),\n\t\t\t\t\t\tme.query('member_site_setting!\"school;studyplan.newui.enabled\"'),\n\t\t\t\t\t\tme[$ELEMENT].find(\"[\" + loom.woven + \"]\").unweave()\n\t\t\t\t\t]).spread(function (item, campusEnable) {\n\t\t\t\t\t\tme[CAMPUS_ENABLE] = campusEnable[0].value;\n\t\t\t\t\t\tme[$ELEMENT].find(\".\" + CLS_CONTAINER_ITEM).remove();\n\t\t\t\t\t\tdoAnimation.call(me, me[PROP_TYPE_CODE], item[0]);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t},\n\n\t\t\"hub:memory/load/results\": function (results) {\n\t\t\tvar me = this;\n\n\t\t\tvar animationDir;\n\t\t\tvar currentIndex;\n\t\t\tvar preIndex;\n\n\t\t\tif(results.unit){\n\t\t\t\t// When the unit or studyplan is different, start to render a new sequence-container.\n\t\t\t\t// and the sequence navigation will render either (please check code in /js/widget/studyplan/body/sequence-naviagtion/main.js)\n\n\t\t\t\t// So, sequence-navigation and sequence-container will be animated at the same time.\n\t\t\t\tif (( results.studyplan && me[PROP_STUDYPLAN_ID] !== results.studyplan.id) ||\n\t\t\t\t\t(!results.studyplan && me[PROP_UNIT_TEMPLATE_ID] !== results.unit.templateUnitId)\n\t\t\t\t\t){\n\t\t\t\t\t// exclude create studyplan case\n\t\t\t\t\tif(me[PROP_UNIT_TEMPLATE_ID] !== results.unit.templateUnitId){\n\t\t\t\t\t\t// Compare current unit with prev unit, to ensure animate slide direction.\n\t\t\t\t\t\t// If change unit at the same level, animationDir will be a direction String.\n\t\t\t\t\t\t// If change unit at the different level, animationDir will be UNDEF and animation will not be run.\n\t\t\t\t\t\tresults.unit.parent.children.forEach(function (e, i) {\n\t\t\t\t\t\t\tswitch(e.templateUnitId){\n\t\t\t\t\t\t\t\tcase results.unit.templateUnitId:\n\t\t\t\t\t\t\t\t\tcurrentIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase me[PROP_UNIT_TEMPLATE_ID]:\n\t\t\t\t\t\t\t\t\tpreIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif(currentIndex !== UNDEF && preIndex !== UNDEF){\n\t\t\t\t\t\t\tanimationDir = ANIMATION_DIR[currentIndex < preIndex ? \"L\" : \"R\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar unit_studyplan = results.unit_studyplan;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * When the results contain studyplan data.\n\t\t\t\t\t *  *** --> #study/xxx/yyy\n\t\t\t\t\t *      case 1 :\n\t\t\t\t\t *          #config?unit_id=xxx --> #study/xxx     (create studyplan -> not animated)\n\t\t\t\t\t *      case 2 :\n\t\t\t\t\t *          #study/aaa/bbb      --> #study/xxx/yyy (unit navigation  -> animated\n\t\t\t\t\t *                                                  change level     -> not animated)\n\t\t\t\t\t *      case 3 :\n\t\t\t\t\t *          EMPTY               --> #study/xxx/yyy (Landing          -> not animated)\n\t\t\t\t\t */\n\t\t\t\t\tvar studyplan = results.studyplan\n\n\t\t\t\t\t/**\n\t\t\t\t\t * when the results do not contain studyplan data.\n\t\t\t\t\t *  *** --> #config?unit_id=xxx\n\t\t\t\t\t *      case 4 :\n\t\t\t\t\t *          #config?unit_id=aaa --> #config?unit_id=xxx (change level    -> not animated)\n\t\t\t\t\t *      case 5 :\n\t\t\t\t\t *          #study/aaa/bbb      --> #config?unit_id=xxx (unit navigation -> animated\n\t\t\t\t\t *                                                       change level    -> not animated)\n\t\t\t\t\t *      case 6 :\n\t\t\t\t\t *          EMPTY               --> #config?unit_id=xxx (Landing         -> not animated)\n\t\t\t\t\t */\n\t\t\t\t\t\t\t\t\t|| results.unit_studyplan.studyPlan;\n\n\t\t\t\t\tme[PROP_UNIT_ID] = results.unit && results.unit.studentUnitId;\n\t\t\t\t\tme[PROP_UNIT_TEMPLATE_ID] = results.unit && results.unit.templateUnitId;\n\t\t\t\t\tme[PROP_STUDYPLAN_ID] = studyplan.id;\n\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_ID] = results.studyplan_item && results.studyplan_item.id;\n\n\t\t\t\t\tdoRender.call(me,\n\t\t\t\t\t\tunit_studyplan,\n\t\t\t\t\t\tstudyplan,\n\t\t\t\t\t\tresults.studyplan_item,\n\t\t\t\t\t\tANIMATION_UNITCHANGE,\n\t\t\t\t\t\tanimationDir\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t// when the same studyplan, different item, only render a new sequence-container.\n\t\t\t\t// So, sequence-navigation will not be animated, only sequence-container will be animated.\n\t\t\t\t/**\n\t\t\t\t * case 1 :\n\t\t\t\t *      #study/aaa/bbb --> #study/aaa/ccc (change studyplan item -> animate)\n\t\t\t\t * case 2 :\n\t\t\t\t *      #study/aaa     --> #study/aaa/bbb (create studyplan      -> animate)\n\t\t\t\t */\n\t\t\t\telse if (\tresults.studyplan && results.studyplan_item && results.unit_studyplan &&\n\t\t\t\t\t\t\tme[PROP_STUDYPLAN_ID] === results.studyplan.id &&\n\t\t\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_ID] !== (results.studyplan_item && results.studyplan_item.id)) {\n\n\t\t\t\t\tif (me[PROP_STUDYPLAN_ITEM_INDEX] !== results.studyplan_item.itemIndex) {\n\t\t\t\t\t\tanimationDir = ANIMATION_DIR[me[PROP_STUDYPLAN_ITEM_INDEX] > results.studyplan_item.itemIndex ? \"L\" : \"R\"];\n\t\t\t\t\t}\n\n\t\t\t\t\tme[PROP_UNIT_ID] = results.unit && results.unit.studentUnitId;\n\t\t\t\t\tme[PROP_UNIT_TEMPLATE_ID] = results.unit && results.unit.templateUnitId;\n\t\t\t\t\tme[PROP_STUDYPLAN_ID] = results.studyplan && results.studyplan.id;\n\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_ID] = results.studyplan_item && results.studyplan_item.id;\n\n\t\t\t\t\tdoRender.call(me,\n\t\t\t\t\t\tresults.unit_studyplan,\n\t\t\t\t\t\tresults.studyplan,\n\t\t\t\t\t\tresults.studyplan_item,\n\t\t\t\t\t\tANIMATION_ITEMCHANGE,\n\t\t\t\t\t\tanimationDir\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tme[PROP_UNIT_ID] =\n\t\t\t\t\tme[PROP_UNIT_TEMPLATE_ID] =\n\t\t\t\t\tme[PROP_STUDYPLAN_ID] =\n\t\t\t\t\tme[PROP_STUDYPLAN_ITEM_ID] = UNDEF;\n\t\t\t}\n\t\t},\n\n\t\t\"hub/load/launcher\": function (requests) {\n\t\t\tvar me = this;\n\n\t\t\t//for activity container\n\t\t\tif(requests.prefix === \"school\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//the same if condition with load/results\n\t\t\tif (( requests.studyplan &&\n\t\t\t\t\trequests.studyplan !== typeidParser.parseId(me[PROP_STUDYPLAN_ID])) ||\n\n\t\t\t\t(!requests.studyplan && requests.unit &&\n\t\t\t\t\trequests.unit !== (PREFIX_TEMP_UNIT + me[PROP_UNIT_TEMPLATE_ID])) ||\n\n\t\t\t\t( requests.studyplan && requests.studyplan_item &&\n\t\t\t\t\trequests.studyplan_item !== typeidParser.parseId(me[PROP_STUDYPLAN_ITEM_ID]))\n\t\t\t\t) {\n\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\tme[$ELEMENT].find(\"[\" + loom.woven + \"]\").unweave().then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/pl/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\"\n], function ($, Widget) {\n\t\"use strict\";\n\tvar ITEM_DATA = \"_item_data\";\n\n\treturn Widget.extend(function ($element, path, itemData) {\n\t\tthis[ITEM_DATA] = itemData;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\n\t\t\treturn me.publish(\"school/interface/studyplan/pl-container-widget\",\n\t\t\t\t\"school-ui-studyplan/widget/gl-pl/privatelesson/main\").spread(function (widgetPath) {\n\n\t\t\t\t$(\"<div></div>\", {\n\t\t\t\t\t\"data-weave\": widgetPath + \"(itemData)\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t}\n\t\t\t\t}).appendTo(me.$element).weave();\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/sppl20/main',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\"\n], function ($, Widget) {\n\t\"use strict\";\n\tvar ITEM_DATA = \"_item_data\";\n\n\treturn Widget.extend(function ($element, path, itemData) {\n\t\tthis[ITEM_DATA] = itemData;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\n\t\t\treturn me.publish(\"school/interface/studyplan/pl20-container-widget\",\n\t\t\t\t\"school-ui-studyplan/widget/gl-pl/privatelesson/main\").spread(function (widgetPath) {\n\n\t\t\t\t$(\"<div></div>\", {\n\t\t\t\t\t\"data-weave\": widgetPath + \"(itemData)\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\titemData: me[ITEM_DATA]\n\t\t\t\t\t}\n\t\t\t\t}).appendTo(me.$element).weave();\n\t\t\t});\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-container/unavailable/unavailable.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-chrysalis-unit\\\">\\n    <h3><i class=\\\"glyphicon glyphicon-info-sign\\\"></i></h3>\\n    <h5 data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"This unit was completed with an earlier version of the school.\\\" data-blurb-id=\\\"632524\\\"></h5>\\n    <p data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"All your progress have been stored, but unfortunately the activities done cannot be reviewed.\\\" data-blurb-id=\\\"632525\\\"></p>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-container/unavailable/main',[\n    \"troopjs-ef/component/widget\",\n    \"template!./unavailable.html\"\n    ],function(Widget, tUnavailable){\n    \"use strict\";\n    return Widget.extend({\n        \"sig/start\" : function(){\n            return this.html(tUnavailable);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/item.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-sqn-item-badge\\\">\\n\\t<i class=\\\"ets-sp-sqn-item-icon\\\">\\n\\t\\t<i class=\\\"ets-sp-sqn-icon-bg \" + data.itemBackgroundClass+ \"\\\"></i>\\n\\t\\t<i class=\\\"ets-sp-sqn-icon-badge \" + data.itemClass+ \"\\\"></i>\\n\\t</i>\\n</div>\\n<div class=\\\"ets-sp-sqn-item-title\\\">\" + data.topic+ \"</div>\\n<i class=\\\"ets-icon-arrow-up\\\"></i>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/base',[\n\t\"jquery\",\n\t\"jquery.gudstrap\",\n\t\"when\",\n\t\"troopjs-ef/component/widget\",\n\t\"troopjs-browser/loom/config\",\n\t\"troopjs-browser/loom/weave\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-studyplan/enum/studyplan-state\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"school-ui-studyplan/utils/client-storage\",\n\t\"school-ui-shared/utils/update-helper\",\n\t\"school-ui-shared/utils/console\",\n\t\"template!./item.html\"\n], function (\n\t$,\n\t$GUD,\n\twhen,\n\tWidget,\n\tloom,\n\tweave,\n\tstudyplanMode,\n\tstudyPlanState,\n\titemState,\n\ttypeidParser,\n\tstateParser,\n\tclientStorage,\n\tupdateHelper,\n\tConsole,\n\ttItem\n) {\n\n\tvar UNDEF;\n\tvar $ELEMENT = \"$element\";\n\tvar ID = \"_id\";\n\tvar UNIT_STUDYPLAN_MODE = \"_unit_studyplan_mode\";\n\tvar DATA = \"_data\";\n\tvar ITEM_UI_STATUS = \"_item_ui_status\";\n\tvar CLS_ITEM_BADGE = \"ets-sp-sqn-item-badge\";\n\tvar CLS_CUSTOM_MARK = \"ets-badge-custommark\";\n\tvar CLS_STATUS_PASS = \"ets-pass\";\n\tvar CLS_STATUS_SUGGEST = \"ets-suggest\";\n\tvar CLS_STATUS_SELECTED = \"ets-active\";\n\tvar CLS_STATUS_LOCKED = \"ets-locked\";\n\tvar CLS_STATUS_UNAVAILABLE = \"ets-unavailable\";\n\tvar RENDER_DATA = \"_render_data\";\n\tvar DFD_POPOVER = \"_dfd_popover\";\n\tvar SHOWN_POPOVER_ITEMS = \"shown_popover_ids\";\n\tvar ID_SEPARATOR = \",\";\n\tvar DURATION_POPOVER_SHOW = 5000;\n\tvar DELAY_HIDE_POPOVER_TIMER = \"_delay_hide_popover_timer\";\n\tvar STORE_SHOWN_POPOVER_ID = \"_store_shown_popover_id\";\n\tvar WIDGET_MARK_PATH = \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/\";\n\tvar WIDGET_GOAL_PATH = \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal\";\n\n\tfunction getLockedState(normalizeState, studyPlan, widgetPath){\n\t\tif(!studyPlan){\n\t\t\treturn false;\n\t\t}\n\t\tvar goalLocked = studyPlan.progress.state !== studyPlanState.Completed;\n\t\tif (widgetPath === WIDGET_GOAL_PATH) {\n\t\t\treturn goalLocked;\n\t\t}\n\t\treturn normalizeState.Locked;\n\t}\n\n\tfunction getProgressQuery(query, mode) {\n\t\treturn mode === studyplanMode.Study ? query + \".progress\" : query;\n\t}\n\n\tfunction render(itemId) {\n\n\t\tvar me = this;\n\t\tvar query = \"campus_student_studyplan_item!\" + itemId;\n\n\t\treturn when(\n\t\t\t(me[DATA] && [me[DATA]]) ||\n\t\t\tme.query(getProgressQuery(query, me[UNIT_STUDYPLAN_MODE]))\n\t\t).spread(function (studyPlanItem) {\n\t\t\t//wait for topic promise resolve\n\t\t\treturn when.all([\n\t\t\t\tme[RENDER_DATA].topic,\n\t\t\t\tme[RENDER_DATA].popoverTitle,\n\t\t\t\tme[RENDER_DATA].popoverContent\n\t\t\t]).spread(function (topic, popoverTitle, popoverContent) {\n\t\t\t\tme[RENDER_DATA].topic = topic;\n\t\t\t\tme[RENDER_DATA].popoverTitle = popoverTitle;\n\t\t\t\tme[RENDER_DATA].popoverContent = popoverContent;\n\n\t\t\t\tif (me[RENDER_DATA].popoverTitle || me[RENDER_DATA].popoverContent) {\n\t\t\t\t\tif (me[DFD_POPOVER].promise.inspect().state !== \"fulfilled\") {\n\t\t\t\t\t\tme[$ELEMENT].popover({\n\t\t\t\t\t\t\ttrigger: \"manual\",\n\t\t\t\t\t\t\ttitle: me[RENDER_DATA].popoverTitle,\n\t\t\t\t\t\t\tcontent: me[RENDER_DATA].popoverContent,\n\t\t\t\t\t\t\tplacement: \"bottom\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\tme[DFD_POPOVER].resolve();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn [studyPlanItem];\n\t\t\t});\n\t\t})\n\t\t\t.spread(function (studyplanItem) {\n\n\t\t\t\t// use hub to sync item state, for other party\n\t\t\t\t// if there is not any values return. the state keep original.\n\t\t\t\t// otherwise, return a state value in array to replace it.\n\t\t\t\t// make sure that use \"if\" to filter beside ids\n\n\t\t\t\t// e.g:\n\t\t\t\t// \"hub/studyplan/sequence-item/sync/state\" : function(id, state){\n\t\t\t\t//      if(id===\"8912\") return [1];\n\t\t\t\t// },\n\n\t\t\t\t//the last argument\n\t\t\t\tvar state = studyplanItem.progress.state;\n\t\t\t\tvar renderData = me[RENDER_DATA];\n\t\t\t\tvar markWidget = renderData.customMark.slice();\n\t\t\t\tvar hasBeenRender = !!me[$ELEMENT].find(\".\" + CLS_ITEM_BADGE).length;\n\t\t\t\tvar normalizeState = stateParser.parseFlag(itemState, state);\n\n\t\t\t\tvar lockedState = getLockedState(normalizeState, me.studyPlan,  markWidget[0]);\n\t\t\t\t//reset rander data\n\t\t\t\tnormalizeState.Completed && markWidget.push(WIDGET_MARK_PATH + \"check\");\n\t\t\t\tlockedState && markWidget.push(WIDGET_MARK_PATH + \"locked\");\n\n\t\t\t\tvar renderPromise = (hasBeenRender ?\n\t\t\t\t\twhen.resolve() :\n\t\t\t\t\t//if there is a template specify\n\t\t\t\t\tme.html(renderData.template || tItem, renderData));\n\t\t\t\treturn renderPromise.then(function () {\n\t\t\t\t\tme[$ELEMENT].toggleClass(CLS_STATUS_PASS, normalizeState.Completed);\n\t\t\t\t\tme[$ELEMENT].toggleClass(CLS_STATUS_LOCKED, lockedState);\n\t\t\t\t\trenderCustomMark.call(me, markWidget, studyplanItem);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tfunction renderCustomMark(markWidget, studyplanItem) {\n\t\tvar me = this;\n\t\tvar $badge = me[$ELEMENT].find(\".\" + CLS_ITEM_BADGE);\n\t\tvar $marks = me[$ELEMENT].find(\".\" + CLS_CUSTOM_MARK);\n\n\t\tif (markWidget.length) {\n\t\t\tmarkWidget.reduce(function (promise, markWidgetPath) {\n\t\t\t\treturn promise.then(function (woven) {\n\t\t\t\t\tif (woven) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// markWidgetPath may be a promise\n\t\t\t\t\twhen.resolve(markWidgetPath)\n\t\t\t\t\t\t.then(function (resolvedMarkWidgetPath) {\n\t\t\t\t\t\t\tvar newMark = $(\"<div></div>\")\n\t\t\t\t\t\t\t\t.addClass(CLS_CUSTOM_MARK)\n\t\t\t\t\t\t\t\t.attr(loom.weave, resolvedMarkWidgetPath + \"(itemData)\")\n\t\t\t\t\t\t\t\t.attr(\"data-item-data\", JSON.stringify(studyplanItem))\n\t\t\t\t\t\t\t\t.appendTo($badge);\n\t\t\t\t\t\t\treturn newMark.weave()\n\t\t\t\t\t\t\t\t.then(function () {\n\t\t\t\t\t\t\t\t\treturn true; //woven\n\t\t\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t\t\t\tnewMark.unweave().catch(function (reason) {\n\t\t\t\t\t\t\t\t\t\tConsole.info(reason);\n\t\t\t\t\t\t\t\t\t}).then(function () {\n\t\t\t\t\t\t\t\t\t\tnewMark.remove();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\treturn false; //not woven\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}, when.resolve(false/*not woven*/))\n\t\t\t\t.then(function () {\n\t\t\t\t\t$marks.remove();\n\t\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t$marks.remove();\n\t\t}\n\t}\n\n\n\treturn Widget.extend(function () {\n\t\tvar me = this;\n\t\tme[ID] = me[$ELEMENT].data(\"itemId\");\n\t\tme[UNIT_STUDYPLAN_MODE] = me[$ELEMENT].data(\"unitStudyplanMode\");\n\t\tme[ITEM_UI_STATUS] = {\n\t\t\tselected: UNDEF,\n\t\t\tsuggest: UNDEF\n\t\t};\n\t\tme[RENDER_DATA] = me[RENDER_DATA] || {\n\t\t\ttemplate: \"\",\n\t\t\t//push by subclass\n\t\t\tcustomMark: [],\n\t\t\t//provided by subclass\n\t\t\ttopic: \"\",\n\t\t\t//provided by subclass\n\t\t\titemClass: \"\",\n\t\t\t//provided by subclass\n\t\t\titemBackgroundClass: \"\"\n\t\t};\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tme[DFD_POPOVER] = when.defer();\n\t\t\tme[STORE_SHOWN_POPOVER_ID] = true;\n\t\t\treturn render.call(me, me[ID]);\n\t\t},\n\t\t\"hub/studyplan/sequence-item/update\": function (id) {\n\t\t\tvar me = this;\n\t\t\tif (!id || typeidParser.parseId(id) === me[ID]) {\n\t\t\t\trender.call(me, me[ID]);\n\t\t\t}\n\t\t},\n\t\t\"hub:memory/load/studyplan\": function (data) {\n\t\t\tvar me = this;\n\t\t\tif (data) {\n\t\t\t\tme.studyplanId = typeidParser.parseId(data.id);\n\t\t\t\tme.studyPlan = data;\n\t\t\t\trender.call(me, me[ID]);\n\t\t\t}\n\t\t},\n\t\t\"dom/click\": function () {\n\t\t\tthis.clickHandler();\n\t\t},\n\t\t\"clickHandler\": function () {\n\t\t\tvar me = this;\n\t\t\tif (!me[ITEM_UI_STATUS].selected && !me[ITEM_UI_STATUS].unavailable) {\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\"studyplan_item\": me[ID]\n\t\t\t\t});\n\t\t\t\t//hub way\n\t\t\t\tme.publish(\"studyplan/sequence-item/selected\", me[ID]);\n\t\t\t\t//css way : set the css first\n\t\t\t\t// me[ITEM_UI_STATUS].selected = true;\n\t\t\t\t// me.resetStatusClass();\n\n\t\t\t}\n\t\t},\n\t\t//triggle active item by hub\n\t\t\"hub/studyplan/sequence-item/trigger/click\": function (id) {\n\t\t\tif (typeidParser.parseId(id) === this[ID]) {\n\t\t\t\tthis.clickHandler();\n\t\t\t}\n\t\t},\n\t\t\"hub:memory/studyplan/sequence-item/unavailable\": function (unavailable, onlyEnableId) {\n\t\t\tvar me = this;\n\t\t\tme[ITEM_UI_STATUS].unavailable = unavailable && (onlyEnableId !== me[ID]);\n\t\t\tme.resetStatusClass();\n\t\t\tme.unavailable && me.unavailable(me[ITEM_UI_STATUS].unavailable);\n\t\t},\n\t\t\"hub:memory/studyplan/sequence-item/selected\": function (id) {\n\t\t\tvar me = this;\n\t\t\tid = typeidParser.parseId(id);\n\t\t\tme[ITEM_UI_STATUS].selected = (id === me[ID]);\n\t\t\tme.resetStatusClass();\n\t\t\tme.selected && me.selected(me[ITEM_UI_STATUS].selected, id);\n\t\t},\n\t\t\"hub:memory/studyplan/sequence-item/suggest\": function (id) {\n\t\t\tvar me = this;\n\t\t\tid = typeidParser.parseId(id);\n\t\t\tme[ITEM_UI_STATUS].suggest = (id === me[ID]);\n\t\t\tme.resetStatusClass();\n\t\t\tme.suggest && me.suggest(me[ITEM_UI_STATUS].suggest, id);\n\t\t},\n\t\t\"resetStatusClass\": function () {\n\t\t\tvar me = this;\n\t\t\tme[$ELEMENT].toggleClass(CLS_STATUS_SUGGEST, me[ITEM_UI_STATUS].suggest);\n\t\t\tme[$ELEMENT].toggleClass(CLS_STATUS_SELECTED, me[ITEM_UI_STATUS].selected);\n\t\t\tme[$ELEMENT].toggleClass(CLS_STATUS_UNAVAILABLE, me[ITEM_UI_STATUS].unavailable);\n\t\t},\n\t\t\"showPopover\": function () {\n\t\t\tvar me = this;\n\t\t\tme[DFD_POPOVER].promise.then(function () {\n\t\t\t\tme[$ELEMENT].data(\"popoverStatus\") !== \"show\" &&\n\t\t\t\tme[$ELEMENT].popover(\"show\") &&\n\t\t\t\tme[$ELEMENT].data(\"popoverStatus\", \"show\");\n\t\t\t});\n\t\t},\n\t\t\"hidePopover\": function () {\n\t\t\tvar me = this;\n\t\t\tme[DFD_POPOVER].promise.then(function () {\n\t\t\t\tme[$ELEMENT].data(\"popoverStatus\") !== \"hide\" &&\n\t\t\t\tme[$ELEMENT].popover(\"hide\") &&\n\t\t\t\tme[$ELEMENT].data(\"popoverStatus\", \"hide\");\n\t\t\t});\n\t\t},\n\t\t\"delayHidePopover\": function () {\n\t\t\tvar me = this;\n\t\t\tme[DELAY_HIDE_POPOVER_TIMER] && clearTimeout(me[DELAY_HIDE_POPOVER_TIMER]);\n\t\t\tme[DELAY_HIDE_POPOVER_TIMER] = setTimeout(function () {\n\t\t\t\tclearTimeout(me[DELAY_HIDE_POPOVER_TIMER]);\n\t\t\t\tme.hidePopover();\n\t\t\t}, DURATION_POPOVER_SHOW);\n\t\t},\n\t\t\"canShowPopover\": function () {\n\t\t\tvar me = this;\n\t\t\treturn me[ITEM_UI_STATUS].suggest && me[ITEM_UI_STATUS].selected === false && me[ITEM_UI_STATUS].unavailable === false && !me.isShownIdStored();\n\t\t},\n\t\t\"tryShowPopover\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me.canShowPopover()) {\n\t\t\t\tme.showPopover();\n\t\t\t\tme.delayHidePopover();\n\t\t\t\tme[STORE_SHOWN_POPOVER_ID] && me.storeShownId();\n\t\t\t}\n\t\t},\n\t\t\"isStoreShownId\": function () {\n\t\t\treturn this[STORE_SHOWN_POPOVER_ID];\n\t\t},\n\t\t\"setStoreShownId\": function (value) {\n\t\t\treturn this[STORE_SHOWN_POPOVER_ID] = value;\n\t\t},\n\t\t\"isShownIdStored\": function () {\n\t\t\tvar me = this;\n\t\t\tvar ids = clientStorage.getLocalStorage(SHOWN_POPOVER_ITEMS) || ID_SEPARATOR;\n\t\t\treturn ids.indexOf(ID_SEPARATOR + me[ID] + ID_SEPARATOR) > -1;\n\t\t},\n\t\t\"storeShownId\": function () {\n\t\t\tvar me = this;\n\t\t\tif (!me.isShownIdStored()) {\n\t\t\t\tvar shownIds = clientStorage.getLocalStorage(SHOWN_POPOVER_ITEMS) || ID_SEPARATOR;\n\t\t\t\tshownIds += me[ID] + ID_SEPARATOR;\n\t\t\t\tclientStorage.setLocalStorage(SHOWN_POPOVER_ITEMS, shownIds);\n\t\t\t}\n\t\t}\n\t});\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/config',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar DATA = \"_data\";\n\tvar RENDER_DATA = \"_render_data\";\n\n\treturn Widget.extend(function ($element, path, itemID) {\n\t\tvar me = this;\n\t\tme[DATA] = {\n\t\t\tid: \"config\",\n\t\t\ttypeCode: \"config\",\n\t\t\tprogress: {\n\t\t\t\tstate: 0\n\t\t\t}\n\t\t};\n\t\tme[ID] = me[DATA].id;\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-setup\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!656053\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n});\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/cp-goal',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar $ELEMENT = \"$element\";\n\tvar RENDER_DATA = \"_render_data\";\n\tvar ITEM_UI_STATUS = \"_item_ui_status\";\n\tvar CLS_GOAL = \"ets-sp-sqn-item-goal\";\n\tvar PREVIOUS_SELECTED_ID = \"_previous_selected_id\";\n\tvar WIDGET_MARK_PATH = \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/\";\n\n\treturn Widget.extend(function ($element, path, itemID) {\n\t\tvar me = this;\n\t\tme[$ELEMENT].addClass(CLS_GOAL);\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-goal-poly\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"ets-icon-goal-bg\";\n\t\t\t\tme[RENDER_DATA].customMark.push(WIDGET_MARK_PATH + \"cp-goal\");\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!568667\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverTitle = me.query(\"blurb!571166\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverContent = me.query(\"blurb!571167\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/sequence/update\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"suggest\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"unavailable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"selected\": function (selected, id) {\n\t\t\tvar me = this;\n\n\t\t\t//for continuously trigged \"selected\" callback\n\t\t\t//from clickHandler() and hub:memory/load/studyplan_item\n\t\t\t//make sure that process same id only once\n\t\t\t//otherwise notification will be shown and hidden immediately\n\t\t\tif (id !== me[PREVIOUS_SELECTED_ID]) {\n\t\t\t\tif (me.canShowPopover()) {\n\t\t\t\t\tme.tryShowPopover();\n\t\t\t\t} else {\n\t\t\t\t\tme.hidePopover();\n\t\t\t\t}\n\t\t\t\tme[PREVIOUS_SELECTED_ID] = id;\n\t\t\t}\n\t\t},\n\t\t\"hub/activity/opened\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(false);\n\t\t},\n\t\t\"hub/activity/closed\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(true);\n\t\t\tme.tryShowPopover();\n\t\t}\n\t})\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/cp20',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar RENDER_DATA = \"_render_data\";\n\tvar ITEM_UI_STATUS = \"_item_ui_status\";\n\tvar PREVIOUS_SELECTED_ID = \"_previous_selected_id\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-check-point\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\t// if we use custom mark in PL, add this code\n\t\t\t\tme[RENDER_DATA].customMark.push(\n\t\t\t\t\tme.publish(\"school/interface/studyplan/cp20-mark-widget\",\n\t\t\t\t\t\t\"school-ui-studyplan/widget/gl-pl/mark/cp20\").spread(function (widgetPath) {\n\t\t\t\t\t\t\treturn widgetPath;\n\t\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!639494\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverTitle = me.query(\"blurb!639496\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverContent = me.query(\"blurb!639497\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/sequence/update\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"suggest\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"unavailable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"selected\": function (selected, id) {\n\t\t\tvar me = this;\n\n\t\t\t//for continuously trigged \"selected\" callback\n\t\t\t//from clickHandler() and hub:memory/load/studyplan_item\n\t\t\t//make sure that process same id only once\n\t\t\t//otherwise notification will be shown and hidden immediately\n\t\t\tif (id !== me[PREVIOUS_SELECTED_ID]) {\n\t\t\t\tif (me.canShowPopover()) {\n\t\t\t\t\tme.tryShowPopover();\n\t\t\t\t} else {\n\t\t\t\t\tme.hidePopover();\n\t\t\t\t}\n\t\t\t\tme[PREVIOUS_SELECTED_ID] = id;\n\t\t\t}\n\t\t},\n\t\t\"hub/activity/opened\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(false);\n\t\t},\n\t\t\"hub/activity/closed\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(true);\n\t\t\tme.tryShowPopover();\n\t\t}\n\t})\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/gl',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar RENDER_DATA = \"_render_data\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-group-lesson\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\t// if we use custom mark in PL, add this code\n\t\t\t\t//me[RENDER_DATA].customMark.push(\"...\");\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!638118\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n});\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/goal',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar $ELEMENT = \"$element\";\n\tvar RENDER_DATA = \"_render_data\";\n\tvar ITEM_UI_STATUS = \"_item_ui_status\";\n\tvar CLS_GOAL = \"ets-sp-sqn-item-goal\";\n\tvar PREVIOUS_SELECTED_ID = \"_previous_selected_id\";\n\tvar WIDGET_MARK_PATH = \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/\";\n\n\treturn Widget.extend(function ($element, path, itemID) {\n\t\tvar me = this;\n\t\tme[$ELEMENT].addClass(CLS_GOAL);\n\t}, {\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-goal-poly\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"ets-icon-goal-bg\";\n\t\t\t\tme[RENDER_DATA].customMark.push(WIDGET_MARK_PATH + \"goal\");\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!568667\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverTitle = me.query(\"blurb!571166\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t\tme[RENDER_DATA].popoverContent = me.query(\"blurb!571167\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/sequence/update\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"suggest\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"unavailable\": function () {\n\t\t\tvar me = this;\n\t\t\tme.tryShowPopover();\n\t\t},\n\t\t\"selected\": function (selected, id) {\n\t\t\tvar me = this;\n\n\t\t\t//for continuously trigged \"selected\" callback\n\t\t\t//from clickHandler() and hub:memory/load/studyplan_item\n\t\t\t//make sure that process same id only once\n\t\t\t//otherwise notification will be shown and hidden immediately\n\t\t\tif (id !== me[PREVIOUS_SELECTED_ID]) {\n\t\t\t\tif (me.canShowPopover()) {\n\t\t\t\t\tme.tryShowPopover();\n\t\t\t\t} else {\n\t\t\t\t\tme.hidePopover();\n\t\t\t\t}\n\t\t\t\tme[PREVIOUS_SELECTED_ID] = id;\n\t\t\t}\n\t\t},\n\t\t\"hub/activity/opened\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(false);\n\t\t},\n\t\t\"hub/activity/closed\": function () {\n\t\t\tvar me = this;\n\t\t\tme.setStoreShownId(true);\n\t\t\tme.tryShowPopover();\n\t\t}\n\t})\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/lesson',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar RENDER_DATA = \"_render_data\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[ID] && me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-lesson\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"campus_student_studyplan_item!\" + me[ID] + \".properties\").spread(function (studyPlanItem) {\n\t\t\t\t\treturn me.query(\"student_lesson!template_lesson;\" + studyPlanItem.properties.templateLessonId);\n\t\t\t\t}).spread(function (studentLesson) {\n\t\t\t\t\treturn studentLesson.lessonName;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n});\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/pl',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar RENDER_DATA = \"_render_data\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-private-lesson\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\t// if we use custom mark in PL, add this code\n\t\t\t\tme[RENDER_DATA].customMark.push(\n                    me.publish( \"school/interface/studyplan/pl-mark-widget\",\n                                \"school-ui-studyplan/widget/gl-pl/mark/pl\").spread(function(widgetPath){\n                                    return widgetPath;\n                                })\n                );\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!569833\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n});\n\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/sppl20',[\n\t\"./base\"\n], function (Widget) {\n\n\tvar ID = \"_id\";\n\tvar RENDER_DATA = \"_render_data\";\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tif (me[RENDER_DATA]) {\n\t\t\t\tme[RENDER_DATA].itemClass = \"ets-icon-badge-private-lesson\";\n\t\t\t\tme[RENDER_DATA].itemBackgroundClass = \"glyphicon icon-circle\";\n\t\t\t\t// if we use custom mark in PL, add this code\n\t\t\t\tme[RENDER_DATA].customMark.push(\n\t\t\t\t\tme.publish(\"school/interface/studyplan/pl20-mark-widget\",\n\t\t\t\t\t\t\"school-ui-studyplan/widget/gl-pl/mark/pl\").spread(function (widgetPath) {\n\t\t\t\t\t\treturn widgetPath;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tme[RENDER_DATA].topic = me.query(\"blurb!569833\").spread(function (blurb) {\n\t\t\t\t\treturn blurb && blurb.translation;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t})\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/sequence-nav.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-sqn ets-sp-sequence-item\\\">\\n\\t<!-- Sequence Navigation Start -->\\n\\t<div class=\\\"ets-sp-sqn-main\\\">\\n\\t\\t<ul class=\\\"ets-sp-sqn-container\\\">\\n            <div class=\\\"ets-sp-sqn-line\\\"></div>\\n        </ul>\\n\\t</div>\\n\\t<!-- Sequence Navigation End -->\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./sequence-nav.html\",\n\t\"school-ui-shared/utils/typeid-parser\",\n\t\"school-ui-studyplan/enum/studyplan-mode\",\n\t\"school-ui-studyplan/enum/studyplan-state\",\n\t\"school-ui-studyplan/enum/studyplan-item-state\",\n\t\"school-ui-studyplan/enum/studyplan-velocity\",\n\t\"school-ui-studyplan/utils/state-parser\",\n\t\"troopjs-browser/loom/config\",\n\t\"school-ui-studyplan/utils/animation-helper\",\n\t\"jquery.gudstrap\",\n\t\"lodash\"\n], function (when, $, Widget, tSequence, typeidParser, studyplanMode, studyplanState, itemState, velocityState, stateParser, loom, animationHelper, $gudstrap, _) {\n\n\tvar UNDEF;\n\tvar DATA_UNIT_STUDYPLAN = \"_data_unit_studyplan\";\n\tvar DATA_STUDYPLAN = \"_data_studyplan\";\n\n\tvar PREFIX_TEMP_UNIT = \"template_unit;\";\n\n\tvar CLS_CONTAINER = \"ets-sp-sequence-navigation-container\";\n\tvar CLS_ITEM_CONTENT = \"ets-sp-sqn-container\";\n\tvar CLS_PATH_COMPLETE = \"ets-complete\";\n\tvar CLS_ITEM = \"ets-sp-sqn-item\";\n\tvar CLS_REMOVEABLE = \"ets-sp-sqn-removeable\";\n\tvar CLS_ITEM_CONTAINER = \"ets-sp-sequence-item\";\n\tvar CLS_ITEM_ANIMATION = \"ets-sp-item-animation\";\n\tvar CLS_CONTENT_PREPEND_ITEM = \"ets-sp-prepend-item\";\n\tvar CLS_ITEM_ANIMATION_LT_INDEX = \"ets-sp-lt-index\";\n\tvar CLS_ITEM_ANIMATION_GT_INDEX = \"ets-sp-gt-index\";\n\n\tvar CONFIG_ID = \"config\";\n\tvar $ELEMENT = \"$element\";\n\tvar PATH_ITEM = \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/item/\";\n\n\tvar PROP_STUDYPLAN_ID = \"_studyplan_id\";\n\tvar PROP_UNIT_STUDYPLAN_ID = \"_unit_studyplan_id\";\n\tvar PROP_UNIT_ID = \"_unit_id\";\n\tvar PROP_UNIT_TEMPLATE_ID = \"_unit_template_id\";\n\tvar ANIMATION_CHANGE = \"unitNav_seqNav\";\n\tvar DURATION_ITEM_ANIMATION = 600;\n\n\tvar PROMISE_RENDER = \"_promise_render\";\n\n\tvar ANIMATION_DIR = {\n\t\tL : \"<--\",\n\t\tR : \"-->\"\n\t};\n\n\tvar CAMPUS_ENABLE = 'campus_enable';\n\n\tfunction getProgressQuery(query, mode){\n\t\treturn mode === studyplanMode.Study ? query + \".progress\" : query;\n\t}\n\n\tfunction doRender(unit_studyplan, studyplan, animationDir) {\n\t\tvar me = this;\n\t\tvar $wrapper = me[$ELEMENT];\n\t\tvar $container = $wrapper.find(\".\" + CLS_CONTAINER);\n\t\tvar $oldNavi = $container.find(\".\" + CLS_ITEM_CONTAINER);\n\t\tvar $itemContent;\n\n\t\treturn me.query(\n\t\t\tgetProgressQuery(studyplan.id, unit_studyplan.mode),\n\t\t\t'member_site_setting!\"school;studyplan.newui.enabled\"'\n\t\t).spread(function(studyplan, campusEnable){\n\n\t\t\tme[DATA_UNIT_STUDYPLAN] = unit_studyplan;\n\t\t\tme[DATA_STUDYPLAN] = studyplan;\n\t\t\tme[CAMPUS_ENABLE] = campusEnable.value;\n\n\t\t\tif (animationDir && $oldNavi.length) {\n\t\t\t\tvar ltItemIndex = animationDir === ANIMATION_DIR.L;\n\t\t\t\tvar $newNavi = $(tSequence());\n\n\t\t\t\t$wrapper.addClass(CLS_ITEM_ANIMATION);\n\t\t\t\t$container.addClass(CLS_ITEM_ANIMATION);\n\n\t\t\t\tif (ltItemIndex) {\n\t\t\t\t\t$container.prepend($newNavi);\n\t\t\t\t\t$container.addClass(CLS_CONTENT_PREPEND_ITEM);\n\t\t\t\t} else {\n\t\t\t\t\t$container.append($newNavi);\n\t\t\t\t}\n\n\t\t\t\t$itemContent = $newNavi.find(\".\" + CLS_ITEM_CONTENT);\n\n\t\t\t\treturn when.all(doRenderItems.call(me, $itemContent)).then(function () {\n\t\t\t\t\tvar animateDefer = when.defer();\n\t\t\t\t\tanimationHelper.request(ANIMATION_CHANGE, function () {\n\t\t\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\t\t\t$container.addClass(ltItemIndex ? CLS_ITEM_ANIMATION_LT_INDEX : CLS_ITEM_ANIMATION_GT_INDEX);\n\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t$container\n\t\t\t\t\t\t\t\t\t.removeClass([\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION,\n\t\t\t\t\t\t\t\t\t\tCLS_CONTENT_PREPEND_ITEM,\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION_LT_INDEX,\n\t\t\t\t\t\t\t\t\t\tCLS_ITEM_ANIMATION_GT_INDEX\n\t\t\t\t\t\t\t\t\t].join(\" \"));\n\n\t\t\t\t\t\t\t\t$oldNavi.remove();\n\t\t\t\t\t\t\t\t$wrapper.removeClass(CLS_ITEM_ANIMATION);\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, DURATION_ITEM_ANIMATION);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(animateDefer.resolve, animateDefer.reject);\n\t\t\t\t\t});\n\t\t\t\t\treturn animateDefer.promise;\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\t$itemContent = $wrapper.find(\".\" + CLS_ITEM_CONTENT);\n\t\t\t\tif (!$itemContent.length) {\n\t\t\t\t\t$container = $(\"<div></div>\").addClass(CLS_CONTAINER).html(tSequence()).appendTo($wrapper);\n\t\t\t\t\t$itemContent = $container.find(\".\" + CLS_ITEM_CONTENT);\n\t\t\t\t}\n\t\t\t\treturn when.all(doRenderItems.call(me, $itemContent));\n\t\t\t}\n\n\t\t});\n\t}\n\n\tfunction doRenderItems($itemContent) {\n\t\tvar me = this;\n\n\t\tvar mode = me[DATA_UNIT_STUDYPLAN].mode;\n\t\tvar crashedState;\n\t\tvar renderItems;\n\t\tvar itemPromise = [];\n\t\tvar onlyEnableId;\n\n\t\tvar data = me[DATA_STUDYPLAN];\n\t\t//mark ready to remove\n\t\t$itemContent.find(\".\" + CLS_ITEM).addClass(CLS_REMOVEABLE);\n\n\t\t//if studyplan is template\n\t\t//means we need to setup this studyplan, add a setup item to the beginning\n\t\tif (mode === studyplanMode.Create) {\n\t\t\tme.publish(\"studyplan/sequence-item/selected\", CONFIG_ID);\n\t\t\trenderItems = [{\n\t\t\t\ttypeCode: \"config\"\n\t\t\t}].concat(data.items);\n\t\t\tonlyEnableId = CONFIG_ID;\n\t\t}\n\t\telse {\n\t\t\trenderItems = data.items;\n\t\t}\n\n\t\t//check if this item had been render\n\t\trenderItems.forEach(function (item) {\n\t\t\tvar $item = item.id && $itemContent.find(\"[data-item-id='\" + typeidParser.parseId(item.id) + \"']\");\n\n\t\t\tif($item && $item.data(\"woven\")){\n\t\t\t\t//reorder the item element\n\t\t\t\t$item.appendTo($itemContent);\n\t\t\t\t$item.removeClass(CLS_REMOVEABLE);\n\t\t\t\tme.publish(\"studyplan/sequence-item/update\", typeidParser.parseId(item.id));\n\t\t\t}\n\t\t\telse{\n\t\t\t\t//create a new one element\n\t\t\t\t// for campus release, goal will point to cp-goal widget\n\t\t\t\tvar _typeCode = me[CAMPUS_ENABLE] === 'true' && item.typeCode === 'goal' ? 'cp-' + item.typeCode : item.typeCode;\n\t\t\t\tvar velocity = '';\n\t\t\t\tif(data.progress){\n\t\t\t\t\tvelocity = _.findKey(velocityState, function(value){\n\t\t\t\t\t\treturn value === data.progress.properties.velocity;\n\t\t\t\t\t}).toLowerCase();\n\t\t\t\t}\n\n\t\t\t\t$item = $(\"<li class='ets-sp-sqn-item'></li>\")\n\t\t\t\t\t.attr(\"data-item-id\", typeidParser.parseId(item.id) || \"\")\n\t\t\t\t\t.attr(\"data-type-code\", item.typeCode)\n\t\t\t\t\t.attr(\"data-unit-studyplan-mode\", me[DATA_UNIT_STUDYPLAN].mode)\n\t\t\t\t\t.attr(loom.weave, PATH_ITEM + _typeCode + \"(itemID)\")\n\t\t\t\t\t.attr('data-velocity', velocity)\n\t\t\t\t\t.appendTo($itemContent);\n\t\t\t\titemPromise.push($item.weave());\n\t\t\t}\n\n\t\t\t//check the velocity if it is Crashed and lock the sequence\n\t\t\tif(\titem.typeCode === \"goal\" &&\n\t\t\t\t(crashedState = data.progress && data.progress.properties.velocity === velocityState.Crashed)){\n\t\t\t\tonlyEnableId = typeidParser.parseId(item.id);\n\t\t\t}\n\n\t\t});\n\n\t\t//notice this goal is completed\n\t\t$itemContent.toggleClass(\n\t\t\tCLS_PATH_COMPLETE,\n\t\t\t!!(data.progress && data.progress.state === studyplanState.Completed)\n\t\t);\n\n\n\t\t//remove unuse item\n\t\t$itemContent.find(\".\" + CLS_REMOVEABLE)\n\t\t\t.each(function (index, elem) {\n\t\t\t\t//remove the popover\n\t\t\t\t$(elem).popover(\"destroy\");\n\t\t\t})\n\t\t\t.remove();\n\n\t\t//check studyplan state for lock state\n\t\tme.publish(\n\t\t\t\"studyplan/sequence-item/unavailable\",\n\t\t\tmode === studyplanMode.Create || mode === studyplanMode.Locked || crashedState,\n\t\t\tonlyEnableId);\n\n\t\t//suggested item\n\t\tvar suggestedItems = data.items.filter(function (item) {\n\t\t\treturn data.progress && item.itemIndex === data.progress.properties.suggestedItemIndex;\n\t\t});\n\t\tvar suggestedItem = suggestedItems.length ? suggestedItems[0] : data.items[0];\n\t\tme.publish(\"studyplan/sequence-item/suggest\", typeidParser.parseId(suggestedItem.id));\n\n\t\treturn itemPromise;\n\t}\n\n\n\treturn Widget.extend({\n\t\t\"hub/load/launcher\": function (requests) {\n\t\t\tvar me = this;\n\n\t\t\t//for activity container\n\t\t\tif(requests.prefix === \"school\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//the same if condition with load/results\n\t\t\tif (( requests.studyplan &&\n\t\t\t\t\trequests.studyplan !== typeidParser.parseId(me[PROP_STUDYPLAN_ID]) ) ||\n\n\t\t\t\t(!requests.studyplan &&\n\t\t\t\t\trequests.unit !== (PREFIX_TEMP_UNIT + me[PROP_UNIT_TEMPLATE_ID]))\n\t\t\t\t) {\n\t\t\t\treturn when.promise(function (resolve) {\n\t\t\t\t\tme[$ELEMENT].find(\"[\" + loom.woven + \"]\").unweave().then(function () {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"hub:memory/load/results\": function (results) {\n\t\t\tvar me = this;\n\t\t\tvar animationDir;\n\t\t\tvar currentIndex;\n\t\t\tvar preIndex;\n\n\t\t\tif (results.unit) {\n\n\t\t\t\t// When the unit or studyplan is different, start to render a new sequence-navigation.\n\t\t\t\t// and the sequence container will render either (please check code in /js/widget/studyplan/body/sequence-container/main.js)\n\n\t\t\t\t// So, sequence-navigation and sequence-container will be animated at the same time.\n\t\t\t\tif(\t( results.studyplan && me[PROP_STUDYPLAN_ID] !== results.studyplan.id) ||\n\t\t\t\t\t(!results.studyplan && me[PROP_UNIT_TEMPLATE_ID] !== results.unit.templateUnitId )\n\t\t\t\t\t){\n\t\t\t\t\t// exclude create studyplan case\n\t\t\t\t\tif(me[PROP_UNIT_TEMPLATE_ID] !== results.unit.templateUnitId){\n\t\t\t\t\t\t// Compare current unit with prev unit, to ensure animate slide direction.\n\t\t\t\t\t\t// If change unit at the same level, animationDir will be a direction String.\n\t\t\t\t\t\t// If change unit at the different level, animationDir will be UNDEF and animation will not be run.\n\t\t\t\t\t\tresults.unit.parent.children.forEach(function (e, i) {\n\t\t\t\t\t\t\tswitch(e.templateUnitId){\n\t\t\t\t\t\t\t\tcase results.unit.templateUnitId:\n\t\t\t\t\t\t\t\t\tcurrentIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase me[PROP_UNIT_TEMPLATE_ID]:\n\t\t\t\t\t\t\t\t\tpreIndex = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(currentIndex !== UNDEF && preIndex !== UNDEF){\n\t\t\t\t\t\t\tanimationDir = ANIMATION_DIR[currentIndex < preIndex ? \"L\" : \"R\"];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tvar unit_studyplan = results.unit_studyplan;\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * When the results contain studyplan data.\n\t\t\t\t\t\t *  *** --> #study/xxx/yyy\n\t\t\t\t\t\t *      case 1 :\n\t\t\t\t\t\t *          #config?unit_id=xxx --> #study/xxx     (create studyplan -> not animated)\n\t\t\t\t\t\t *      case 2 :\n\t\t\t\t\t\t *          #study/aaa/bbb      --> #study/xxx/yyy (unit navigation  -> animated\n\t\t\t\t\t\t *                                                  change level     -> not animated)\n\t\t\t\t\t\t *      case 3 :\n\t\t\t\t\t\t *          EMPTY               --> #study/xxx/yyy (Landing          -> not animated)\n\t\t\t\t\t\t */\n\t\t\t\t\t\tvar studyplan = results.studyplan\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * when the results do not contain studyplan data.\n\t\t\t\t\t\t *  *** --> #config?unit_id=xxx\n\t\t\t\t\t\t *      case 4 :\n\t\t\t\t\t\t *          #config?unit_id=aaa --> #config?unit_id=xxx (change level    -> not animated)\n\t\t\t\t\t\t *      case 5 :\n\t\t\t\t\t\t *          #study/aaa/bbb      --> #config?unit_id=xxx (unit navigation -> animated\n\t\t\t\t\t\t *                                                       change level    -> not animated)\n\t\t\t\t\t\t *      case 6 :\n\t\t\t\t\t\t *          EMPTY               --> #config?unit_id=xxx (Landing         -> not animated)\n\t\t\t\t\t\t */\n\t\t\t\t\t\t\t|| results.unit_studyplan.studyPlan;\n\n\t\t\t\t\t\t\tme[PROP_UNIT_STUDYPLAN_ID] = unit_studyplan.id;\n\t\t\t\t\t\t\tme[PROP_STUDYPLAN_ID] = studyplan.id;\n\t\t\t\t\t\t\tme[PROP_UNIT_TEMPLATE_ID] = results.unit && results.unit.templateUnitId;\n\t\t\t\t\t\t\tme[PROP_UNIT_ID] = results.unit && results.unit.studentUnitId;\n\n\t\t\t\t\t\t\tme[PROMISE_RENDER] = doRender.call(me, unit_studyplan, studyplan, animationDir);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tme[PROP_UNIT_STUDYPLAN_ID] =\n\t\t\t\t\tme[PROP_STUDYPLAN_ID] =\n\t\t\t\t\tme[PROP_UNIT_TEMPLATE_ID] =\n\t\t\t\t\tme[PROP_UNIT_ID] = UNDEF;\n\t\t\t}\n\t\t},\n\t\t\"hub:memory/load/studyplan_item\": function (data) {\n\t\t\tvar me = this;\n\t\t\tvar id = data ? typeidParser.parseId(data.id) : null;\n\n\t\t\tme.publish(\"studyplan/sequence-item/selected\", id);\n\t\t},\n\t\t\"hub/studyplan/sequence/navigate/suggest-item\": function () {\n\t\t\tvar me = this;\n\t\t\tvar suggestedItems = me[DATA_STUDYPLAN].items.filter(function (item) {\n\t\t\t\treturn me[DATA_STUDYPLAN].progress && item.itemIndex === me[DATA_STUDYPLAN].progress.properties.suggestedItemIndex;\n\t\t\t});\n\t\t\tvar suggestedItem = suggestedItems.length ? suggestedItems[0] : UNDEF;\n\n\t\t\tif (suggestedItem) {\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\"prefix\": \"study\",\n\t\t\t\t\t\"studyplan\": typeidParser.parseId(me[DATA_STUDYPLAN].id),\n\t\t\t\t\t\"studyplan_item\": typeidParser.parseId(suggestedItem.id)\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\"hub/studyplan/sequence/navigate/goal\": function () {\n\t\t\tvar me = this;\n\t\t\tvar itemIndex;\n\t\t\tif (me[DATA_STUDYPLAN] && me[DATA_STUDYPLAN].items.length > 0) {\n\t\t\t\tme[DATA_STUDYPLAN].items.forEach(function (entry) {\n\t\t\t\t\tif (entry.typeCode == \"goal\") {\n\t\t\t\t\t\titemIndex = entry.itemIndex;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tme.publish(\"load\", {\n\t\t\t\t\t\"prefix\": \"study\",\n\t\t\t\t\t\"studyplan\": typeidParser.parseId(me[DATA_STUDYPLAN].id),\n\t\t\t\t\t\"studyplan_item\": typeidParser.parseId(me[DATA_STUDYPLAN].items[itemIndex].id)\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t//this will update the whold sequence.\n\t\t\"hub/studyplan/sequence/update\": function () {\n\t\t\tvar me = this;\n\t\t\tme[PROP_STUDYPLAN_ID] && me[PROMISE_RENDER] &&\n\t\t\tme[PROMISE_RENDER].inspect().state === \"fulfilled\" &&\n\t\t\t(me[PROMISE_RENDER] = doRender.call(me, me[DATA_UNIT_STUDYPLAN], me[DATA_UNIT_STUDYPLAN].studyPlan));\n\t\t},\n\t\t\"hub/activity/update/progress\": function () {\n\t\t\tthis.publish(\"studyplan/sequence/update\");\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/check.html',[],function() { return function template(data) { var o = \"<i class=\\\"ets-icon-badge-checkmark\\\"></i>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/check',[\n    \"when\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-shared/utils/typeid-parser\",\n    \"template!./check.html\"\n],function(when, Widget, typeidParser, tCheck){\n    \n    var ID = \"_id\";\n    var ITEM = \"_item\";\n\n    return Widget.extend(function($element, path, itemData){\n        this[ID] = typeidParser.parseId(itemData.id);\n        this[ITEM] = itemData;\n    },{\n        \"sig/start\":function(){\n            if(this[ITEM].typeCode === \"goal\"){\n                return when.reject(\"skip check mark, goal item has no check mark\");\n            }\n            return this.html(tCheck);\n        },\n        \"hub:memory/studyplan/sequence-item/selected\" : function(id){\n            var me = this;\n            var thisId = me[ID];\n            me.$element.toggleClass(\"ets-none\", id == thisId);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal.html',[],function() { return function template(data) { var o = \"<span class=\\\"badge ets-sp-badge-normal campus-badge-normal\\\"></span>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/cp-goal',[\n\t\"jquery\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./cp-goal.html\"\n], function ($, Widget, tGoalMark) {\n\n\treturn Widget.extend(function ($element, path, data) {\n\t}, {\n\t\t\"displayName\": \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal\",\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tme.html(tGoalMark);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal.html',[],function() { return function template(data) { var o = \"<span class=\\\"badge ets-sp-badge-normal\\\">\" +data + \"</span>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal',[\n    \"jquery\",\n    \"when\",\n    \"moment\",\n    \"troopjs-ef/component/widget\",\n    \"school-ui-shared/enum/moment-language\",\n    \"school-ui-studyplan/enum/studyplan-item-state\",\n    \"school-ui-studyplan/utils/state-parser\",\n    \"template!./goal.html\"\n],function($, when, Moment, Widget, momentLang, itemState, stateParser, tGoalMark){\n    var DATA = \"_data\";\n    var CONTEXT_DEFER = \"_context_defer\";\n\n    return Widget.extend(function($element, path, data){\n        this[DATA] = data;\n        this[CONTEXT_DEFER] = when.defer();\n    },{\n        \"displayName\" : \"school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/goal\",\n        \"sig/start\":function(){\n            var me = this;\n            var data = me[DATA];\n            if(stateParser.parseFlag(itemState, data.progress.state).Completed){\n                return when.reject(\"skip target date mark, studyplan is completed\");\n            }\n            if(data && data.progress && data.progress.properties && data.progress.properties.endDate){\n                me[CONTEXT_DEFER].promise.spread(function(context){\n                    var localLang = Moment(data.progress.properties.endDate);\n                    if(context) {\n                        localLang.lang(momentLang[context.cultureCode.toLowerCase()]);\n                        me.html(tGoalMark, localLang.format(\"ll\"));\n                    }\n                });\n            }\n            else{\n                return when.reject(\"skip target date mark, no endDate in goal\");\n            }\n        },\n        \"hub:memory/context\": function(context) {\n            if(context){\n                this[CONTEXT_DEFER].resolve([context]);\n            }\n        }\n    });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/locked.html',[],function() { return function template(data) { var o = \"<i class=\\\"ets-icon-badge-locked\\\">\\n\\t<i class=\\\"ets-sp-locked-mark-bg glyphicon icon-circle\\\"></i>\\n\\t<i class=\\\"ets-sp-locked-mark-icon ets-icon-lock\\\"></i>\\n</i>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/locked',[\n    \"troopjs-ef/component/widget\",\n    \"template!./locked.html\"\n],function(Widget, tCheck){\n\n    return Widget.extend({\n        \"sig/start\":function(){\n            return this.html(tCheck);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/skipped.html',[],function() { return function template(data) { var o = \"<span class=\\\"badge ets-sp-badge-skipped\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-text-en=\\\"Skipped\\\" data-blurb-id=\\\"568736\\\"></span>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/body/sequence-navigation/mark/skipped',[\n    \"troopjs-ef/component/widget\",\n    \"template!./skipped.html\"\n], function(Widget, tSkipped){\n    return Widget.extend({\n        \"sig/start\":function(){\n            return this.html(tSkipped);\n        }\n    });\n});\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/change-course/course.html',[],function() { return function template(data) { var o = \"\";if(data.enableShowCourseName) {o += \"\\n<div class=\\\"ets-sp-chc-hd\\\">\\n    \";if(data.changeCourseLink && data.enableChangeCourse) {o += \"\\n    <div class=\\\"ets-sp-chc-widget ets-sp-chc-link\\\">\\n        <h3>\" + data.courseName + \"</h3>\\n        <h4>\" + data.levelName + \"</h4>\\n        <a class=\\\"ets-sp-chc-link-url\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"668938\\\" data-text-en=\\\"Change course\\\" href=\\\"\" +data.changeCourseLink+ \"\\\"></a>\\n    </div>\\n    \";}else{o += \"\\n    <div class=\\\"ets-sp-chc-widget ets-sp-chc-switch \" + (data.enableChangeCourse ? \"ets-sp-chc-hand\": \"\")+ \"\\\" \";if(data.enableChangeCourse) {o += \"data-action='switch' \";}o += \" >\\n        \";if(data.enableChangeCourse) {o += \"\\n            <div class=\\\"ets-sp-chc-switch-arrow\\\">\\n                <i class=\\\"glyphicon icon-caret-down\\\"></i>\\n            </div>\\n        \";}o += \"\\n        <div class=\\\"ets-sp-chc-switch-main\\\">\\n            <h3>\" + data.courseName + \"</h3>\\n            <h4>\" + data.levelName + \"</h4>\\n        </div>\\n    </div>\\n    \";}o += \"\\n</div>\\n\";} return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/header/change-course/main',[\n\t\t\"school-ui-studyplan/module\",\n\t\t\"jquery\",\n\t\t\"when\",\n\t\t\"school-ui-shared/utils/ccl\",\n\t\t\"troopjs-browser/loom/config\",\n\t\t\"troopjs-ef/component/widget\",\n\t\t\"template!./course.html\"\n\t],\n\tfunction(module, $, When, CCL, LoomConfig, Widget, tCourse) {\n\t\t\"use strict\";\n\n\t\tvar CCL_ENABLE_CHANGECOURSE = \"ccl!\\\"school.menu.changecourse.display\\\"\";\n\t\tvar CCL_ENABLE_SHOW_COURSE_NAME = \"ccl!\\\"school.courseware.showCourseName.enable\\\"\";\n\t\tvar CCL_CHANGE_COURSE_LINK = \"ccl!\\\"school.studyplan.changeCourse.link\\\"\";\n\t\tvar MEMBER_SETTING_CHANGE_COURSE_ENABLE = 'member_site_setting!\"CampusCore;Campus.ChangeCourse.Enable\"';\n\n\t\tvar UNDEF;\n\t\tvar $ELEMENT = \"$element\";\n\t\tvar SEL_CHC_WIDGET = \".ets-sp-chc-widget\";\n\t\tvar SEL_UNIT_HEADER=\".ets-sp-unit-hd\";\n\t\tvar SEL_UNIT_NAV=\".ets-sp-unn\";\n\n\t\tvar MODULE_CONFIG = $.extend({\n\t\t\tchangeCourseUrl: undefined\n\t\t}, module.config() || {});\n\n\t\tfunction render(course, level, unit) {\n\t\t\tvar me = this;\n\t\t\tif(!course || !level || !unit) return;\n\n\t\t\treturn me.query(\n\t\t\t\t\tCCL_ENABLE_CHANGECOURSE,\n\t\t\t\t\tCCL_ENABLE_SHOW_COURSE_NAME,\n\t\t\t\t\tCCL_CHANGE_COURSE_LINK,\n\t\t\t\t\tMEMBER_SETTING_CHANGE_COURSE_ENABLE\n\t\t\t\t).spread(function(enableChangeCourse, enableShowCourseName, changeCourseLink, memberChangeCourseEnable){\n\t\t\t\treturn me.html(tCourse, {\n\t\t\t\t\t\tcourseName: course.courseName,\n\t\t\t\t\t\tlevelName: level.levelName,\n\t\t\t\t\t\tenableChangeCourse: CCL.indicateCCLStringValue(memberChangeCourseEnable) || CCL.indicateCCLStringValue(enableChangeCourse),\n\t\t\t\t\t\tenableShowCourseName: CCL.indicateCCLStringValue(enableShowCourseName),\n\t\t\t\t\t\tchangeCourseLink: MODULE_CONFIG.changeCourseUrl || changeCourseLink.value\n\t\t\t\t}).then(function () {\n\t\t\t\t\tvar $widget = me[$ELEMENT].find(SEL_CHC_WIDGET);\n\t\t\t\t\tvar requiredWidth = $widget[0].scrollWidth;\n\t\t\t\t\t$widget.width(requiredWidth);\n\t\t\t\t\tme[$ELEMENT].closest(SEL_UNIT_HEADER).find(SEL_UNIT_NAV).css(\"padding-left\", requiredWidth);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn Widget.extend({\n\t\t\t\"hub:memory/load/results\": function(data) {\n\t\t\t\tvar me =  this;\n\n\t\t\t\tif( me.course === data.course\n\t\t\t\t\t&& me.level === data.level\n\t\t\t\t\t&& me.unit === data.unit) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\trender.call(me, (me.course = data.course), (me.level = data.level), (me.unit = data.unit));\n\t\t\t},\n\n\t\t\t\"dom:[data-action='switch']/click\": function() {\n\t\t\t\tthis.publish(\"toggle/course/list\");\n\t\t\t}\n\t\t});\n\t});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/course-list/course-list.html',[],function() { return function template(data) { var o = \"\";\n\nfunction buildRowHeader() {\n    var header = \"<div class='ets-sp-chc-courses-row'>\";\n\n    return header;\n}\n\nfunction buildRowBody(group, cols) {\n    return buildCols(group, group.unit_children || group.children, cols);\n}\n\nfunction buildRowTail() {\n    return \"</div>\";\n}\n\nfunction buildCols (group, items, cols) {\n    var header = \"<div class='ets-sp-chc-course ets-\" + cols + \"-col clearfix' data-course-type='\" + group.courseTypeCode + \"'>\";\n    var sectionName = \"<h3>\" + group.courseName + \"</h3>\";\n    var section = buildSection(items);\n    var tail = \"</div>\";\n\n    return header + sectionName +  section + tail;\n}\n\nfunction buildSection(items) {\n    var length = items.length;\n    var i = 0;\n    var out = \"\";\n    var cls = \"\";\n    var bHasPassed;\n    var item;\n    var iColItems = 8;\n    var CLS_ACTIVE = \"ets-active\";\n    var CLS_PASS = \"ets-pass\";\n    var dataAttr =  \" data-template-id='{templateId}'\";\n\n    while(i < length) {\n        if( i % iColItems === 0)  out += \"<ul>\";\n        item = items[i];\n        bHasPassed = data.hasPassed(item.progress.state);\n        cls = (bHasPassed ? (\"class='\" +  CLS_PASS + \"' \") : \"\");\n\n        out += \"<li data-action='select-level' \" + cls + dataAttr.replace(\"{templateId}\", item.templateUnitId || item.templateLevelId) + \">\";\n        out += (item.unitName || item.levelName );\n        out += bHasPassed ? '<i class=\"ets-icon-badge-checkmark\"></i></li>' : '</li>';\n\n        if( ++i % iColItems === 0)  out += \"</ul>\";\n    }\n\n    return out;\n}\n\nfunction buildAllHtml(groups) {\n    var length = groups.length;\n    var i = 0;\n    var j = 0;\n    var iLimitCols = 4;\n    var iColItems = 8;\n    var items;\n    var out = \"\";\n    var cols;\n    var rows;\n    var iRestCols = 0;\n    var group;\n\n    while(i < length) {\n        group = groups[i];\n        if(group){\n            this[group.courseTypeCode] = this[group.courseTypeCode] || group;\n\n            items = group.unit_children || group.children;\n            cols = Math.ceil(items.length / iColItems);\n            rows = Math.ceil(cols / iLimitCols);\n\n            if(iRestCols < cols) {\n                out += (i !== 0) ? buildRowTail() : \"\";\n                out += buildRowHeader();\n                out += buildRowBody(group, cols);\n\n                iRestCols = (iLimitCols - cols % iLimitCols) % iLimitCols;\n            } else {\n                out += buildRowBody(group, cols);\n                iRestCols -= cols;\n            }\n\n            if( ++i === length) out += buildRowTail();\n        }\n    }\n\n    return out;\n}\n\no += \"\\n\\n<div class=\\\"ets-sp-chc-bd ets-none\\\">\\n    <div class=\\\"ets-sp-chc-courses clearfix\\\">\\n        <button class=\\\"btn btn-default btn-sm ets-sp-chc-close\\\" data-action=\\\"close\\\">\\n        <i class=\\\"glyphicon glyphicon-remove\\\"></i> <span data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"450020\\\" data-text-en=\\\"close\\\"></span></button>\\n        <div data-action='change-level'>\" + buildAllHtml.call(this, data.groups) + \"</div>\\n    </div>\\n</div>\\n\\n\\n<!--\\n <div class=\\\"ets-sp-chc-courses-row\\\">\\n    <div class=\\\"ets-sp-chc-course ets-2-col clearfix\\\">\\n        <h3>Level Name</h3>\\n        <ul>\\n            <li class=\\\"ets-pass\\\"> Level Item<i class=\\\"ets-icon-badge-checkmark\\\"></i></li>\\n            <li class=\\\"ets-active\\\">Actived Item</li>\\n            <li>Normal Item</li>\\n        </ul>\\n        ...\\n    </div>\\n</div>\\n-->\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/header/course-list/main',[\n        \"jquery\",\n        \"when\",\n        \"client-tracking\",\n        \"troopjs-ef/component/widget\",\n        \"school-ui-shared/utils/console\",\n        \"school-ui-shared/utils/update-helper\",\n        \"school-ui-shared/utils/progress-state\",\n        \"school-ui-shared/utils/typeid-parser\",\n        \"school-ui-shared/enum/course-type\",\n        \"school-ui-studyplan/enum/studyplan-state\",\n        \"school-ui-studyplan/enum/studyplan-mode\",\n        \"template!./course-list.html\",\n        \"poly\"\n    ],\n    function($, when, ct, Widget, Console, UpdateHelper, ProgressState, TypeIDPaser, CourseType, studyplanState, studyplanMode,tCourse, poly) {\n        \"use strict\";\n\n        var UNDEF;\n\n        var SEL_COURSE_BD = \".ets-sp-chc-bd\";\n        var SEL_COURSE_CONT = \".ets-sp-chc-course\";\n        var SEL_COURSE = \".ets-sp-chc-course li\";\n        var SEL_COURSE_ARRAW = \".ets-sp-chc-switch-arrow i\";\n        var SEL_ACTIVE = \".ets-active\";\n        var CLS_ACTIVE = \"ets-active\";\n        var CLS_NONE = \"ets-none\";\n        var CLS_ARRAW_UP = \"icon-caret-up\";\n\n        var Q_ENROLLABLE_COURSES = \"student_enrollable_courses!*.items.children.progress\";\n        var Q_CCL_MINIM_LEVEL = \"ccl!\\\"school.changecourse.minimum.levelno\\\"\";\n        var Q_STUDYPLAN_CURR = \"campus_student_unit_studyplan!current.studyPlan.items,.studyPlan.progress\";\n\n        var CONFIRM = \"confirm\";\n        var ALERT = \"alert\";\n        var OK = \"ok\";\n        var LEVEL = \"_level\";\n        var UNIT = \"_unit\";\n        var COURSE_TYPE_CODE = \"_course_type_code\";\n        var SHOW = \"_show\";\n\n        var CHG_LEVEL_GE2GE_TITLE = \"_GE2GE_Title\";\n        var CHG_LEVEL_GE2GE_BODY = \"_GE2GE_Body\";\n\n        var CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_TITLE = \"_GE2GE_Below_Title\";\n        var CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_BODY = \"_GE2GE_Below_Body\";\n        var TOPIC_UNABLE_TO_CHANGE = \"_topic_unable_to_change\";\n        var TEXT_UNABLE_TO_CHANGE = \"_text_unable_to_change\";\n        var TOPIC_WANT_CHANGE = \"_topic_want_change\";\n        var TEXT_WANT_CHANGE = \"_text_want_change\";\n        var OPTION_WANT_CHANGE = \"_option_want_change\";\n        var TOPIC_UNABLE_TO_CHANGE_COURSE = \"_topic_unable_to_change_course\";\n        var TEXT_UNABLE_TO_CHANGE_COURSE = \"_text_unable_to_change_course\";\n        var TOPIC_SURE_WANT_TO_CHANGE = \"_topic_sure_want_to_change\";\n        var TEXT_SURE_WANT_TO_CHANGE = \"_text_sure_want_to_change\";\n\n        var CHG_LEVEL_TITLE = \"_Title\";\n        var CHG_LEVEL_BODY = \"_Body\";\n\n        var CHG_LEVEL_SP_TITLE = \"_sp_Title\";\n        var CHG_LEVEL_SP_BODY = \"_sp_Body\";\n\n        var Blurb_IDS =[\n            {\n                \"_name\" : OK,\n                \"_id\" : \"150652\",\n                \"en\": \"OK\"\n            },\n            {\n                \"_name\": CHG_LEVEL_GE2GE_TITLE,\n                \"_id\": \"450016\",\n                \"en\": \"Are you sure you want to change the level?\"\n            },\n            {\n                \"_name\": CHG_LEVEL_GE2GE_BODY,\n                \"_id\": \"450311\",\n                \"en\": \"Your progress in this level will be saved, but we recommend that you complete the levels in order.\"\n            },\n            {\n                \"_name\": CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_TITLE,\n                \"_id\": \"458008\",\n                \"en\": \"This course is for Level 6 or higher.\"\n            },\n            {\n                \"_name\": CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_BODY,\n                \"_id\": \"458009\",\n                \"en\": \"You need to be studying at General English Level 6 or above to take advantage of this course.\"\n            },\n            {\n                \"_name\": CHG_LEVEL_TITLE,\n                \"_id\": \"461321\",\n                \"en\": \"Do you want to change courses?\"\n            },\n            {\n                \"_name\": CHG_LEVEL_BODY,\n                \"_id\": \"461322\",\n                \"en\": \"Don't worry. Your progress in this course will be saved.\"\n            },\n            {\n                \"_name\": CHG_LEVEL_SP_TITLE,\n                \"_id\": \"569826\",\n                \"en\": \"Are you sure you want to change the level?\"\n            },\n            {\n                \"_name\": CHG_LEVEL_SP_BODY,\n                \"_id\": \"569827\",\n                \"en\": \"If you change your level your current study plan will be discarded.\"\n            },\n            {\n                \"_name\" : TOPIC_UNABLE_TO_CHANGE,\n                \"_id\" : \"634432\",\n                \"en\" : \"Unable to change level\"\n            },\n            {\n                \"_name\" : TEXT_UNABLE_TO_CHANGE,\n                \"_id\" : \"634433\",\n                \"en\" : \"You can not change to this level as you have completed it in an older version of the online school. Please select another one.\"\n            },\n            {\n                \"_name\" : TOPIC_WANT_CHANGE,\n                \"_id\" : \"634434\",\n                \"en\" : \"Are you sure you want to change level?\"\n            },\n            {\n                \"_name\" : TEXT_WANT_CHANGE,\n                \"_id\" : \"634435\",\n                \"en\" : \"Your progress in this level will be saved, but we recommend that you complete the levels in order.\"\n            },\n            {\n                \"_name\" : OPTION_WANT_CHANGE,\n                \"_id\" : \"634436\",\n                \"en\" : \"I want to make a fresh start! Please enrol me at the beginnng of the course and remove my old study progress.\"\n            },\n            {\n                \"_name\" : TOPIC_UNABLE_TO_CHANGE_COURSE,\n                \"_id\" : \"634437\",\n                \"en\" : \"Unable to change course\"\n            },\n            {\n                \"_name\" : TEXT_UNABLE_TO_CHANGE_COURSE,\n                \"_id\" : \"634438\",\n                \"en\" : \"You can not change to this course as you have completed it in an older version of the online school.\"\n            },\n            {\n                \"_name\" : TOPIC_SURE_WANT_TO_CHANGE,\n                \"_id\" : \"634439\",\n                \"en\" : \"Are you sure you want to change course?\"\n            },\n            {\n                \"_name\" : TEXT_SURE_WANT_TO_CHANGE,\n                \"_id\" : \"634440\",\n                \"en\" : \"Your progress in this course will be saved.\"\n            }\n        ];\n\n        var BLURBS = {};\n\n        function initBlurb() {\n            var me = this;\n            var Keys = [];\n            var Ids = [];\n\n            Blurb_IDS.forEach(function(val, key){\n                Keys.push(val[\"_name\"]);\n                Ids.push('blurb!' + val[\"_id\"]);\n            });\n\n            return me.query(Ids).then(function(results) {\n                results.forEach(function(val, idx) {\n                    BLURBS[Keys[idx]] = val ? val.translation : Blurb_IDS[idx].en;\n                });\n            });\n        }\n\n        function sort(prev, next) {\n            if(prev.courseTypeCode === \"GE\"){\n                return -1;\n            }\n            else if(next.courseTypeCode === \"GE\"){\n                return 1;\n            }\n            else{\n                return prev.children.length > next.children.length ? 1 : -1;\n            }\n        }\n\n        function render() {\n            var me = this;\n\n            return when.all([\n                me.query(Q_ENROLLABLE_COURSES),\n                initBlurb.call(me)\n            ]).spread(function(enrollableCourses){\n                me.courseInfo = enrollableCourses[0];\n                if(me.courseInfo) {\n                    return me.html(tCourse,\n                        {\n                            groups: me.courseInfo.items ? me.courseInfo.items.sort(sort) : [],\n                            hasPassed: ProgressState.hasPassed\n                        }).then(function() {\n                            me.$allCourses = me.$element.find(SEL_COURSE);\n                            me.$courseBody = me.$element.find(SEL_COURSE_BD);\n                            me.$arraw = me.$element.find(SEL_COURSE_ARRAW);\n                            toggleShow.call(me, me[SHOW]);\n                            highlightLevelElement.call(me, me[LEVEL] && me[LEVEL].templateLevelId, me[UNIT] && me[UNIT].templateUnitId);\n                        });\n                }\n            });\n\n        }\n\n        function highlightLevelElement() {\n            var me = this;\n            var ids = Array.prototype.slice.call(arguments);\n\n            if(ids.length) {\n                me.$allCourses && me.$allCourses.removeClass(CLS_ACTIVE);\n                ids.forEach(function(id){\n                    me.$element.find(\"[data-template-id='\" + id + \"']\").addClass(CLS_ACTIVE);\n                });\n            };\n        }\n\n        function showModelBox(config) {\n            config.type = config.type || ALERT;\n            var me = this;\n\n            return this.publish(\"enable/show/\" + config.type + \"-box\", true).spread(function(enableShow) {\n                if(enableShow){\n                    return me.publish(\"show/\"+ config.type +\"-modal-box\", config);\n                }\n                else{\n                    return when.reject(\"disable show modal box\");\n                }\n            });\n        }\n\n        function changeCourse(enrollInfo, courseType) {\n            var me = this;\n            var demoPromise = when.resolve();\n            var changeToGE = CourseType.isGECourse(courseType);\n            var changeToBE = CourseType.isBECourse(courseType);\n\n            //for 'demo'\n            if(me.common_context.partnercode.value.toLowerCase() === \"demo\"){\n                demoPromise = when.all(when.map(me.courseInfo.items, function(item){\n                    if(changeToGE && item.courseTypeCode === \"GE\"){\n                        //for GE, demo student always enroll to level 7, unit 3\n                        return me.query(item.children[6].children[2].id).spread(function(unit){\n                            enrollInfo.templateId = unit.templateUnitId;\n                        });\n                    }\n                    else if(changeToBE && item.courseTypeCode === \"BE\"){\n                        //for SPINs, demo student always enroll to level 5, unit 2\n                        return me.query(item.children[4].children[1].id).spread(function(unit){\n                            enrollInfo.templateId = unit.templateUnitId;\n                        });\n                    }\n                }));\n            }\n\n            return demoPromise.then(function(){\n                return UpdateHelper.updateEnrollment(enrollInfo);\n            }).then(function(enroll){\n                return me.publish(\"enrollment/update\").then(function(){\n                    return me.publish(\"context/update/context\");\n                });\n            });\n        }\n\n        function getNextEnrollableLevelInfo() {\n            //TODO: whether need to consider legacy progress?\n            var me = this;\n\n            if(!me[LEVEL]) return;\n\n            var templateLevelId = me[LEVEL].templateLevelId;\n            var groups;\n            var items;\n            var enrollInfo;\n\n            if(!me.courseInfo || me.isSPIN) return;\n\n            groups = me.courseInfo.items;\n            groups.every(function(items) {\n                return items.children.every(function(item, i) {\n                    if(items.children[i+1] && item.templateLevelId === templateLevelId) {\n                        enrollInfo = {\n                            templateId: items.children[i+1].templateLevelId\n                        };\n\n                        return false;\n                    }\n                    return true;\n                });\n            });\n\n            return enrollInfo;\n        }\n\n\n        function showChangeLevelModelBox(courseType, levelInfo, defer) {\n            var me = this;\n            var isGotoGE = CourseType.isGECourse(courseType);\n            var isFromGE2GE = me.isGE && isGotoGE;\n\n            var title = isFromGE2GE\n                ? BLURBS[CHG_LEVEL_GE2GE_TITLE]\n                : BLURBS[CHG_LEVEL_TITLE];\n\n            var body = isFromGE2GE\n                ? BLURBS[CHG_LEVEL_GE2GE_BODY]\n                : BLURBS[CHG_LEVEL_BODY];\n\n            return showModelBox.call(me, {\n                type: CONFIRM,\n                title: title,\n                body: body\n            });\n        }\n\n\n        function toggleShow(show) {\n            var me = this;\n\n            if (show) {\n                me.$courseBody && me.$courseBody.removeClass(CLS_NONE);\n                me.$arraw && me.$arraw.addClass(CLS_ARRAW_UP);\n            }\n            else {\n                me.$courseBody && me.$courseBody.addClass(CLS_NONE);\n                me.$arraw && me.$arraw.removeClass(CLS_ARRAW_UP);\n            }\n        }\n\n        // INDB2B SPECIAL LOGIC\n        function b2bFilter(courseInfo) {\n            var me = this;\n            var hasINDB2B;\n\n            if(courseInfo.items) {\n                for (var i = 0; i < courseInfo.items.length; i++) {\n                    if(courseInfo.items[i].courseTypeCode === \"INDB2B\") {\n                        hasINDB2B = true;\n\n                        return me.query(courseInfo.items[i].id + \".children.children.progress\").spread(function(course) {\n                            var unit_children = [];\n                            course.children.forEach(function(entry, index){\n                                entry.children.forEach(function(entry, index) {\n                                    unit_children.push(entry);\n                                });\n                            });\n\n                            course.unit_children = unit_children;\n                        });\n                    }\n                }\n            }\n\n            if(!hasINDB2B) {\n                return when.resolve();\n            }\n        }\n\n        return Widget.extend({\n            \"hub:memory/common_context\": function onCourseListStart(common_context) {\n                var me = this;\n\n                if(common_context){\n                    me.common_context = common_context.values;\n                    render.call(me);\n                }\n            },\n            \"hub:memory/load/results\": function(data) {\n                var me = this;\n\n                if(!data.course){\n                    return;\n                }\n\n                me.isGE = CourseType.isGECourse(me[COURSE_TYPE_CODE] = (data.course || {}).courseTypeCode);\n                me.isSPIN = CourseType.isSpinCourse(me[COURSE_TYPE_CODE]);\n\n                highlightLevelElement.call(me, (me[LEVEL] = data.level).templateLevelId, (me[UNIT] = data.unit).templateUnitId);\n            },\n\n            \"hub/enroll/next/level\": function() {\n                var me = this;\n\n                return changeCourse.call(me, getNextEnrollableLevelInfo.call(me),  me[COURSE_TYPE_CODE]);\n            },\n\n            \"hub/ef/update/progress\":function(progress){\n                var me = this;\n                render.call(me);\n            },\n\n            \"hub/show/course/list\": function() {\n                this.publish(\"load\", {\n                    \"command\": [\"changecourse\"]\n                });\n            },\n            \"hub/toggle/course/list\": function() {\n                var me = this;\n                if(me.$courseBody.hasClass(CLS_NONE)){\n                    me.publish(\"load\", {\n                        \"command\": [\"changecourse\"]\n                    });\n                }\n                else{\n                    me.publish(\"load\", {\n                        \"command\": UNDEF\n                    });\n                }\n            },\n\n            \"dom:[data-action='close']/click\": function(){\n                this.publish(\"load\", {\n                    \"command\": UNDEF\n                });\n            },\n\n            \"hub:memory/load/command\" : function(data) {\n                var me = this;\n                if(data && data.indexOf(\"changecourse\") >= 0) {\n                    toggleShow.call(this, me[SHOW] = true);\n                    ct.useraction({\n                        \"action.changeCourseInitiated\": 1\n                    });\n                }\n                else {\n                    toggleShow.call(this, me[SHOW] = false);\n                }\n            },\n\n            \"dom:[data-action='select-level']/click\": function onChangeLevelClick($event){\n                var me = this;\n                var $el = $($event.target);\n                var templateId = $el.data(\"templateId\");\n                var isPassed = $el.hasClass(\"ets-pass\");\n                var courseType = $el.parents(SEL_COURSE_CONT).data(\"courseType\");\n                var enrollInfo = {\n                    templateId: templateId\n                };\n\n                if($el.hasClass(CLS_ACTIVE)) return;\n\n                // for tracking\n                // var currentNode = me.$element.find(SEL_ACTIVE).data(\"nodeTypeId\");\n                // var targetNode = $el.data(\"nodeTypeId\");\n                // var levelID = TypeIDPaser.parseId(me.level.id);\n                // ct.useraction({\n                //     \"action.changeCourseSelected\": levelID + \" change to \" + targetNode + \" & \" + currentNode\n                // });\n\n                return me.query(\n                        Q_STUDYPLAN_CURR,\n                        Q_CCL_MINIM_LEVEL\n                    ).spread(function getLevelLimitation(studyPlanInfo, levelInfo){\n                        var isGotoGE = CourseType.isGECourse(courseType);\n                        var isGotoBE = CourseType.isBECourse(courseType);\n                        var isBelowGEMiniumLevel = me[LEVEL].levelNo < levelInfo.value;\n\n                        if(me.isGE && !isGotoGE && isBelowGEMiniumLevel) {\n                            showModelBox.call(me, {\n                                type : ALERT,\n                                title : BLURBS[CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_TITLE],\n                                body : BLURBS[CHG_LEVEL_GE2GE_BELOW_MINI_LEVEL_BODY]\n                            });\n                            return when.reject(\"change level when below minimum level control, forbidden\");\n                        }\n\n\n                        if( studyPlanInfo.mode === studyplanMode.Study &&\n                            studyPlanInfo.studyPlan.progress.state === studyplanState.Started) {\n                            return showModelBox.call(me, {\n                                type: CONFIRM,\n                                title: BLURBS[CHG_LEVEL_SP_TITLE],\n                                body: BLURBS[CHG_LEVEL_SP_BODY]\n                            });\n                        }\n                        else {\n                            return showChangeLevelModelBox.call(me, courseType, levelInfo);\n                        }\n\n                })\n                .then(function() {\n                    return changeCourse.call(me, enrollInfo, courseType)\n                        .then(function(){\n                            // for tracking\n                            // ct.useraction({\n                            //     \"action.changeCourseCompleted\": levelID + \" change to \" + targetNode + \" & \" + currentNode\n                            // });\n                        });\n                })\n                .catch(function(reason){\n                    Console.info(reason);\n                });\n            }\n        });\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-navigation/main.html',[],function() { return function template(data) { var o = \"\";\n function outputBody() {\n \tvar unitNo = data.isGE ? '<strong data-weave=\"troopjs-ef/blurb/widget\" data-blurb-id=\"105267\" data-text-en=\"Unit\"></strong><strong>'+ data.unit.unitNo +'</strong> ' : '';\n \tvar unitNameTag = '<span title=\"' + data.unit.unitName + '\">' + data.unit.unitName + '</span>';\n\treturn '<div class=\"ets-sp-unn-title\"> ' + unitNo + unitNameTag + ' </div>';\n }\no += \"\\n\\n<div class=\\\"ets-sp-unn-main\\\">\\n\\t\";if (data.enableNavUnit && data.enableShowCourseName) { o += \"\\n\\t    <div class=\\\"ets-sp-unn-prev ets-disabled\\\" data-action=\\\"navigate/prev/unit\\\"><i class=\\\"glyphicon icon-angle-left\\\"></i></div>\\n\\t    \" + outputBody()+ \"\\n\\t    <div class=\\\"ets-sp-unn-next ets-disabled\\\" data-action=\\\"navigate/next/unit\\\"><i class=\\\"glyphicon icon-angle-right\\\"></i></div>\\n    \"; } else {o += \"\\n\\t\\t\" + outputBody()+ \"\\n    \"; } o += \"\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/header/unit-navigation/main',[\n        \"jquery\",\n        \"when\",\n\t\t\"client-tracking\",\n        \"school-ui-shared/utils/ccl\",\n        \"troopjs-ef/component/widget\",\n        \"school-ui-shared/utils/typeid-parser\",\n        \"school-ui-shared/enum/course-type\",\n        \"template!./main.html\"\n    ],\n    function($, When, ct, CCL, Widget, TypeIdPaser, CourseType, template) {\n        \"use strict\";\n\n        var SEL_PREV = \".ets-sp-unn-prev\";\n        var SEL_NEXT = \".ets-sp-unn-next\";\n\n        var CLS_DISABLED = \"ets-disabled\";\n\n        var CCL_ENABLE_NAV_UINT = \"ccl!\\\"school.courseware.enable.navigateUnit\\\"\";\n        var CCL_ENABLE_SHOW_COURSE_NAME = \"ccl!\\\"school.courseware.showCourseName.enable\\\"\";\n\n        function isDemoAndNeedToLimit (common_context, courseTypeCode) {\n            return common_context.partnercode.value.toLowerCase() === \"demo\" &&\n                (CourseType.isGECourse(courseTypeCode) || CourseType.isBECourse(courseTypeCode) || courseTypeCode === \"INDB2B\");\n        }\n\n        function checkStatus(currUnitId, units) {\n            var me = this;\n\n            me.$prev.toggleClass(CLS_DISABLED, currUnitId === units[0].templateUnitId);\n            me.$next.toggleClass(CLS_DISABLED, currUnitId === units[units.length-1].templateUnitId);\n        }\n\n        function changeUnit(prev, next) {\n            var me = this;\n            var currUnitId = me.unit.templateUnitId;\n            var units = me.units;\n            var i = 0;\n            var len = units.length;\n            var idx = 0;\n\n            checkStatus.call(me, currUnitId, units);\n\n            for(;i < len; i++) {\n                if(currUnitId === units[i].templateUnitId) {\n                    if((i === 0 && prev) || (i === len -1 && next)) return;\n\n                    idx = i + (prev ? -1: (next ? 1 : 0));\n                    break;\n                }\n            }\n\n            units[idx].templateUnitId && me.publish(\"load/config\", units[idx].templateUnitId);\n        }\n\n        function render(course, level, unit, units, common_context) {\n            var me = this;\n\n            if(!level || !course || !unit || !units || !common_context) return;\n\n            return me.query([\n                    CCL_ENABLE_NAV_UINT,\n                    CCL_ENABLE_SHOW_COURSE_NAME\n                ]).spread(function(enableNavUnit, enableShowCourseName) {\n\n                return me.html(template, {\n                    isGE: me.isGE,\n                    unit: unit,\n                    enableNavUnit: CCL.indicateCCLStringValue(enableNavUnit),\n                    enableShowCourseName : CCL.indicateCCLStringValue(enableShowCourseName)\n                }).then(function(){\n                    var $el = me.$element;\n                    me.$prev = $el.find(SEL_PREV);\n                    me.$next = $el.find(SEL_NEXT);\n                    //for 'demo'\n                    // INDB2B SPECIAL LOGIC\n                    if(!isDemoAndNeedToLimit(common_context, course.courseTypeCode)){\n                        checkStatus.call(me, unit.templateUnitId, units);\n                    }\n                });\n            });\n        };\n\n        return Widget.extend(function() {\n\n        }, {\n            \"hub:memory/common_context\" : function(common_context){\n              var me = this;\n              if(common_context){\n                render.call(me, me.course, me.level, me.unit, me.units, me.common_context = common_context.values);\n              }\n            },\n            \"hub:memory/load/results\": function(data) {\n                var me = this;\n\n                if(me.course === data.course\n                    && me.level === data.level\n                    && me.unit === data.unit) {\n                    return;\n                }\n\n                me.isGE = CourseType.isGECourse(me.courseTypeCode = (data.course || {}).courseTypeCode);\n                me.course = data.course;\n                me.level = data.level;\n                me.unit = data.unit;\n\t            me.units = data.level && data.level.children;\n\n\t            render.call(me, me.course, me.level, me.unit, me.units, me.common_context);\n            },\n            \"hub/ef/update/progress\":function(progress){\n                var me = this;\n                if(progress && me.unit){\n                    me.query(me.level.id + \".children\")\n                        .spread(function(student_level){\n                            if(student_level){\n                                me.units = student_level.children;\n                            }\n                            render.call(me, me.course, me.level, me.unit, me.units);\n                        });\n                }\n            },\n            \"dom:[data-action='navigate/prev/unit']/click\": function($event) {\n                var disable = $($event.currentTarget).hasClass(CLS_DISABLED);\n                if(!disable) {\n                    changeUnit.call(this, true, false);\n                    ct.useraction({\n                        \"action.unitNavigation\": \"Previous\"\n                    });\n                }\n            },\n            \"dom:[data-action='navigate/next/unit']/click\": function($event) {\n                var disable = $($event.currentTarget).hasClass(CLS_DISABLED);\n                if(!disable) {\n                    changeUnit.call(this, false, true);\n                    ct.useraction({\n                        \"action.unitNavigation\": \"Next\"\n                    });\n                }\n            }\n        });\n    });\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/header/unit-overview/main.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-sp-uno-main\\\">\\n    <button class=\\\"btn btn-default btn-sm ets-sp-uno-btn\\\" data-weave=\\\"troopjs-ef/blurb/widget\\\" data-blurb-id=\\\"450055\\\" data-text-en=\\\"Unit Overview\\\"></button>\\n</div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/header/unit-overview/main',[\n\t\"when\",\n\t\"jquery\",\n\t\"client-tracking\",\n\t\"troopjs-ef/component/widget\",\n\t\"template!./main.html\"\n], function (when, $, ct, Widget, tButton) {\n\t\"use strict\";\n\n\tvar SEL_SP = \".ets-sp-study\";\n\tvar CLS_UO_WIDGET = \"ets-uo-widget\";\n\n\tfunction showUnitOverview() {\n\t\tvar me = this;\n\n\t\t$(\".\" + CLS_UO_WIDGET).remove();\n\t\tvar $widgetUniOverview = $('<div></div>', {\n\t\t\t\"class\": CLS_UO_WIDGET,\n\t\t\t\"data-weave\": \"school-ui-shared/widget/unit-overview/modal-container/main(templateUnitid)\"\n\t\t});\n\n\t\treturn me._dfdUnit.promise.then(function (unit) {\n\t\t\treturn $widgetUniOverview\n\t\t\t\t.data('templateUnitid', unit.templateUnitId)\n\t\t\t\t.insertAfter($(SEL_SP))\n\t\t\t\t.weave();\n\t\t});\n\t}\n\n\treturn Widget.extend({\n\t\t\"sig/start\": function () {\n\t\t\tvar me = this;\n\t\t\tme._dfdUnit = when.defer();\n\t\t\tme.html(tButton);\n\t\t},\n\t\t\"hub:memory/load/unit\": function (unit) {\n\t\t\tvar me = this;\n\n\t\t\t//if switched to another unit, need to generate a new defer for unit data\n\t\t\tif (me._dfdUnit.promise.inspect().state !== \"pending\") {\n\t\t\t\tme._dfdUnit = when.defer();\n\t\t\t}\n\n\t\t\tme._dfdUnit.resolve(unit);\n\t\t},\n\t\t\"dom:button/click\": function () {\n\t\t\tct.useraction({\n\t\t\t\t\"action.unitOverviewClick\": \"1\"\n\t\t\t});\n\n\t\t\tvar me = this;\n\t\t\tshowUnitOverview.call(me);\n\t\t}\n\t});\n});\n\n",
    "\ndefine('troopjs-requirejs/template!school-ui-studyplan/widget/studyplan/main.html',[],function() { return function template(data) { var o = \"<div class=\\\"ets-theme-daylight ets-studyplan\\\" data-at-page-id=\\\"sp-course-page\\\">\\n    <div class=\\\"ets-sp-main\\\">\\n        <!-- Unit Start -->\\n        <div class=\\\"ets-sp-unit\\\">\\n            <!-- Unit Header Start -->\\n            <div class=\\\"ets-sp-unit-hd\\\">\\n                <!-- Change Course Start -->\\n                <div class=\\\"ets-sp-chc\\\" data-weave=\\\"school-ui-studyplan/widget/studyplan/header/change-course/main\\\"></div>\\n                <div data-weave=\\\"school-ui-studyplan/widget/studyplan/header/course-list/main\\\"></div>\\n                <!-- Change Course End -->\\n\\n                <!-- Unit Navigation Start -->\\n                <div class=\\\"ets-sp-unn\\\" data-weave=\\\"school-ui-studyplan/widget/studyplan/header/unit-navigation/main\\\"></div>\\n                <!-- Unit Navigation End -->\\n\\n                <!-- Unit Overview Start -->\\n                <div class=\\\"ets-sp-uno\\\"  data-weave=\\\"troopjs-ef/ccl/placeholder('school-ui-studyplan/widget/studyplan/header/unit-overview/main')\\\" data-ccl=\\\"school.e12.showUnitOverview\\\"></div>\\n                <!-- Unit Overview End -->\\n            </div>\\n            <!-- Unit Header End -->\\n\\n            <!-- Unit Body Start -->\\n            <div class=\\\"ets-sp-unit-bd\\\">\\n                <!-- Sequence Navigation Start -->\\n                <div class=\\\"ets-sp-sequence-wrapper\\\" data-weave=\\\"school-ui-studyplan/widget/studyplan/body/sequence-navigation/main\\\" data-at-page-id=\\\"sp-sequence-navigation-container\\\"></div>\\n                <div class=\\\"ets-sp-sequence-wrapper\\\" data-weave=\\\"school-ui-studyplan/widget/studyplan/body/sequence-container/main\\\"></div>\\n            </div>\\n            <!-- Unit Body End -->\\n        </div>\\n        <!-- Unit End -->\\n\\n    </div>\\n</div>\\n<div data-weave=\\\"school-ui-shared/plugins/confirm-box/main\\\"></div>\\n<div data-weave=\\\"school-ui-shared/plugins/alert-box/main\\\"></div>\"; return o; }; });\n",
    "define('school-ui-studyplan/widget/studyplan/main',[\n\t\"troopjs-ef/component/widget\",\n\t\"template!./main.html\"\n], function(Widget, tMain){\n\t\"use strict\";\n\n\treturn Widget.extend({\n\t\t'sig/start' : function(){\n\t\t\treturn this.html(tMain);\n\t\t}\n\t});\n});\n"
  ]
}